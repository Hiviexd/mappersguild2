(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[269],{8166:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var o=a(5393);const s={class:"row mb-2"},r={class:"col"},l={class:"input-group"},n=(0,o.createVNode)("i",{class:"fas fa-search"},null,-1),c={class:"row small"},i={class:"col"},d=(0,o.defineComponent)({props:{placeholder:{type:String,required:!0},filterValue:{type:String,default:""}},emits:["update:filterValue"],data:()=>({newFilterValue:""})});d.render=function(e,t,a,d,p,m){return(0,o.openBlock)(),(0,o.createBlock)("div",null,[(0,o.createVNode)("div",s,[(0,o.createVNode)("div",r,[(0,o.createVNode)("div",l,[(0,o.createVNode)("button",{class:"btn btn-primary",href:"#",onClick:t[1]||(t[1]=(0,o.withModifiers)((t=>e.$emit("update:filterValue",e.newFilterValue)),["prevent"]))},[n]),(0,o.createVNode)("input",{class:"form-control",type:"text",maxlength:"48",placeholder:e.placeholder,autocomplete:"off",value:e.filterValue,onInput:t[2]||(t[2]=t=>e.newFilterValue=t.target.value),onKeyup:t[3]||(t[3]=(0,o.withKeys)((t=>e.$emit("update:filterValue",t.target.value)),["enter"]))},null,40,["placeholder","value"]),(0,o.renderSlot)(e.$slots,"default")])])]),(0,o.createVNode)("div",c,[(0,o.createVNode)("div",i,[(0,o.renderSlot)(e.$slots,"filters")])])])};const p=d},1519:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var o=a(5393);const s={class:"row mt-3"},r=(0,o.createVNode)("div",{class:"col-auto filter-title"}," Mode ",-1),l={class:"col"},n={key:0,class:"small text-white-50"},c=(0,o.defineComponent)({name:"ModeFilters",props:{isLoading:Boolean,filterMode:{type:String,default:""}},emits:["update:filterMode"],data:()=>({modes:{any:"Any",osu:"osu!",taiko:"osu!taiko",catch:"osu!catch",mania:"osu!mania"}}),methods:{getModeSortClass(e){return this.filterMode===e?"sorted":"unsorted"}}});c.render=function(e,t,a,c,i,d){return(0,o.openBlock)(),(0,o.createBlock)("div",s,[r,(0,o.createVNode)("div",l,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.modes,((t,a)=>((0,o.openBlock)(),(0,o.createBlock)("a",{key:a,href:"#",class:["mode",e.getModeSortClass(a)],onClick:(0,o.withModifiers)((t=>e.$emit("update:filterMode",a)),["prevent"])},(0,o.toDisplayString)(t),11,["onClick"])))),128)),e.isLoading?((0,o.openBlock)(),(0,o.createBlock)("span",n,"loading...")):(0,o.createCommentVNode)("",!0)])])};const i=c},7701:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>fe});var o=a(5393);const s=(0,o.createVNode)("div",{class:"radial-divisor"},null,-1),r=(0,o.createVNode)("div",{class:"radial-divisor"},null,-1);var l=a(275);const n={class:"container card card-body py-3 mb-2"},c=(0,o.createVNode)("button",{class:"btn btn-primary",href:"#","data-bs-toggle":"modal","data-bs-target":"#addBeatmap"},[(0,o.createTextVNode)(" Add beatmap "),(0,o.createVNode)("i",{class:"fas fa-plus fa-xs"})],-1),i={class:"row mt-3"},d=(0,o.createVNode)("div",{class:"col-auto filter-title"}," Status ",-1),p={class:"col"},m={class:"row mt-3"},u=(0,o.createVNode)("div",{class:"col-auto filter-title"}," Quest ",-1),f={class:"col"};var h=a(6564),B=a(8166),b=a(1519);const k=(0,o.defineComponent)({name:"BeatmapPageFilters",components:{FilterBox:B.Z,ModeFilters:b.Z},data:()=>({statuses:{any:"Any",WIP:"WIP",Done:"Done",Qualified:"Qualified",Ranked:"Ranked"},quests:{any:"Any",none:"None"}}),computed:(0,h.rn)("beatmaps",["filterMode","filterValue","filterStatus","filterQuest"]),methods:Object.assign(Object.assign({},(0,h.nv)("beatmaps",["updateFilterValue","updateFilterMode","updateFilterStatus","updateFilterQuest"])),{getStatusSortClass(e){return this.filterStatus===e?"sorted":"unsorted"},getQuestSortClass(e){return this.filterQuest===e?"sorted":"unsorted"}})});k.render=function(e,t,a,s,r,l){const h=(0,o.resolveComponent)("mode-filters"),B=(0,o.resolveComponent)("filter-box");return(0,o.openBlock)(),(0,o.createBlock)("div",n,[(0,o.createVNode)(B,{placeholder:"enter to search for song/username...","filter-value":e.filterValue,"onUpdate:filterValue":t[2]||(t[2]=t=>e.updateFilterValue(t))},{filters:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{"filter-mode":e.filterMode,"onUpdate:filterMode":t[1]||(t[1]=t=>e.updateFilterMode(t))},null,8,["filter-mode"]),(0,o.createVNode)("div",i,[d,(0,o.createVNode)("div",p,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.statuses,((t,a)=>((0,o.openBlock)(),(0,o.createBlock)("a",{key:a,href:"#",class:["status",e.getStatusSortClass(a)],onClick:(0,o.withModifiers)((t=>e.updateFilterStatus(a)),["prevent"])},(0,o.toDisplayString)(t),11,["onClick"])))),128))])]),(0,o.createVNode)("div",m,[u,(0,o.createVNode)("div",f,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.quests,((t,a)=>((0,o.openBlock)(),(0,o.createBlock)("a",{key:a,href:"#",class:["quest",e.getQuestSortClass(a)],onClick:(0,o.withModifiers)((t=>e.updateFilterQuest(a)),["prevent"])},(0,o.toDisplayString)(t),11,["onClick"])))),128))])])])),default:(0,o.withCtx)((()=>[c])),_:1},8,["filter-value"])])};const g=k,v={class:"container card card-body py-3"},V={class:"ms-2"},N={href:"#hostedBeatmaps","data-bs-toggle":"collapse"},y=(0,o.createVNode)("i",{class:"fas fa-angle-down"},null,-1),C={key:0,id:"hostedBeatmaps",class:"show"},w={key:0,class:"ms-5 text-white-50"};var M=a(8640);const S=(0,o.defineComponent)({components:{BeatmapCard:M.Z},computed:(0,h.Se)("beatmaps",["hostedBeatmaps"]),methods:(0,h.OI)("beatmaps",["setSelectedBeatmap"])});S.render=function(e,t,a,s,r,l){const n=(0,o.resolveComponent)("beatmap-card");return(0,o.openBlock)(),(0,o.createBlock)("div",v,[(0,o.createVNode)("h5",V,[(0,o.createVNode)("a",N,[(0,o.createTextVNode)(" My mapsets ("+(0,o.toDisplayString)(e.hostedBeatmaps?e.hostedBeatmaps.length:"...")+") ",1),y])]),e.hostedBeatmaps?((0,o.openBlock)(),(0,o.createBlock)("div",C,[(0,o.createVNode)(o.TransitionGroup,{name:"list",tag:"div",class:"row"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.hostedBeatmaps,(a=>((0,o.openBlock)(),(0,o.createBlock)(n,{key:a.id,beatmap:a,"onUpdate:selectedBeatmap":t[1]||(t[1]=t=>e.setSelectedBeatmap(t))},null,8,["beatmap"])))),128))])),_:1}),e.hostedBeatmaps.length?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)("p",w," None... "))])):(0,o.createCommentVNode)("",!0)])};const x=S,L={class:"container card card-body py-3"},$={class:"ms-2"},F={href:"#guestDifficultyBeatmaps","data-bs-toggle":"collapse"},D=(0,o.createVNode)("i",{class:"fas fa-angle-down"},null,-1),O={key:0,class:"ms-5 text-white-50"},G=(0,o.defineComponent)({components:{BeatmapCard:M.Z},props:{isLoadingGuestBeatmaps:Boolean},computed:(0,h.Se)("beatmaps",["guestDifficultyBeatmaps"]),methods:(0,h.OI)("beatmaps",["setSelectedBeatmap"])});G.render=function(e,t,a,s,r,l){const n=(0,o.resolveComponent)("beatmap-card");return(0,o.openBlock)(),(0,o.createBlock)("div",L,[(0,o.createVNode)("h5",$,[(0,o.createVNode)("a",F,[(0,o.createTextVNode)(" My guest difficulties ("+(0,o.toDisplayString)(e.guestDifficultyBeatmaps&&!e.isLoadingGuestBeatmaps?e.guestDifficultyBeatmaps.length:"...")+") ",1),D])]),e.guestDifficultyBeatmaps?((0,o.openBlock)(),(0,o.createBlock)("div",{key:0,id:"guestDifficultyBeatmaps",class:["collapse",{"loading-data":e.isLoadingGuestBeatmaps}]},[e.guestDifficultyBeatmaps.length||e.isLoadingGuestBeatmaps?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)("p",O," None... ")),(0,o.createVNode)(o.TransitionGroup,{name:"list",tag:"div",class:"row"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.guestDifficultyBeatmaps,(a=>((0,o.openBlock)(),(0,o.createBlock)(n,{key:a.id,beatmap:a,"onUpdate:selectedBeatmap":t[1]||(t[1]=t=>e.setSelectedBeatmap(t))},null,8,["beatmap"])))),128))])),_:1})],2)):(0,o.createCommentVNode)("",!0)])};const Z=G,T={class:"container card card-body py-3"},q={class:"ms-2"},I={href:"#otherBeatmaps","data-bs-toggle":"collapse"},P=(0,o.createVNode)("i",{class:"fas fa-angle-down"},null,-1),Q={key:0,id:"otherBeatmaps",class:"collapse"},R={key:0,class:"ms-5 text-white-50"},U={key:1,class:"text-center"},j=(0,o.createVNode)("i",{class:"fas fa-angle-down me-1"},null,-1),A=(0,o.createTextVNode)(" show more "),_=(0,o.createVNode)("i",{class:"fas fa-angle-down ms-1"},null,-1),E={class:"container"},H={class:"row"},K={class:"col-sm-6"},W=(0,o.createVNode)("i",{class:"fas fa-angle-down"},null,-1),z={class:"col-sm-2 small d-flex justify-content-end align-items-center"},J={class:"col-sm-3 small"},X=(0,o.createVNode)("span",{class:"text-white-50 me-1"},"Hosted by",-1),Y={key:0,class:"text-white-50"},ee={key:0,class:"col-sm-1 d-flex justify-content-end align-items-center"},te=(0,o.createVNode)("i",{class:"fas fa-link"},null,-1);var ae=a(89),oe=a(7096),se=a(2643),re=a(8834);const le=(0,o.defineComponent)({name:"BeatmapTableRow",components:{BeatmapInfo:ae.Z,ProcessTasks:oe.Z,QuestImg:se.Z,ModesIcons:re.Z},props:{beatmap:{type:Object,required:!0}},methods:{selectBeatmap(){this.$route.query.id!==this.beatmap.id&&this.$router.push(`/beatmaps?id=${this.beatmap.id}`)},formatMetadata(){const e=this.beatmap.song.artist+" - "+this.beatmap.song.title;return e.length>70?e.slice(0,70)+"...":e},statusBorder(){return this.beatmap.status?"card-status-"+this.beatmap.status.toLowerCase():""}}});le.render=function(e,t,a,s,r,l){const n=(0,o.resolveComponent)("quest-img"),c=(0,o.resolveComponent)("process-tasks"),i=(0,o.resolveComponent)("user-link"),d=(0,o.resolveComponent)("modes-icons"),p=(0,o.resolveComponent)("beatmap-info");return(0,o.openBlock)(),(0,o.createBlock)("div",null,[(0,o.createVNode)("div",{class:["card card-body card-level-2 my-1 p-1",e.statusBorder()]},[(0,o.createVNode)("div",E,[(0,o.createVNode)("div",H,[(0,o.createVNode)("div",K,[(0,o.createVNode)(n,{beatmap:e.beatmap},null,8,["beatmap"]),(0,o.createVNode)("a",{href:"#","data-bs-toggle":"collapse","data-bs-target":"#details"+e.beatmap.id,onClick:t[1]||(t[1]=t=>e.selectBeatmap())},[(0,o.createTextVNode)((0,o.toDisplayString)(e.formatMetadata())+" ",1),W],8,["data-bs-target"])]),(0,o.createVNode)("div",z,[(0,o.createVNode)(c,{tasks:e.beatmap.tasks,"tasks-locked":e.beatmap.tasksLocked,mode:e.beatmap.mode},null,8,["tasks","tasks-locked","mode"])]),(0,o.createVNode)("div",J,[X,(0,o.createVNode)(i,{class:"me-1",user:e.beatmap.host},null,8,["user"]),"osu"!==e.beatmap.mode?((0,o.openBlock)(),(0,o.createBlock)("span",Y,[(0,o.createVNode)(d,{modes:[e.beatmap.mode]},null,8,["modes"])])):(0,o.createCommentVNode)("",!0)]),e.beatmap.url?((0,o.openBlock)(),(0,o.createBlock)("div",ee,[(0,o.createVNode)("a",{href:e.beatmap.url,target:"_blank"},[te],8,["href"])])):(0,o.createCommentVNode)("",!0)])])],2),(0,o.createVNode)("div",{id:"details"+e.beatmap.id,class:["collapse my-2 mx-4 row border-end border-start py-3","border-"+e.beatmap.status.toLowerCase()]},[(0,o.createVNode)(p,{beatmap:e.beatmap},null,8,["beatmap"])],10,["id"])])};const ne=le;const ce=(0,o.defineComponent)({components:{BeatmapTableRow:ne},computed:(0,h.rn)("beatmaps",{otherBeatmaps:"allBeatmaps",isLoadingOtherBeatmaps:"isLoadingOtherBeatmaps",filterValue:"filterValue"}),methods:{showMore(e){return t=this,a=void 0,s=function*(){e.target.disabled=!0,this.$store.commit("beatmaps/increaseFetchLimit"),yield this.$store.dispatch("beatmaps/loadOtherBeatmaps"),e.target.disabled=!1},new((o=void 0)||(o=Promise))((function(e,r){function l(e){try{c(s.next(e))}catch(e){r(e)}}function n(e){try{c(s.throw(e))}catch(e){r(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(l,n)}c((s=s.apply(t,a||[])).next())}));var t,a,o,s}}});ce.render=function(e,t,a,s,r,l){const n=(0,o.resolveComponent)("beatmap-table-row");return(0,o.openBlock)(),(0,o.createBlock)("div",T,[(0,o.createVNode)("h5",q,[(0,o.createVNode)("a",I,[(0,o.createTextVNode)(" Other beatmaps ("+(0,o.toDisplayString)(e.otherBeatmaps&&!e.isLoadingOtherBeatmaps?e.otherBeatmaps.length:"...")+") ",1),P])]),e.otherBeatmaps?((0,o.openBlock)(),(0,o.createBlock)("div",Q,[(0,o.createVNode)("div",{class:{"loading-data":e.isLoadingOtherBeatmaps}},[e.otherBeatmaps.length||e.isLoadingOtherBeatmaps?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)("p",R," None... ")),((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(e.otherBeatmaps,(e=>((0,o.openBlock)(),(0,o.createBlock)(n,{key:e.id,beatmap:e},null,8,["beatmap"])))),128)),e.filterValue?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)("div",U,[(0,o.createVNode)("button",{class:"btn btn-sm btn-outline-info my-4",onClick:t[1]||(t[1]=(0,o.withModifiers)((t=>e.showMore(t)),["prevent"]))},[j,A,_])]))],2)])):(0,o.createCommentVNode)("",!0)])};const ie=ce;var de=a(8712),pe=a(8925),me=function(e,t,a,o){return new(a||(a=Promise))((function(s,r){function l(e){try{c(o.next(e))}catch(e){r(e)}}function n(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,n)}c((o=o.apply(e,t||[])).next())}))};const ue=(0,o.defineComponent)({name:"BeatmapPage",components:{BeatmapPageFilters:g,HostedBeatmaps:x,GuestDifficulties:Z,OtherBeatmaps:ie,EditBeatmapModal:de.Z,CreateBeatmapModal:l.Z},data:()=>({isLoadingGuestBeatmaps:!0}),computed:(0,h.rn)("beatmaps",["selectedBeatmap"]),beforeCreate(){this.$store.hasModule("beatmaps")||this.$store.registerModule("beatmaps",pe.Z)},created(){return me(this,void 0,void 0,(function*(){const e=this.$route.query.id;let t,a;e?([t,a]=yield Promise.all([this.$http.initialRequest("/beatmaps/relevantInfo"),this.$http.executeGet("/beatmaps/searchOnLoad/"+e)]),this.$http.isError(a)||(this.$store.commit("beatmaps/setSelectedBeatmap",a),this.$bs.showModal("editBeatmap"))):t=yield this.$http.initialRequest("/beatmaps/relevantInfo"),this.$http.isError(t)||(this.$store.commit("beatmaps/setUserBeatmaps",t.beatmaps),this.$store.commit("beatmaps/setFilterMode",t.mainMode)),yield Promise.all([this.loadGuestBeatmaps(),this.$store.dispatch("beatmaps/loadOtherBeatmaps")]),this.isLoadingGuestBeatmaps=!1}))},methods:{loadGuestBeatmaps(){return me(this,void 0,void 0,(function*(){const e=yield this.$http.executeGet("/beatmaps/guestBeatmaps");e&&this.$store.commit("beatmaps/setUserBeatmaps",e.userBeatmaps)}))}}});ue.render=function(e,t,a,l,n,c){const i=(0,o.resolveComponent)("beatmap-page-filters"),d=(0,o.resolveComponent)("hosted-beatmaps"),p=(0,o.resolveComponent)("guest-difficulties"),m=(0,o.resolveComponent)("other-beatmaps"),u=(0,o.resolveComponent)("edit-beatmap-modal"),f=(0,o.resolveComponent)("create-beatmap-modal");return(0,o.openBlock)(),(0,o.createBlock)("div",null,[(0,o.createVNode)(i),(0,o.createVNode)(d),s,(0,o.createVNode)(p,{"is-loading-guest-beatmaps":e.isLoadingGuestBeatmaps},null,8,["is-loading-guest-beatmaps"]),r,(0,o.createVNode)(m),(0,o.createVNode)(u,{"selected-beatmap":e.selectedBeatmap},null,8,["selected-beatmap"]),(0,o.createVNode)(f)])};const fe=ue}}]);