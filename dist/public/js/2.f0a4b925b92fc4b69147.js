(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[2],{1161:(t,e,a)=>{"use strict";var s,i;a.d(e,{U:()=>s,O:()=>i}),function(t){t.WIP="WIP",t.Done="Done",t.Qualified="Qualified",t.Ranked="Ranked",t.Secret="Secret"}(s||(s={})),function(t){t.Osu="osu",t.Taiko="taiko",t.Catch="catch",t.Mania="mania",t.Hybrid="hybrid"}(i||(i={}))},1107:(t,e,a)=>{"use strict";var s,i,o,n;a.d(e,{XE:()=>s,hY:()=>o}),function(t){t.Easy="Easy",t.Normal="Normal",t.Hard="Hard",t.Insane="Insane",t.Expert="Expert",t.Storyboard="Storyboard"}(s||(s={})),function(t){t.Osu="osu",t.Taiko="taiko",t.Catch="catch",t.Mania="mania",t.SB="sb"}(i||(i={})),function(t){t.WIP="WIP",t.Done="Done"}(o||(o={})),function(t){t[t.Meh=1]="Meh",t[t.Ok=2]="Ok",t[t.Nice=3]="Nice"}(n||(n={}))},1124:(t,e,a)=>{"use strict";var s;a.d(e,{X:()=>s}),function(t){t.any="any",t.osu="osu",t.taiko="taiko",t.catch="catch",t.mania="mania"}(s||(s={}))},9140:(t,e,a)=>{"use strict";a.d(e,{Z:()=>u});var s=a(2934),i=a.n(s),o=a(9669),n=a.n(o),r=a(1161),l=a(1124),c=a(1107),d=function(t,e,a,s){return new(a||(a=Promise))((function(i,o){function n(t){try{l(s.next(t))}catch(t){o(t)}}function r(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(n,r)}l((s=s.apply(t,e||[])).next())}))};const u={namespaced:!0,state:{allBeatmaps:[],userBeatmaps:[],showcaseBeatmaps:[],filterValue:"",filterMode:l.X.any,filterStatus:"any",filterQuest:"any",selectedBeatmap:null,selectedBeatmapId:null,fetchLimit:30,isLoadingOtherBeatmaps:!0},mutations:{setAllBeatmaps(t,e){t.allBeatmaps=e},setUserBeatmaps(t,e){t.userBeatmaps=e},setShowcaseBeatmaps(t,e){t.showcaseBeatmaps=e},setFilterValue(t,e){t.filterValue=e},setFilterMode(t,e){t.filterMode=e},setFilterStatus(t,e){t.filterStatus=e},setFilterQuest(t,e){t.filterQuest=e},setIsLoadingOtherBeatmaps(t,e){t.isLoadingOtherBeatmaps=e},increaseFetchLimit(t){t.fetchLimit+=50},setSelectedBeatmap(t,e){const a=Object.values(c.XE);e.tasks.sort((function(t,e){return a.indexOf(t.name)-a.indexOf(e.name)})),e.tasksLocked.sort((function(t,e){return a.indexOf(t)-a.indexOf(e)})),t.selectedBeatmap=e},addBeatmap(t,e){e.status===r.U.Secret?t.showcaseBeatmaps.unshift(e):t.userBeatmaps.unshift(e)},updateBeatmap(t,e){let a=t.allBeatmaps.findIndex((t=>t.id===e.id));-1!==a&&i().set(t.allBeatmaps,a,e),a=t.userBeatmaps.findIndex((t=>t.id===e.id)),-1!==a&&i().set(t.userBeatmaps,a,e),a=t.showcaseBeatmaps.findIndex((t=>t.id===e.id)),-1!==a&&i().set(t.showcaseBeatmaps,a,e)},deleteBeatmap(t,e){let a=t.allBeatmaps.findIndex((t=>t.id===e.id));-1!==a&&t.allBeatmaps.splice(a,1),a=t.userBeatmaps.findIndex((t=>t.id===e.id)),-1!==a&&t.userBeatmaps.splice(a,1),a=t.showcaseBeatmaps.findIndex((t=>t.id===e.id)),-1!==a&&t.showcaseBeatmaps.splice(a,1)}},getters:{filteredUserBeatmaps:t=>{let e=t.userBeatmaps;if(t.filterMode!==l.X.any){const a=t.filterMode;e=e.filter((t=>t.mode===a||t.mode===r.O.Hybrid))}if("any"!==t.filterStatus&&(e=e.filter((e=>e.status===t.filterStatus))),"any"!==t.filterQuest&&(e=e.filter((t=>!t.quest))),t.filterValue){const a=t.filterValue.toLowerCase().trim().split(" ").filter((t=>t.length));e=e.filter((t=>{let e=t.song.artist+" "+t.song.title+" "+t.host.username;return t.tasks.forEach((t=>{t.mappers.forEach((t=>{e+=" "+t.username}))})),e=e.toLowerCase(),a.some((t=>e.includes(t)))}))}return e},guestDifficultyBeatmaps:(t,e,a)=>e.filteredUserBeatmaps.filter((t=>t.host.id!==a.loggedInUser.id)),hostedBeatmaps:(t,e,a)=>e.filteredUserBeatmaps.filter((t=>t.host.id===a.loggedInUser.id))},actions:{updateBeatmap({commit:t,state:e},a){var s;t("updateBeatmap",a),(null===(s=e.selectedBeatmap)||void 0===s?void 0:s.id)===a.id&&t("setSelectedBeatmap",a)},updateFilterMode({commit:t,dispatch:e},a){return d(this,void 0,void 0,(function*(){t("setFilterMode",a),yield e("loadOtherBeatmaps")}))},updateFilterStatus({commit:t,dispatch:e},a){return d(this,void 0,void 0,(function*(){t("setFilterStatus",a),yield e("loadOtherBeatmaps")}))},updateFilterQuest({commit:t,dispatch:e},a){return d(this,void 0,void 0,(function*(){t("setFilterQuest",a),yield e("loadOtherBeatmaps")}))},updateFilterValue({commit:t,dispatch:e},a){return d(this,void 0,void 0,(function*(){t("setFilterValue",a),yield e("loadOtherBeatmaps")}))},loadOtherBeatmaps({commit:t,state:e}){var a;return d(this,void 0,void 0,(function*(){t("setIsLoadingOtherBeatmaps",!0);const s="any"!==e.filterStatus?`&status=${e.filterStatus}`:"",i="any"!==e.filterQuest?`&quest=${e.filterQuest}`:"",o=e.filterValue?`&search=${e.filterValue}`:"",r=yield n().get(`/beatmaps/search?mode=${e.filterMode}&limit=${e.fetchLimit+s+i+o}`);(null===(a=r.data)||void 0===a?void 0:a.allBeatmaps)&&t("setAllBeatmaps",r.data.allBeatmaps),t("setIsLoadingOtherBeatmaps",!1)}))}}}},1515:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{tabindex:"-1"}},[a("div",{staticClass:"modal-dialog",class:"modal-"+t.modalSize},[t.loaded?a("div",{staticClass:"modal-content the-a-background"},[a("div",{staticClass:"modal-header",class:t.headerClass||"bg-primary"},[a("h5",{staticClass:"modal-title"},[t._t("header",[t._v("\n                        "+t._s(t.title)+"\n                    ")])],2),t._v(" "),a("a",{staticClass:"close",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(t){t.preventDefault()}}},[t._v("\n                    Ã—\n                ")])]),t._v(" "),a("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),t.$slots.footer?a("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()]):t._e()])])};s._withStripped=!0;var i=a(2934);const o=a.n(i)().extend({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});var n=(0,a(1900).Z)(o,s,[],!1,null,null,null);n.options.__file="src/components/ModalDialog.vue";const r=n.exports},5403:(t,e,a)=>{"use strict";a.d(e,{Z:()=>d});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-2 col-sm-12 col-md-6 col-lg-4",on:{click:function(e){return t.$emit("set-selected-beatmap",t.beatmap)}}},[a("div",{staticClass:"card card-hover map-card bg-dark",class:t.statusBorder,attrs:{"data-toggle":"modal","data-target":"#editBeatmap"}},[a("img",{staticClass:"card-img",staticStyle:{opacity:"0.2"},attrs:{src:t.processUrl(t.beatmap.url)},on:{error:function(e){return t.fallbackImage(e)}}}),t._v(" "),a("div",{staticClass:"card-img-overlay",staticStyle:{padding:"0.50rem 0.50rem 0 0.50rem"}},[a("p",{staticClass:"card-title mb-1"},[t._v("\n                "+t._s(t.formatMetadata(t.beatmap.song.artist,t.beatmap.song.title))+"\n            ")]),t._v(" "),a("small",{staticClass:"card-text"},[a("quest-img",{attrs:{beatmap:t.beatmap}}),t._v("\n\n                Hosted by\n                "),a("a",{attrs:{href:"https://osu.ppy.sh/users/"+t.beatmap.host.osuId,target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v("\n                    "+t._s(t.beatmap.host.username)+"\n                ")]),t._v(" "),"taiko"==t.beatmap.mode?a("i",{staticClass:"fas fa-drum"}):"catch"==t.beatmap.mode?a("i",{staticClass:"fas fa-apple-alt"}):"mania"==t.beatmap.mode?a("i",{staticClass:"fas fa-stream"}):t._e(),t._v(" "),a("process-tasks",{staticClass:"float-right pt-1",attrs:{tasks:t.beatmap.tasks,"tasks-locked":t.beatmap.tasksLocked,mode:t.beatmap.mode}})],1)])])])};s._withStripped=!0;var i=a(2934),o=a.n(i),n=a(4472),r=a(9050);const l=o().extend({name:"BeatmapCard",components:{ProcessTasks:n.Z,QuestImg:r.Z},props:{beatmap:{type:Object,required:!0}},data:()=>({defaultUrl:"https://osu.ppy.sh/images/layout/beatmaps/default-bg.png"}),computed:{statusBorder(){return this.beatmap.status?"card-status-"+this.beatmap.status.toLowerCase():""}},methods:{fallbackImage(t){t.target.src=this.defaultUrl},formatMetadata(t,e){const a=t+" - "+e;return a.length>34?a.slice(0,34)+"...":a},processUrl(t){if(t&&-1!==t.indexOf("osu.ppy.sh/beatmapsets/")){const e=t.indexOf("beatmapsets/")+"beatmapsets/".length,a=t.indexOf("#");let s;return s=-1!==a?t.slice(e,a):t.slice(e),`https://assets.ppy.sh/beatmaps/${s}/covers/card.jpg`}return this.defaultUrl}}});var c=(0,a(1900).Z)(l,s,[],!1,null,"41603f78",null);c.options.__file="src/components/beatmaps/BeatmapCard.vue";const d=c.exports},202:(t,e,a)=>{"use strict";a.d(e,{Z:()=>d});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal-dialog",{attrs:{id:"addBeatmap",title:"Add beatmap"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-lg-1"},[a("p",{staticStyle:{"margin-top":"3px"}},[t._v("\n                    Artist:\n                ")])]),t._v(" "),a("div",{staticClass:"col-lg-11"},[a("div",{staticClass:"input-group input-group-sm mb-3",attrs:{id:"artistForm"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedArtist,expression:"selectedArtist"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedArtist=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("\n                            Select an artist\n                        ")]),t._v(" "),a("option",{attrs:{value:"-",disabled:""}},[t._v("\n                            ---\n                        ")]),t._v(" "),t._l(t.featuredArtists,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                            "+t._s(e.label)+"\n                        ")])}))],2),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-info",attrs:{id:"artistButton"},on:{click:function(e){return t.setArtist(e)}}},[t._v("\n                            Load songs\n                        ")])])])]),t._v(" "),a("div",{staticClass:"col-lg-1"},[a("p",{staticStyle:{"margin-top":"3px"}},[t._v("\n                    Song:\n                ")])]),t._v(" "),a("div",{staticClass:"col-lg-11"},[a("div",{staticClass:"input-group input-group-sm mb-3",attrs:{id:"songForm"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedSong,expression:"selectedSong"}],staticClass:"form-control form-control-sm",attrs:{disabled:!t.featuredSongs.length},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedSong=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("\n                            Select an artist to view songs\n                        ")]),t._v(" "),a("option",{attrs:{value:"-",disabled:""}},[t._v("\n                            ---\n                        ")]),t._v(" "),t._l(t.featuredSongs,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                            "+t._s(e.title)+" --- ("+t._s(e.artist)+")\n                        ")])}))],2)])])]),t._v(" "),a("p",[t._v("\n            Game-mode:\n        ")]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-10"},[t._l(t.modes,(function(e){return a("div",{key:e.value,staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedMode,expression:"selectedMode"}],staticClass:"form-check-input",attrs:{id:e.value,type:"radio"},domProps:{value:e.value,checked:t._q(t.selectedMode,e.value)},on:{change:function(a){t.selectedMode=e.value}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:e.value}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])])})),t._v(" "),a("br"),a("small",{staticClass:"text-white-50"},[t._v("If you want a hybrid mapset, change this later.")])],2)]),t._v(" "),a("p",[t._v("\n            Select one or more difficulties "),a("i",[t._v("you plan on mapping")]),t._v(". These can be changed later:\n        ")]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-10"},t._l(t.tasks,(function(e){return a("div",{key:e,staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedTasks,expression:"checkedTasks"}],staticClass:"form-check-input",attrs:{id:e,type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.checkedTasks)?t._i(t.checkedTasks,e)>-1:t.checkedTasks},on:{change:function(a){var s=t.checkedTasks,i=a.target,o=!!i.checked;if(Array.isArray(s)){var n=e,r=t._i(s,n);i.checked?r<0&&(t.checkedTasks=s.concat([n])):r>-1&&(t.checkedTasks=s.slice(0,r).concat(s.slice(r+1)))}else t.checkedTasks=o}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:e}},[t._v("\n                        "+t._s(e)+"\n                    ")])])})),0)]),t._v(" "),a("p",[t._v("\n            Select one or more difficulties "),a("i",[t._v("you don't want anyone else to claim")]),t._v(". These can be changed later: "),a("br"),t._v(" "),a("small",{staticClass:"text-white-50"},[t._v("For example, if you don't want any guest difficulties, you should mark everything.")])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-10"},t._l(t.tasks,(function(e){return a("div",{key:e,staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedLocks,expression:"checkedLocks"}],staticClass:"form-check-input",attrs:{id:"lock-"+e,type:"checkbox"},domProps:{value:e,checked:Array.isArray(t.checkedLocks)?t._i(t.checkedLocks,e)>-1:t.checkedLocks},on:{change:function(a){var s=t.checkedLocks,i=a.target,o=!!i.checked;if(Array.isArray(s)){var n=e,r=t._i(s,n);i.checked?r<0&&(t.checkedLocks=s.concat([n])):r>-1&&(t.checkedLocks=s.slice(0,r).concat(s.slice(r+1)))}else t.checkedLocks=o}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"lock-"+e}},[t._v("\n                        "+t._s(e)+"\n                    ")])])})),0)])]),t._v(" "),a("div",{staticClass:"radial-divisor"}),t._v(" "),a("button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit"},on:{click:function(e){return t.saveNewMap(e)}}},[t._v("\n        Save\n    ")])])};s._withStripped=!0;var i=a(2934),o=a.n(i),n=a(1515),r=function(t,e,a,s){return new(a||(a=Promise))((function(i,o){function n(t){try{l(s.next(t))}catch(t){o(t)}}function r(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(n,r)}l((s=s.apply(t,e||[])).next())}))};const l=o().extend({name:"CreateBeatmapModal",components:{ModalDialog:n.Z},props:{isSecret:Boolean},data:()=>({featuredArtists:[],featuredSongs:[],selectedArtist:"",selectedSong:"",selectedMode:"osu",checkedTasks:[],checkedLocks:[],modes:[{value:"osu",name:"osu!"},{value:"taiko",name:"osu!taiko"},{value:"catch",name:"osu!catch"},{value:"mania",name:"osu!mania"}],tasks:["Easy","Normal","Hard","Insane","Expert"]}),created(){return r(this,void 0,void 0,(function*(){const t=yield this.executeGet("/featuredArtists/"+(this.isSecret?"showcase":""));t&&(this.featuredArtists=t.sort(((t,e)=>t.label.toLowerCase()>e.label.toLowerCase()?1:e.label.toLowerCase()>t.label.toLowerCase()?-1:0)))}))},methods:{setArtist(t){return r(this,void 0,void 0,(function*(){if(!this.selectedArtist)return void this.$store.dispatch("updateToastMessages",{message:"Select an artist!",type:"info"});t.target.disabled=!0;const e=yield this.executeGet(`/featuredArtists/${this.selectedArtist}/${this.isSecret?"showcaseSongs":"songs"}`);e&&(this.featuredSongs=e.sort(((t,e)=>t.title.toLowerCase()>e.title.toLowerCase()?1:e.title.toLowerCase()>t.title.toLowerCase()?-1:0))),t.target.disabled=!1}))},saveNewMap(t){return r(this,void 0,void 0,(function*(){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song!",type:"info"});const e=yield this.executePost("/beatmaps/create/",{song:this.selectedSong,tasks:this.checkedTasks,tasksLocked:this.checkedLocks,mode:this.selectedMode,status:this.isSecret?"Secret":"WIP"},t);this.isError(e)||($("#addBeatmap").modal("hide"),$(".quest-collapse-wip").collapse(),$("#othersWip").collapse("show"),this.$store.commit("beatmaps/addBeatmap",e))}))}}});var c=(0,a(1900).Z)(l,s,[],!1,null,null,null);c.options.__file="src/components/beatmaps/CreateBeatmapModal.vue";const d=c.exports},4472:(t,e,a)=>{"use strict";a.d(e,{Z:()=>c});var s=a(1161),i=a(1107),o=a(2934);function n(t,e,a,s){const i={class:["px-1","text-"+a.toLowerCase()],attrs:{}};return s&&(i.attrs={"data-toggle":"tooltip","data-placement":"top",title:s}),t("span",i,e)}const r=a.n(o)().extend({props:{tasks:{type:Array,required:!0},tasksLocked:{type:Array,required:!0},mode:{type:String,required:!0}},render(t){const e=[{name:"Storyboard",short:"SB",locked:!1,status:[]},{name:"Easy",short:"E",locked:!1,status:[]},{name:"Normal",short:"N",locked:!1,status:[]},{name:"Hard",short:"H",locked:!1,status:[]},{name:"Insane",short:"I",locked:!1,status:[]},{name:"Expert",short:"X",locked:!1,status:[]}],a=[{name:"osu",short:"circle",count:0,status:i.hY.Done},{name:"taiko",short:"drum",count:0,status:i.hY.Done},{name:"catch",short:"apple-alt",count:0,status:i.hY.Done},{name:"mania",short:"stream",count:0,status:i.hY.Done}],o=[],r=this.tasks.length>=10,l=this.mode===s.O.Hybrid;for(const s of e){let e=!1;const c=this.tasksLocked.includes(s.name);for(const t of this.tasks)if(s.name===t.name){s.status.push(t.status),e=!0;const o=a.findIndex((e=>e.name===t.mode));-1!==o&&(a[o].count++,t.status===i.hY.WIP&&(a[o].status=i.hY.WIP))}if(!l){if(r&&s.status.length>1)o.push(n(t,s.short+"+","secondary",s.status.length.toString()));else for(const e of s.status)o.push(n(t,s.short,e));e||o.push(n(t,s.short,c?"blocked":"open"))}}if(l)for(const e of a)o.push(n(t,[t("i",{class:["fas","fa-"+e.short]})],e.count?e.status:"blocked",e.count.toString()));return t("span",{class:"font-weight-bold"},o)}});var l=(0,a(1900).Z)(r,void 0,void 0,!1,null,null,null);l.options.__file="src/components/beatmaps/ProcessTasks.vue";const c=l.exports},9050:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.beatmap.quest||t.beatmap.isShowcase?a("img",{staticClass:"rounded-circle mr-1 quest-icon",attrs:{src:t.url,"data-toggle":"tooltip",title:t.beatmap.quest&&t.beatmap.quest.name}}):t._e()};s._withStripped=!0;var i=a(2934);const o=a.n(i)().extend({props:{beatmap:{type:Object,required:!0}},computed:{url(){var t;return this.beatmap.isShowcase||!(null===(t=this.beatmap.quest)||void 0===t?void 0:t.art)?"/images/no-art-icon.png":this.beatmap.quest.isMbc?"/images/mbc-icon.png":`https://assets.ppy.sh/artists/${this.beatmap.quest.art}/cover.jpg`}}});var n=(0,a(1900).Z)(o,s,[],!1,null,"0341d27a",null);n.options.__file="src/components/beatmaps/QuestImg.vue";const r=n.exports},7719:(t,e,a)=>{"use strict";a.d(e,{Z:()=>st});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.beatmap?a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{class:!t.isHost||t.isRanked||t.isQualified?"col-sm-12":"col-lg-7"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6"},[a("modders-list",{attrs:{beatmap:t.beatmap,"can-edit":!t.isHost&&!t.isRanked}})],1),t._v(" "),!t.isRanked||t.beatmap.bns?a("div",{staticClass:"col-sm-6",attrs:{id:"bns"}},[a("nominators-list",{attrs:{beatmap:t.beatmap,"can-edit":!t.isHost&&!t.isRanked}})],1):t._e()]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm"},[a("tasks-choice",{attrs:{beatmap:t.beatmap,"is-host":t.isHost,"is-ranked":t.isRanked,"is-qualified":t.isQualified}})],1)])]),t._v(" "),!t.isHost||t.isRanked||t.isQualified?t._e():a("div",{staticClass:"col-lg-5 bm-col-separator-left"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm"},["WIP"==t.beatmap.status||"Secret"==t.beatmap.status?a("mode-choice",{attrs:{beatmap:t.beatmap}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm"},["Secret"!==t.beatmap.status?a("status-choice",{attrs:{beatmap:t.beatmap}}):t._e()],1)]),t._v(" "),"Secret"!==t.beatmap.status?a("quest-choice",{attrs:{beatmap:t.beatmap}}):t._e(),t._v(" "),a("beatmap-link",{attrs:{beatmap:t.beatmap}}),t._v(" "),"WIP"==t.beatmap.status||"Secret"==t.beatmap.status?a("locks-choice",{attrs:{beatmap:t.beatmap}}):t._e()],1)]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("points",{staticClass:"col-sm-8",attrs:{beatmap:t.beatmap}}),t._v(" "),a("div",{staticClass:"col-sm-4 text-right"},[a("span",{staticClass:"small text-white-50"},[t._v("\n                Created: "+t._s(t.beatmap.createdAt.toString().slice(0,10))+"\n            ")]),t._v(" "),t.isHost&&!t.isRanked?a("button",{staticClass:"btn btn-sm btn-outline-danger ml-2",attrs:{id:"deleteButton"},on:{click:function(e){return t.deleteMap(e)}}},[t._v("\n                Delete\n            ")]):t._e()])],1)]):t._e()};s._withStripped=!0;var i=a(2934),o=a.n(i),n=a(6564),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group",attrs:{id:"mode"}},[a("div",{staticClass:"d-inline-block mr-2"},[t._v("\n        Mode\n    ")]),t._v(" "),a("button",{staticClass:"btn btn-sm rounded-100",class:"osu"==t.beatmap.mode?"btn-info":"btn-outline-info",attrs:{disabled:"osu"==t.beatmap.mode,"data-toggle":"tooltip","data-placement":"top",title:"osu!"},on:{click:function(e){return t.setMode(t.beatmap.id,"osu",e)}}},[a("i",{staticClass:"far fa-circle"})]),t._v(" "),a("button",{staticClass:"btn btn-sm rounded-100",class:"taiko"==t.beatmap.mode?"btn-info":"btn-outline-info",attrs:{disabled:"taiko"==t.beatmap.mode,"data-toggle":"tooltip","data-placement":"top",title:"osu!taiko"},on:{click:function(e){return t.setMode(t.beatmap.id,"taiko",e)}}},[a("i",{staticClass:"fas fa-drum"})]),t._v(" "),a("button",{staticClass:"btn btn-sm rounded-100",class:"catch"==t.beatmap.mode?"btn-info":"btn-outline-info",attrs:{disabled:"catch"==t.beatmap.mode,"data-toggle":"tooltip","data-placement":"top",title:"osu!catch"},on:{click:function(e){return t.setMode(t.beatmap.id,"catch",e)}}},[a("i",{staticClass:"fas fa-apple-alt"})]),t._v(" "),a("button",{staticClass:"btn btn-sm rounded-100",class:"mania"==t.beatmap.mode?"btn-info":"btn-outline-info",attrs:{disabled:"mania"==t.beatmap.mode,"data-toggle":"tooltip","data-placement":"top",title:"osu!mania"},on:{click:function(e){return t.setMode(t.beatmap.id,"mania",e)}}},[a("i",{staticClass:"fas fa-stream"})]),t._v(" "),a("button",{staticClass:"btn btn-sm rounded-100",class:"hybrid"==t.beatmap.mode?"btn-info":"btn-outline-info",attrs:{disabled:"hybrid"==t.beatmap.mode,"data-toggle":"tooltip","data-placement":"top",title:"multiple modes"},on:{click:function(e){return t.setMode(t.beatmap.id,"hybrid",e)}}},[a("i",{staticClass:"fas fa-check-double"})])])};r._withStripped=!0;const l=o().extend({name:"ModeChoice",props:{beatmap:{type:Object,required:!0}},methods:{setMode(t,e,a){return s=this,i=void 0,n=function*(){const s=yield this.executePost(`/beatmaps/${t}/setMode`,{mode:e},a);this.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s)},new((o=void 0)||(o=Promise))((function(t,e){function a(t){try{l(n.next(t))}catch(t){e(t)}}function r(t){try{l(n.throw(t))}catch(t){e(t)}}function l(e){var s;e.done?t(e.value):(s=e.value,s instanceof o?s:new o((function(t){t(s)}))).then(a,r)}l((n=n.apply(s,i||[])).next())}));var s,i,o,n}}});var c=a(1900),d=(0,c.Z)(l,r,[],!1,null,"1a8c6521",null);d.options.__file="src/components/beatmaps/beatmapInfo/ModeChoice.vue";const u=d.exports;var p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group",attrs:{id:"mapsetStatus"}},[a("div",{staticClass:"d-inline-block mr-2"},[t._v("\n        Status\n    ")]),t._v(" "),a("button",{staticClass:"btn btn-sm",class:"Done"==t.beatmap.status?"btn-success":"btn-outline-success",attrs:{disabled:"Done"==t.beatmap.status,"data-toggle":"tooltip","data-placement":"bottom",title:"mark mapset and all diffs as done"},on:{click:function(e){return t.setStatus("Done",e)}}},[t._v("\n        Done\n    ")]),t._v(" "),a("button",{staticClass:"btn btn-sm",class:"WIP"==t.beatmap.status?"btn-warning":"btn-outline-warning",attrs:{disabled:"WIP"==t.beatmap.status,"data-toggle":"tooltip","data-placement":"bottom",title:"mark mapset as work-in-progress"},on:{click:function(e){return t.setStatus("WIP",e)}}},[t._v("\n        WIP\n    ")])])};p._withStripped=!0;const m=o().extend({name:"StatusChoice",props:{beatmap:{type:Object,required:!0}},methods:{setStatus(t,e){return a=this,s=void 0,o=function*(){const a=yield this.executePost(`/beatmaps/${this.beatmap.id}/setStatus`,{status:t},e);this.isError(a)||this.$store.dispatch("beatmaps/updateBeatmap",a)},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{l(o.next(t))}catch(t){e(t)}}function r(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof i?a:new i((function(t){t(a)}))).then(n,r)}l((o=o.apply(a,s||[])).next())}));var a,s,i,o}}});var h=(0,c.Z)(m,p,[],!1,null,null,null);h.options.__file="src/components/beatmaps/beatmapInfo/StatusChoice.vue";const f=h.exports;var v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("table",{staticClass:"table table-sm"},[a("thead",[a("th",[t._v("Difficulty")]),t._v(" "),a("th",[t._v("Mapper(s)")]),t._v(" "),t.isRanked||t.isQualified?t._e():a("th")]),t._v(" "),a("transition-group",{attrs:{tag:"tbody",name:"list"}},t._l(t.beatmap.tasks,(function(e){return a("tr",{key:e.id,attrs:{id:e.id+"Row"}},[a("td",{staticClass:"text-white-50",style:"border-left: 3px solid var(--"+e.status.toLowerCase()+")"},[t._v("\n                        "+t._s(e.name)+"\n                        "),"hybrid"==t.beatmap.mode?["taiko"==e.mode?a("i",{staticClass:"fas fa-drum"}):"catch"==e.mode?a("i",{staticClass:"fas fa-apple-alt"}):"mania"==e.mode?a("i",{staticClass:"fas fa-stream"}):t._e()]:t._e()],2),t._v(" "),a("td",t._l(e.mappers,(function(s,i){return a("div",{key:s.id},[0==i&&t.canEditTaskCollaborators(e)?[t.isAddingCollaborator(e)?a("a",{staticClass:"text-danger",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"cancel"},on:{click:function(e){e.preventDefault(),t.taskToAddCollaborator=null}}},[a("i",{staticClass:"fas fa-times"})]):a("a",{staticClass:"text-success",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"invite new collaborator"},on:{click:function(a){a.preventDefault(),t.taskToAddCollaborator=e}}},[a("i",{staticClass:"fas fa-plus"})])]:t._e(),t._v(" "),a("a",{attrs:{href:"https://osu.ppy.sh/users/"+s.osuId,target:"_blank"}},[t._v("\n                                "+t._s(s.username)+"\n                                "),e.mappers.length>1&&t.canEditTaskCollaborators(e)&&s.osuId!=t.loggedInUser.osuId?a("a",{staticClass:"text-danger",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"remove collaborator"},on:{click:function(a){return a.preventDefault(),t.removeCollab(e.id,s.id,a)}}},[a("i",{staticClass:"fas fa-minus"})]):t._e()])],2)})),0),t._v(" "),t.isRanked||t.isQualified?t._e():a("td",[t.canEditTask(e)?a("a",{staticClass:"text-danger",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"delete"},on:{click:function(a){return a.preventDefault(),t.removeTask(e.id,a)}}},[a("i",{staticClass:"fas fa-minus"})]):t._e(),t._v(" "),t.canEditTask(e)?a("span",["WIP"==e.status?a("a",{staticClass:"text-success",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"mark as done"},on:{click:function(a){return a.preventDefault(),t.setTaskStatus(e.id,"Done",a)}}},[a("i",{staticClass:"fas fa-check"})]):t._e(),t._v(" "),"Done"==e.status&&"Done"!=t.beatmap.status?a("a",{staticClass:"text-wip",attrs:{href:"#","data-toggle":"tooltip","data-placement":"top",title:"mark as WIP"},on:{click:function(a){return a.preventDefault(),t.setTaskStatus(e.id,"WIP",a)}}},[a("i",{staticClass:"fas fa-ellipsis-h"})]):t._e()]):t._e()])])})),0)],1)]),t._v(" "),t.isRanked||t.isQualified?t._e():[a("div",{staticClass:"col-sm-12 mt-2"},[a("new-task",{attrs:{beatmap:t.beatmap,"is-host":t.isHost,"task-to-add-collaborator":t.taskToAddCollaborator},on:{"update:taskToAddCollaborator":function(e){t.taskToAddCollaborator=e},"update:task-to-add-collaborator":function(e){t.taskToAddCollaborator=e}}})],1)]],2)};v._withStripped=!0;var b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"WIP"!=t.beatmap.status&&"Secret"!=t.beatmap.status||!t.remainingTasks.length?t._e():a("div",{staticClass:"row mt-2 mb-3"},[a("div",{staticClass:"col-sm-12 form-inline"},[a("div",{staticClass:"input-group input-group-sm mx-auto"},[t.taskToAddCollaborator?t._e():a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedTask,expression:"selectedTask"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedTask=e.target.multiple?a:a[0]}}},t._l(t.remainingTasks,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v("\n                    "+t._s(e)+"\n                ")])})),0),t._v(" "),"hybrid"!=t.beatmap.mode||t.taskToAddCollaborator?t._e():a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedMode,expression:"selectedMode"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedMode=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"osu"}},[t._v("\n                    osu!\n                ")]),t._v(" "),a("option",{attrs:{value:"taiko"}},[t._v("\n                    osu!taiko\n                ")]),t._v(" "),a("option",{attrs:{value:"catch"}},[t._v("\n                    osu!catch\n                ")]),t._v(" "),a("option",{attrs:{value:"mania"}},[t._v("\n                    osu!mania\n                ")])]),t._v(" "),t.isHost||t.taskToAddCollaborator?a("input",{directives:[{name:"model",rawName:"v-model",value:t.requestTaskUsername,expression:"requestTaskUsername"}],staticClass:"form-control w-25",attrs:{type:"text",placeholder:"request to... (if needed)",maxlength:"18"},domProps:{value:t.requestTaskUsername},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.taskToAddCollaborator?t.addCollab(e):t.requestTask(t.beatmap.id,e)},input:function(e){e.target.composing||(t.requestTaskUsername=e.target.value)}}}):t._e(),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-info ml-1",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"add difficulty"},on:{click:function(e){t.taskToAddCollaborator?t.addCollab(e):t.addTask(t.beatmap.id,e)}}},[a("i",{staticClass:"fas fa-plus"})])])]),t._v(" "),t.taskToAddCollaborator?a("div",{staticClass:"col-sm-12 mt-1 text-center"},[a("small",[t._v("\n            Adding collaborator for the selected difficulty\n            "),a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("update:task-to-add-collaborator",null)}}},[a("i",{staticClass:"fas fa-times-circle"})])])]):t._e()])};b._withStripped=!0;var k=a(1161),_=a(1107),g=function(t,e,a,s){return new(a||(a=Promise))((function(i,o){function n(t){try{l(s.next(t))}catch(t){o(t)}}function r(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(n,r)}l((s=s.apply(t,e||[])).next())}))};const C=o().extend({name:"NewTask",props:{isHost:Boolean,taskToAddCollaborator:{type:Object,default:null},beatmap:{type:Object,required:!0}},data:()=>({selectedTask:_.XE.Easy,selectedMode:k.O.Osu,requestTaskUsername:""}),computed:{remainingTasks(){let t=Object.values(_.XE);return this.beatmap.tasksLocked&&this.beatmap.tasksLocked.length&&!this.isHost&&(t=t.filter((t=>!this.beatmap.tasksLocked.includes(t)))),this.selectedTask=t[0]||"",t}},methods:{addTask(t,e){return g(this,void 0,void 0,(function*(){if(this.requestTaskUsername&&this.requestTaskUsername.length)return void this.requestTask(t,e);let a;a=this.beatmap.mode==k.O.Hybrid?this.selectedMode:this.beatmap.mode;const s=yield this.executePost("/beatmaps/addTask/"+t,{taskName:this.selectedTask,mode:a},e);this.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s)}))},requestTask(t,e){return g(this,void 0,void 0,(function*(){let a;a=this.beatmap.mode==k.O.Hybrid?this.selectedMode:this.beatmap.mode;const s=yield this.executePost("/beatmaps/requestTask/"+t,{taskName:this.selectedTask,user:this.requestTaskUsername,mode:a},e);this.isError(s)||(this.$store.dispatch("beatmaps/updateBeatmap",s),this.$store.dispatch("updateToastMessages",{message:"Difficulty request sent!",type:"success"}))}))},addCollab(t){return g(this,void 0,void 0,(function*(){let e;e=this.beatmap.mode==k.O.Hybrid?this.taskToAddCollaborator.mode:this.beatmap.mode;const a=yield this.executePost("/beatmaps/task/"+this.taskToAddCollaborator.id+"/addCollab",{user:this.requestTaskUsername,taskName:this.taskToAddCollaborator.name,mode:e},t);this.isError(a)||(this.$store.dispatch("beatmaps/updateBeatmap",a),this.$store.dispatch("updateToastMessages",{message:"Collab invite sent!",type:"success"}))}))}}});var y=(0,c.Z)(C,b,[],!1,null,null,null);y.options.__file="src/components/beatmaps/beatmapInfo/NewTask.vue";const w=y.exports;var x=function(t,e,a,s){return new(a||(a=Promise))((function(i,o){function n(t){try{l(s.next(t))}catch(t){o(t)}}function r(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(n,r)}l((s=s.apply(t,e||[])).next())}))};const B=o().extend({name:"TasksChoice",components:{NewTask:w},props:{beatmap:{type:Object,required:!0},isHost:Boolean,isRanked:Boolean,isQualified:Boolean},data:()=>({taskToAddCollaborator:null}),computed:Object.assign({},(0,n.rn)(["loggedInUser"])),methods:{isOwner(t){return t.some((t=>t.osuId==this.loggedInUser.osuId))},canEditTask(t){return this.isOwner(t.mappers)||this.isHost},setTaskStatus(t,e,a){return x(this,void 0,void 0,(function*(){a.target.classList.add("fake-button-disable");const s=yield this.executePost("/beatmaps/setTaskStatus/"+t,{status:e});this.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s),a.target.classList.remove("fake-button-disable")}))},removeTask(t,e){return x(this,void 0,void 0,(function*(){e.target.classList.add("fake-button-disable");const a=yield this.executePost("/beatmaps/removeTask/"+t,{beatmapId:this.beatmap.id});this.isError(a)||this.$store.dispatch("beatmaps/updateBeatmap",a),e.target.classList.remove("fake-button-disable")}))},canEditTaskCollaborators(t){return"Done"!=t.status&&!this.isQualified&&"Done"!=this.beatmap.status&&this.isOwner(t.mappers)},removeCollab(t,e,a){return x(this,void 0,void 0,(function*(){a.target.classList.add("fake-button-disable");const s=yield this.executePost("/beatmaps/task/"+t+"/removeCollab",{user:e});this.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s),a.target.classList.remove("fake-button-disable")}))},isAddingCollaborator(t){var e;return(null===(e=this.taskToAddCollaborator)||void 0===e?void 0:e.id)==t.id}}});var I=(0,c.Z)(B,v,[],!1,null,null,null);I.options.__file="src/components/beatmaps/beatmapInfo/TasksChoice.vue";const S=I.exports;var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col"},[a("div",[t._v("\n                Quest\n                "),a("a",{staticClass:"text-success small ml-1",class:t.showQuestInput?"text-danger":"",attrs:{id:"editLink",href:"#","data-toggle":"tooltip","data-placement":"right",title:"connect mapset with a quest"},on:{click:function(e){e.preventDefault(),t.showQuestInput=!t.showQuestInput}}},[a("i",{staticClass:"fas fa-edit"})])]),t._v(" "),a("div",{staticClass:"small ml-3 text-white-50"},[t.beatmap.quest?a("span",[t._v(t._s(t.beatmap.quest.name))]):a("i",[t._v("none")])])])]),t._v(" "),t.showQuestInput?a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group input-group-sm"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.dropdownQuestId,expression:"dropdownQuestId"}],staticClass:"form-control form-control-sm",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.dropdownQuestId=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("\n                        No quest\n                    ")]),t._v(" "),t._l(t.userQuests,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}))],2),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-info",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"link beatmap to quest"},on:{click:function(e){return t.linkQuest(e)}}},[t._v("\n                        Save\n                    ")])])])])]):t._e()])};L._withStripped=!0;var T=function(t,e,a,s){return new(a||(a=Promise))((function(i,o){function n(t){try{l(s.next(t))}catch(t){o(t)}}function r(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(n,r)}l((s=s.apply(t,e||[])).next())}))};const P=o().extend({name:"QuestChoice",props:{beatmap:{type:Object,required:!0}},data:()=>({userQuests:[],showQuestInput:!1,dropdownQuestId:""}),computed:(0,n.rn)(["loggedInUser"]),watch:{beatmap(){var t;this.showQuestInput=!1,this.dropdownQuestId=(null===(t=this.beatmap.quest)||void 0===t?void 0:t.id)||""}},created(){return T(this,void 0,void 0,(function*(){const t=yield this.executeGet(`/users/${this.loggedInUser.id}/quests`);this.isError(t)||(this.userQuests=t)}))},methods:{linkQuest(t){return T(this,void 0,void 0,(function*(){const e=yield this.executePost(`/beatmaps/${this.beatmap.id}/linkQuest`,{questId:this.dropdownQuestId},t);this.isError(e)||this.$store.dispatch("beatmaps/updateBeatmap",e)}))}}});var A=(0,c.Z)(P,L,[],!1,null,null,null);A.options.__file="src/components/beatmaps/beatmapInfo/QuestChoice.vue";const M=A.exports;var E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mb-2",attrs:{id:"modders"}},[a("div",{staticClass:"col"},[a("div",[t._v("\n            Modders ("+t._s(t.beatmap.modders.length)+")\n            "),t.canEdit?a("small",{staticClass:"ml-1",attrs:{"data-toggle":"tooltip","data-placement":"right",title:"add/remove yourself from modder list"}},[a("a",{class:t.isModder?"text-danger":"text-success",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updateModder(e)}}},[a("i",{staticClass:"fas",class:t.isModder?"fa-minus":"fa-plus"})])]):t._e()]),t._v(" "),a("div",{staticClass:"small ml-3"},[0==t.beatmap.modders.length?a("i",{staticClass:"text-white-50"},[t._v("\n                none\n            ")]):a("span",[t._l(t.beatmap.modders,(function(e,s){return[a("a",{key:e.id,attrs:{href:"https://osu.ppy.sh/users/"+e.osuId,target:"_blank"}},[t._v("\n                        "+t._s(t.listUser(e.username,s,t.beatmap.modders.length))+"\n                    ")])]}))],2)])])])};E._withStripped=!0;const O=o().extend({name:"ModdersList",props:{canEdit:Boolean,beatmap:{type:Object,required:!0}},computed:Object.assign(Object.assign({},(0,n.rn)(["loggedInUser"])),{isModder(){return this.beatmap.modders.some((t=>t.osuId==this.loggedInUser.osuId))}}),methods:{updateModder(t){return e=this,a=void 0,i=function*(){t.target.classList.add("fake-button-disable");const e=yield this.executePost(`/beatmaps/${this.beatmap.id}/updateModder`);this.isError(e)||this.$store.dispatch("beatmaps/updateBeatmap",e),t.target.classList.remove("fake-button-disable")},new((s=void 0)||(s=Promise))((function(t,o){function n(t){try{l(i.next(t))}catch(t){o(t)}}function r(t){try{l(i.throw(t))}catch(t){o(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,r)}l((i=i.apply(e,a||[])).next())}));var e,a,s,i}}});var q=(0,c.Z)(O,E,[],!1,null,null,null);q.options.__file="src/components/beatmaps/beatmapInfo/ModdersList.vue";const Q=q.exports;var D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v("\n        Potential Nominators ("+t._s(t.beatmap.bns.length)+")\n        "),t.canEdit?a("small",{staticClass:"ml-1",attrs:{"data-toggle":"tooltip","data-placement":"right",title:"add/remove yourself from potential BN list"}},[t.isBn?a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updateBn(e)}}},[a("i",{staticClass:"fas fa-minus"})]):t._e(),t._v(" "),!t.isBn&&t.beatmap.bns.length<2?a("a",{staticClass:"text-success",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updateBn(e)}}},[a("i",{staticClass:"fas fa-plus"})]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"small ml-3"},[0==t.beatmap.bns.length?a("i",{staticClass:"text-white-50"},[t._v("none")]):a("span",[t._l(t.beatmap.bns,(function(e,s){return[a("a",{key:e.id,attrs:{href:"https://osu.ppy.sh/users/"+e.osuId,target:"_blank"}},[t._v("\n                    "+t._s(t.listUser(e.username,s,t.beatmap.bns.length))+"\n                ")])]}))],2)])])};D._withStripped=!0;const U=o().extend({name:"NominatorsList",props:{canEdit:Boolean,beatmap:{type:Object,required:!0}},computed:Object.assign(Object.assign({},(0,n.rn)(["loggedInUser"])),{isBn(){return this.beatmap.bns.some((t=>t.osuId==this.loggedInUser.osuId))}}),methods:{updateBn(t){return e=this,a=void 0,i=function*(){t.target.classList.add("fake-button-disable");const e=yield this.executePost(`/beatmaps/${this.beatmap.id}/updateBn`);this.isError(e)||this.$store.dispatch("beatmaps/updateBeatmap",e),t.target.classList.remove("fake-button-disable")},new((s=void 0)||(s=Promise))((function(t,o){function n(t){try{l(i.next(t))}catch(t){o(t)}}function r(t){try{l(i.throw(t))}catch(t){o(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,r)}l((i=i.apply(e,a||[])).next())}));var e,a,s,i}}});var N=(0,c.Z)(U,D,[],!1,null,null,null);N.options.__file="src/components/beatmaps/beatmapInfo/NominatorsList.vue";const Z=N.exports;var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col"},[a("div",[t._v("\n                Link\n                "),a("a",{staticClass:"text-success small ml-1",class:{"text-danger":t.showLinkInput},attrs:{id:"editLink",href:"#","data-toggle":"tooltip","data-placement":"right",title:"edit link"},on:{click:function(e){e.preventDefault(),t.showLinkInput=!t.showLinkInput}}},[a("i",{staticClass:"fas fa-edit"})])]),t._v(" "),a("div",{staticClass:"small ml-3"},[t.beatmap.url?a("a",{attrs:{href:t.beatmap.url,target:"_blank"}},[t._v("\n                    "+t._s(t.beatmap.url)+"\n                ")]):a("i",{staticClass:"text-white-50"},[t._v("none")])])])]),t._v(" "),t.showLinkInput?a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"input-group input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"URL"},domProps:{value:t.url},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveLink(e)},input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-info",attrs:{id:"addLinkButton",type:"submit","data-toggle":"tooltip","data-placement":"right",title:"use new osu!web link for card image"},on:{click:function(e){return t.saveLink(e)}}},[t._v("\n                        Save\n                    ")])])])])]):t._e()])};j._withStripped=!0;const H=o().extend({name:"BeatmapLink",props:{beatmap:{type:Object,required:!0}},data:()=>({url:"",showLinkInput:!1}),watch:{beatmap(t){t&&(this.showLinkInput=!1,this.url=t.url)}},created(){this.url=this.beatmap.url},methods:{saveLink(t){return e=this,a=void 0,i=function*(){const e=yield this.executePost(`/beatmaps/${this.beatmap.id}/setLink`,{url:this.url},t);this.isError(e)||(this.showLinkInput=!1,this.$store.dispatch("beatmaps/updateBeatmap",e))},new((s=void 0)||(s=Promise))((function(t,o){function n(t){try{l(i.next(t))}catch(t){o(t)}}function r(t){try{l(i.throw(t))}catch(t){o(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,r)}l((i=i.apply(e,a||[])).next())}));var e,a,s,i}}});var W=(0,c.Z)(H,j,[],!1,null,null,null);W.options.__file="src/components/beatmaps/beatmapInfo/BeatmapLink.vue";const R=W.exports;var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mb-1",attrs:{id:"locks"}},[a("div",{staticClass:"col"},[a("div",[t._v("\n                Locks\n                "),6!=t.beatmap.tasksLocked.length?a("a",{staticClass:"text-success small ml-1",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showLocksInput=!t.showLocksInput}}},[a("i",{staticClass:"fas fa-edit"})]):t._e()]),t._v(" "),a("div",{staticClass:"small ml-3"},[0==t.beatmap.tasksLocked.length?a("i",[t._v("none")]):t._e(),t._v(" "),t.beatmap.tasksLocked.length>0?a("div",t._l(t.beatmap.tasksLocked,(function(e){return a("div",{key:e},[a("a",{staticClass:"text-danger",attrs:{href:"#","data-toggle":"tooltip","data-placement":"left",title:"unlock"},on:{click:function(a){return a.preventDefault(),t.unlockTask(e,a)}}},[a("i",{staticClass:"fas fa-minus"})]),t._v(" "),a("span",{staticClass:"text-white-50"},[t._v("\n                            "+t._s(e)+"\n                        ")])])})),0):t._e()])])]),t._v(" "),t.showLocksInput?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group input-group-sm"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.lockTaskSelection,expression:"lockTaskSelection"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.lockTaskSelection=e.target.multiple?a:a[0]}}},t._l(t.remainingTasks,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-info",attrs:{id:"lockTask","data-toggle":"tooltip","data-placement":"right",title:"prevent other mappers from claiming a difficulty"},on:{click:function(e){return t.lockTask(e)}}},[a("i",{staticClass:"fas fa-lock"})])])])])]):t._e()])};F._withStripped=!0;var V=function(t,e,a,s){return new(a||(a=Promise))((function(i,o){function n(t){try{l(s.next(t))}catch(t){o(t)}}function r(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(n,r)}l((s=s.apply(t,e||[])).next())}))};const X=o().extend({name:"LocksChoice",props:{beatmap:{type:Object,required:!0}},data:()=>({lockTaskSelection:"",showLocksInput:!1}),computed:{remainingTasks(){var t,e;let a=Object.values(_.XE);return(null===(e=null===(t=this.beatmap)||void 0===t?void 0:t.tasksLocked)||void 0===e?void 0:e.length)&&(a=a.filter((t=>!this.beatmap.tasksLocked.includes(t)))),this.lockTaskSelection=a[0]||"",a}},watch:{beatmap(){this.showLocksInput=!1}},methods:{unlockTask(t,e){return V(this,void 0,void 0,(function*(){e.target.classList.add("fake-button-disable");const a=yield this.executePost(`/beatmaps/${this.beatmap.id}/unlockTask`,{task:t});this.isError(a)||this.$store.dispatch("beatmaps/updateBeatmap",a),e.target.classList.remove("fake-button-disable")}))},lockTask(t){return V(this,void 0,void 0,(function*(){const e=yield this.executePost(`/beatmaps/${this.beatmap.id}/lockTask`,{task:this.lockTaskSelection},t);this.isError(e)||this.$store.dispatch("beatmaps/updateBeatmap",e)}))}}});var Y=(0,c.Z)(X,F,[],!1,null,null,null);Y.options.__file="src/components/beatmaps/beatmapInfo/LocksChoice.vue";const G=Y.exports;var z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[t.tasksPointsArray?t._e():a("button",{staticClass:"btn btn-sm btn-outline-info ml-1",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"calculate points for all difficulties"},on:{click:function(e){return t.findPoints(e)}}},[t._v("\n                Calculate points\n            ")]),t._v(" "),t.isLoading?a("span",{staticClass:"small text-white-50 ml-2"},[t._v("\n                calculating...\n            ")]):t.pointsInfo?a("span",{staticClass:"small text-white-50 ml-2"},[t._v("\n                "+t._s(t.pointsInfo)+"\n            ")]):t._e()]),t._v(" "),t.tasksPointsArray?a("div",{staticClass:"col-sm-6"},[a("ul",{staticClass:"small text-white-50"},t._l(t.tasksPointsArray,(function(e,s){return a("li",{key:s},[t._v("\n                    "+t._s(e)+"\n                ")])})),0)]):t._e(),t._v(" "),a("div",{staticClass:"col-sm-6"},[t.usersPointsArrays?a("ul",{staticClass:"small text-white-50"},t._l(t.usersPointsArrays,(function(e,s){return a("li",{key:s},[t._v("\n                    "+t._s(t.usersPointsArrays[s][0])+": "+t._s(t.usersPointsArrays[s][1])+"\n                ")])})),0):t._e()]),t._v(" "),t.totalPoints?a("div",{staticClass:"col-sm-12"},[a("span",{staticClass:"small text-white-50 ml-2"},[t._v("\n                total: "+t._s(Math.round(10*t.totalPoints)/10)+"\n            ")])]):t._e()])])};z._withStripped=!0;const J=o().extend({name:"Points",props:{beatmap:{type:Object,required:!0}},data:()=>({tasksPointsArray:null,usersPointsArrays:null,pointsInfo:null,totalPoints:null,isLoading:!1}),watch:{beatmap(){this.tasksPointsArray=null,this.usersPointsArrays=null,this.pointsInfo=null,this.totalPoints=null,this.isLoading=!1}},methods:{findPoints(t){return e=this,a=void 0,i=function*(){this.isLoading=!0;const e=yield this.executeGet(`/beatmaps/${this.beatmap.id}/findPoints`,t);this.isError(e)||(this.tasksPointsArray=e.tasksPointsArray,this.usersPointsArrays=e.usersPointsArrays,this.pointsInfo=e.pointsInfo,this.totalPoints=e.totalPoints),this.isLoading=!1},new((s=void 0)||(s=Promise))((function(t,o){function n(t){try{l(i.next(t))}catch(t){o(t)}}function r(t){try{l(i.throw(t))}catch(t){o(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,r)}l((i=i.apply(e,a||[])).next())}));var e,a,s,i}}});var K=(0,c.Z)(J,z,[],!1,null,null,null);K.options.__file="src/components/beatmaps/beatmapInfo/Points.vue";const tt=K.exports;const et=o().extend({name:"BeatmapInfo",components:{ModeChoice:u,StatusChoice:f,TasksChoice:S,QuestChoice:M,ModdersList:Q,NominatorsList:Z,BeatmapLink:R,LocksChoice:G,Points:tt},props:{beatmap:{type:Object,required:!0}},data:()=>({userQuests:null}),computed:Object.assign(Object.assign({},(0,n.rn)(["loggedInUser"])),{isHost(){return!(!this.loggedInUser.id||!this.beatmap)&&this.loggedInUser.id===this.beatmap.host.id},isRanked(){return this.beatmap.status===k.U.Ranked},isQualified(){return this.beatmap.status===k.U.Qualified}}),methods:{deleteMap(t){return e=this,a=void 0,i=function*(){if(confirm("Are you sure you want to delete?")){t.target.disabled=!0;const e=yield this.executePost(`/beatmaps/${this.beatmap.id}/delete`,{},t);this.isError(e)||($("#editBeatmap").modal("hide"),this.$store.commit("beatmaps/deleteBeatmap",e)),t.target.disabled=!1}},new((s=void 0)||(s=Promise))((function(t,o){function n(t){try{l(i.next(t))}catch(t){o(t)}}function r(t){try{l(i.throw(t))}catch(t){o(t)}}function l(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,r)}l((i=i.apply(e,a||[])).next())}));var e,a,s,i}}});var at=(0,c.Z)(et,s,[],!1,null,"5b11bcf2",null);at.options.__file="src/components/beatmaps/beatmapInfo/BeatmapInfo.vue";const st=at.exports},646:(t,e,a)=>{"use strict";a.d(e,{Z:()=>p});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal-dialog",{attrs:{id:"editBeatmap",loaded:Boolean(t.selectedBeatmap),"header-class":t.selectedBeatmap?"bg-"+t.selectedBeatmap.status.toLowerCase():""},scopedSlots:t._u([{key:"header",fn:function(){return[a("quest-img",{attrs:{beatmap:t.selectedBeatmap}}),t._v(" "),t.selectedBeatmap.url?a("a",{attrs:{href:t.selectedBeatmap.url,target:"_blank"}},[a("i",{staticClass:"fas fa-link"}),t._v("\n            "+t._s(t.selectedBeatmap.song.artist)+" - "+t._s(t.selectedBeatmap.song.title)+"\n        ")]):a("span",[t._v("\n            "+t._s(t.selectedBeatmap.song.artist)+" - "+t._s(t.selectedBeatmap.song.title)+"\n        ")]),t._v(" "),a("a",{staticClass:"mx-1",attrs:{href:"https://osu.ppy.sh/users/"+t.selectedBeatmap.host.osuId,target:"_blank"}},[t._v("("+t._s(t.selectedBeatmap.host.username)+")")]),t._v(" "),"taiko"==t.selectedBeatmap.mode?a("i",{staticClass:"fas fa-drum",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"osu!taiko"}}):"catch"==t.selectedBeatmap.mode?a("i",{staticClass:"fas fa-apple-alt",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"osu!catch"}}):"mania"==t.selectedBeatmap.mode?a("i",{staticClass:"fas fa-stream",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"osu!mania"}}):"hybrid"==t.selectedBeatmap.mode?a("i",{staticClass:"fas fa-check-double",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"multiple game modes"}}):t._e()]},proxy:!0},{key:"default",fn:function(){return[a("beatmap-info",{attrs:{beatmap:t.selectedBeatmap}})]},proxy:!0}])})};s._withStripped=!0;var i=a(2934),o=a.n(i),n=a(7719),r=a(1515),l=a(1161),c=a(9050);const d=o().extend({components:{BeatmapInfo:n.Z,ModalDialog:r.Z,QuestImg:c.Z},props:{selectedBeatmap:{type:Object,default:()=>({})}},watch:{selectedBeatmap(){this.selectedBeatmap&&this.$route.query.id!==this.selectedBeatmap.id&&this.$router.replace(`/${this.selectedBeatmap.status===l.U.Secret?"showcase":"beatmaps"}?id=${this.selectedBeatmap.id}`)}}});var u=(0,a(1900).Z)(d,s,[],!1,null,null,null);u.options.__file="src/pages/beatmaps/EditBeatmapModal.vue";const p=u.exports}}]);