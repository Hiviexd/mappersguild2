(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[505],{1787:(e,t,o)=>{"use strict";var s,a;o.d(t,{U:()=>s,O:()=>a}),function(e){e.WIP="WIP",e.Done="Done",e.Qualified="Qualified",e.Ranked="Ranked",e.Secret="Secret"}(s||(s={})),function(e){e.Osu="osu",e.Taiko="taiko",e.Catch="catch",e.Mania="mania",e.Hybrid="hybrid"}(a||(a={}))},1516:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var s=o(5393);const a={class:"modal fade",tabindex:"-1"},i={key:0,class:"modal-content the-a-background"},l={class:"modal-title"},r=(0,s.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),n={class:"modal-body"},c={key:0,class:"modal-footer"},d=(0,s.defineComponent)({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});d.render=function(e,t,o,d,u,m){return(0,s.openBlock)(),(0,s.createBlock)("div",a,[(0,s.createVNode)("div",{class:["modal-dialog modal-fullscreen-lg-down",`modal-${e.modalSize}`]},[e.loaded?((0,s.openBlock)(),(0,s.createBlock)("div",i,[(0,s.createVNode)("div",{class:["modal-header",e.headerClass||"bg-primary"]},[(0,s.createVNode)("h5",l,[(0,s.renderSlot)(e.$slots,"header",{},(()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.title),1)]))]),r],2),(0,s.createVNode)("div",n,[(0,s.renderSlot)(e.$slots,"default")]),e.$slots.footer?((0,s.openBlock)(),(0,s.createBlock)("div",c,[(0,s.renderSlot)(e.$slots,"footer")])):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)],2)])};const u=d},8834:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var s=o(5393);const a={key:0,class:"fas fa-circle mode-margin"},i={key:1,class:"fas fa-drum mode-margin"},l={key:2,class:"fas fa-apple-alt mode-margin"},r={key:3,class:"fas fa-stream mode-margin"},n={key:4,class:"fas fa-check-double mode-margin"},c=(0,s.defineComponent)({name:"ModesIcons",props:{modes:{type:Array,required:!0},toggler:Boolean},emits:["toggle"]});c.render=function(e,t,o,c,d,u){const m=(0,s.resolveDirective)("bs-tooltip");return e.toggler?((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:0},[(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.$emit("toggle","osu")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-circle",e.modes.includes("osu")?"":"text-white-50"]},null,2),[[m,"toggle osu!"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[2]||(t[2]=(0,s.withModifiers)((t=>e.$emit("toggle","taiko")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-drum",e.modes.includes("taiko")?"":"text-white-50"]},null,2),[[m,"toggle osu!taiko"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[3]||(t[3]=(0,s.withModifiers)((t=>e.$emit("toggle","catch")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-apple-alt",e.modes.includes("catch")?"":"text-white-50"]},null,2),[[m,"toggle osu!catch"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[4]||(t[4]=(0,s.withModifiers)((t=>e.$emit("toggle","mania")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-stream",e.modes.includes("mania")?"":"text-white-50"]},null,2),[[m,"toggle osu!"]])])],64)):((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:1},[e.modes.includes("osu")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",a,null,512)),[[m,"osu!"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("taiko")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",i,null,512)),[[m,"osu!taiko"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("catch")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",l,null,512)),[[m,"osu!catch"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("mania")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",r,null,512)),[[m,"osu!mania"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("hybrid")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",n,null,512)),[[m,"multiple game modes"]]):(0,s.createCommentVNode)("",!0)],64))};const d=c},3837:(e,t,o)=>{"use strict";o.d(t,{Z:()=>L});var s=o(5393);const a={class:"container"},i=(0,s.createVNode)("option",{value:"-",disabled:""}," --- ",-1),l={key:0,class:"row col ms-4"},r=(0,s.createVNode)("ul",{class:"small text-secondary"},[(0,s.createVNode)("li",null,"This artist's logo will be used as the quest's icon."),(0,s.createVNode)("li",null,"If your quest allows songs from a few artists, choose whichever best expresses its theme."),(0,s.createVNode)("li",null,'If your quest allows songs from many artists, choose "No specific artist".'),(0,s.createVNode)("li",null,'Selecting an artist pre-fills the "Name" and "Objective" fields, though these can still be customized.')],-1),n={key:1,class:"row col ms-4"},c=(0,s.createVNode)("ul",{class:"small text-secondary"},[(0,s.createVNode)("li",null,"Submitting quest for approval requires you to spend points correlating to how many mapsets are required. The fewer required mapsets, the more points you'll have to spend (and vice versa)."),(0,s.createVNode)("li",null,"Choosing a number pre-fills various fields, though these can still be customized.")],-1),d=(0,s.createVNode)("div",{class:"radial-divisor"},null,-1),u={key:3,class:"row col-sm small text-secondary"},m=(0,s.createVNode)("p",null," Keep in mind that your quest may need revision before it is approved and published on the Mappers' Guild quest listing! ",-1),p=(0,s.createVNode)("p",null," If your quest is rejected, your spent points will be returned and pishifat will send you a message explaining why it was rejected. You may re-submit the quest with changes according to that message. Minor wording changes will be modified by pishifat without rejection. ",-1),h=(0,s.createVNode)("i",{class:"fas fa-coins"},null,-1),f={key:4,class:"row col-sm"},k=(0,s.createTextVNode)(" Add quest to queue "),b=(0,s.createVNode)("i",{class:"fas fa-coins"},null,-1),y={key:0,class:"mt-2"},g=(0,s.createTextVNode)(" Pending quests "),V={class:"small text-secondary"},v=(0,s.createVNode)("i",{class:"fas fa-minus"},null,-1);var C=o(6564),N=o(1516);const B={class:"mb-3 row"},w={class:"col-sm-3 col-form-label"},x={class:"col-sm-9"},q={key:0,class:"text-secondary small"},S=(0,s.defineComponent)({name:"FormFieldBase",props:{label:{type:String,required:!0},description:{type:String,default:""}}});S.render=function(e,t,o,a,i,l){return(0,s.openBlock)(),(0,s.createBlock)("div",B,[(0,s.createVNode)("div",w,[(0,s.createVNode)("b",null,(0,s.toDisplayString)(e.label),1)]),(0,s.createVNode)("div",x,[(0,s.renderSlot)(e.$slots,"default"),e.description?((0,s.openBlock)(),(0,s.createBlock)("p",q,(0,s.toDisplayString)(e.description),1)):(0,s.createCommentVNode)("",!0)])])};const P=S,A=(0,s.defineComponent)({name:"FormField",components:{FormFieldBase:P},props:{label:{type:String,required:!0},placeholder:{type:String,default:""},modelValue:{type:[String,Number],required:!0},type:{type:String,default:"text"},description:{type:String,default:""}},emits:["update:modelValue"]});A.render=function(e,t,o,a,i,l){const r=(0,s.resolveComponent)("form-field-base");return(0,s.openBlock)(),(0,s.createBlock)(r,{label:e.label,description:e.description},{default:(0,s.withCtx)((()=>[(0,s.createVNode)("input",{value:e.modelValue,type:e.type,placeholder:e.placeholder,class:"form-control form-control-sm",autocomplete:"off",onInput:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value))},null,40,["value","type","placeholder"])])),_:1},8,["label","description"])};const M=A,D=(0,s.defineComponent)({name:"FormField",components:{FormFieldBase:P},props:{label:{type:String,required:!0},placeholder:{type:String,default:""},modelValue:{type:String,required:!0},rows:{type:Number,default:3}},emits:["update:modelValue"]});D.render=function(e,t,o,a,i,l){const r=(0,s.resolveComponent)("form-field-base");return(0,s.openBlock)(),(0,s.createBlock)(r,{label:e.label},{default:(0,s.withCtx)((()=>[(0,s.createVNode)("textarea",{value:e.modelValue,class:"form-control form-control-sm",rows:e.rows,placeholder:e.placeholder,onInput:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value))},null,40,["value","rows","placeholder"])])),_:1},8,["label"])};const F=D,$={value:"",selected:""},Q=(0,s.defineComponent)({name:"FormField",components:{FormFieldBase:P},props:{label:{type:String,required:!0},placeholder:{type:String,default:"..."},modelValue:{type:String,required:!0},type:{type:String,default:"text"},options:{type:Array,default:()=>[]}},emits:["update:modelValue"]});Q.render=function(e,t,o,a,i,l){const r=(0,s.resolveComponent)("form-field-base");return(0,s.openBlock)(),(0,s.createBlock)(r,{label:e.label},{default:(0,s.withCtx)((()=>[(0,s.createVNode)("select",{class:"form-select form-select-sm",onInput:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value))},[(0,s.createVNode)("option",$,(0,s.toDisplayString)(e.placeholder),1),(0,s.renderSlot)(e.$slots,"default",{},(()=>[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.options,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("option",{key:o,value:t,selected:t===e.modelValue},(0,s.toDisplayString)(t),9,["value","selected"])))),128))]))],32)])),_:3},8,["label"])};const I=Q,T={class:"form-check"},j=(0,s.defineComponent)({name:"FormCheckbox",components:{FormFieldBase:P},props:{id:{type:String,required:!0},label:{type:String,required:!0},info:{type:String,default:""},modelValue:Boolean},emits:["update:modelValue"]});j.render=function(e,t,o,a,i,l){const r=(0,s.resolveComponent)("form-field-base");return(0,s.openBlock)(),(0,s.createBlock)(r,{label:e.label},{default:(0,s.withCtx)((()=>[(0,s.createVNode)("div",T,[(0,s.createVNode)("input",{id:e.id,class:"form-check-input",type:"checkbox",checked:e.modelValue,onChange:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.checked))},null,40,["id","checked"]),(0,s.createVNode)("label",{class:"form-check-label",for:e.id},(0,s.toDisplayString)(e.info),9,["for"])])])),_:1},8,["label"])};const U=j;var O=function(e,t,o,s){return new(o||(o=Promise))((function(a,i){function l(e){try{n(s.next(e))}catch(e){i(e)}}function r(e){try{n(s.throw(e))}catch(e){i(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,r)}n((s=s.apply(e,t||[])).next())}))};const R=(0,s.defineComponent)({name:"SubmitQuestModal",components:{ModalDialog:N.Z,FormInput:M,FormTextarea:F,FormSelect:I,FormCheckbox:U},props:{isAdmin:Boolean},data:()=>({featuredArtists:[],selectedArtist:"",mapsetCount:6,name:"",price:0,objective:"",timeframe:0,minParty:0,maxParty:0,minRank:0,isMbc:!1,queuedQuests:[]}),computed:Object.assign(Object.assign({},(0,C.rn)(["loggedInUser"])),{packType(){return 1==this.mapsetCount?"single":2==this.mapsetCount?"double":this.mapsetCount<=4?"mini-pack":this.mapsetCount<=9?"pack":this.mapsetCount>=10?"mega-pack":"invalid-pack"},selectedArtistOsuId(){return this.selectedArtist.length?this.selectedArtist.split("|")[0]:""},selectedArtistName(){return this.selectedArtist.length?this.selectedArtist.split("|")[1]:""},points(){let e=25;return this.selectedArtist||(e+=10),this.mapsetCount<1?e=727:1==this.mapsetCount?e+=100:this.mapsetCount<10&&(e+=7.5*(10-this.mapsetCount)),e},enoughPoints(){return this.loggedInUser.availablePoints-this.points>0}}),watch:{selectedArtist(){this.selectedArtistName.length&&this.mapsetCount>0&&(this.name=this.findName(),this.objective=this.findObjective(),this.price=this.findPrice(),this.timeframe=this.findTimeframe(),this.minParty=this.mapsetCount,this.maxParty=3*this.mapsetCount)},mapsetCount(){this.selectedArtistName.length&&this.mapsetCount>0&&(this.name=this.findName(),this.objective=this.findObjective(),this.price=this.findPrice(),this.timeframe=this.findTimeframe(),this.minParty=this.mapsetCount,this.maxParty=3*this.mapsetCount)}},created(){return O(this,void 0,void 0,(function*(){const e=yield this.$http.executeGet("/featuredArtists");e&&(this.featuredArtists=e.sort(((e,t)=>e.label.toLowerCase()>t.label.toLowerCase()?1:t.label.toLowerCase()>e.label.toLowerCase()?-1:0)))}))},methods:{findName(){return this.selectedArtistName+" "+this.packType},findObjective(){return 1==this.mapsetCount?`Create and rank ${this.mapsetCount} mapset of any song by ${this.selectedArtistName}.`:`Create and rank at least ${this.mapsetCount} mapsets of songs by ${this.selectedArtistName}, each hosted by a different user.`},findPrice(){switch(this.mapsetCount){case 1:return 20;case 2:return 10;case 3:return 5;default:return 0}},findTimeframe(){return 10*this.mapsetCount+70},resetQuestDetails(){this.selectedArtist="",this.mapsetCount=6,this.name="",this.price=0,this.objective="",this.timeframe=0,this.minParty=0,this.maxParty=0,this.minRank=0,this.isMbc=!1},addToQueue(){this.queuedQuests.push({name:this.name,price:this.price,descriptionMain:this.objective,timeframe:864e5*this.timeframe,minParty:this.minParty,maxParty:this.maxParty,minRank:this.minRank,isMbc:this.isMbc,art:parseInt(this.selectedArtistOsuId),requiredMapsets:this.mapsetCount}),this.resetQuestDetails()},removeFromQueue(e){this.queuedQuests=this.queuedQuests.filter((t=>t.name!=e))},submitQuest(e){return O(this,void 0,void 0,(function*(){const t={name:this.name,price:this.price,descriptionMain:this.objective,timeframe:864e5*this.timeframe,minParty:this.minParty,maxParty:this.maxParty,art:this.selectedArtistOsuId,requiredMapsets:this.mapsetCount},o=yield this.$http.executePost("/quests/submit",t,e);this.$http.isError(o)||(this.$bs.hideModal("submitQuest"),this.resetQuestDetails())}))},publishQuests(e){return O(this,void 0,void 0,(function*(){const t={quests:this.queuedQuests},o=yield this.$http.executePost("/admin/quests/create",t,e);this.$http.isError(o)||(this.$bs.hideModal("submitQuest"),this.queuedQuests=[])}))}}});R.render=function(e,t,o,C,N,B){const w=(0,s.resolveComponent)("form-select"),x=(0,s.resolveComponent)("form-input"),q=(0,s.resolveComponent)("form-textarea"),S=(0,s.resolveComponent)("form-checkbox"),P=(0,s.resolveComponent)("modal-dialog");return(0,s.openBlock)(),(0,s.createBlock)(P,{id:"submitQuest",title:e.isAdmin?"Add quest":"Submit quest"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)("div",a,[(0,s.createVNode)(w,{modelValue:e.selectedArtist,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedArtist=t),label:"Artist",placeholder:"No specific artist"},{default:(0,s.withCtx)((()=>[i,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.featuredArtists,(e=>((0,s.openBlock)(),(0,s.createBlock)("option",{key:e.id,value:e.osuId+"|"+e.label},(0,s.toDisplayString)(e.label),9,["value"])))),128))])),_:1},8,["modelValue"]),e.isAdmin?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("div",l,[r])),(0,s.createVNode)(x,{modelValue:e.mapsetCount,"onUpdate:modelValue":t[2]||(t[2]=t=>e.mapsetCount=t),modelModifiers:{number:!0},label:"Required mapsets",type:"number"},null,8,["modelValue"]),e.isAdmin?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("div",n,[c])),(0,s.createVNode)(x,{modelValue:e.name,"onUpdate:modelValue":t[3]||(t[3]=t=>e.name=t),label:"Name"},null,8,["modelValue"]),(0,s.createVNode)(q,{modelValue:e.objective,"onUpdate:modelValue":t[4]||(t[4]=t=>e.objective=t),label:"Objective"},null,8,["modelValue"]),(0,s.createVNode)(x,{modelValue:e.price,"onUpdate:modelValue":t[5]||(t[5]=t=>e.price=t),modelModifiers:{number:!0},label:"Price",type:"number",placeholder:"price per party member...",description:"...points required per party member"},null,8,["modelValue"]),(0,s.createVNode)(x,{modelValue:e.timeframe,"onUpdate:modelValue":t[6]||(t[6]=t=>e.timeframe=t),modelModifiers:{number:!0},label:"Timeframe",type:"number",description:"...days to complete quest"},null,8,["modelValue"]),(0,s.createVNode)(x,{modelValue:e.minParty,"onUpdate:modelValue":t[7]||(t[7]=t=>e.minParty=t),modelModifiers:{number:!0},label:"Party size (min)",type:"number"},null,8,["modelValue"]),(0,s.createVNode)(x,{modelValue:e.maxParty,"onUpdate:modelValue":t[8]||(t[8]=t=>e.maxParty=t),modelModifiers:{number:!0},label:"Party size (max)",type:"number",description:"...members required to accept quest (min/max)"},null,8,["modelValue"]),e.isAdmin?((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:2},[(0,s.createVNode)(x,{modelValue:e.minRank,"onUpdate:modelValue":t[9]||(t[9]=t=>e.minRank=t),modelModifiers:{number:!0},label:"Party rank (min)",type:"number",description:"...rank required to accept quest"},null,8,["modelValue"]),(0,s.createVNode)(S,{id:"isMbcCheckbox",modelValue:e.isMbc,"onUpdate:modelValue":t[10]||(t[10]=t=>e.isMbc=t),label:"is MBC",info:"Toggle isMbc"},null,8,["modelValue"])],64)):(0,s.createCommentVNode)("",!0),d,e.isAdmin?((0,s.openBlock)(),(0,s.createBlock)("div",f,[(0,s.createVNode)("button",{class:"btn btn-outline-secondary w-100",onClick:t[12]||(t[12]=t=>e.addToQueue())},[k,b]),e.queuedQuests.length?((0,s.openBlock)(),(0,s.createBlock)("div",y,[g,(0,s.createVNode)("ul",V,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.queuedQuests,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t.name},[(0,s.createTextVNode)((0,s.toDisplayString)(t.name)+" ",1),(0,s.createVNode)("a",{href:"#",class:"text-danger",onClick:(0,s.withModifiers)((o=>e.removeFromQueue(t.name)),["prevent"])},[v],8,["onClick"])])))),128))])])):(0,s.createCommentVNode)("",!0),e.queuedQuests.length?((0,s.openBlock)(),(0,s.createBlock)("button",{key:1,class:"btn btn-outline-success w-100",onClick:t[13]||(t[13]=t=>e.publishQuests(t))}," Publish quests ")):(0,s.createCommentVNode)("",!0)])):((0,s.openBlock)(),(0,s.createBlock)("div",u,[m,p,(0,s.createVNode)("button",{class:"btn btn-outline-success w-100",disabled:!e.enoughPoints,onClick:t[11]||(t[11]=t=>e.submitQuest(t))},[(0,s.createTextVNode)((0,s.toDisplayString)(`Submit quest for approval: ${e.points} pts`)+" ",1),h],8,["disabled"])]))])])),_:1},8,["title"])};const L=R},5607:(e,t,o)=>{"use strict";o.d(t,{Z:()=>m});var s=o(5393);const a={class:"card card-body container"},i=(0,s.createVNode)("h5",null," Associated maps ",-1),l={key:0,class:"ps-3 mb-0 list-unstyled"},r={key:1},n=(0,s.createTextVNode)(" by "),c={key:1,class:"small text-white-50 ms-3"};var d=o(1787);const u=(0,s.defineComponent)({props:{associatedMaps:{type:Array,required:!0}},methods:{findIcon:e=>e==d.U.WIP?"fa-ellipsis-h":e==d.U.Done?"fa-check":e==d.U.Qualified||e==d.U.Ranked?"fa-check-circle":""}});u.render=function(e,t,o,d,u,m){const p=(0,s.resolveComponent)("user-link"),h=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",a,[i,e.associatedMaps.length?((0,s.openBlock)(),(0,s.createBlock)("ul",l,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.associatedMaps,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t.id,class:"text-secondary"},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas me-1",[`text-${t.status.toLowerCase()}`,e.findIcon(t.status)]]},null,2),[[h,t.status]]),t.url?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:t.url,target:"_blank"},(0,s.toDisplayString)(t.song.artist)+" - "+(0,s.toDisplayString)(t.song.title),9,["href"])):((0,s.openBlock)(),(0,s.createBlock)("span",r,(0,s.toDisplayString)(t.song.artist)+" - "+(0,s.toDisplayString)(t.song.title),1)),n,(0,s.createVNode)(p,{user:t.host},null,8,["user"])])))),128))])):((0,s.openBlock)(),(0,s.createBlock)("div",c," No associated maps... "))])};const m=u}}]);