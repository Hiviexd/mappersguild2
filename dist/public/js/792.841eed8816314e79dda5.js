(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[792],{1787:(e,t,a)=>{"use strict";var s,o;a.d(t,{U:()=>s,O:()=>o}),function(e){e.WIP="WIP",e.Done="Done",e.Qualified="Qualified",e.Ranked="Ranked",e.Secret="Secret"}(s||(s={})),function(e){e.Osu="osu",e.Taiko="taiko",e.Catch="catch",e.Mania="mania",e.Hybrid="hybrid"}(o||(o={}))},358:(e,t,a)=>{"use strict";var s,o,i,n;a.d(t,{XE:()=>s,hY:()=>i}),function(e){e.Easy="Easy",e.Normal="Normal",e.Hard="Hard",e.Insane="Insane",e.Expert="Expert",e.Storyboard="Storyboard"}(s||(s={})),function(e){e.Osu="osu",e.Taiko="taiko",e.Catch="catch",e.Mania="mania",e.SB="sb"}(o||(o={})),function(e){e.WIP="WIP",e.Done="Done"}(i||(i={})),function(e){e[e.Meh=1]="Meh",e[e.Ok=2]="Ok",e[e.Nice=3]="Nice"}(n||(n={}))},3700:(e,t,a)=>{"use strict";var s;a.d(t,{X:()=>s}),function(e){e.any="any",e.osu="osu",e.taiko="taiko",e.catch="catch",e.mania="mania"}(s||(s={}))},8925:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(9669),o=a.n(s),i=a(1787),n=a(3700),c=a(358),r=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{r(s.next(e))}catch(e){i(e)}}function c(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,c)}r((s=s.apply(e,t||[])).next())}))};const l={namespaced:!0,state:{allBeatmaps:[],userBeatmaps:[],showcaseBeatmaps:[],filterValue:"",filterMode:n.X.any,filterStatus:"any",filterQuest:"any",selectedBeatmap:null,selectedBeatmapId:null,fetchLimit:30,isLoadingOtherBeatmaps:!0},mutations:{setAllBeatmaps(e,t){e.allBeatmaps=t},setUserBeatmaps(e,t){e.userBeatmaps=t},setShowcaseBeatmaps(e,t){e.showcaseBeatmaps=t},setFilterValue(e,t){e.filterValue=t},setFilterMode(e,t){e.filterMode=t},setFilterStatus(e,t){e.filterStatus=t},setFilterQuest(e,t){e.filterQuest=t},setIsLoadingOtherBeatmaps(e,t){e.isLoadingOtherBeatmaps=t},increaseFetchLimit(e){e.fetchLimit+=50},setSelectedBeatmap(e,t){const a=Object.values(c.XE);t.tasks.sort((function(e,t){return a.indexOf(e.name)-a.indexOf(t.name)})),t.tasksLocked.sort((function(e,t){return a.indexOf(e)-a.indexOf(t)})),e.selectedBeatmap=t},addBeatmap(e,t){t.status===i.U.Secret?e.showcaseBeatmaps.unshift(t):e.userBeatmaps.unshift(t)},updateBeatmap(e,t){let a=e.allBeatmaps.findIndex((e=>e.id===t.id));-1!==a&&(e.allBeatmaps[a]=t),a=e.userBeatmaps.findIndex((e=>e.id===t.id)),-1!==a&&(e.userBeatmaps[a]=t),a=e.showcaseBeatmaps.findIndex((e=>e.id===t.id)),-1!==a&&(e.showcaseBeatmaps[a]=t)},deleteBeatmap(e,t){let a=e.allBeatmaps.findIndex((e=>e.id===t.id));-1!==a&&e.allBeatmaps.splice(a,1),a=e.userBeatmaps.findIndex((e=>e.id===t.id)),-1!==a&&e.userBeatmaps.splice(a,1),a=e.showcaseBeatmaps.findIndex((e=>e.id===t.id)),-1!==a&&e.showcaseBeatmaps.splice(a,1)}},getters:{filteredUserBeatmaps:e=>{let t=e.userBeatmaps;if(e.filterMode!==n.X.any){const a=e.filterMode;t=t.filter((e=>e.mode===a||e.mode===i.O.Hybrid))}if("any"!==e.filterStatus&&(t=t.filter((t=>t.status===e.filterStatus))),"any"!==e.filterQuest&&(t=t.filter((e=>!e.quest))),e.filterValue){const a=e.filterValue.toLowerCase().trim().split(" ").filter((e=>e.length));t=t.filter((e=>{let t=e.song.artist+" "+e.song.title+" "+e.host.username;return e.tasks.forEach((e=>{e.mappers.forEach((e=>{t+=" "+e.username}))})),t=t.toLowerCase(),a.some((e=>t.includes(e)))}))}return t},guestDifficultyBeatmaps:(e,t,a)=>t.filteredUserBeatmaps.filter((e=>{var t;return e.host.id!==(null===(t=a.loggedInUser)||void 0===t?void 0:t.id)})),hostedBeatmaps:(e,t,a)=>t.filteredUserBeatmaps.filter((e=>{var t;return e.host.id===(null===(t=a.loggedInUser)||void 0===t?void 0:t.id)}))},actions:{updateBeatmap({commit:e,state:t},a){var s;e("updateBeatmap",a),(null===(s=t.selectedBeatmap)||void 0===s?void 0:s.id)===a.id&&e("setSelectedBeatmap",a)},updateFilterMode({commit:e,dispatch:t},a){return r(this,void 0,void 0,(function*(){e("setFilterMode",a),yield t("loadOtherBeatmaps")}))},updateFilterStatus({commit:e,dispatch:t},a){return r(this,void 0,void 0,(function*(){e("setFilterStatus",a),yield t("loadOtherBeatmaps")}))},updateFilterQuest({commit:e,dispatch:t},a){return r(this,void 0,void 0,(function*(){e("setFilterQuest",a),yield t("loadOtherBeatmaps")}))},updateFilterValue({commit:e,dispatch:t},a){return r(this,void 0,void 0,(function*(){e("setFilterValue",a),yield t("loadOtherBeatmaps")}))},loadOtherBeatmaps({commit:e,state:t}){var a;return r(this,void 0,void 0,(function*(){e("setIsLoadingOtherBeatmaps",!0);const s="any"!==t.filterStatus?`&status=${t.filterStatus}`:"",i="any"!==t.filterQuest?`&quest=${t.filterQuest}`:"",n=t.filterValue?`&search=${t.filterValue}`:"",c=yield o().get(`/beatmaps/search?mode=${t.filterMode}&limit=${t.fetchLimit+s+i+n}`);(null===(a=c.data)||void 0===a?void 0:a.allBeatmaps)&&e("setAllBeatmaps",c.data.allBeatmaps),e("setIsLoadingOtherBeatmaps",!1)}))}}}},1516:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var s=a(5393);const o={class:"modal fade",tabindex:"-1"},i={key:0,class:"modal-content the-a-background"},n={class:"modal-title"},c=(0,s.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),r={class:"modal-body"},l={key:0,class:"modal-footer"},d=(0,s.defineComponent)({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});d.render=function(e,t,a,d,u,m){return(0,s.openBlock)(),(0,s.createBlock)("div",o,[(0,s.createVNode)("div",{class:["modal-dialog modal-fullscreen-lg-down",`modal-${e.modalSize}`]},[e.loaded?((0,s.openBlock)(),(0,s.createBlock)("div",i,[(0,s.createVNode)("div",{class:["modal-header",e.headerClass||"bg-primary"]},[(0,s.createVNode)("h5",n,[(0,s.renderSlot)(e.$slots,"header",{},(()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.title),1)]))]),c],2),(0,s.createVNode)("div",r,[(0,s.renderSlot)(e.$slots,"default")]),e.$slots.footer?((0,s.openBlock)(),(0,s.createBlock)("div",l,[(0,s.renderSlot)(e.$slots,"footer")])):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)],2)])};const u=d},8834:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s=a(5393);const o={key:0,class:"fas fa-circle mode-margin"},i={key:1,class:"fas fa-drum mode-margin"},n={key:2,class:"fas fa-apple-alt mode-margin"},c={key:3,class:"fas fa-stream mode-margin"},r={key:4,class:"fas fa-check-double mode-margin"},l=(0,s.defineComponent)({name:"ModesIcons",props:{modes:{type:Array,required:!0},toggler:Boolean},emits:["toggle"]});l.render=function(e,t,a,l,d,u){const m=(0,s.resolveDirective)("bs-tooltip");return e.toggler?((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:0},[(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.$emit("toggle","osu")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-circle",e.modes.includes("osu")?"":"text-white-50"]},null,2),[[m,"toggle osu!"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[2]||(t[2]=(0,s.withModifiers)((t=>e.$emit("toggle","taiko")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-drum",e.modes.includes("taiko")?"":"text-white-50"]},null,2),[[m,"toggle osu!taiko"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[3]||(t[3]=(0,s.withModifiers)((t=>e.$emit("toggle","catch")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-apple-alt",e.modes.includes("catch")?"":"text-white-50"]},null,2),[[m,"toggle osu!catch"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[4]||(t[4]=(0,s.withModifiers)((t=>e.$emit("toggle","mania")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-stream",e.modes.includes("mania")?"":"text-white-50"]},null,2),[[m,"toggle osu!"]])])],64)):((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:1},[e.modes.includes("osu")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",o,null,512)),[[m,"osu!"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("taiko")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",i,null,512)),[[m,"osu!taiko"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("catch")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",n,null,512)),[[m,"osu!catch"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("mania")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",c,null,512)),[[m,"osu!mania"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("hybrid")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",r,null,512)),[[m,"multiple game modes"]]):(0,s.createCommentVNode)("",!0)],64))};const d=l},2064:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(5393);const o=(0,s.defineComponent)({name:"UserLink",props:{users:{type:Array,required:!0}},methods:{listUser:(e,t,a)=>e+(t<a-1?", ":"")}});o.render=function(e,t,a,o,i,n){return(0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.users,((t,a)=>((0,s.openBlock)(),(0,s.createBlock)("a",{key:a,href:"https://osu.ppy.sh/users/"+t.osuId,target:"_blank"},(0,s.toDisplayString)(e.listUser(t.username,a,e.users.length)),9,["href"])))),128)};const i=o},8640:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var s=a(5393);const o=(0,s.withScopeId)("data-v-0e5d497a");(0,s.pushScopeId)("data-v-0e5d497a");const i={class:"card-img-overlay",style:{padding:"0.50rem 0.50rem 0 0.50rem"}},n={class:"card-title mb-1"},c={class:"card-text"},r=(0,s.createTextVNode)(" Hosted by ");(0,s.popScopeId)();const l=o(((e,t,a,o,l,d)=>{const u=(0,s.resolveComponent)("quest-img"),m=(0,s.resolveComponent)("user-link"),p=(0,s.resolveComponent)("modes-icons"),h=(0,s.resolveComponent)("process-tasks");return(0,s.openBlock)(),(0,s.createBlock)("div",{class:"my-2 col-sm-12 col-md-6 col-lg-4",onClick:t[2]||(t[2]=t=>e.$emit("update:selectedBeatmap",e.beatmap))},[(0,s.createVNode)("div",{class:["card card-hover map-card bg-dark",e.statusBorder],"data-bs-toggle":"modal","data-bs-target":"#editBeatmap"},[(0,s.createVNode)("img",{class:"card-img",src:e.processUrl(e.beatmap.url),style:{opacity:"0.2"},onError:t[1]||(t[1]=t=>e.fallbackImage(t))},null,40,["src"]),(0,s.createVNode)("div",i,[(0,s.createVNode)("p",n,(0,s.toDisplayString)(e.formatMetadata(e.beatmap.song.artist,e.beatmap.song.title)),1),(0,s.createVNode)("small",c,[(0,s.createVNode)(u,{beatmap:e.beatmap},null,8,["beatmap"]),r,(0,s.createVNode)(m,{class:"me-1",user:e.beatmap.host},null,8,["user"]),"osu"!==e.beatmap.mode?((0,s.openBlock)(),(0,s.createBlock)(p,{key:0,modes:[e.beatmap.mode]},null,8,["modes"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(h,{class:"float-end pt-1",tasks:e.beatmap.tasks,"tasks-locked":e.beatmap.tasksLocked,mode:e.beatmap.mode},null,8,["tasks","tasks-locked","mode"])])])],2)])}));var d=a(7096),u=a(2643),m=a(8834);const p=(0,s.defineComponent)({name:"BeatmapCard",components:{ProcessTasks:d.Z,QuestImg:u.Z,ModesIcons:m.Z},props:{beatmap:{type:Object,required:!0}},emits:["update:selectedBeatmap"],data:()=>({defaultUrl:"https://osu.ppy.sh/images/layout/beatmaps/default-bg.png"}),computed:{statusBorder(){return this.beatmap.status?"card-status-"+this.beatmap.status.toLowerCase():""}},methods:{fallbackImage(e){e.target.src=this.defaultUrl},formatMetadata(e,t){const a=e+" - "+t;return a.length>34?a.slice(0,34)+"...":a},processUrl(e){if(e&&-1!==e.indexOf("osu.ppy.sh/beatmapsets/")){const t=e.indexOf("beatmapsets/")+"beatmapsets/".length,a=e.indexOf("#");let s;return s=-1!==a?e.slice(t,a):e.slice(t),`https://assets.ppy.sh/beatmaps/${s}/covers/card.jpg`}return this.defaultUrl}}});p.render=l,p.__scopeId="data-v-0e5d497a";const h=p},275:(e,t,a)=>{"use strict";a.d(t,{Z:()=>L});var s=a(5393);const o={class:"container"},i={class:"mb-3 row"},n=(0,s.createVNode)("div",{class:"col-lg-1"},[(0,s.createVNode)("p",{style:{"margin-top":"3px"}}," Artist: ")],-1),c={class:"col-lg-11"},r={id:"artistForm",class:"input-group input-group-sm mb-3"},l=(0,s.createVNode)("option",{value:"",disabled:""}," Select an artist ",-1),d=(0,s.createVNode)("option",{value:"-",disabled:""}," --- ",-1),u=(0,s.createVNode)("div",{class:"col-lg-1"},[(0,s.createVNode)("p",{style:{"margin-top":"3px"}}," Song: ")],-1),m={class:"col-lg-11"},p=(0,s.createVNode)("option",{value:"",disabled:""}," Select an artist to view songs ",-1),h=(0,s.createVNode)("option",{value:"-",disabled:""}," --- ",-1),k=(0,s.createVNode)("p",null," Game-mode: ",-1),f={class:"mb-3 row"},b={class:"col-sm-10"},v=(0,s.createVNode)("br",null,null,-1),B=(0,s.createVNode)("small",{class:"text-white-50"},"If you want a hybrid mapset, change this later.",-1),g=(0,s.createVNode)("p",null,[(0,s.createTextVNode)(" Select one or more difficulties "),(0,s.createVNode)("i",null,"you plan on mapping"),(0,s.createTextVNode)(". These can be changed later: ")],-1),y={class:"mb-3 row"},N={class:"col-sm-10"},V=(0,s.createVNode)("p",null,[(0,s.createTextVNode)(" Select one or more difficulties "),(0,s.createVNode)("i",null,"you don't want anyone else to claim"),(0,s.createTextVNode)(". These can be changed later: "),(0,s.createVNode)("br"),(0,s.createVNode)("small",{class:"text-white-50"},"For example, if you don't want any guest difficulties, you should mark everything.")],-1),w={class:"mb-3 row"},C={class:"col-sm-10"},x=(0,s.createVNode)("div",{class:"radial-divisor"},null,-1);var S=a(1516),I=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{r(s.next(e))}catch(e){i(e)}}function c(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,c)}r((s=s.apply(e,t||[])).next())}))};const D=(0,s.defineComponent)({name:"CreateBeatmapModal",components:{ModalDialog:S.Z},props:{isSecret:Boolean},data:()=>({featuredArtists:[],featuredSongs:[],selectedArtist:"",selectedSong:"",selectedMode:"osu",checkedTasks:[],checkedLocks:[],modes:[{value:"osu",name:"osu!"},{value:"taiko",name:"osu!taiko"},{value:"catch",name:"osu!catch"},{value:"mania",name:"osu!mania"}],tasks:["Easy","Normal","Hard","Insane","Expert"]}),created(){return I(this,void 0,void 0,(function*(){const e=yield this.$http.executeGet("/featuredArtists/"+(this.isSecret?"showcase":""));e&&(this.featuredArtists=e.sort(((e,t)=>e.label.toLowerCase()>t.label.toLowerCase()?1:t.label.toLowerCase()>e.label.toLowerCase()?-1:0)))}))},methods:{setArtist(e){return I(this,void 0,void 0,(function*(){if(!this.selectedArtist)return void this.$store.dispatch("updateToastMessages",{message:"Select an artist!",type:"info"});e.target.disabled=!0;const t=yield this.$http.executeGet(`/featuredArtists/${this.selectedArtist}/${this.isSecret?"showcaseSongs":"songs"}`);t&&(this.featuredSongs=t.sort(((e,t)=>e.title.toLowerCase()>t.title.toLowerCase()?1:t.title.toLowerCase()>e.title.toLowerCase()?-1:0))),e.target.disabled=!1}))},saveNewMap(e){return I(this,void 0,void 0,(function*(){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song!",type:"info"});const t=yield this.$http.executePost("/beatmaps/create/",{song:this.selectedSong,tasks:this.checkedTasks,tasksLocked:this.checkedLocks,mode:this.selectedMode,status:this.isSecret?"Secret":"WIP"},e);this.$http.isError(t)||(this.$bs.hideModal("addBeatmap"),this.$store.commit("beatmaps/addBeatmap",t))}))}}});D.render=function(e,t,a,S,I,D){const L=(0,s.resolveComponent)("modal-dialog");return(0,s.openBlock)(),(0,s.createBlock)(L,{id:"addBeatmap",title:"Add beatmap"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)("div",o,[(0,s.createVNode)("div",i,[n,(0,s.createVNode)("div",c,[(0,s.createVNode)("div",r,[(0,s.withDirectives)((0,s.createVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedArtist=t),class:"form-select"},[l,d,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.featuredArtists,(e=>((0,s.openBlock)(),(0,s.createBlock)("option",{key:e.id,value:e.id},(0,s.toDisplayString)(e.label),9,["value"])))),128))],512),[[s.vModelSelect,e.selectedArtist]]),(0,s.createVNode)("button",{id:"artistButton",class:"btn btn-outline-info",onClick:t[2]||(t[2]=t=>e.setArtist(t))}," Load songs ")])]),u,(0,s.createVNode)("div",m,[(0,s.withDirectives)((0,s.createVNode)("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedSong=t),class:"form-select form-select-sm",disabled:!e.featuredSongs.length},[p,h,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.featuredSongs,(e=>((0,s.openBlock)(),(0,s.createBlock)("option",{key:e.id,value:e.id},(0,s.toDisplayString)(e.title)+" --- ("+(0,s.toDisplayString)(e.artist)+") ",9,["value"])))),128))],8,["disabled"]),[[s.vModelSelect,e.selectedSong]])])]),k,(0,s.createVNode)("div",f,[(0,s.createVNode)("div",b,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.modes,(a=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:a.value,class:"form-check form-check-inline"},[(0,s.withDirectives)((0,s.createVNode)("input",{id:a.value,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedMode=t),class:"form-check-input",type:"radio",value:a.value},null,8,["id","value"]),[[s.vModelRadio,e.selectedMode]]),(0,s.createVNode)("label",{class:"form-check-label",for:a.value},(0,s.toDisplayString)(a.name),9,["for"])])))),128)),v,B])]),g,(0,s.createVNode)("div",y,[(0,s.createVNode)("div",N,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.tasks,(a=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:a,class:"form-check"},[(0,s.withDirectives)((0,s.createVNode)("input",{id:a,"onUpdate:modelValue":t[5]||(t[5]=t=>e.checkedTasks=t),class:"form-check-input",type:"checkbox",value:a},null,8,["id","value"]),[[s.vModelCheckbox,e.checkedTasks]]),(0,s.createVNode)("label",{class:"form-check-label",for:a},(0,s.toDisplayString)(a),9,["for"])])))),128))])]),V,(0,s.createVNode)("div",w,[(0,s.createVNode)("div",C,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.tasks,(a=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:a,class:"form-check"},[(0,s.withDirectives)((0,s.createVNode)("input",{id:`lock-${a}`,"onUpdate:modelValue":t[6]||(t[6]=t=>e.checkedLocks=t),class:"form-check-input",type:"checkbox",value:a},null,8,["id","value"]),[[s.vModelCheckbox,e.checkedLocks]]),(0,s.createVNode)("label",{class:"form-check-label",for:`lock-${a}`},(0,s.toDisplayString)(a),9,["for"])])))),128))])])]),x,(0,s.createVNode)("button",{type:"submit",class:"btn btn-outline-success w-100",onClick:t[7]||(t[7]=t=>e.saveNewMap(t))}," Save ")])),_:1})};const L=D},7096:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(1787),o=a(358),i=a(5393);function n(e,t,a){const s={class:["px-1","text-"+t.toLowerCase()]};return a&&(s["data-bs-toggle"]="tooltip",s["data-bs-placement"]="top",s.title=a),(0,i.h)("span",s,e)}const c=(0,i.defineComponent)({props:{tasks:{type:Array,required:!0},tasksLocked:{type:Array,required:!0},mode:{type:String,required:!0}},render(){const e=[{name:"Storyboard",short:"SB",locked:!1,status:[]},{name:"Easy",short:"E",locked:!1,status:[]},{name:"Normal",short:"N",locked:!1,status:[]},{name:"Hard",short:"H",locked:!1,status:[]},{name:"Insane",short:"I",locked:!1,status:[]},{name:"Expert",short:"X",locked:!1,status:[]}],t=[{name:"osu",short:"circle",count:0,status:o.hY.Done},{name:"taiko",short:"drum",count:0,status:o.hY.Done},{name:"catch",short:"apple-alt",count:0,status:o.hY.Done},{name:"mania",short:"stream",count:0,status:o.hY.Done}],a=[],c=this.tasks.length>=10,r=this.mode===s.O.Hybrid;for(const s of e){let e=!1;const i=this.tasksLocked.includes(s.name);for(const a of this.tasks)if(s.name===a.name){s.status.push(a.status),e=!0;const i=t.findIndex((e=>e.name===a.mode));-1!==i&&(t[i].count++,a.status===o.hY.WIP&&(t[i].status=o.hY.WIP))}if(!r){if(c&&s.status.length>1)a.push(n(s.short+"+","secondary",s.status.length.toString()));else for(const e of s.status)a.push(n(s.short,e));e||a.push(n(s.short,i?"blocked":"open"))}}if(r)for(const e of t)a.push(n([(0,i.h)("i",{class:["fas","fa-"+e.short]})],e.count?e.status:"blocked",e.count.toString()));return(0,i.h)("span",{class:"fw-bold"},a)}})},2643:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(5393);const o=(0,s.withScopeId)("data-v-7f5b5ec0")(((e,t,a,o,i,n)=>{const c=(0,s.resolveDirective)("bs-tooltip");return e.beatmap.quest||e.beatmap.isShowcase?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("img",{key:0,class:"rounded-circle me-1 quest-icon",src:e.url},null,8,["src"])),[[c,e.beatmap.quest&&e.beatmap.quest.name]]):(0,s.createCommentVNode)("",!0)})),i=(0,s.defineComponent)({props:{beatmap:{type:Object,required:!0}},computed:{url(){var e;return this.beatmap.isShowcase||!(null===(e=this.beatmap.quest)||void 0===e?void 0:e.art)?"/images/no-art-icon.png":this.beatmap.quest.isMbc?"/images/mbc-icon.png":`https://assets.ppy.sh/artists/${this.beatmap.quest.art}/cover.jpg`}}});i.render=o,i.__scopeId="data-v-7f5b5ec0";const n=i},89:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Pt});var s=a(5393);const o=(0,s.withScopeId)("data-v-3dc524c0");(0,s.pushScopeId)("data-v-3dc524c0");const i={key:0,class:"container"},n={class:"row"},c={class:"row mb-2"},r={class:"col-sm-6"},l={key:0,id:"bns",class:"col-sm-6"},d=(0,s.createVNode)("hr",null,null,-1),u={class:"row"},m={class:"col-sm"},p={key:0,class:"col-lg-5 bm-col-separator-left"},h={class:"row mb-2"},k={class:"col-sm"},f={class:"row mb-2"},b={class:"col-sm"},v=(0,s.createVNode)("hr",null,null,-1),B={class:"row"},g={class:"col-sm-4 text-end"},y={class:"small text-white-50"};(0,s.popScopeId)();const N=o(((e,t,a,o,N,V)=>{const w=(0,s.resolveComponent)("modders-list"),C=(0,s.resolveComponent)("nominators-list"),x=(0,s.resolveComponent)("tasks-choice"),S=(0,s.resolveComponent)("mode-choice"),I=(0,s.resolveComponent)("status-choice"),D=(0,s.resolveComponent)("quest-choice"),L=(0,s.resolveComponent)("beatmap-link"),T=(0,s.resolveComponent)("locks-choice"),$=(0,s.resolveComponent)("points");return e.beatmap?((0,s.openBlock)(),(0,s.createBlock)("div",i,[(0,s.createVNode)("div",n,[(0,s.createVNode)("div",{class:!e.isHost||e.isRanked||e.isQualified?"col-sm-12":"col-lg-7"},[(0,s.createVNode)("div",c,[(0,s.createVNode)("div",r,[(0,s.createVNode)(w,{beatmap:e.beatmap,"can-edit":!e.isHost&&!e.isRanked},null,8,["beatmap","can-edit"])]),!e.isRanked||e.beatmap.bns?((0,s.openBlock)(),(0,s.createBlock)("div",l,[(0,s.createVNode)(C,{beatmap:e.beatmap,"can-edit":!e.isHost&&!e.isRanked},null,8,["beatmap","can-edit"])])):(0,s.createCommentVNode)("",!0)]),d,(0,s.createVNode)("div",u,[(0,s.createVNode)("div",m,[(0,s.createVNode)(x,{beatmap:e.beatmap,"is-host":e.isHost,"is-ranked":e.isRanked,"is-qualified":e.isQualified},null,8,["beatmap","is-host","is-ranked","is-qualified"])])])],2),!e.isHost||e.isRanked||e.isQualified?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("div",p,[(0,s.createVNode)("div",h,[(0,s.createVNode)("div",k,["WIP"==e.beatmap.status||"Secret"==e.beatmap.status?((0,s.openBlock)(),(0,s.createBlock)(S,{key:0,beatmap:e.beatmap},null,8,["beatmap"])):(0,s.createCommentVNode)("",!0)])]),(0,s.createVNode)("div",f,[(0,s.createVNode)("div",b,["Secret"!==e.beatmap.status?((0,s.openBlock)(),(0,s.createBlock)(I,{key:0,beatmap:e.beatmap},null,8,["beatmap"])):(0,s.createCommentVNode)("",!0)])]),"Secret"!==e.beatmap.status?((0,s.openBlock)(),(0,s.createBlock)(D,{key:0,beatmap:e.beatmap},null,8,["beatmap"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(L,{beatmap:e.beatmap},null,8,["beatmap"]),"WIP"==e.beatmap.status||"Secret"==e.beatmap.status?((0,s.openBlock)(),(0,s.createBlock)(T,{key:1,beatmap:e.beatmap},null,8,["beatmap"])):(0,s.createCommentVNode)("",!0)]))]),v,(0,s.createVNode)("div",B,[(0,s.createVNode)($,{class:"col-sm-8",beatmap:e.beatmap},null,8,["beatmap"]),(0,s.createVNode)("div",g,[(0,s.createVNode)("span",y," Created: "+(0,s.toDisplayString)(e.beatmap.createdAt.toString().slice(0,10)),1),e.isHost&&!e.isRanked?((0,s.openBlock)(),(0,s.createBlock)("button",{key:0,id:"deleteButton",class:"btn btn-sm btn-outline-danger ms-2",onClick:t[1]||(t[1]=t=>e.deleteMap(t))}," Delete ")):(0,s.createCommentVNode)("",!0)])])])):(0,s.createCommentVNode)("",!0)}));var V=a(6564);const w=(0,s.withScopeId)("data-v-79fd40f6");(0,s.pushScopeId)("data-v-79fd40f6");const C={id:"mode",class:"mb-3"},x=(0,s.createVNode)("div",{class:"d-inline-block me-2"}," Mode ",-1),S=(0,s.createVNode)("i",{class:"far fa-circle"},null,-1),I=(0,s.createVNode)("i",{class:"fas fa-drum"},null,-1),D=(0,s.createVNode)("i",{class:"fas fa-apple-alt"},null,-1),L=(0,s.createVNode)("i",{class:"fas fa-stream"},null,-1),T=(0,s.createVNode)("i",{class:"fas fa-check-double"},null,-1);(0,s.popScopeId)();const $=w(((e,t,a,o,i,n)=>{const c=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",C,[x,(0,s.withDirectives)((0,s.createVNode)("button",{class:["btn btn-sm rounded-100 me-1","osu"==e.beatmap.mode?"btn-info":"btn-outline-info"],disabled:"osu"==e.beatmap.mode,onClick:t[1]||(t[1]=t=>e.setMode(e.beatmap.id,"osu",t))},[S],10,["disabled"]),[[c,"osu!"]]),(0,s.withDirectives)((0,s.createVNode)("button",{class:["btn btn-sm rounded-100 me-1","taiko"==e.beatmap.mode?"btn-info":"btn-outline-info"],disabled:"taiko"==e.beatmap.mode,onClick:t[2]||(t[2]=t=>e.setMode(e.beatmap.id,"taiko",t))},[I],10,["disabled"]),[[c,"osu!taiko"]]),(0,s.withDirectives)((0,s.createVNode)("button",{class:["btn btn-sm rounded-100 me-1","catch"==e.beatmap.mode?"btn-info":"btn-outline-info"],disabled:"catch"==e.beatmap.mode,onClick:t[3]||(t[3]=t=>e.setMode(e.beatmap.id,"catch",t))},[D],10,["disabled"]),[[c,"osu!catch"]]),(0,s.withDirectives)((0,s.createVNode)("button",{class:["btn btn-sm rounded-100 me-1","mania"==e.beatmap.mode?"btn-info":"btn-outline-info"],disabled:"mania"==e.beatmap.mode,onClick:t[4]||(t[4]=t=>e.setMode(e.beatmap.id,"mania",t))},[L],10,["disabled"]),[[c,"osu!mania"]]),(0,s.withDirectives)((0,s.createVNode)("button",{class:["btn btn-sm rounded-100 me-1","hybrid"==e.beatmap.mode?"btn-info":"btn-outline-info"],disabled:"hybrid"==e.beatmap.mode,onClick:t[5]||(t[5]=t=>e.setMode(e.beatmap.id,"hybrid",t))},[T],10,["disabled"]),[[c,"multiple modes"]])])}));const M=(0,s.defineComponent)({name:"ModeChoice",props:{beatmap:{type:Object,required:!0}},methods:{setMode(e,t,a){return s=this,o=void 0,n=function*(){const s=yield this.$http.executePost(`/beatmaps/${e}/setMode`,{mode:t},a);this.$http.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s)},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{r(n.next(e))}catch(e){t(e)}}function c(e){try{r(n.throw(e))}catch(e){t(e)}}function r(t){var s;t.done?e(t.value):(s=t.value,s instanceof i?s:new i((function(e){e(s)}))).then(a,c)}r((n=n.apply(s,o||[])).next())}));var s,o,i,n}}});M.render=$,M.__scopeId="data-v-79fd40f6";const P=M,O={id:"mapsetStatus",class:"mb-3"},A=(0,s.createVNode)("div",{class:"d-inline-block me-2"}," Status ",-1);const q=(0,s.defineComponent)({name:"StatusChoice",props:{beatmap:{type:Object,required:!0}},methods:{setStatus(e,t){return a=this,s=void 0,i=function*(){const a=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/setStatus`,{status:e},t);this.$http.isError(a)||this.$store.dispatch("beatmaps/updateBeatmap",a)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{r(i.next(e))}catch(e){t(e)}}function c(e){try{r(i.throw(e))}catch(e){t(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,c)}r((i=i.apply(a,s||[])).next())}));var a,s,o,i}}});q.render=function(e,t,a,o,i,n){const c=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",O,[A,(0,s.withDirectives)((0,s.createVNode)("button",{class:["btn btn-sm me-1","Done"==e.beatmap.status?"btn-success":"btn-outline-success"],disabled:"Done"==e.beatmap.status,onClick:t[1]||(t[1]=t=>e.setStatus("Done",t))}," Done ",10,["disabled"]),[[c,"mark mapset and all diffs as done","bottom"]]),(0,s.withDirectives)((0,s.createVNode)("button",{class:["btn btn-sm me-1","WIP"==e.beatmap.status?"btn-warning":"btn-outline-warning"],disabled:"WIP"==e.beatmap.status,onClick:t[2]||(t[2]=t=>e.setStatus("WIP",t))}," WIP ",10,["disabled"]),[[c,"mark mapset as work-in-progress","bottom"]])])};const U=q,E={class:"row"},Q={class:"col-sm-12"},F={class:"table table-sm"},j=(0,s.createVNode)("th",null,"Difficulty",-1),H=(0,s.createVNode)("th",null,"Mapper(s)",-1),Z={key:0},R=(0,s.createVNode)("i",{class:"fas fa-times"},null,-1),W=(0,s.createVNode)("i",{class:"fas fa-plus"},null,-1),_=(0,s.createVNode)("i",{class:"fas fa-minus"},null,-1),X={key:0},Y=(0,s.createVNode)("i",{class:"fas fa-minus"},null,-1),G=(0,s.createVNode)("i",{class:"fas fa-check"},null,-1),K=(0,s.createVNode)("i",{class:"fas fa-ellipsis-h"},null,-1),z={key:0,class:"col-sm-12 mt-2"},J={key:0,class:"row mt-2 mb-3"},ee={class:"col-sm-12"},te={class:"input-group input-group-sm mx-auto"},ae=(0,s.createVNode)("option",{value:"osu"}," osu! ",-1),se=(0,s.createVNode)("option",{value:"taiko"}," osu!taiko ",-1),oe=(0,s.createVNode)("option",{value:"catch"}," osu!catch ",-1),ie=(0,s.createVNode)("option",{value:"mania"}," osu!mania ",-1),ne=(0,s.createVNode)("i",{class:"fas fa-plus"},null,-1),ce={key:0,class:"col-sm-12 mt-1 text-center"},re=(0,s.createTextVNode)(" Adding collaborator for the selected difficulty "),le=(0,s.createVNode)("i",{class:"fas fa-times-circle"},null,-1);var de=a(1787),ue=a(358),me=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{r(s.next(e))}catch(e){i(e)}}function c(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,c)}r((s=s.apply(e,t||[])).next())}))};const pe=(0,s.defineComponent)({name:"NewTask",props:{isHost:Boolean,taskToAddCollaborator:{type:Object,default:null},beatmap:{type:Object,required:!0}},emits:["update:taskToAddCollaborator"],data:()=>({selectedTask:ue.XE.Easy,selectedMode:de.O.Osu,requestTaskUsername:""}),computed:{remainingTasks(){let e=Object.values(ue.XE);return this.beatmap.tasksLocked&&this.beatmap.tasksLocked.length&&!this.isHost&&(e=e.filter((e=>!this.beatmap.tasksLocked.includes(e)))),this.selectedTask=e[0]||"",e}},methods:{addTask(e,t){return me(this,void 0,void 0,(function*(){if(this.requestTaskUsername&&this.requestTaskUsername.length)return void this.requestTask(e,t);let a;a=this.beatmap.mode==de.O.Hybrid?this.selectedMode:this.beatmap.mode;const s=yield this.$http.executePost("/beatmaps/addTask/"+e,{taskName:this.selectedTask,mode:a},t);this.$http.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s)}))},requestTask(e,t){return me(this,void 0,void 0,(function*(){let a;a=this.beatmap.mode==de.O.Hybrid?this.selectedMode:this.beatmap.mode;const s=yield this.$http.executePost("/beatmaps/requestTask/"+e,{taskName:this.selectedTask,user:this.requestTaskUsername,mode:a},t);this.$http.isError(s)||(this.$store.dispatch("beatmaps/updateBeatmap",s),this.$store.dispatch("updateToastMessages",{message:"Difficulty request sent!",type:"success"}))}))},addCollab(e){return me(this,void 0,void 0,(function*(){let t;t=this.beatmap.mode==de.O.Hybrid?this.taskToAddCollaborator.mode:this.beatmap.mode;const a=yield this.$http.executePost("/beatmaps/task/"+this.taskToAddCollaborator.id+"/addCollab",{user:this.requestTaskUsername,taskName:this.taskToAddCollaborator.name,mode:t},e);this.$http.isError(a)||(this.$store.dispatch("beatmaps/updateBeatmap",a),this.$store.dispatch("updateToastMessages",{message:"Collab invite sent!",type:"success"}))}))}}});pe.render=function(e,t,a,o,i,n){const c=(0,s.resolveDirective)("bs-tooltip");return"WIP"!=e.beatmap.status&&"Secret"!=e.beatmap.status||!e.remainingTasks.length?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("div",J,[(0,s.createVNode)("div",ee,[(0,s.createVNode)("div",te,[e.taskToAddCollaborator?(0,s.createCommentVNode)("",!0):(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("select",{key:0,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedTask=t),class:"form-select"},[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.remainingTasks,(e=>((0,s.openBlock)(),(0,s.createBlock)("option",{key:e,value:e},(0,s.toDisplayString)(e),9,["value"])))),128))],512)),[[s.vModelSelect,e.selectedTask]]),"hybrid"!=e.beatmap.mode||e.taskToAddCollaborator?(0,s.createCommentVNode)("",!0):(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("select",{key:1,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedMode=t),class:"form-select"},[ae,se,oe,ie],512)),[[s.vModelSelect,e.selectedMode]]),e.isHost||e.taskToAddCollaborator?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("input",{key:2,"onUpdate:modelValue":t[3]||(t[3]=t=>e.requestTaskUsername=t),class:"form-control",type:"text",placeholder:"request to... (optional)",maxlength:"18",onKeyup:t[4]||(t[4]=(0,s.withKeys)((t=>e.taskToAddCollaborator?e.addCollab(t):e.requestTask(e.beatmap.id,t)),["enter"]))},null,544)),[[s.vModelText,e.requestTaskUsername]]):(0,s.createCommentVNode)("",!0),(0,s.withDirectives)((0,s.createVNode)("button",{class:"btn btn-outline-info",onClick:t[5]||(t[5]=t=>e.taskToAddCollaborator?e.addCollab(t):e.addTask(e.beatmap.id,t))},[ne],512),[[c,"add difficulty"]])])]),e.taskToAddCollaborator?((0,s.openBlock)(),(0,s.createBlock)("div",ce,[(0,s.createVNode)("small",null,[re,(0,s.createVNode)("a",{class:"text-danger",href:"#",onClick:t[6]||(t[6]=(0,s.withModifiers)((t=>e.$emit("update:taskToAddCollaborator",null)),["prevent"]))},[le])])])):(0,s.createCommentVNode)("",!0)]))};const he=pe;var ke=a(8834),fe=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{r(s.next(e))}catch(e){i(e)}}function c(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,c)}r((s=s.apply(e,t||[])).next())}))};const be=(0,s.defineComponent)({name:"TasksChoice",components:{NewTask:he,ModesIcons:ke.Z},props:{beatmap:{type:Object,required:!0},isHost:Boolean,isRanked:Boolean,isQualified:Boolean},data:()=>({taskToAddCollaborator:null}),computed:Object.assign(Object.assign({},(0,V.rn)(["loggedInUser"])),{sortedTasks(){const e=["Easy","Normal","Hard","Insane","Expert","Storyboard"],t=["osu","taiko","catch","mania","sb"];return[...this.beatmap.tasks].sort((function(t,a){return e.indexOf(t.name)-e.indexOf(a.name)})).sort((function(e,a){return t.indexOf(e.mode)-t.indexOf(a.mode)}))}}),methods:{isOwner(e){return e.some((e=>e.osuId==this.loggedInUser.osuId))},canEditTask(e){return this.isOwner(e.mappers)||this.isHost},setTaskStatus(e,t,a){return fe(this,void 0,void 0,(function*(){a.target.classList.add("fake-button-disable");const s=yield this.$http.executePost("/beatmaps/setTaskStatus/"+e,{status:t});this.$http.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s),a.target.classList.remove("fake-button-disable")}))},removeTask(e,t){return fe(this,void 0,void 0,(function*(){t.target.classList.add("fake-button-disable");const a=yield this.$http.executePost("/beatmaps/removeTask/"+e,{beatmapId:this.beatmap.id});this.$http.isError(a)||this.$store.dispatch("beatmaps/updateBeatmap",a),t.target.classList.remove("fake-button-disable")}))},canEditTaskCollaborators(e){return"Done"!=e.status&&!this.isQualified&&"Done"!=this.beatmap.status&&this.isOwner(e.mappers)},removeCollab(e,t,a){return fe(this,void 0,void 0,(function*(){a.target.classList.add("fake-button-disable");const s=yield this.$http.executePost("/beatmaps/task/"+e+"/removeCollab",{user:t});this.$http.isError(s)||this.$store.dispatch("beatmaps/updateBeatmap",s),a.target.classList.remove("fake-button-disable")}))},isAddingCollaborator(e){var t;return(null===(t=this.taskToAddCollaborator)||void 0===t?void 0:t.id)==e.id}}});be.render=function(e,t,a,o,i,n){const c=(0,s.resolveComponent)("modes-icons"),r=(0,s.resolveComponent)("user-link"),l=(0,s.resolveComponent)("new-task"),d=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",E,[(0,s.createVNode)("div",Q,[(0,s.createVNode)("table",F,[(0,s.createVNode)("thead",null,[(0,s.createVNode)("tr",null,[j,H,e.isRanked||e.isQualified?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("th",Z))])]),(0,s.createVNode)(s.TransitionGroup,{tag:"tbody",name:"list"},{default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.sortedTasks,(a=>((0,s.openBlock)(),(0,s.createBlock)("tr",{id:a.id+"Row",key:a.id},[(0,s.createVNode)("td",{class:["text-white-50",`card-status-${a.status.toLowerCase()}`]},[(0,s.createTextVNode)((0,s.toDisplayString)(a.name)+" ",1),"hybrid"==e.beatmap.mode?((0,s.openBlock)(),(0,s.createBlock)(c,{key:0,modes:[a.mode]},null,8,["modes"])):(0,s.createCommentVNode)("",!0)],2),(0,s.createVNode)("td",null,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(a.mappers,((o,i)=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:o.id},[0==i&&e.canEditTaskCollaborators(a)?((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:0},[e.isAddingCollaborator(a)?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:"#",class:"text-danger",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.taskToAddCollaborator=null),["prevent"]))},[R],512)),[[d,"cancel"]]):(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("a",{key:1,href:"#",class:"text-success",onClick:(0,s.withModifiers)((t=>e.taskToAddCollaborator=a),["prevent"])},[W],8,["onClick"])),[[d,"invite new collaborator"]])],64)):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(r,{class:"mx-1",user:o},null,8,["user"]),a.mappers.length>1&&e.canEditTaskCollaborators(a)&&o.osuId!=e.loggedInUser.osuId?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("a",{key:1,href:"#",class:"text-danger",onClick:(0,s.withModifiers)((t=>e.removeCollab(a.id,o.id,t)),["prevent"])},[_],8,["onClick"])),[[d,"remove collaborator"]]):(0,s.createCommentVNode)("",!0)])))),128))]),e.isRanked||e.isQualified?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("td",X,[e.canEditTask(a)?((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:0},[(0,s.withDirectives)((0,s.createVNode)("a",{href:"#",class:"text-danger me-1",onClick:(0,s.withModifiers)((t=>e.removeTask(a.id,t)),["prevent"])},[Y],8,["onClick"]),[[d,"delete"]]),"WIP"==a.status?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:"#",class:"text-success me-1",onClick:(0,s.withModifiers)((t=>e.setTaskStatus(a.id,"Done",t)),["prevent"])},[G],8,["onClick"])),[[d,"mark as done"]]):(0,s.createCommentVNode)("",!0),"Done"==a.status&&"Done"!=e.beatmap.status?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("a",{key:1,href:"#",class:"text-wip me-1",onClick:(0,s.withModifiers)((t=>e.setTaskStatus(a.id,"WIP",t)),["prevent"])},[K],8,["onClick"])),[[d,"mark as WIP"]]):(0,s.createCommentVNode)("",!0)],64)):(0,s.createCommentVNode)("",!0)]))],8,["id"])))),128))])),_:1})])]),e.isRanked||e.isQualified?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("div",z,[(0,s.createVNode)(l,{"task-to-add-collaborator":e.taskToAddCollaborator,"onUpdate:task-to-add-collaborator":t[2]||(t[2]=t=>e.taskToAddCollaborator=t),beatmap:e.beatmap,"is-host":e.isHost},null,8,["task-to-add-collaborator","beatmap","is-host"])]))])};const ve=be,Be={class:"row mb-2"},ge={class:"col"},ye=(0,s.createTextVNode)(" Quest "),Ne=(0,s.createVNode)("i",{class:"fas fa-edit"},null,-1),Ve={class:"small ms-3 text-white-50"},we={key:0},Ce={key:1},xe={key:0,class:"row mb-2"},Se={class:"col"},Ie={class:"input-group input-group-sm"},De=(0,s.createVNode)("option",{value:""}," No quest ",-1);var Le=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{r(s.next(e))}catch(e){i(e)}}function c(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,c)}r((s=s.apply(e,t||[])).next())}))};const Te=(0,s.defineComponent)({name:"QuestChoice",props:{beatmap:{type:Object,required:!0}},data:()=>({userQuests:[],showQuestInput:!1,dropdownQuestId:""}),computed:(0,V.rn)(["loggedInUser"]),watch:{beatmap(){var e;this.showQuestInput=!1,this.dropdownQuestId=(null===(e=this.beatmap.quest)||void 0===e?void 0:e.id)||""}},created(){return Le(this,void 0,void 0,(function*(){const e=yield this.$http.executeGet(`/users/${this.loggedInUser.id}/quests`);this.$http.isError(e)||(this.userQuests=e)}))},methods:{linkQuest(e){return Le(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/linkQuest`,{questId:this.dropdownQuestId},e);this.$http.isError(t)||this.$store.dispatch("beatmaps/updateBeatmap",t)}))}}});Te.render=function(e,t,a,o,i,n){const c=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("div",Be,[(0,s.createVNode)("div",ge,[(0,s.createVNode)("div",null,[ye,(0,s.withDirectives)((0,s.createVNode)("a",{id:"editLink",href:"#",class:[e.showQuestInput?"text-danger":"","text-success small ms-1"],onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.showQuestInput=!e.showQuestInput),["prevent"]))},[Ne],2),[[c,"connect mapset with a quest","right"]])]),(0,s.createVNode)("div",Ve,[e.beatmap.quest?((0,s.openBlock)(),(0,s.createBlock)("span",we,(0,s.toDisplayString)(e.beatmap.quest.name),1)):((0,s.openBlock)(),(0,s.createBlock)("i",Ce,"none"))])])]),e.showQuestInput?((0,s.openBlock)(),(0,s.createBlock)("div",xe,[(0,s.createVNode)("div",Se,[(0,s.createVNode)("div",Ie,[(0,s.withDirectives)((0,s.createVNode)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.dropdownQuestId=t),class:"form-select"},[De,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.userQuests,(e=>((0,s.openBlock)(),(0,s.createBlock)("option",{key:e.id,value:e.id},(0,s.toDisplayString)(e.name),9,["value"])))),128))],512),[[s.vModelSelect,e.dropdownQuestId]]),(0,s.withDirectives)((0,s.createVNode)("button",{class:"btn btn-outline-info",onClick:t[3]||(t[3]=t=>e.linkQuest(t))}," Save ",512),[[c,"link beatmap to quest"]])])])])):(0,s.createCommentVNode)("",!0)])};const $e=Te,Me={id:"modders",class:"row mb-2"},Pe={class:"col"},Oe={key:0,class:"ms-1"},Ae={class:"small ms-3"},qe={key:0,class:"text-white-50"};var Ue=a(2064);const Ee=(0,s.defineComponent)({name:"ModdersList",components:{UserLinkList:Ue.Z},props:{canEdit:Boolean,beatmap:{type:Object,required:!0}},computed:Object.assign(Object.assign({},(0,V.rn)(["loggedInUser"])),{isModder(){return this.beatmap.modders.some((e=>e.osuId==this.loggedInUser.osuId))}}),methods:{updateModder(e){return t=this,a=void 0,o=function*(){e.target.classList.add("fake-button-disable");const t=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/updateModder`);this.$http.isError(t)||this.$store.dispatch("beatmaps/updateBeatmap",t),e.target.classList.remove("fake-button-disable")},new((s=void 0)||(s=Promise))((function(e,i){function n(e){try{r(o.next(e))}catch(e){i(e)}}function c(e){try{r(o.throw(e))}catch(e){i(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s((function(e){e(a)}))).then(n,c)}r((o=o.apply(t,a||[])).next())}));var t,a,s,o}}});Ee.render=function(e,t,a,o,i,n){const c=(0,s.resolveComponent)("user-link-list"),r=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",Me,[(0,s.createVNode)("div",Pe,[(0,s.createVNode)("div",null,[(0,s.createTextVNode)(" Modders ("+(0,s.toDisplayString)(e.beatmap.modders.length)+") ",1),e.canEdit?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("small",Oe,[(0,s.createVNode)("a",{href:"#",class:e.isModder?"text-danger":"text-success",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.updateModder(t)),["prevent"]))},[(0,s.createVNode)("i",{class:["fas",e.isModder?"fa-minus":"fa-plus"]},null,2)],2)],512)),[[r,"add/remove yourself from modder list","right"]]):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)("div",Ae,[0==e.beatmap.modders.length?((0,s.openBlock)(),(0,s.createBlock)("i",qe," none ")):((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,users:e.beatmap.modders},null,8,["users"]))])])])};const Qe=Ee,Fe={key:0,class:"ms-1"},je=(0,s.createVNode)("i",{class:"fas fa-minus"},null,-1),He=(0,s.createVNode)("i",{class:"fas fa-plus"},null,-1),Ze={class:"small ms-3"},Re={key:0,class:"text-white-50"};const We=(0,s.defineComponent)({name:"NominatorsList",components:{UserLinkList:Ue.Z},props:{canEdit:Boolean,beatmap:{type:Object,required:!0}},computed:Object.assign(Object.assign({},(0,V.rn)(["loggedInUser"])),{isBn(){return this.beatmap.bns.some((e=>e.osuId==this.loggedInUser.osuId))}}),methods:{updateBn(e){return t=this,a=void 0,o=function*(){e.target.classList.add("fake-button-disable");const t=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/updateBn`);this.$http.isError(t)||this.$store.dispatch("beatmaps/updateBeatmap",t),e.target.classList.remove("fake-button-disable")},new((s=void 0)||(s=Promise))((function(e,i){function n(e){try{r(o.next(e))}catch(e){i(e)}}function c(e){try{r(o.throw(e))}catch(e){i(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s((function(e){e(a)}))).then(n,c)}r((o=o.apply(t,a||[])).next())}));var t,a,s,o}}});We.render=function(e,t,a,o,i,n){const c=(0,s.resolveComponent)("user-link-list"),r=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("div",null,[(0,s.createTextVNode)(" Potential Nominators ("+(0,s.toDisplayString)(e.beatmap.bns.length)+") ",1),e.canEdit?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("small",Fe,[e.isBn?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:"#",class:"text-danger",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.updateBn(t)),["prevent"]))},[je])):(0,s.createCommentVNode)("",!0),!e.isBn&&e.beatmap.bns.length<2?((0,s.openBlock)(),(0,s.createBlock)("a",{key:1,href:"#",class:"text-success",onClick:t[2]||(t[2]=(0,s.withModifiers)((t=>e.updateBn(t)),["prevent"]))},[He])):(0,s.createCommentVNode)("",!0)],512)),[[r,"add/remove yourself from potential BN list","right"]]):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)("div",Ze,[0==e.beatmap.bns.length?((0,s.openBlock)(),(0,s.createBlock)("i",Re,"none")):((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,users:e.beatmap.bns},null,8,["users"]))])])};const _e=We,Xe={class:"row mb-2"},Ye={class:"col"},Ge=(0,s.createTextVNode)(" Link "),Ke=(0,s.createVNode)("i",{class:"fas fa-edit"},null,-1),ze={class:"small ms-3"},Je={key:1,class:"text-white-50"},et={key:0,class:"row mb-2"},tt={class:"col-sm-12"},at={class:"input-group input-group-sm"};const st=(0,s.defineComponent)({name:"BeatmapLink",props:{beatmap:{type:Object,required:!0}},data:()=>({url:"",showLinkInput:!1}),watch:{beatmap(e){e&&(this.showLinkInput=!1,this.url=e.url)}},created(){this.url=this.beatmap.url},methods:{saveLink(e){return t=this,a=void 0,o=function*(){const t=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/setLink`,{url:this.url},e);this.$http.isError(t)||(this.showLinkInput=!1,this.$store.dispatch("beatmaps/updateBeatmap",t))},new((s=void 0)||(s=Promise))((function(e,i){function n(e){try{r(o.next(e))}catch(e){i(e)}}function c(e){try{r(o.throw(e))}catch(e){i(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s((function(e){e(a)}))).then(n,c)}r((o=o.apply(t,a||[])).next())}));var t,a,s,o}}});st.render=function(e,t,a,o,i,n){const c=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("div",Xe,[(0,s.createVNode)("div",Ye,[(0,s.createVNode)("div",null,[Ge,(0,s.withDirectives)((0,s.createVNode)("a",{id:"editLink",href:"#",class:["text-success small ms-1",{"text-danger":e.showLinkInput}],onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.showLinkInput=!e.showLinkInput),["prevent"]))},[Ke],2),[[c,"edit link","right"]])]),(0,s.createVNode)("div",ze,[e.beatmap.url?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:e.beatmap.url,target:"_blank"},(0,s.toDisplayString)(e.beatmap.url),9,["href"])):((0,s.openBlock)(),(0,s.createBlock)("i",Je,"none"))])])]),e.showLinkInput?((0,s.openBlock)(),(0,s.createBlock)("div",et,[(0,s.createVNode)("div",tt,[(0,s.createVNode)("div",at,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.url=t),class:"form-control form-control-sm",type:"text",placeholder:"URL",onKeyup:t[3]||(t[3]=(0,s.withKeys)((t=>e.saveLink(t)),["enter"]))},null,544),[[s.vModelText,e.url]]),(0,s.withDirectives)((0,s.createVNode)("button",{id:"addLinkButton",class:"btn btn-outline-info",type:"submit",onClick:t[4]||(t[4]=t=>e.saveLink(t))}," Save ",512),[[c,"use new osu!web link for card image","right"]])])])])):(0,s.createCommentVNode)("",!0)])};const ot=st,it={id:"locks",class:"row mb-1"},nt={class:"col"},ct=(0,s.createTextVNode)(" Locks "),rt=(0,s.createVNode)("i",{class:"fas fa-edit"},null,-1),lt={class:"small ms-3"},dt={key:0},ut={key:1},mt=(0,s.createVNode)("i",{class:"fas fa-minus"},null,-1),pt={class:"text-white-50 mx-1"},ht={key:0,class:"row"},kt={class:"col"},ft={class:"input-group input-group-sm"},bt=(0,s.createVNode)("i",{class:"fas fa-lock"},null,-1);var vt=function(e,t,a,s){return new(a||(a=Promise))((function(o,i){function n(e){try{r(s.next(e))}catch(e){i(e)}}function c(e){try{r(s.throw(e))}catch(e){i(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,c)}r((s=s.apply(e,t||[])).next())}))};const Bt=(0,s.defineComponent)({name:"LocksChoice",props:{beatmap:{type:Object,required:!0}},data:()=>({lockTaskSelection:"",showLocksInput:!1}),computed:{remainingTasks(){var e,t;let a=Object.values(ue.XE);return(null===(t=null===(e=this.beatmap)||void 0===e?void 0:e.tasksLocked)||void 0===t?void 0:t.length)&&(a=a.filter((e=>!this.beatmap.tasksLocked.includes(e)))),this.lockTaskSelection=a[0]||"",a}},watch:{beatmap(){this.showLocksInput=!1}},methods:{unlockTask(e,t){return vt(this,void 0,void 0,(function*(){t.target.classList.add("fake-button-disable");const a=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/unlockTask`,{task:e});this.$http.isError(a)||this.$store.dispatch("beatmaps/updateBeatmap",a),t.target.classList.remove("fake-button-disable")}))},lockTask(e){return vt(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/lockTask`,{task:this.lockTaskSelection},e);this.$http.isError(t)||this.$store.dispatch("beatmaps/updateBeatmap",t)}))}}});Bt.render=function(e,t,a,o,i,n){const c=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("div",it,[(0,s.createVNode)("div",nt,[(0,s.createVNode)("div",null,[ct,6!=e.beatmap.tasksLocked.length?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,class:"text-success small ms-1",href:"#",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.showLocksInput=!e.showLocksInput),["prevent"]))},[rt])):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)("div",lt,[0==e.beatmap.tasksLocked.length?((0,s.openBlock)(),(0,s.createBlock)("i",dt,"none")):(0,s.createCommentVNode)("",!0),e.beatmap.tasksLocked.length>0?((0,s.openBlock)(),(0,s.createBlock)("div",ut,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.beatmap.tasksLocked,(t=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:t},[(0,s.withDirectives)((0,s.createVNode)("a",{href:"#",class:"text-danger",onClick:(0,s.withModifiers)((a=>e.unlockTask(t,a)),["prevent"])},[mt],8,["onClick"]),[[c,"unlock","left"]]),(0,s.createVNode)("span",pt,(0,s.toDisplayString)(t),1)])))),128))])):(0,s.createCommentVNode)("",!0)])])]),e.showLocksInput?((0,s.openBlock)(),(0,s.createBlock)("div",ht,[(0,s.createVNode)("div",kt,[(0,s.createVNode)("div",ft,[(0,s.withDirectives)((0,s.createVNode)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.lockTaskSelection=t),class:"form-select"},[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.remainingTasks,(e=>((0,s.openBlock)(),(0,s.createBlock)("option",{key:e,value:e},(0,s.toDisplayString)(e),9,["value"])))),128))],512),[[s.vModelSelect,e.lockTaskSelection]]),(0,s.withDirectives)((0,s.createVNode)("button",{id:"lockTask",class:"btn btn-outline-info",onClick:t[3]||(t[3]=t=>e.lockTask(t))},[bt],512),[[c,"prevent other mappers from claiming a difficulty","right"]])])])])):(0,s.createCommentVNode)("",!0)])};const gt=Bt,yt={class:"row"},Nt={class:"col-sm-12"},Vt={key:1,class:"small text-white-50 ms-2"},wt={key:2,class:"small text-white-50 ms-2"},Ct={key:0,class:"col-sm-6"},xt={class:"small text-white-50"},St={class:"col-sm-6"},It={key:0,class:"small text-white-50"},Dt={key:1,class:"col-sm-12"},Lt={class:"small text-white-50 ms-2"};const Tt=(0,s.defineComponent)({name:"Points",props:{beatmap:{type:Object,required:!0}},data:()=>({tasksPointsArray:null,usersPointsArrays:null,pointsInfo:null,totalPoints:null,isLoading:!1}),watch:{beatmap(){this.tasksPointsArray=null,this.usersPointsArrays=null,this.pointsInfo=null,this.totalPoints=null,this.isLoading=!1}},methods:{findPoints(e){return t=this,a=void 0,o=function*(){this.isLoading=!0;const t=yield this.$http.executeGet(`/beatmaps/${this.beatmap.id}/findPoints`,e);this.$http.isError(t)||(this.tasksPointsArray=t.tasksPointsArray,this.usersPointsArrays=t.usersPointsArrays,this.pointsInfo=t.pointsInfo,this.totalPoints=t.totalPoints),this.isLoading=!1},new((s=void 0)||(s=Promise))((function(e,i){function n(e){try{r(o.next(e))}catch(e){i(e)}}function c(e){try{r(o.throw(e))}catch(e){i(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s((function(e){e(a)}))).then(n,c)}r((o=o.apply(t,a||[])).next())}));var t,a,s,o}}});Tt.render=function(e,t,a,o,i,n){const c=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("div",yt,[(0,s.createVNode)("div",Nt,[e.tasksPointsArray?(0,s.createCommentVNode)("",!0):(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("button",{key:0,class:"btn btn-sm btn-outline-info ms-1",onClick:t[1]||(t[1]=t=>e.findPoints(t))}," Calculate points ",512)),[[c,"calculate points for all difficulties"]]),e.isLoading?((0,s.openBlock)(),(0,s.createBlock)("span",Vt," calculating... ")):e.pointsInfo?((0,s.openBlock)(),(0,s.createBlock)("span",wt,(0,s.toDisplayString)(e.pointsInfo),1)):(0,s.createCommentVNode)("",!0)]),e.tasksPointsArray?((0,s.openBlock)(),(0,s.createBlock)("div",Ct,[(0,s.createVNode)("ul",xt,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.tasksPointsArray,((e,t)=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t},(0,s.toDisplayString)(e),1)))),128))])])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)("div",St,[e.usersPointsArrays?((0,s.openBlock)(),(0,s.createBlock)("ul",It,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.usersPointsArrays,((t,a)=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:a},(0,s.toDisplayString)(e.usersPointsArrays[a][0])+": "+(0,s.toDisplayString)(e.usersPointsArrays[a][1]),1)))),128))])):(0,s.createCommentVNode)("",!0)]),e.totalPoints?((0,s.openBlock)(),(0,s.createBlock)("div",Dt,[(0,s.createVNode)("span",Lt," total: "+(0,s.toDisplayString)(Math.round(10*e.totalPoints)/10),1)])):(0,s.createCommentVNode)("",!0)])])};const $t=Tt;const Mt=(0,s.defineComponent)({name:"BeatmapInfo",components:{ModeChoice:P,StatusChoice:U,TasksChoice:ve,QuestChoice:$e,ModdersList:Qe,NominatorsList:_e,BeatmapLink:ot,LocksChoice:gt,Points:$t},props:{beatmap:{type:Object,required:!0}},data:()=>({userQuests:null}),computed:Object.assign(Object.assign({},(0,V.rn)(["loggedInUser"])),{isHost(){return!(!this.loggedInUser.id||!this.beatmap)&&this.loggedInUser.id===this.beatmap.host.id},isRanked(){return this.beatmap.status===de.U.Ranked},isQualified(){return this.beatmap.status===de.U.Qualified}}),methods:{deleteMap(e){return t=this,a=void 0,o=function*(){if(confirm("Are you sure you want to delete?")){e.target.disabled=!0;const t=yield this.$http.executePost(`/beatmaps/${this.beatmap.id}/delete`,{},e);this.$http.isError(t)||(this.$bs.hideModal("editBeatmap"),this.$store.commit("beatmaps/deleteBeatmap",t)),e.target.disabled=!1}},new((s=void 0)||(s=Promise))((function(e,i){function n(e){try{r(o.next(e))}catch(e){i(e)}}function c(e){try{r(o.throw(e))}catch(e){i(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s((function(e){e(a)}))).then(n,c)}r((o=o.apply(t,a||[])).next())}));var t,a,s,o}}});Mt.render=N,Mt.__scopeId="data-v-3dc524c0";const Pt=Mt},8712:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var s=a(5393);const o=(0,s.createVNode)("i",{class:"fas fa-link"},null,-1),i={key:1},n=(0,s.createTextVNode)(" |");var c=a(89),r=a(1516),l=a(1787),d=a(2643),u=a(8834);const m=(0,s.defineComponent)({components:{BeatmapInfo:c.Z,ModalDialog:r.Z,QuestImg:d.Z,ModesIcons:u.Z},props:{selectedBeatmap:{type:Object,default:()=>({})}},watch:{selectedBeatmap(){this.selectedBeatmap&&this.$route.query.id!==this.selectedBeatmap.id&&this.$router.replace(`/${this.selectedBeatmap.status===l.U.Secret?"showcase":"beatmaps"}?id=${this.selectedBeatmap.id}`)}}});m.render=function(e,t,a,c,r,l){const d=(0,s.resolveComponent)("quest-img"),u=(0,s.resolveComponent)("user-link"),m=(0,s.resolveComponent)("modes-icons"),p=(0,s.resolveComponent)("beatmap-info"),h=(0,s.resolveComponent)("modal-dialog");return(0,s.openBlock)(),(0,s.createBlock)(h,{id:"editBeatmap",loaded:Boolean(e.selectedBeatmap),"header-class":e.selectedBeatmap?"bg-"+e.selectedBeatmap.status.toLowerCase():""},{header:(0,s.withCtx)((()=>[(0,s.createVNode)(d,{beatmap:e.selectedBeatmap},null,8,["beatmap"]),e.selectedBeatmap.url?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:e.selectedBeatmap.url,target:"_blank"},[o,(0,s.createTextVNode)(" "+(0,s.toDisplayString)(e.selectedBeatmap.song.artist)+" - "+(0,s.toDisplayString)(e.selectedBeatmap.song.title),1)],8,["href"])):((0,s.openBlock)(),(0,s.createBlock)("span",i,(0,s.toDisplayString)(e.selectedBeatmap.song.artist)+" - "+(0,s.toDisplayString)(e.selectedBeatmap.song.title),1)),n,(0,s.createVNode)(u,{class:"mx-1",user:e.selectedBeatmap.host},null,8,["user"]),(0,s.createVNode)(m,{modes:[e.selectedBeatmap.mode]},null,8,["modes"])])),default:(0,s.withCtx)((()=>[(0,s.createVNode)(p,{beatmap:e.selectedBeatmap},null,8,["beatmap"])])),_:1},8,["loaded","header-class"])};const p=m}}]);