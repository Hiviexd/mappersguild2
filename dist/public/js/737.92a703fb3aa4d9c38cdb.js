(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[737],{1161:(t,e,s)=>{"use strict";var a,i;s.d(e,{U:()=>a,O:()=>i}),function(t){t.WIP="WIP",t.Done="Done",t.Qualified="Qualified",t.Ranked="Ranked",t.Secret="Secret"}(a||(a={})),function(t){t.Osu="osu",t.Taiko="taiko",t.Catch="catch",t.Mania="mania",t.Hybrid="hybrid"}(i||(i={}))},1636:(t,e,s)=>{"use strict";s.d(e,{Z:()=>c});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-dialog",{attrs:{id:"editUser","header-class":t.user?"bg-rank-"+t.user.rank:"",loaded:Boolean(t.user)},scopedSlots:t._u([{key:"header",fn:function(){return[s("a",{attrs:{href:"https://osu.ppy.sh/users/"+t.user.osuId,target:"_blank"}},[t._v("\n            "+t._s(t.user.username)+"\n        ")])]},proxy:!0},{key:"default",fn:function(){return[s("div",{staticClass:"container"},[s("p",{staticClass:"form-row"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.group,expression:"group"}],staticClass:"form-control form-control-sm w-25 mx-2",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.group=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"user"}},[t._v("\n                        User\n                    ")]),t._v(" "),s("option",{attrs:{value:"admin"}},[t._v("\n                        Admin\n                    ")]),t._v(" "),s("option",{attrs:{value:"secret"}},[t._v("\n                        Secret\n                    ")]),t._v(" "),s("option",{attrs:{value:"spectator"}},[t._v("\n                        Spectator\n                    ")])]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateGroup(e)}}},[t._v("\n                    Save group\n                ")])]),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.badge,expression:"badge"}],staticClass:"form-control form-control-sm mx-2",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.badge},on:{input:function(e){e.target.composing||(t.badge=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateBadge(e)}}},[t._v("\n                    Save badge\n                ")])]),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.discordId,expression:"discordId"}],staticClass:"form-control form-control-sm mx-2",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.discordId},on:{input:function(e){e.target.composing||(t.discordId=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateDiscordId(e)}}},[t._v("\n                    Save Discord ID\n                ")])]),t._v(" "),s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.calculateUserPoints(e)}}},[t._v("\n                    Calculate user points\n                ")])]),t._v(" "),s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.toggleBypassLogin(e)}}},[t._v("\n                    "+t._s(t.user.bypassLogin?"Enable":"Disable")+" ranked maps login requirement\n                ")])])])]},proxy:!0}])})};a._withStripped=!0;var i=s(1515),n=s(2934),o=function(t,e,s,a){return new(s||(s=Promise))((function(i,n){function o(t){try{u(a.next(t))}catch(t){n(t)}}function r(t){try{u(a.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}u((a=a.apply(t,e||[])).next())}))};const r=s.n(n)().extend({name:"UserInfo",components:{ModalDialog:i.Z},props:{user:{type:Object,default:null}},data:()=>({badge:0,discordId:"",group:""}),watch:{user(){this.badge=this.user.badge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||""}},created(){this.user&&(this.badge=this.user.badge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||"")},methods:{updateGroup(t){return o(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/updateGroup`,{group:this.group},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set group to ${e}`,type:"info"}),this.$store.commit("updateGroup",{userId:this.user.id,group:e}))}))},updateBadge(t){return o(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/updateBadge`,{badge:this.badge},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set badge to ${e}`,type:"info"}),this.$store.commit("updateBadge",{userId:this.user.id,badge:e}))}))},updateDiscordId(t){return o(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/updateDiscordId`,{discordId:this.discordId},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set discord ID to ${e}`,type:"info"}),this.$store.commit("updateDiscordId",{userId:this.user.id,discordId:e}))}))},calculateUserPoints(t){return o(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/calculateUserPoints`,{},t);e&&this.$store.dispatch("updateToastMessages",{message:`calculated points: ${e}`,type:"info"})}))},toggleBypassLogin(t){return o(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/toggleBypassLogin`,{bypassLogin:!this.user.bypassLogin},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set bypassLogin to ${e.bypassLogin}`,type:"info"}),this.$store.commit("updateBypassLogin",{userId:this.user.id,group:e.group,bypassLogin:e.bypassLogin}))}))}}});var u=(0,s(1900).Z)(r,a,[],!1,null,null,null);u.options.__file="src/components/admin/UserInfo.vue";const c=u.exports},5871:(t,e,s)=>{"use strict";s.d(e,{Z:()=>c});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-body container"},[s("h5",[t._v("\n        Associated maps\n    ")]),t._v(" "),t.associatedMaps.length?s("ul",{staticClass:"pl-3 mb-0"},t._l(t.associatedMaps,(function(e){return s("li",{key:e.id,staticClass:"text-secondary"},[s("i",{staticClass:"fas",class:["text-"+e.status.toLowerCase(),t.findIcon(e.status)],attrs:{"data-toggle":"tooltip",title:e.status}}),t._v(" "),e.url?s("a",{attrs:{href:e.url,target:"_blank"}},[t._v("\n                "+t._s(e.song.artist)+" - "+t._s(e.song.title)+"\n            ")]):s("span",[t._v(t._s(e.song.artist)+" - "+t._s(e.song.title))]),t._v("\n            by "),s("a",{attrs:{href:"https://osu.ppy.sh/users/"+e.host.osuId,target:"_blank"}},[t._v(t._s(e.host.username))])])})),0):s("div",{staticClass:"small text-white-50 ml-3"},[t._v("\n        No associated maps...\n    ")])])};a._withStripped=!0;var i=s(2934),n=s.n(i),o=s(1161);const r=n().extend({props:{associatedMaps:{type:Array,required:!0}},methods:{findIcon:t=>t==o.U.WIP?"fa-ellipsis-h":t==o.U.Done?"fa-check":t==o.U.Qualified||t==o.U.Ranked?"fa-check-circle":""}});var u=(0,s(1900).Z)(r,a,[],!1,null,"d6975d28",null);u.options.__file="src/components/quests/partyInfo/AssociatedBeatmaps.vue";const c=u.exports},127:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>w});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container card card-body py-1 mb-4"},[s("div",{staticClass:"row mx-3 mt-2"},[s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.loadActionBeatmaps(e,!1)}}},[t._v("\n                Load beatmaps\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.loadActionBeatmaps(e,!0)}}},[t._v("\n                Load WIP beatmaps\n            ")])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h5",{staticClass:"ml-4 mt-2"},[t._m(0),t._v(" "),t.actionBeatmapsLoading?s("span",{staticClass:"ml-2 small text-white-50"},[t._v("loading...")]):t._e()]),t._v(" "),s("div",{staticClass:"show",attrs:{id:"actionBeatmaps"}},[t.actionBeatmaps.length?s("table",{staticClass:"table table-sm"},[t._m(1),t._v(" "),s("tbody",t._l(t.actionBeatmaps,(function(e){return s("tr",{key:e.id,staticClass:"text-white-50"},[s("td",{attrs:{scope:"row"}},["osu"==e.mode?s("i",{staticClass:"fas fa-circle"}):"taiko"==e.mode?s("i",{staticClass:"fas fa-drum"}):"catch"==e.mode?s("i",{staticClass:"fas fa-apple-alt"}):"mania"==e.mode?s("i",{staticClass:"fas fa-stream"}):t._e(),t._v(" "),e.url?s("a",{attrs:{href:e.url}},[t._v("\n                                        "+t._s(t.generateMetadata(e.song))+"\n                                    ")]):s("span",[t._v(t._s(t.generateMetadata(e.song)))])]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                                    "+t._s(e.packId)+"\n                                ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                                    "+t._s(e.status)+"\n                                ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[s("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#editBeatmap","data-id":e.id},on:{click:function(s){return s.preventDefault(),t.$store.commit("setSelectedBeatmap",e)}}},[t._v("\n                                        edit\n                                    ")])])])})),0)]):t.actionBeatmapsLoading?t._e():s("span",{staticClass:"text-white-50 ml-5"},[t._v("None...")])])])])]),t._v(" "),s("div",{staticClass:"container card card-body py-1 mb-4"},[s("div",{staticClass:"row mx-3 mt-2"},[s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.loadActionQuests(e)}}},[t._v("\n                Load quests\n            ")])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h5",{staticClass:"ml-4 mt-2"},[t._m(2),t._v(" "),t.actionQuestsLoading?s("span",{staticClass:"ml-2 small text-white-50"},[t._v("loading...")]):t._e()]),t._v(" "),s("div",{staticClass:"show",attrs:{id:"actionQuests"}},[t.actionQuests.length?s("table",{staticClass:"table table-sm"},[t._m(3),t._v(" "),s("tbody",t._l(t.actionQuests,(function(e){return s("tr",{key:e.id,staticClass:"text-white-50"},[s("td",{attrs:{scope:"row"}},[t._v("\n                                    "+t._s(e.name)+"\n                                ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                                    "+t._s(e.creator.username)+"\n                                ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[e.modes.includes("osu")?s("i",{staticClass:"fas fa-circle"}):t._e(),t._v(" "),e.modes.includes("taiko")?s("i",{staticClass:"fas fa-drum"}):t._e(),t._v(" "),e.modes.includes("catch")?s("i",{staticClass:"fas fa-apple-alt"}):t._e(),t._v(" "),e.modes.includes("mania")?s("i",{staticClass:"fas fa-stream"}):t._e()]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                                    "+t._s(e.status)+"\n                                ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                                    "+t._s(e.requiredMapsets)+"\n                                ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[s("a",{attrs:{href:"#","data-toggle":"modal","data-target":"pending"==e.status?"#reviewQuest":"#editQuest","data-id":e.id},on:{click:function(s){return s.preventDefault(),t.$store.commit("setSelectedQuest",e)}}},[t._v("\n                                        edit\n                                    ")])])])})),0)]):t.actionQuestsLoading?t._e():s("span",{staticClass:"text-white-50 ml-5"},[t._v("None...")])])])])]),t._v(" "),s("div",{staticClass:"container card card-body py-1"},[s("div",{staticClass:"row mx-3 mt-2"},[s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.updateUserPoints(e)}}},[t._v("\n                Update user points\n            ")]),t._v(" "),t.calculatingPoints?s("span",{staticClass:"ml-2 small text-white-50"},[t._v("calculating points...")]):t._e(),t._v(" "),s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.loadActionUsers(e)}}},[t._v("\n                Load users\n            ")])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("h5",{staticClass:"ml-4 mt-2"},[t._m(4),t._v(" "),t.actionUsersLoading?s("span",{staticClass:"ml-2 small text-white-50"},[t._v("loading...")]):t._e()]),t._v(" "),t.actionUsers?s("div",{staticClass:"show",attrs:{id:"actionUsers"}},[t.actionUsers.length?s("table",{staticClass:"table table-sm"},[t._m(5),t._v(" "),s("tbody",t._l(t.actionUsers,(function(e){return s("tr",{key:e.id,staticClass:"text-white-50"},[s("td",{attrs:{scope:"row"}},[s("a",{attrs:{href:"https://osu.ppy.sh/users/"+e.osuId,target:"_blank"}},[t._v(t._s(e.username))])]),t._v(" "),s("td",{attrs:{scope:"row"}},[e.rank>0?s("i",{staticClass:"fas fa-crown",class:"text-rank-"+e.rank,attrs:{"data-toggle":"tooltip","data-placement":"top",title:"rank "+e.rank+" user"}}):t._e()]),t._v(" "),s("td",{class:{"bg-open":e.rank!=e.badge},attrs:{scope:"row"}},[e.badge>0?s("i",{staticClass:"fas fa-crown",class:"text-rank-"+e.rank,attrs:{"data-toggle":"tooltip","data-placement":"top",title:"rank "+e.rank+" user"}}):t._e()]),t._v(" "),s("td",{attrs:{scope:"row"}},[s("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#editUser","data-id":e.id},on:{click:function(s){return s.preventDefault(),t.$store.commit("setSelectedUser",e)}}},[t._v("\n                                        edit\n                                    ")])])])})),0)]):t.actionUsersLoading?t._e():s("span",{staticClass:"text-white-50 ml-5"},[t._v("None...")])]):t._e()])])]),t._v(" "),s("div",{staticClass:"radial-divisor"}),t._v(" "),t.selectedBeatmap?s("beatmap-info-admin",{attrs:{beatmap:t.selectedBeatmap},on:{"update-beatmap":function(e){return t.updateBeatmap(e)}}}):t._e(),t._v(" "),t.selectedQuest?s("quest-info",{attrs:{quest:t.selectedQuest},on:{"update-quest":function(e){return t.updateQuest(e)},"delete-quest":function(e){return t.deleteQuest(e)}}}):t._e(),t._v(" "),t.selectedQuest?s("review-quest",{attrs:{quest:t.selectedQuest}}):t._e(),t._v(" "),t.selectedUser?s("user-info",{attrs:{user:t.selectedUser},on:{"update-user":function(e){return t.updateUser(e)}}}):t._e()],1)};a._withStripped=!0;var i=s(2934),n=s.n(i),o=s(6564),r=s(1309),u=s(8999),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-dialog",{attrs:{id:"reviewQuest",loaded:Boolean(t.quest)},scopedSlots:t._u([{key:"header",fn:function(){return[t._v("\n        "+t._s(t.quest.name)+" by\n        "),s("a",{staticClass:"text-dark",attrs:{href:"https://osu.ppy.sh/users/"+t.quest.creator.osuId,target:"_blank"}},[t._v("\n            "+t._s(t.quest.creator.username)+"\n        ")])]},proxy:!0},{key:"default",fn:function(){return[s("div",{staticClass:"container"},[s("div",{staticClass:"small text-white-50"},[t._v("\n                Artist\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showArtistInput=!t.showArtistInput}}},[s("i",{staticClass:"fas fa-edit"})])]),t._v(" "),t.showArtistInput?s("p",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.artistInput,expression:"artistInput",modifiers:{number:!0}}],staticClass:"form-control form-control-sm w-100",attrs:{type:"number",autocomplete:"off",placeholder:"artist ID..."},domProps:{value:t.artistInput},on:{change:function(e){return t.updateArt(e)},input:function(e){e.target.composing||(t.artistInput=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):t.quest.art?s("p",{staticClass:"ml-2"},[s("a",{attrs:{href:"https://osu.ppy.sh/beatmaps/artists/"+t.quest.art,target:"_blank"}},[s("img",{staticClass:"card-avatar-img",attrs:{src:"https://assets.ppy.sh/artists/"+t.quest.art+"/cover.jpg"}})])]):s("p",{staticClass:"ml-2"},[t._v("\n                None\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                Name\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showNameInput=!t.showNameInput}}},[s("i",{staticClass:"fas fa-edit"})])]),t._v(" "),t.showNameInput?s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nameInput,expression:"nameInput"}],staticClass:"form-control form-control-sm w-100",attrs:{type:"text",autocomplete:"off",placeholder:"name..."},domProps:{value:t.nameInput},on:{change:function(e){return t.renameQuest(e)},input:function(e){e.target.composing||(t.nameInput=e.target.value)}}})]):s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.name)+"\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                Objective\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showObjectiveInput=!t.showObjectiveInput}}},[s("i",{staticClass:"fas fa-edit"})])]),t._v(" "),t.showObjectiveInput?s("p",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objectiveInput,expression:"objectiveInput"}],staticClass:"form-control form-control-sm w-100",attrs:{rows:"2",type:"text",autocomplete:"off",placeholder:"objective..."},domProps:{value:t.objectiveInput},on:{change:function(e){return t.updateDescription(e)},input:function(e){e.target.composing||(t.objectiveInput=e.target.value)}}})]):s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.descriptionMain)+"\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                Required mapsets\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showRequiredMapsetsInput=!t.showRequiredMapsetsInput}}},[s("i",{staticClass:"fas fa-edit"})])]),t._v(" "),t.showRequiredMapsetsInput?s("p",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.requiredMapsetsInput,expression:"requiredMapsetsInput",modifiers:{number:!0}}],staticClass:"form-control form-control-sm w-100",attrs:{type:"number",autocomplete:"off",placeholder:"required mapsets..."},domProps:{value:t.requiredMapsetsInput},on:{change:function(e){return t.updateRequiredMapsets(e)},input:function(e){e.target.composing||(t.requiredMapsetsInput=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.requiredMapsets)+"\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                Price\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showPriceInput=!t.showPriceInput}}},[s("i",{staticClass:"fas fa-edit"})])]),t._v(" "),t.showPriceInput?s("p",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.priceInput,expression:"priceInput",modifiers:{number:!0}}],staticClass:"form-control form-control-sm w-100",attrs:{type:"number",autocomplete:"off",placeholder:"price per party member..."},domProps:{value:t.priceInput},on:{change:function(e){return t.updatePrice(e)},input:function(e){e.target.composing||(t.priceInput=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.price)+" points per user\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                Timeframe\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showTimeframeInput=!t.showTimeframeInput}}},[s("i",{staticClass:"fas fa-edit"})])]),t._v(" "),t.showTimeframeInput?s("p",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.timeframeInput,expression:"timeframeInput",modifiers:{number:!0}}],staticClass:"form-control form-control-sm w-100",attrs:{type:"number",autocomplete:"off",placeholder:"days..."},domProps:{value:t.timeframeInput},on:{change:function(e){return t.updateTimeframe(e)},input:function(e){e.target.composing||(t.timeframeInput=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.timeframe/864e5)+" days\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                Party size\n                "),s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showPartySizeInput=!t.showPartySizeInput}}},[s("i",{staticClass:"fas fa-edit"})])]),t._v(" "),t.showPartySizeInput?s("p",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.minPartyInput,expression:"minPartyInput",modifiers:{number:!0}}],staticClass:"form-control form-control-sm w-100",attrs:{type:"number",autocomplete:"off",placeholder:"minimum"},domProps:{value:t.minPartyInput},on:{change:function(e){return t.updateMinParty(e)},input:function(e){e.target.composing||(t.minPartyInput=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.maxPartyInput,expression:"maxPartyInput",modifiers:{number:!0}}],staticClass:"form-control form-control-sm w-100",attrs:{type:"number",autocomplete:"off",placeholder:"maximum"},domProps:{value:t.maxPartyInput},on:{change:function(e){return t.updateMaxParty(e)},input:function(e){e.target.composing||(t.maxPartyInput=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.minParty)+"-"+t._s(t.quest.maxParty)+" members\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                Party rank\n            ")]),t._v(" "),s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.minRank)+" rank required\n            ")]),t._v(" "),s("div",{staticClass:"small text-white-50"},[t._v("\n                MBC\n            ")]),t._v(" "),s("p",{staticClass:"ml-2"},[t._v("\n                "+t._s(t.quest.isMbc?"yes":"no")+"\n            ")]),t._v(" "),s("div",{staticClass:"radial-divisor"}),t._v(" "),s("button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit"},on:{click:function(e){return t.acceptPendingQuest(e)}}},[t._v("\n                Publish quest\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger btn-block",attrs:{type:"submit"},on:{click:function(e){return t.rejectPendingQuest(e)}}},[t._v("\n                Reject quest\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-outline-secondary btn-block",attrs:{"data-toggle":"collapse","data-target":"#forumPm"}},[t._v("\n                See rejection message "),s("i",{staticClass:"fas fa-angle-down"})]),t._v(" "),s("div",{staticClass:"collapse",attrs:{id:"forumPm"}},[s("copy-paste",[s("div",[t._v("hello, you're receiving this message because you submitted a Mappers' Guild quest for review")]),t._v(" "),s("div",[t._v("[box=your quest info]")]),t._v(" "),s("div",[t._v("Artist: "+t._s("https://osu.ppy.sh/beatmaps/artists/"+t.quest.art))]),t._v(" "),s("div",[t._v("Name: "+t._s(t.quest.name))]),t._v(" "),s("div",[t._v("Objective: "+t._s(t.quest.descriptionMain))]),t._v(" "),s("div",[t._v("Required mapsets: "+t._s(t.quest.requiredMapsets))]),t._v(" "),s("div",[t._v("Price: "+t._s(t.quest.price)+" points per user")]),t._v(" "),s("div",[t._v("Timeframe: "+t._s(t.quest.timeframe/864e5)+" days")]),t._v(" "),s("div",[t._v("Party size: "+t._s(t.quest.minParty)+"-"+t._s(t.quest.maxParty)+" members")]),t._v(" "),s("div",[t._v("[/box]")]),t._v(" "),s("div",[t._v("your quest has been rejected for the following reason(s):")]),t._v(" "),s("div",[t._v("[notice] REASONS [/notice]")]),t._v(" "),s("div",[t._v("points spent for submitting the quest have been returned to your \"available points\" pool. if you'd like to modify the quest according to above feedback, you can resubmit it and i'll review it again! or if you'd like to submit any other quest, that's fine too!")]),t._v(" "),s("div",[t._v("thanks for being cool")])])],1)])]},proxy:!0}])})};c._withStripped=!0;var d=s(1515),p=s(5030),l=function(t,e,s,a){return new(s||(s=Promise))((function(i,n){function o(t){try{u(a.next(t))}catch(t){n(t)}}function r(t){try{u(a.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}u((a=a.apply(t,e||[])).next())}))};const m=n().extend({name:"ReviewQuest",components:{CopyPaste:p.Z,ModalDialog:d.Z},props:{quest:{type:Object,required:!0}},data(){return{showArtistInput:!1,artistInput:this.quest.art,showNameInput:!1,nameInput:this.quest.name,showObjectiveInput:!1,objectiveInput:this.quest.descriptionMain,showRequiredMapsetsInput:!1,requiredMapsetsInput:this.quest.requiredMapsets,showPriceInput:!1,priceInput:this.quest.price,showTimeframeInput:!1,timeframeInput:this.quest.timeframe/864e5,showPartySizeInput:!1,minPartyInput:this.quest.minParty,maxPartyInput:this.quest.maxParty}},watch:{quest(){this.showArtistInput=!1,this.artistInput=this.quest.art,this.showNameInput=!1,this.nameInput=this.quest.name,this.showObjectiveInput=!1,this.objectiveInput=this.quest.descriptionMain,this.showRequiredMapsetsInput=!1,this.requiredMapsetsInput=this.quest.requiredMapsets,this.showPriceInput=!1,this.priceInput=this.quest.price,this.showTimeframeInput=!1,this.timeframeInput=this.quest.timeframe/864e5}},methods:{acceptPendingQuest(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/publish`,{},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"published quest",type:"info"}),this.$store.commit("updateStatus",{questId:this.quest.id,status:e}),$("#reviewQuest").modal("hide"))}))},rejectPendingQuest(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/reject`,{},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"rejected quest",type:"info"}),this.$store.commit("updateStatus",{questId:this.quest.id,status:e}),$("#reviewQuest").modal("hide"))}))},updateArt(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/updateArt`,{art:this.artistInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated artist",type:"info"}),this.$store.commit("updateArt",{questId:this.quest.id,art:e}),this.showArtistInput=!1)}))},renameQuest(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/rename`,{name:this.nameInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"renamed quest",type:"info"}),this.$store.commit("renameQuest",{questId:this.quest.id,name:e}),this.showNameInput=!1)}))},updateDescription(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/updateDescription/`,{description:this.objectiveInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated quest description",type:"info"}),this.$store.commit("updateDescription",{questId:this.quest.id,description:e}),this.showObjectiveInput=!1)}))},updateRequiredMapsets(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/updateRequiredMapsets`,{requiredMapsets:this.requiredMapsetsInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated required mapsets",type:"info"}),this.$store.commit("updateRequiredMapsets",{questId:this.quest.id,requiredMapsets:e}),this.showRequiredMapsetsInput=!1)}))},updatePrice(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/updatePrice`,{price:this.priceInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated price",type:"info"}),this.$store.commit("updatePrice",{questId:this.quest.id,price:e}),this.showPriceInput=!1)}))},updateTimeframe(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/updateTimeframe`,{timeframe:this.timeframeInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated timeframe",type:"info"}),this.$store.commit("updateTimeframe",{questId:this.quest.id,timeframe:e}),this.showTimeframeInput=!1)}))},updateMinParty(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/updateMinParty`,{minParty:this.minPartyInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated minParty",type:"info"}),this.$store.commit("updateMinParty",{questId:this.quest.id,minParty:e}),this.showPartySizeInput=!1)}))},updateMaxParty(t){return l(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/quests/${this.quest.id}/updateMaxParty`,{maxParty:this.maxPartyInput},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated maxParty",type:"info"}),this.$store.commit("updateMaxParty",{questId:this.quest.id,maxParty:e}),this.showPartySizeInput=!1)}))}}});var v=s(1900),h=(0,v.Z)(m,c,[],!1,null,"1c6a2bdc",null);h.options.__file="src/components/admin/quests/ReviewQuest.vue";const f=h.exports;var _=s(1636),g=s(1161);const b={state:{actionBeatmaps:[],actionBeatmapsLoading:!1,actionQuests:[],actionQuestsLoading:!1,actionUsers:[],actionUsersLoading:!1,selectedBeatmap:null,selectedQuest:null,selectedUser:null},mutations:{setActionBeatmaps(t,e){t.actionBeatmaps=e},setActionBeatmapsLoading(t,e){t.actionBeatmapsLoading=e},setActionQuests(t,e){t.actionQuests=e},setActionQuestsLoading(t,e){t.actionQuestsLoading=e},setActionUsers(t,e){t.actionUsers=e},setActionUsersLoading(t,e){t.actionUsersLoading=e},setSelectedBeatmap(t,e){t.selectedBeatmap=e},setSelectedQuest(t,e){t.selectedQuest=e},setSelectedUser(t,e){t.selectedUser=e},updateBeatmapStatus(t,e){const s=t.actionBeatmaps.find((t=>t.id==e.beatmapId));if(s&&(s.status=e.status,s.status==g.U.Ranked)){const s=t.actionBeatmaps.findIndex((t=>t.id===e.beatmapId));t.actionBeatmaps.splice(s,1)}},deleteTask(t,e){const s=t.actionBeatmaps.find((t=>t.id==e.beatmapId));if(s){const t=s.tasks.findIndex((t=>t.id==e.taskId));-1!==t&&s.tasks.splice(t,1)}},deleteModder(t,e){const s=t.actionBeatmaps.find((t=>t.id==e.beatmapId));if(s){const t=s.modders.findIndex((t=>t.id==e.modderId));-1!==t&&s.modders.splice(t,1)}},updateUrl(t,e){const s=t.actionBeatmaps.find((t=>t.id==e.beatmapId));s&&(s.url=e.url)},updateStoryboardQuality(t,e){const s=t.actionBeatmaps.find((t=>t.id==e.beatmapId));if(s){const t=s.tasks.findIndex((t=>t.id==e.taskId));-1!==t&&n().set(s.tasks,t,e.task)}},updatePackId(t,e){const s=t.actionBeatmaps.find((t=>t.id==e.beatmapId));s&&(s.packId=e.packId)},updateArt(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.art=e.art)},renameQuest(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.name=e.name)},updateDescription(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.descriptionMain=e.description)},updateRequiredMapsets(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.requiredMapsets=e.requiredMapsets)},updatePrice(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.price=e.price)},updateTimeframe(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.timeframe=864e5*e.timeframe)},updateMinParty(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.minParty=e.minParty)},updateMaxParty(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));s&&(s.maxParty=e.maxParty)},updateStatus(t,e){const s=t.actionQuests.find((t=>t.id==e.questId));if(s&&(s.status=e.status,"open"==s.status||"rejected"==s.status)){const s=t.actionQuests.findIndex((t=>t.id===e.questId));t.actionQuests.splice(s,1)}},updateGroup(t,e){const s=t.actionUsers.find((t=>t.id==e.userId));s&&(s.group=e.group)},updateBadge(t,e){const s=t.actionUsers.find((t=>t.id==e.userId));if(s&&(s.badge=e.badge,s.badge==s.rank)){const s=t.actionUsers.findIndex((t=>t.id===e.userId));t.actionUsers.splice(s,1)}},updateDiscordId(t,e){const s=t.actionUsers.find((t=>t.id==e.userId));s&&(s.discordId=e.discordId)},updateBypassLogin(t,e){const s=t.actionUsers.find((t=>t.id==e.userId));s&&(s.bypassLogin=e.bypassLogin)}}};var I=function(t,e,s,a){return new(s||(s=Promise))((function(i,n){function o(t){try{u(a.next(t))}catch(t){n(t)}}function r(t){try{u(a.throw(t))}catch(t){n(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}u((a=a.apply(t,e||[])).next())}))};const y=n().extend({name:"AdminPage",components:{BeatmapInfoAdmin:r.Z,QuestInfo:u.Z,ReviewQuest:f,UserInfo:_.Z},data:()=>({calculatingPoints:!1}),computed:(0,o.rn)({actionBeatmaps:t=>t.admin.actionBeatmaps,actionBeatmapsLoading:t=>t.admin.actionBeatmapsLoading,actionQuests:t=>t.admin.actionQuests,actionQuestsLoading:t=>t.admin.actionQuestsLoading,actionUsers:t=>t.admin.actionUsers,actionUsersLoading:t=>t.admin.actionUsersLoading,selectedBeatmap:t=>t.admin.selectedBeatmap,selectedQuest:t=>t.admin.selectedQuest,selectedUser:t=>t.admin.selectedUser}),beforeCreate(){this.$store.hasModule("admin")||this.$store.registerModule("admin",b)},destroyed(){this.$store.hasModule("admin")&&this.$store.unregisterModule("admin")},methods:{generateMetadata(t){let e=t.artist+" - ";return t.title.length>40?e+=t.title.slice(0,40)+"...":e+=t.title,e},loadActionBeatmaps(t,e){return I(this,void 0,void 0,(function*(){let s=!0;if(e&&(s=confirm("Are you sure you want to load WIP beatmaps? This will take a while...")),s){this.$store.commit("setActionBeatmaps",[]),this.$store.commit("setActionBeatmapsLoading",!0);const s=yield this.executeGet(`/admin/loadActionBeatmaps/${e}`,t);this.isError(s)||this.$store.commit("setActionBeatmaps",s),this.$store.commit("setActionBeatmapsLoading",!1)}}))},loadActionQuests(t){return I(this,void 0,void 0,(function*(){this.$store.commit("setActionQuests",[]),this.$store.commit("setActionQuestsLoading",!0);const e=yield this.executeGet("/admin/loadActionQuests",t);this.isError(e)||this.$store.commit("setActionQuests",e),this.$store.commit("setActionQuestsLoading",!1)}))},loadActionUsers(t){return I(this,void 0,void 0,(function*(){this.$store.commit("setActionUsers",[]),this.$store.commit("setActionUsersLoading",!0);const e=yield this.executeGet("/admin/loadActionUsers",t);this.isError(e)||this.$store.commit("setActionUsers",e),this.$store.commit("setActionUsersLoading",!1)}))},updateUserPoints(t){return I(this,void 0,void 0,(function*(){this.calculatingPoints=!0,(yield this.executePost("/admin/users/updateAllUserPoints",{},t))&&(this.calculatingPoints=!1)}))}}});var q=(0,v.Z)(y,a,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{attrs:{href:"#actionBeatmaps","data-toggle":"collapse"}},[t._v("\n                        Beatmaps\n                        "),s("i",{staticClass:"fas fa-angle-down"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",{attrs:{scope:"col"}},[t._v("\n                                METADATA\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                PACK ID\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                STATUS\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                EDIT\n                            ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{attrs:{href:"#actionQuests","data-toggle":"collapse"}},[t._v("\n                        Quests\n                        "),s("i",{staticClass:"fas fa-angle-down"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",{attrs:{scope:"col"}},[t._v("\n                                NAME\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                CREATOR\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                MODES\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                STATUS\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                MAPSETS\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                EDIT\n                            ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{attrs:{href:"#actionUsers","data-toggle":"collapse"}},[t._v("\n                        Users\n                        "),s("i",{staticClass:"fas fa-angle-down"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",{attrs:{scope:"col"}},[t._v("\n                                USERNAME\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                RANK\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                BADGE\n                            ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                                EDIT\n                            ")])])}],!1,null,null,null);q.options.__file="src/pages/AdminPage.vue";const w=q.exports}}]);