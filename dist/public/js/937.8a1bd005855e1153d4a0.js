(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[937],{285:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});var s=o(5393);const n={name:"CopyPaste",props:{distinct:{type:String,default:""}},methods:{copy(){const e=document.querySelector(`#copyText${this.distinct}`);e.classList.add("animate-flicker"),this.$store.dispatch("updateToastMessages",{message:"Copied",type:"info"}),setTimeout((()=>{e.classList.remove("animate-flicker")}),500);const t=e.innerHTML.replace(/<br>/gi,"\r\n"),o=document.createElement("div");o.innerHTML=t,navigator.clipboard.writeText(o.textContent.trim())}},render:function(e,t,o,n,r,i){return(0,s.openBlock)(),(0,s.createBlock)("div",{id:"copyText"+o.distinct,class:"copy-text small text-white-50 font-monospace",onClick:t[1]||(t[1]=(...e)=>i.copy&&i.copy(...e))},[(0,s.renderSlot)(e.$slots,"default")],8,["id"])}}},1516:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var s=o(5393);const n={class:"modal fade",tabindex:"-1"},r={key:0,class:"modal-content the-a-background"},i={class:"modal-title"},c=(0,s.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),a={class:"modal-body"},d={key:0,class:"modal-footer"},l=(0,s.defineComponent)({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});l.render=function(e,t,o,l,u,p){return(0,s.openBlock)(),(0,s.createBlock)("div",n,[(0,s.createVNode)("div",{class:["modal-dialog modal-fullscreen-lg-down",`modal-${e.modalSize}`]},[e.loaded?((0,s.openBlock)(),(0,s.createBlock)("div",r,[(0,s.createVNode)("div",{class:["modal-header",e.headerClass||"bg-primary"]},[(0,s.createVNode)("h5",i,[(0,s.renderSlot)(e.$slots,"header",{},(()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.title),1)]))]),c],2),(0,s.createVNode)("div",a,[(0,s.renderSlot)(e.$slots,"default")]),e.$slots.footer?((0,s.openBlock)(),(0,s.createBlock)("div",d,[(0,s.renderSlot)(e.$slots,"footer")])):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)],2)])};const u=l},558:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>jt});var s=o(5393),n=o(6564);const r={class:"container card card-body py-3 mb-2"},i={class:"container"},c=(0,s.createTextVNode)(" Submissions "),a=(0,s.createVNode)("hr",null,null,-1),d=(0,s.createTextVNode)(" Screeners and Judges "),l={key:2,class:"row"},u={key:3},p=(0,s.createTextVNode)(" Screening Results "),m=(0,s.createVNode)("hr",null,null,-1),h=(0,s.createTextVNode)(" Judging Criteria "),g=(0,s.createTextVNode)(" Judging Results "),f=(0,s.withScopeId)("data-v-c6d30242");(0,s.pushScopeId)("data-v-c6d30242");const y={class:"text-white-50"},k={key:0},v=(0,s.createVNode)("i",{class:"fas fa-edit"},null,-1);(0,s.popScopeId)();const S=f(((e,t,o,n,r,i)=>((0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("p",y,[e.showContestStartDateInput?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("input",{key:1,"onUpdate:modelValue":t[1]||(t[1]=t=>e.newContestStart=t),class:"form-control form-control-sm date-input d-inline",type:"text",autocomplete:"off",placeholder:"yyyy-mm-dd",onChange:t[2]||(t[2]=t=>e.updateContestStart(t))},null,544)),[[s.vModelText,e.newContestStart]]):((0,s.openBlock)(),(0,s.createBlock)("span",k,(0,s.toDisplayString)(e.contestStart?"Started: "+e.contestStart:"No start date set"),1)),(0,s.createVNode)("a",{href:"#",class:"ms-1 d-inline",onClick:t[3]||(t[3]=(0,s.withModifiers)((t=>e.showContestStartDateInput=!e.showContestStartDateInput),["prevent"]))},[v])])]))));const b=(0,s.defineComponent)({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null}},data(){return{newContestStart:this.contestStart,showContestStartDateInput:!1}},methods:{updateContestStart(e){return t=this,o=void 0,n=function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/updateContestStart`,{date:this.newContestStart},e);this.$http.isError(t)||(this.showContestStartDateInput=!1,this.$store.dispatch("updateToastMessages",{message:"updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:t}))},new((s=void 0)||(s=Promise))((function(e,r){function i(e){try{a(n.next(e))}catch(e){r(e)}}function c(e){try{a(n.throw(e))}catch(e){r(e)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(i,c)}a((n=n.apply(t,o||[])).next())}));var t,o,s,n}}});b.render=S,b.__scopeId="data-v-c6d30242";const C=b,B=(0,s.withScopeId)("data-v-47e4af42");(0,s.pushScopeId)("data-v-47e4af42");const w={class:"text-white-50"},V={key:0,class:"text-capitalize"},N=(0,s.createVNode)("option",{value:"beatmapping"}," Beatmapping ",-1),I=(0,s.createVNode)("option",{value:"screening"}," Screening ",-1),x=(0,s.createVNode)("option",{value:"judging"}," Judging ",-1),D=(0,s.createVNode)("option",{value:"complete"}," Complete ",-1),j=(0,s.createVNode)("i",{class:"fas fa-edit"},null,-1);(0,s.popScopeId)();const $=B(((e,t,o,n,r,i)=>((0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("p",w,[e.showStatusInput?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("select",{key:1,"onUpdate:modelValue":t[1]||(t[1]=t=>e.newStatus=t),class:"form-select form-select-sm w-25 d-inline",onChange:t[2]||(t[2]=t=>e.updateStatus(t))},[N,I,x,D],544)),[[s.vModelSelect,e.newStatus]]):((0,s.openBlock)(),(0,s.createBlock)("span",V," status: "+(0,s.toDisplayString)(e.status),1)),(0,s.createVNode)("a",{href:"#",class:"ms-1 d-inline",onClick:t[3]||(t[3]=(0,s.withModifiers)((t=>e.showStatusInput=!e.showStatusInput),["prevent"]))},[j])])]))));const T=(0,s.defineComponent)({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null}},data(){return{newStatus:this.status,showStatusInput:!1}},methods:{updateStatus(e){return t=this,o=void 0,n=function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/updateStatus`,{status:this.newStatus},e);this.$http.isError(t)||(this.showStatusInput=!1,this.$store.dispatch("updateToastMessages",{message:"updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:t}))},new((s=void 0)||(s=Promise))((function(e,r){function i(e){try{a(n.next(e))}catch(e){r(e)}}function c(e){try{a(n.throw(e))}catch(e){r(e)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(i,c)}a((n=n.apply(t,o||[])).next())}));var t,o,s,n}}});T.render=$,T.__scopeId="data-v-47e4af42";const M=T,J={class:"row"},F={key:0},P={key:1,class:"text-white-50 m-4"};var L=function(e,t,o,s){return new(o||(o=Promise))((function(n,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function c(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};const A=(0,s.defineComponent)({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),methods:{addScreener(e){return L(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`added ${this.screenerInput} (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:t}))}))},removeScreener(e,t){return L(this,void 0,void 0,(function*(){const o=yield this.$http.executePost(`/admin/contests/${this.contestId}/screeners/remove`,{screenerId:e},t);this.$http.isError(o)||(this.$store.dispatch("updateToastMessages",{message:"deleted",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:e}))}))}}});A.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("user-link");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("p",J,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.screenerInput=t),class:"form-control form-control-sm w-50",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:t[2]||(t[2]=(0,s.withKeys)((t=>e.addScreener(t)),["enter"]))},null,544),[[s.vModelText,e.screenerInput,void 0,{number:!0}]])]),e.screeners.length?((0,s.openBlock)(),(0,s.createBlock)("ul",F,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.screeners,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t.id},[(0,s.createVNode)(c,{user:t},null,8,["user"]),e.confirmDelete!=t.id?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:"#",class:"text-danger",onClick:(0,s.withModifiers)((o=>e.confirmDelete=t.id),["prevent"])}," delete ",8,["onClick"])):((0,s.openBlock)(),(0,s.createBlock)("a",{key:1,class:"text-danger",href:"#",onClick:(0,s.withModifiers)((o=>e.removeScreener(t.id,o)),["prevent"])}," confirm ",8,["onClick"]))])))),128))])):((0,s.openBlock)(),(0,s.createBlock)("div",P," None... "))])};const q=A,R={class:"row"},E={key:0},z={key:1,class:"text-white-50 m-4"};var O=function(e,t,o,s){return new(o||(o=Promise))((function(n,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function c(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};const U=(0,s.defineComponent)({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),methods:{addJudge(e){return O(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`added ${this.judgeInput} (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:t}))}))},removeJudge(e,t){return O(this,void 0,void 0,(function*(){const o=yield this.$http.executePost(`/admin/contests/${this.contestId}/judges/remove`,{judgeId:e},t);this.$http.isError(o)||(this.$store.dispatch("updateToastMessages",{message:"deleted",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:e}))}))}}});U.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("user-link");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("p",R,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.judgeInput=t),class:"form-control form-control-sm w-50",autocomplete:"off",placeholder:"new judge's username/osuId...",onKeyup:t[2]||(t[2]=(0,s.withKeys)((t=>e.addJudge(t)),["enter"]))},null,544),[[s.vModelText,e.judgeInput,void 0,{number:!0}]])]),e.judges.length?((0,s.openBlock)(),(0,s.createBlock)("ul",E,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.judges,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t.id},[(0,s.createVNode)(c,{user:t},null,8,["user"]),e.confirmDelete!=t.id?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:"#",class:"text-danger",onClick:(0,s.withModifiers)((o=>e.confirmDelete=t.id),["prevent"])}," delete ",8,["onClick"])):((0,s.openBlock)(),(0,s.createBlock)("a",{key:1,class:"text-danger",href:"#",onClick:(0,s.withModifiers)((o=>e.removeJudge(t.id,o)),["prevent"])}," confirm ",8,["onClick"]))])))),128))])):((0,s.openBlock)(),(0,s.createBlock)("div",z," None... "))])};const _=U,H=(0,s.createTextVNode)(" Judging threshold: "),Z={class:"d-flex justify-content-between"},K=(0,s.createVNode)("i",{class:"fas fa-angle-down"},null,-1),G={class:"p-3"},Q={class:"ms-4 small text-white-50",style:{"word-break":"break-word"}},W={key:0},X=(0,s.defineComponent)({name:"ScreeningDetail",props:{evaluations:{type:Array,required:!0}}});X.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("user-link");return(0,s.openBlock)(),(0,s.createBlock)("div",G,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.evaluations,(e=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:e.id},[(0,s.createVNode)("div",null,[(0,s.createVNode)(c,{user:e.screener},null,8,["user"]),(0,s.createTextVNode)(" ("+(0,s.toDisplayString)(e.vote)+") ",1),(0,s.createVNode)("div",Q,(0,s.toDisplayString)(e.comment),1)])])))),128)),e.evaluations.length?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("div",W," No screenings... "))])};const Y=X,ee=(0,s.createVNode)("button",{class:"btn btn-sm btn-outline-info"}," Send results PM ",-1);var te=o(285);const oe=(0,s.defineComponent)({name:"MessageTemplate",components:{CopyPaste:te.Z},props:{osuId:{type:Number,default:0},submissionId:{type:String,required:!0},contestName:{type:String,required:!0}},methods:{sendResultsPm(e){return t=this,o=void 0,n=function*(){const t=yield this.$http.executePost("/admin/contests/sendResultsPm",{contestName:this.contestName,submissionId:this.submissionId,osuId:this.osuId},e);this.$http.isError(t)||this.$store.dispatch("updateToastMessages",{message:"sent results pm",type:"info"})},new((s=void 0)||(s=Promise))((function(e,r){function i(e){try{a(n.next(e))}catch(e){r(e)}}function c(e){try{a(n.throw(e))}catch(e){r(e)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(i,c)}a((n=n.apply(t,o||[])).next())}));var t,o,s,n}}});oe.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("copy-paste");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("a",{href:"https://osu.ppy.sh/community/chat?sendto="+e.osuId,target:"_blank"},[ee],8,["href"]),(0,s.createVNode)(c,{distinct:e.submissionId},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)(' hello, thank you for recently participating in "'+(0,s.toDisplayString)(e.contestName)+'"! screening/judging details on your submission can be found here: https://mappersguild.com/contestresults?submission='+(0,s.toDisplayString)(e.submissionId),1)])),_:1},8,["distinct"])])};const se=oe;const ne=(0,s.defineComponent)({name:"ScreeningResults",components:{ScreeningDetail:Y,MessageTemplate:se},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const e=JSON.parse(JSON.stringify(this.submissions));for(let t=0;t<e.length;t++){const o=e[t].evaluations.reduce(((e,t)=>t.vote?e+t.vote:e),0);e[t].total=o}return e.sort(((e,t)=>e.total>t.total?-1:t.total>e.total?1:0)),e}},methods:{updateJudgingThreshold(e){return t=this,o=void 0,n=function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated judging threshold",type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:t}))},new((s=void 0)||(s=Promise))((function(e,r){function i(e){try{a(n.next(e))}catch(e){r(e)}}function c(e){try{a(n.throw(e))}catch(e){r(e)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(i,c)}a((n=n.apply(t,o||[])).next())}));var t,o,s,n}}});ne.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("screening-detail"),a=(0,s.resolveComponent)("message-template");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("p",null,[H,(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.newJudgingThreshold=t),class:"form-control form-control-sm w-25",type:"text",autocomplete:"off",placeholder:"lowest score judges see..."},null,512),[[s.vModelText,e.newJudgingThreshold]]),(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:t[2]||(t[2]=t=>e.updateJudgingThreshold(t))}," Save ")]),(0,s.createVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.sortedSubmissions,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t.id},[(0,s.createVNode)("div",Z,[(0,s.createVNode)("a",{class:t.total>=e.judgingThreshold?"text-success":"","data-bs-toggle":"collapse",href:`#collapse-${t.id}`},[(0,s.createTextVNode)((0,s.toDisplayString)(t.name)+" ("+(0,s.toDisplayString)(t.total)+") ",1),K],10,["href"])]),(0,s.createVNode)("div",{id:`collapse-${t.id}`,class:"collapse"},[(0,s.createVNode)("div",null,[(0,s.createVNode)(c,{evaluations:t.evaluations},null,8,["evaluations"]),(0,s.createVNode)(a,{"osu-id":t.creator.osuId,"submission-id":t.id,"contest-name":e.contestName},null,8,["osu-id","submission-id","contest-name"])])],8,["id"])])))),128))])])};const re=ne,ie={key:0},ce={class:"container"},ae={key:0,class:"table table-sm table-responsive-lg"},de=(0,s.createVNode)("thead",null,[(0,s.createVNode)("tr",null,[(0,s.createVNode)("th",null,"User"),(0,s.createVNode)("th",null,"Count"),(0,s.createVNode)("th",null,"Judges")])],-1),le={key:1,class:"text-white-50"},ue={class:"container"},pe={key:1,class:"small text-capitalize ms-3"},me={class:"small text-white-50",style:{"white-space":"pre-line"}},he={key:0};var ge=o(1516);const fe=(0,s.defineComponent)({name:"JudgingDetail",components:{ModalDialog:ge.Z},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(e){const t=this.commentsExpanded.findIndex((t=>t===e));-1!==t?this.commentsExpanded.splice(t,1):this.commentsExpanded.push(e)},getCollapseClass(e){return this.commentsExpanded.includes(e)?"fa-chevron-down":"fa-chevron-right"}}});fe.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("user-link"),a=(0,s.resolveComponent)("modal-dialog");return(0,s.openBlock)(),(0,s.createBlock)(a,{id:"detailModal",loaded:Boolean(e.submission)},{header:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.submission.creator.username)+" ("+(0,s.toDisplayString)(e.submission.name)+") ",1)])),default:(0,s.withCtx)((()=>[(0,s.createVNode)("div",ue,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.submission.judgings,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:t.id},[(0,s.createVNode)(c,{user:t.judge},null,8,["user"]),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(t.judgingScores,(t=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:t.id,class:"my-1"},["comments"==t.criteria.name?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${t.id}`,onClick:o=>e.showComment(t.id)},[(0,s.createVNode)("i",{class:["small fas me-2",e.getCollapseClass(t.id)]},null,2),(0,s.createTextVNode)(" "+(0,s.toDisplayString)(t.criteria.name),1)],8,["href","onClick"])):((0,s.openBlock)(),(0,s.createBlock)("span",pe,(0,s.toDisplayString)(t.criteria.name)+" ("+(0,s.toDisplayString)(t.score)+") ",1)),(0,s.createVNode)("p",{id:`judgingToCriteria${t.id}`,class:"text-light ms-4 collapse"},[(0,s.createVNode)("span",me,(0,s.toDisplayString)(t.comment),1)],8,["id"])])))),128)),o<e.submission.judgings.length-1?((0,s.openBlock)(),(0,s.createBlock)("hr",he)):(0,s.createCommentVNode)("",!0)])))),128))])])),_:1},8,["loaded"])};const ye=fe,ke={class:"container"},ve={class:"row my-3"},Se={class:"col-sm"},be=(0,s.createTextVNode)(" | "),Ce=(0,s.createTextVNode)(" | "),Be={class:"row"},we={class:"col-sm"},Ve={class:"table table-sm table-responsive-lg"},Ne=(0,s.createVNode)("th",null,"#",-1),Ie=(0,s.createVNode)("th",null,"Name",-1),xe={class:"cursor-default"},De=(0,s.createVNode)("td",null,null,-1),je=(0,s.createVNode)("td",null,"AVG",-1),$e=(0,s.createVNode)("td",null,null,-1),Te=(0,s.createVNode)("td",null,null,-1),Me={class:"cursor-default"},Je=(0,s.createVNode)("td",null,null,-1),Fe=(0,s.createVNode)("td",null,"SD",-1),Pe=(0,s.createVNode)("td",null,null,-1),Le=(0,s.createVNode)("td",null,null,-1),Ae={class:"cursor-default"},qe=(0,s.createVNode)("td",null,null,-1),Re=(0,s.createVNode)("td",null,"COR",-1),Ee=(0,s.createVNode)("td",null,null,-1),ze=(0,s.createVNode)("td",null,null,-1),Oe=(0,s.defineComponent)({name:"JudgingLeaderboard",props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data(){return{selectedScore:null,displayMode:"criterias",sortDesc:!1,judges:this.contest.judges}},computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((e=>{var t;return e.creator.id==(null===(t=this.selectedScore)||void 0===t?void 0:t.creator.id)}))}},methods:{getCriteriaScore(e,t){var o;return(null===(o=e.criteriaSum.find((e=>e.criteriaId===t)))||void 0===o?void 0:o.sum)||0},getJudgeScore(e,t,o=!1){const s=e.judgingSum.find((e=>e.judgeId===t)),n=(null==s?void 0:s.standardized)||0;return o?`${(null==s?void 0:s.sum)||0} (${n.toFixed(3)})`:(null==s?void 0:s.sum)||0},getJudgeAvg(e){var t;return(null===(t=this.judgesCorrel.find((t=>t.id===e)))||void 0===t?void 0:t.rawAvg.toFixed(4))||0},getJudgeSd(e){var t;return(null===(t=this.judgesCorrel.find((t=>t.id===e)))||void 0===t?void 0:t.sd.toFixed(4))||0},getJudgeCorrel(e){var t;return((null===(t=this.judgesCorrel.find((t=>t.id===e)))||void 0===t?void 0:t.correl)||0).toFixed(4)},getFinalScore:e=>isNaN(e)?"0":e.toFixed(4),sortByCriteria(e){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:e,sortDesc:this.sortDesc})},sortByJudge(e){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:e,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});Oe.render=function(e,t,o,n,r,i){return(0,s.openBlock)(),(0,s.createBlock)("div",ke,[(0,s.createVNode)("div",ve,[(0,s.createVNode)("div",Se,[(0,s.createVNode)("a",{href:"#",class:"criterias"===e.displayMode?"border-bottom border-secondary":"",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.displayMode="criterias"),["prevent"]))}," Criteria ",2),be,(0,s.createVNode)("a",{href:"#",class:"judges"===e.displayMode?"border-bottom border-secondary":"",onClick:t[2]||(t[2]=(0,s.withModifiers)((t=>e.displayMode="judges"),["prevent"]))}," Judge ",2),Ce,(0,s.createVNode)("a",{href:"#",class:"detail"===e.displayMode?"border-bottom border-secondary":"",onClick:t[3]||(t[3]=(0,s.withModifiers)((t=>e.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),(0,s.createVNode)("div",Be,[(0,s.createVNode)("div",we,[(0,s.createVNode)("table",Ve,[(0,s.createVNode)("thead",null,[(0,s.createVNode)("tr",null,[Ne,Ie,"criterias"===e.displayMode?((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,{key:0},(0,s.renderList)(e.contest.criterias,(t=>((0,s.openBlock)(),(0,s.createBlock)("th",{key:t.id},[(0,s.createVNode)("a",{href:"#",class:"text-capitalize",onClick:(0,s.withModifiers)((o=>e.sortByCriteria(t.id)),["prevent"])},(0,s.toDisplayString)(t.name),9,["onClick"])])))),128)):((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,{key:1},(0,s.renderList)(e.judges,(t=>((0,s.openBlock)(),(0,s.createBlock)("th",{key:t.id},[(0,s.createVNode)("a",{href:"#",onClick:(0,s.withModifiers)((o=>e.sortByJudge(t.id)),["prevent"])},(0,s.toDisplayString)(t.username),9,["onClick"])])))),128)),(0,s.createVNode)("th",null,[(0,s.createVNode)("a",{href:"#",onClick:t[4]||(t[4]=(0,s.withModifiers)(((...t)=>e.sortByRawScore&&e.sortByRawScore(...t)),["prevent"]))}," Final Score (raw) ")]),(0,s.createVNode)("th",null,[(0,s.createVNode)("a",{href:"#",onClick:t[5]||(t[5]=(0,s.withModifiers)(((...t)=>e.sortByStdScore&&e.sortByStdScore(...t)),["prevent"]))}," Final Score (standardized) ")])])]),(0,s.createVNode)("tbody",null,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.usersScores,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("tr",{key:o,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:o=>e.selectedScore=t},[(0,s.createVNode)("td",null,(0,s.toDisplayString)(o+1),1),(0,s.createVNode)("td",null,(0,s.toDisplayString)(t.creator.username),1),"criterias"===e.displayMode?((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,{key:0},(0,s.renderList)(e.contest.criterias,(o=>((0,s.openBlock)(),(0,s.createBlock)("td",{key:o.id},(0,s.toDisplayString)(e.getCriteriaScore(t,o.id)),1)))),128)):((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,{key:1},(0,s.renderList)(e.judges,(o=>((0,s.openBlock)(),(0,s.createBlock)("td",{key:o.id},(0,s.toDisplayString)(e.getJudgeScore(t,o.id,"detail"===e.displayMode)),1)))),128)),(0,s.createVNode)("td",null,(0,s.toDisplayString)(t.rawFinalScore),1),(0,s.createVNode)("td",null,(0,s.toDisplayString)(e.getFinalScore(t.standardizedFinalScore)),1)],8,["onClick"])))),128)),"detail"===e.displayMode?((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:0},[(0,s.createVNode)("tr",xe,[De,je,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.judges,(t=>((0,s.openBlock)(),(0,s.createBlock)("td",{key:t.id},(0,s.toDisplayString)(e.getJudgeAvg(t.id)),1)))),128)),$e,Te]),(0,s.createVNode)("tr",Me,[Je,Fe,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.judges,(t=>((0,s.openBlock)(),(0,s.createBlock)("td",{key:t.id},(0,s.toDisplayString)(e.getJudgeSd(t.id)),1)))),128)),Pe,Le]),(0,s.createVNode)("tr",Ae,[qe,Re,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.judges,(t=>((0,s.openBlock)(),(0,s.createBlock)("td",{key:t.id},(0,s.toDisplayString)(e.getJudgeCorrel(t.id)),1)))),128)),Ee,ze])],64)):(0,s.createCommentVNode)("",!0)])])])])])};const Ue=Oe,_e=(0,s.createVNode)("div",null," | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | ",-1),He=(0,s.defineComponent)({name:"MarkdownJudgingLeaderboard",components:{CopyPaste:te.Z},props:{usersScores:{type:Array,required:!0},contest:{type:Object,required:!0},judgeCount:{type:Number,required:!0}},methods:{getSubmissionIdByCreatorId(e){var t;return(null===(t=this.contest)||void 0===t?void 0:t.submissions.find((t=>t.creator.id===e))).id},getCriteriaSumbyName(e,t){const o=t.find((t=>t.name===e));return(null==o?void 0:o.sum)||NaN}}});He.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("copy-paste");return(0,s.openBlock)(),(0,s.createBlock)(c,null,{default:(0,s.withCtx)((()=>[(0,s.createVNode)("div",null," | Rank | Beatmap | Judging | Musical representation ("+(0,s.toDisplayString)(10*e.judgeCount)+") | Creativity ("+(0,s.toDisplayString)(10*e.judgeCount)+") | Gameplay ("+(0,s.toDisplayString)(10*e.judgeCount)+") | Limitation ("+(0,s.toDisplayString)(5*e.judgeCount)+") | Raw total | Standardized total | ",1),_e,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.usersScores,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:o}," | \\#"+(0,s.toDisplayString)(o+1)+" | [TITLE](LINK) by ["+(0,s.toDisplayString)(t.creator.username)+"](https://osu.ppy.sh/users/"+(0,s.toDisplayString)(t.creator.osuId)+") | [see details](https://mappersguild.com/contestresults?submission="+(0,s.toDisplayString)(e.getSubmissionIdByCreatorId(t.creator.id))+") | "+(0,s.toDisplayString)(e.getCriteriaSumbyName("musical representation",t.criteriaSum))+" | "+(0,s.toDisplayString)(e.getCriteriaSumbyName("creativity",t.criteriaSum))+" | "+(0,s.toDisplayString)(e.getCriteriaSumbyName("gameplay",t.criteriaSum))+" | "+(0,s.toDisplayString)(e.getCriteriaSumbyName("limitation",t.criteriaSum))+" | **"+(0,s.toDisplayString)(t.rawFinalScore)+"** | **"+(0,s.toDisplayString)(Math.round(100*t.standardizedFinalScore)/100)+"** ",1)))),128))])),_:1})};const Ze=He;const Ke=(0,s.defineComponent)({name:"JudgingResults",components:{JudgingDetail:ye,JudgingLeaderboard:Ue,MarkdownJudgingLeaderboard:Ze},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var e;return(null===(e=this.contest)||void 0===e?void 0:e.judges.length)||0}},created(){return e=this,t=void 0,s=function*(){const e=yield this.$http.executeGet(`/admin/judging/${this.contestId}`);this.$http.isError(e)||(this.contest=e.contest,this.usersScores=e.usersScores,this.judgesCorrel=e.judgesCorrel)},new((o=void 0)||(o=Promise))((function(n,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function c(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}));var e,t,o,s},methods:{getJudgesInvolvedCount:e=>e.judgings.map((e=>e.judge)).length,getJudgesInvolved:e=>e.judgings.map((e=>e.judge.username)).join(", "),getSubmissionIdByCreatorId(e){var t;return(null===(t=this.contest)||void 0===t?void 0:t.submissions.find((t=>t.creator.id===e))).id}}});Ke.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("judging-leaderboard"),a=(0,s.resolveComponent)("markdown-judging-leaderboard"),d=(0,s.resolveComponent)("judging-detail");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[e.contest?((0,s.openBlock)(),(0,s.createBlock)("div",ie,[(0,s.createVNode)(c,{contest:e.contest,"users-scores":e.usersScores,"judges-correl":e.judgesCorrel},null,8,["contest","users-scores","judges-correl"]),(0,s.createVNode)("div",ce,[e.contest.submissions.length?((0,s.openBlock)(),(0,s.createBlock)("table",ae,[de,(0,s.createVNode)("tbody",null,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.contest.submissions,(t=>((0,s.openBlock)(),(0,s.createBlock)("tr",{key:t.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",onClick:o=>e.selected=t},[(0,s.createVNode)("td",null,(0,s.toDisplayString)(`${t.creator.username} (${t.name||"Not anonymized"})`),1),(0,s.createVNode)("td",{class:e.getJudgesInvolvedCount(t)>=e.judgeCount?"text-success":"text-danger"},(0,s.toDisplayString)(e.getJudgesInvolvedCount(t))+" done of "+(0,s.toDisplayString)(e.judgeCount),3),(0,s.createVNode)("td",null,(0,s.toDisplayString)(e.getJudgesInvolved(t)),1)],8,["onClick"])))),128))])])):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)(a,{"users-scores":e.usersScores,contest:e.contest,"judge-count":e.judgeCount},null,8,["users-scores","contest","judge-count"]),(0,s.createVNode)(d,{id:"detailModalAdmin",submission:e.selected},null,8,["submission"])])):((0,s.openBlock)(),(0,s.createBlock)("div",le," Loading... "))])};const Ge=Ke,Qe={class:"list-unstyled ms-4"},We={class:"text-white-50 ms-1 text-capitalize"},Xe={class:"row"};var Ye=function(e,t,o,s){return new(o||(o=Promise))((function(n,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function c(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};const et=(0,s.defineComponent)({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({allCriterias:[],nameInput:"",maxScoreInput:""}),computed:{criteriaIds(){return this.criterias.map((e=>e.id))}},created(){return Ye(this,void 0,void 0,(function*(){yield this.loadAllCriterias()}))},methods:{loadAllCriterias(){return Ye(this,void 0,void 0,(function*(){const e=yield this.$http.executeGet("/admin/contests/criterias/");this.$http.isError(e)||(this.allCriterias=e.criterias)}))},toggleCriteria(e){return Ye(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/toggleCriteria`,{criteriaId:e});this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"toggled criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))}))},addCriteria(e){return Ye(this,void 0,void 0,(function*(){const t=yield this.$http.executePost("/admin/contests/addCriteria",{name:this.nameInput.toLowerCase(),maxScore:parseInt(this.maxScoreInput)},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"added criteria",type:"info"}),this.allCriterias=t)}))}}});et.render=function(e,t,o,n,r,i){return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("ul",Qe,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.allCriterias,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t.id},[(0,s.createVNode)("a",{href:"#",onClick:(0,s.withModifiers)((o=>e.toggleCriteria(t.id)),["prevent"])},[(0,s.createVNode)("i",{class:["fas",e.criteriaIds.includes(t.id)?"text-done fa-check":"text-danger fa-times"]},null,2)],8,["onClick"]),(0,s.createVNode)("span",We,(0,s.toDisplayString)(t.name)+" ("+(0,s.toDisplayString)(t.maxScore)+")",1)])))),128))]),(0,s.createVNode)("p",Xe,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.nameInput=t),class:"form-control form-control-sm w-25 col-sm-2 me-2",type:"text",autocomplete:"off",placeholder:"new criteria's name..."},null,512),[[s.vModelText,e.nameInput]]),(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.maxScoreInput=t),class:"form-control form-control-sm w-25 col-sm-2 me-2",type:"text",autocomplete:"off",placeholder:"new criteria's max score..."},null,512),[[s.vModelText,e.maxScoreInput]]),(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info col-sm-2 me-2",onClick:t[3]||(t[3]=t=>e.addCriteria(t))}," Add criteria ")])])};const tt=et,ot={class:"row"},st={key:0},nt={key:1},rt=(0,s.createVNode)("span",{class:"text-white-50 me-1"},"by",-1),it={key:2};var ct=function(e,t,o,s){return new(o||(o=Promise))((function(n,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function c(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};const at=(0,s.defineComponent)({name:"SubmissionsInfo",props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null}),methods:{addSubmission(e){return ct(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/submissions/create`,{name:this.name,osuId:this.creatorOsuId},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`added ${this.creatorOsuId} as ${this.name}`,type:"info"}),this.$store.commit("addSubmission",{contestId:this.contestId,submission:t}))}))},addSubmissionsFromCsv(e){return ct(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/submissions/createFromCsv`,{},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"added csv entries",type:"info"}),this.$store.commit("addSubmissionsFromCsv",{contestId:this.contestId,submissions:t}))}))},deleteSubmission(e,t){return ct(this,void 0,void 0,(function*(){const o=yield this.$http.executePost(`/admin/contests/${this.contestId}/submissions/${e}/delete`,{},t);this.$http.isError(o)||(this.$store.dispatch("updateToastMessages",{message:"deleted",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:e}))}))}}});at.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("user-link");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("p",ot,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.name=t),class:"form-control form-control-sm w-25 col-sm-3 me-2",type:"text",autocomplete:"off",placeholder:"new submission's name..."},null,512),[[s.vModelText,e.name]]),(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.creatorOsuId=t),class:"form-control form-control-sm w-25 col-sm-3 me-2",type:"text",autocomplete:"off",placeholder:"new submission's creator osuId..."},null,512),[[s.vModelText,e.creatorOsuId]]),(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info col-sm-3 me-2",onClick:t[3]||(t[3]=t=>e.addSubmission(t))}," Add submission ")]),e.submissions.length?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("p",st,[(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:t[4]||(t[4]=t=>e.addSubmissionsFromCsv(t))}," Add submissions from CSV (local only) ")])),e.submissions.length?((0,s.openBlock)(),(0,s.createBlock)("ul",nt,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.submissions,(t=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:t.id},[(0,s.createTextVNode)((0,s.toDisplayString)(t.name)+" ",1),rt,(0,s.createVNode)(c,{user:t.creator},null,8,["user"]),e.confirmDelete!=t.id?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:"#",class:"text-danger",onClick:(0,s.withModifiers)((o=>e.confirmDelete=t.id),["prevent"])}," delete ",8,["onClick"])):((0,s.openBlock)(),(0,s.createBlock)("a",{key:1,class:"text-danger",href:"#",onClick:(0,s.withModifiers)((o=>e.deleteSubmission(t.id,o)),["prevent"])}," confirm ",8,["onClick"]))])))),128))])):((0,s.openBlock)(),(0,s.createBlock)("div",it," None... "))])};const dt=at,lt=(0,s.withScopeId)("data-v-3dd9bf4e");(0,s.pushScopeId)("data-v-3dd9bf4e");const ut={class:"text-white-50"},pt=(0,s.createTextVNode)(" Download: "),mt={key:1},ht=(0,s.createVNode)("i",{class:"fas fa-edit"},null,-1);(0,s.popScopeId)();const gt=lt(((e,t,o,n,r,i)=>((0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("p",ut,[pt,!e.showDownloadInput&&e.download?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:e.download,target:"_blank"},(0,s.toDisplayString)(e.download),9,["href"])):e.showDownloadInput?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("input",{key:2,"onUpdate:modelValue":t[1]||(t[1]=t=>e.newDownload=t),class:"form-control form-control-sm w-50 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:t[2]||(t[2]=t=>e.updateDownload(t))},null,544)),[[s.vModelText,e.newDownload]]):((0,s.openBlock)(),(0,s.createBlock)("span",mt,"No download")),(0,s.createVNode)("a",{href:"#",class:"ms-1 d-inline",onClick:t[3]||(t[3]=(0,s.withModifiers)((t=>e.showDownloadInput=!e.showDownloadInput),["prevent"]))},[ht])])]))));const ft=(0,s.defineComponent)({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download,showDownloadInput:!1}},methods:{updateDownload(e){return t=this,o=void 0,n=function*(){const t=yield this.$http.executePost(`/admin/contests/${this.contestId}/updateDownload`,{download:this.newDownload},e);this.$http.isError(t)||(this.showDownloadInput=!1,this.$store.dispatch("updateToastMessages",{message:"updated contest start date",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:t}))},new((s=void 0)||(s=Promise))((function(e,r){function i(e){try{a(n.next(e))}catch(e){r(e)}}function c(e){try{a(n.throw(e))}catch(e){r(e)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(i,c)}a((n=n.apply(t,o||[])).next())}));var t,o,s,n}}});ft.render=gt,ft.__scopeId="data-v-3dd9bf4e";const yt=ft,kt=(0,s.createTextVNode)(" Thanks to "),vt=(0,s.createTextVNode)(" for screening this month's entries, as well as "),St=(0,s.createTextVNode)(" for judging this month's finalists! "),bt=(0,s.defineComponent)({name:"MarkdownHelperThanks",components:{CopyPaste:te.Z},props:{screeners:{type:Array,default:()=>[]},judges:{type:Array,default:()=>[]}}});bt.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("copy-paste");return(0,s.openBlock)(),(0,s.createBlock)(c,null,{default:(0,s.withCtx)((()=>[kt,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.screeners,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("span",{key:t.id}," ["+(0,s.toDisplayString)(t.username)+"](https://osu.ppy.sh/users/"+(0,s.toDisplayString)(t.osuId)+")"+(0,s.toDisplayString)(o===e.screeners.length-2?", and ":o===e.screeners.length-1?"":", "),1)))),128)),vt,((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.judges,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("span",{key:"j-"+t.id}," ["+(0,s.toDisplayString)(t.username)+"](https://osu.ppy.sh/users/"+(0,s.toDisplayString)(t.osuId)+")"+(0,s.toDisplayString)(o===e.judges.length-2?", and ":o===e.judges.length-1?"":", "),1)))),128)),St])),_:1})};const Ct=bt,Bt=(0,s.defineComponent)({name:"ContestInfo",components:{DateInfo:C,StatusInfo:M,ScreenersInfo:q,JudgesInfo:_,ScreeningResults:re,JudgingResults:Ge,CriteriaSelection:tt,SubmissionsInfo:dt,DownloadInfo:yt,MarkdownHelperThanks:Ct},props:{contest:{type:Object,required:!0}},data(){return{newContestStart:this.contest.contestStart,showContestStartDateInput:!1,screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}}});Bt.render=function(e,t,o,n,f,y){const k=(0,s.resolveComponent)("date-info"),v=(0,s.resolveComponent)("status-info"),S=(0,s.resolveComponent)("submissions-info"),b=(0,s.resolveComponent)("download-info"),C=(0,s.resolveComponent)("screeners-info"),B=(0,s.resolveComponent)("judges-info"),w=(0,s.resolveComponent)("markdown-helper-thanks"),V=(0,s.resolveComponent)("screening-results"),N=(0,s.resolveComponent)("criteria-selection"),I=(0,s.resolveComponent)("judging-results");return(0,s.openBlock)(),(0,s.createBlock)("div",r,[(0,s.createVNode)("h4",null,(0,s.toDisplayString)(e.contest.name),1),(0,s.createVNode)("div",i,[(0,s.createVNode)(k,{"contest-id":e.contest.id,"contest-start":e.contest.contestStart?e.contest.contestStart.slice(0,10):null},null,8,["contest-id","contest-start"]),(0,s.createVNode)(v,{"contest-id":e.contest.id,status:e.contest.status},null,8,["contest-id","status"]),(0,s.createVNode)("div",null,[(0,s.createVNode)("h5",null,[c,(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:t[1]||(t[1]=t=>e.submissionsVisible=!e.submissionsVisible)},(0,s.toDisplayString)(e.submissionsVisible?"Hide":"Show"),1)]),e.submissionsVisible?((0,s.openBlock)(),(0,s.createBlock)(S,{key:0,"contest-id":e.contest.id,submissions:e.contest.submissions},null,8,["contest-id","submissions"])):(0,s.createCommentVNode)("",!0),e.submissionsVisible?((0,s.openBlock)(),(0,s.createBlock)(b,{key:1,"contest-id":e.contest.id,download:e.contest.download},null,8,["contest-id","download"])):(0,s.createCommentVNode)("",!0),a,(0,s.createVNode)("h5",null,[d,(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:t[2]||(t[2]=t=>e.screenersAndJudgesVisible=!e.screenersAndJudgesVisible)},(0,s.toDisplayString)(e.screenersAndJudgesVisible?"Hide":"Show"),1)]),e.screenersAndJudgesVisible?((0,s.openBlock)(),(0,s.createBlock)("div",l,[(0,s.createVNode)(C,{class:"col-sm-6","contest-id":e.contest.id,screeners:e.contest.screeners},null,8,["contest-id","screeners"]),(0,s.createVNode)(B,{class:"col-sm-6","contest-id":e.contest.id,judges:e.contest.judges},null,8,["contest-id","judges"]),(0,s.createVNode)(w,{screeners:e.contest.screeners,judges:e.contest.judges},null,8,["screeners","judges"])])):(0,s.createCommentVNode)("",!0),e.contest.submissions.length?((0,s.openBlock)(),(0,s.createBlock)("div",u,[(0,s.createVNode)("h5",null,[p,(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:t[3]||(t[3]=t=>e.screeningResultsVisible=!e.screeningResultsVisible)},(0,s.toDisplayString)(e.screeningResultsVisible?"Hide":"Show"),1)]),e.screeningResultsVisible?((0,s.openBlock)(),(0,s.createBlock)(V,{key:0,"contest-id":e.contest.id,"contest-name":e.contest.name,submissions:e.contest.submissions,"judging-threshold":e.contest.judgingThreshold},null,8,["contest-id","contest-name","submissions","judging-threshold"])):(0,s.createCommentVNode)("",!0),m,(0,s.createVNode)("h5",null,[h,(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:t[4]||(t[4]=t=>e.judgingCriteriaVisible=!e.judgingCriteriaVisible)},(0,s.toDisplayString)(e.judgingCriteriaVisible?"Hide":"Show"),1)]),e.judgingCriteriaVisible?((0,s.openBlock)(),(0,s.createBlock)(N,{key:1,"contest-id":e.contest.id,criterias:e.contest.criterias},null,8,["contest-id","criterias"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)("h5",null,[g,(0,s.createVNode)("button",{type:"button",class:"btn btn-sm btn-outline-info",onClick:t[5]||(t[5]=t=>e.judgingResultsVisible=!e.judgingResultsVisible)},(0,s.toDisplayString)(e.judgingResultsVisible?"Hide":"Show"),1)]),e.judgingResultsVisible?((0,s.openBlock)(),(0,s.createBlock)(I,{key:2,"contest-id":e.contest.id},null,8,["contest-id"])):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)])])])};const wt=Bt,Vt={class:"container card card-body py-3 mb-2"};const Nt=(0,s.defineComponent)({name:"AddContest",data:()=>({contestName:""}),methods:{addContest(e){return t=this,o=void 0,n=function*(){const t=yield this.$http.executePost("/admin/contests/create",{name:this.contestName},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",t))},new((s=void 0)||(s=Promise))((function(e,r){function i(e){try{a(n.next(e))}catch(e){r(e)}}function c(e){try{a(n.throw(e))}catch(e){r(e)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(i,c)}a((n=n.apply(t,o||[])).next())}));var t,o,s,n}}});Nt.render=function(e,t,o,n,r,i){return(0,s.openBlock)(),(0,s.createBlock)("div",Vt,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.contestName=t),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[s.vModelText,e.contestName,void 0,{trim:!0}]]),(0,s.createVNode)("button",{class:"btn w-100 btn-info",type:"button",onClick:t[2]||(t[2]=t=>e.addContest(t))}," Add new contest ")])};const It=Nt,xt={state:{contests:[]},mutations:{setContests(e,t){e.contests=t},addContest(e,t){e.contests.unshift(t)},addSubmission(e,t){const o=e.contests.find((e=>e.id==t.contestId));null==o||o.submissions.push(t.submission)},addSubmissionsFromCsv(e,t){const o=e.contests.find((e=>e.id==t.contestId));o&&(o.submissions=t.submissions)},deleteSubmission(e,t){const o=e.contests.find((e=>e.id==t.contestId));if(o){const e=o.submissions.findIndex((e=>e.id==t.submissionId));-1!==e&&o.submissions.splice(e,1)}},addScreener(e,t){const o=e.contests.find((e=>e.id==t.contestId));null==o||o.screeners.push(t.screener)},deleteScreener(e,t){const o=e.contests.find((e=>e.id==t.contestId));if(o){const e=o.screeners.findIndex((e=>e.id==t.screenerId));-1!==e&&o.screeners.splice(e,1)}},addJudge(e,t){const o=e.contests.find((e=>e.id==t.contestId));null==o||o.judges.push(t.judge)},deleteJudge(e,t){const o=e.contests.find((e=>e.id==t.contestId));if(o){const e=o.screeners.findIndex((e=>e.id==t.screenerId));-1!==e&&o.screeners.splice(e,1)}},updateStatus(e,t){const o=e.contests.find((e=>e.id==t.contestId));o&&(o.status=t.status)},updateContestStart(e,t){const o=e.contests.find((e=>e.id==t.contestId));o&&(o.contestStart=t.contestStart)},updateDownload(e,t){const o=e.contests.find((e=>e.id==t.contestId));o&&(o.download=t.download)},updateJudgingThreshold(e,t){const o=e.contests.find((e=>e.id==t.contestId));o&&(o.judgingThreshold=t.judgingThreshold)},updateContestCriterias(e,t){const o=e.contests.find((e=>e.id==t.contestId));o&&(o.criterias=t.criterias)}}};const Dt=(0,s.defineComponent)({name:"ContestPage",components:{ContestInfo:wt,AddContest:It},computed:(0,n.rn)({contests:e=>e.contests.contests}),beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",xt)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},created(){return e=this,t=void 0,s=function*(){const e=yield this.$http.initialRequest("/admin/contests/relevantInfo");this.$http.isError(e)||this.$store.commit("setContests",e)},new((o=void 0)||(o=Promise))((function(n,r){function i(e){try{a(s.next(e))}catch(e){r(e)}}function c(e){try{a(s.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}));var e,t,o,s}});Dt.render=function(e,t,o,n,r,i){const c=(0,s.resolveComponent)("add-contest"),a=(0,s.resolveComponent)("contest-info");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)(c),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.contests,(e=>((0,s.openBlock)(),(0,s.createBlock)(a,{key:e.id,contest:e},null,8,["contest"])))),128))])};const jt=Dt}}]);