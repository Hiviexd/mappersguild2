(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[218],{3173:(t,e,s)=>{"use strict";s.d(e,{Z:()=>u});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data.length?s("table",{staticClass:"table table-sm"},[s("thead",[t._l(t.headers,(function(e){return s("th",{key:e},[t._v("\n                "+t._s(e)+"\n            ")])})),t._v(" "),s("th",[t._v("EDIT")])],2),t._v(" "),s("tbody",t._l(t.data,(function(e){return s("tr",{key:e.id,staticClass:"text-white-50"},[t._t("default",null,{obj:e}),t._v(" "),s("td",[s("a",{attrs:{href:"#","data-toggle":"modal","data-target":t.customDataTarget||"#edit"},on:{click:function(s){return s.preventDefault(),t.$emit("update:selected-id",e.id)}}},[t._v("\n                        edit\n                    ")])])],2)})),0)]):t.isLoading?t._e():s("span",{staticClass:"text-white-50"},[t._v("None...")])])};a._withStripped=!0;var n=s(2934);const i=s.n(n)().extend({name:"DataTable",props:{data:{type:Array,required:!0},headers:{type:Array,required:!0},isLoading:Boolean,customDataTarget:{type:String,default:null}}});var d=(0,s(1900).Z)(i,a,[],!1,null,null,null);d.options.__file="src/components/admin/DataTable.vue";const u=d.exports},4541:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>f});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container card card-body py-1"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-sm btn-info btn-block",attrs:{"data-toggle":"modal","data-target":"#submitQuest"}},[t._v("\n                    Add quest\n                ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.removeDuplicatePartyMembers(e)}}},[t._v("\n                    Remove duplicate party members\n                ")]),t._v(" "),s("data-table",{attrs:{data:t.quests,headers:["name","creator","modes","status","mapsets"],"custom-data-target":"#editQuest"},on:{"update:selected-id":function(e){t.selectedQuestId=e}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.obj;return[s("td",[t._v("\n                        "+t._s(a.name)+"\n                    ")]),t._v(" "),s("td",[t._v("\n                        "+t._s(a.creator.username)+"\n                    ")]),t._v(" "),s("td",[a.modes.includes("osu")?s("i",{staticClass:"fas fa-circle"}):t._e(),t._v(" "),a.modes.includes("taiko")?s("i",{staticClass:"fas fa-drum"}):t._e(),t._v(" "),a.modes.includes("catch")?s("i",{staticClass:"fas fa-apple-alt"}):t._e(),t._v(" "),a.modes.includes("mania")?s("i",{staticClass:"fas fa-stream"}):t._e()]),t._v(" "),s("td",[t._v("\n                        "+t._s(a.status)+"\n                    ")]),t._v(" "),s("td",[t._v("\n                        "+t._s(a.requiredMapsets)+"\n                    ")])]}}])})],1)])]),t._v(" "),s("submit-quest-modal",{attrs:{"is-admin":!0}}),t._v(" "),t.selectedQuest?s("quest-info",{attrs:{quest:t.selectedQuest},on:{"update-quest":function(e){return t.updateQuest(e)},"delete-quest":function(e){return t.deleteQuest(e)}}}):t._e()],1)};a._withStripped=!0;var n=s(2934),i=s.n(n),d=s(6564),u=s(5278),r=s(8999),o=s(3173);const c={state:{quests:[]},mutations:{setQuests(t,e){t.quests=e},updateQuest(t,e){const s=t.quests.findIndex((t=>t.id===e.id));-1!==s&&i().set(t.quests,s,e)},addQuest(t,e){t.quests.push(e)},deleteQuest(t,e){const s=t.quests.findIndex((t=>t.id===e.id));t.quests.splice(s,1)},renameQuest(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.name=e.name)},updatePrice(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.price=e.price)},updateRequiredMapsets(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.requiredMapsets=e.requiredMapsets)},updateDescription(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.descriptionMain=e.description)},resetQuestDeadline(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.deadline=e.deadline)},updateExpiration(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.expiration=e.expiration)},updateMinParty(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.minParty=e.minParty)},updateMaxParty(t,e){const s=t.quests.find((t=>t.id==e.questId));s&&(s.maxParty=e.maxParty)}}};var l=function(t,e,s,a){return new(s||(s=Promise))((function(n,i){function d(t){try{r(a.next(t))}catch(t){i(t)}}function u(t){try{r(a.throw(t))}catch(t){i(t)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(d,u)}r((a=a.apply(t,e||[])).next())}))};const p=i().extend({components:{DataTable:o.Z,SubmitQuestModal:u.Z,QuestInfo:r.Z},data:()=>({selectedQuestId:""}),computed:Object.assign(Object.assign({},(0,d.rn)({quests:t=>t.questsAdmin.quests})),{selectedQuest(){return this.quests.find((t=>t.id===this.selectedQuestId))}}),beforeCreate(){this.$store.hasModule("questsAdmin")||this.$store.registerModule("questsAdmin",c)},destroyed(){this.$store.hasModule("questsAdmin")&&this.$store.unregisterModule("questsAdmin")},created(){return l(this,void 0,void 0,(function*(){const t=yield this.initialRequest("/admin/quests/load");this.isError(t)||this.$store.commit("setQuests",t)}))},methods:{deleteQuest(t){const e=this.quests.findIndex((e=>e.id==t.id));this.quests.splice(e,1)},updateQuest(t){const e=this.quests.findIndex((e=>e.id==t.id));-1!==e&&i().set(this.quests,e,t)},removeDuplicatePartyMembers(t){return l(this,void 0,void 0,(function*(){(yield this.executePost("/admin/quests/removeDuplicatePartyMembers",{},t))&&this.$store.dispatch("updateToastMessages",{message:"removed duplicate party members",type:"success"})}))}}});var m=(0,s(1900).Z)(p,a,[],!1,null,null,null);m.options.__file="src/pages/admin/QuestPage.vue";const f=m.exports}}]);