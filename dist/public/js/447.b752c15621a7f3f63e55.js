(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[447],{3887:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});const n={state:{users:[]},mutations:{setUsers(t,e){t.users=e},updateBadge(t,e){const s=t.users.find((t=>t.id==e.userId));s&&(s.badge=e.badge)},updateDiscordId(t,e){const s=t.users.find((t=>t.id==e.userId));s&&(s.discordId=e.discordId)},updateBypassLogin(t,e){const s=t.users.find((t=>t.id==e.userId));s&&(s.bypassLogin=e.bypassLogin)}}}},5030:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"copy-text small text-white-50 text-monospace",attrs:{id:"copyText"+t.distinct},on:{click:t.copy}},[t._t("default")],2)};n._withStripped=!0;const i={name:"CopyPaste",props:{distinct:{type:String,default:""}},methods:{copy(){const t=document.querySelector(`#copyText${this.distinct}`);t.classList.add("animate-flicker"),this.$store.dispatch("updateToastMessages",{message:"Copied",type:"info"}),setTimeout((()=>{t.classList.remove("animate-flicker")}),500);const e=t.innerHTML.replace(/<br>/gi,"\r\n"),s=document.createElement("div");s.innerHTML=e,navigator.clipboard.writeText(s.textContent.trim())}}};var a=(0,s(1900).Z)(i,n,[],!1,null,null,null);a.options.__file="src/components/CopyPaste.vue";const r=a.exports},1515:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{tabindex:"-1"}},[s("div",{staticClass:"modal-dialog",class:"modal-"+t.modalSize},[t.loaded?s("div",{staticClass:"modal-content the-a-background"},[s("div",{staticClass:"modal-header",class:t.headerClass||"bg-primary"},[s("h5",{staticClass:"modal-title"},[t._t("header",[t._v("\n                        "+t._s(t.title)+"\n                    ")])],2),t._v(" "),s("a",{staticClass:"close",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(t){t.preventDefault()}}},[t._v("\n                    Ã—\n                ")])]),t._v(" "),s("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),t.$slots.footer?s("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()]):t._e()])])};n._withStripped=!0;var i=s(2934);const a=s.n(i)().extend({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});var r=(0,s(1900).Z)(a,n,[],!1,null,null,null);r.options.__file="src/components/ModalDialog.vue";const o=r.exports},3173:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data.length?s("table",{staticClass:"table table-sm"},[s("thead",[t._l(t.headers,(function(e){return s("th",{key:e},[t._v("\n                "+t._s(e)+"\n            ")])})),t._v(" "),s("th",[t._v("EDIT")])],2),t._v(" "),s("tbody",t._l(t.data,(function(e){return s("tr",{key:e.id,staticClass:"text-white-50"},[t._t("default",null,{obj:e}),t._v(" "),s("td",[s("a",{attrs:{href:"#","data-toggle":"modal","data-target":t.customDataTarget||"#edit"},on:{click:function(s){return s.preventDefault(),t.$emit("update:selected-id",e.id)}}},[t._v("\n                        edit\n                    ")])])],2)})),0)]):t.isLoading?t._e():s("span",{staticClass:"text-white-50"},[t._v("None...")])])};n._withStripped=!0;var i=s(2934);const a=s.n(i)().extend({name:"DataTable",props:{data:{type:Array,required:!0},headers:{type:Array,required:!0},isLoading:Boolean,customDataTarget:{type:String,default:null}}});var r=(0,s(1900).Z)(a,n,[],!1,null,null,null);r.options.__file="src/components/admin/DataTable.vue";const o=r.exports},1636:(t,e,s)=>{"use strict";s.d(e,{Z:()=>u});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-dialog",{attrs:{id:"editUser","header-class":t.user?"bg-rank-"+t.user.rank:"",loaded:Boolean(t.user)},scopedSlots:t._u([{key:"header",fn:function(){return[s("a",{attrs:{href:"https://osu.ppy.sh/users/"+t.user.osuId,target:"_blank"}},[t._v("\n            "+t._s(t.user.username)+"\n        ")])]},proxy:!0},{key:"default",fn:function(){return[s("div",{staticClass:"container"},[s("p",{staticClass:"form-row"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.group,expression:"group"}],staticClass:"form-control form-control-sm w-25 mx-2",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.group=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"user"}},[t._v("\n                        User\n                    ")]),t._v(" "),s("option",{attrs:{value:"admin"}},[t._v("\n                        Admin\n                    ")]),t._v(" "),s("option",{attrs:{value:"secret"}},[t._v("\n                        Secret\n                    ")]),t._v(" "),s("option",{attrs:{value:"spectator"}},[t._v("\n                        Spectator\n                    ")])]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateGroup(e)}}},[t._v("\n                    Save group\n                ")])]),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.badge,expression:"badge"}],staticClass:"form-control form-control-sm mx-2",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.badge},on:{input:function(e){e.target.composing||(t.badge=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateBadge(e)}}},[t._v("\n                    Save badge\n                ")])]),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.discordId,expression:"discordId"}],staticClass:"form-control form-control-sm mx-2",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.discordId},on:{input:function(e){e.target.composing||(t.discordId=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateDiscordId(e)}}},[t._v("\n                    Save Discord ID\n                ")])]),t._v(" "),s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.calculateUserPoints(e)}}},[t._v("\n                    Calculate user points\n                ")])]),t._v(" "),s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.toggleBypassLogin(e)}}},[t._v("\n                    "+t._s(t.user.bypassLogin?"Enable":"Disable")+" ranked maps login requirement\n                ")])])])]},proxy:!0}])})};n._withStripped=!0;var i=s(1515),a=s(2934),r=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{d(n.next(t))}catch(t){a(t)}}function o(t){try{d(n.throw(t))}catch(t){a(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}d((n=n.apply(t,e||[])).next())}))};const o=s.n(a)().extend({name:"UserInfo",components:{ModalDialog:i.Z},props:{user:{type:Object,default:null}},data:()=>({badge:0,discordId:"",group:""}),watch:{user(){this.badge=this.user.badge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||""}},created(){this.user&&(this.badge=this.user.badge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||"")},methods:{updateGroup(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/updateGroup`,{group:this.group},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set group to ${e}`,type:"info"}),this.$store.commit("updateGroup",{userId:this.user.id,group:e}))}))},updateBadge(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/updateBadge`,{badge:this.badge},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set badge to ${e}`,type:"info"}),this.$store.commit("updateBadge",{userId:this.user.id,badge:e}))}))},updateDiscordId(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/updateDiscordId`,{discordId:this.discordId},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set discord ID to ${e}`,type:"info"}),this.$store.commit("updateDiscordId",{userId:this.user.id,discordId:e}))}))},calculateUserPoints(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/calculateUserPoints`,{},t);e&&this.$store.dispatch("updateToastMessages",{message:`calculated points: ${e}`,type:"info"})}))},toggleBypassLogin(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/toggleBypassLogin`,{bypassLogin:!this.user.bypassLogin},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set bypassLogin to ${e.bypassLogin}`,type:"info"}),this.$store.commit("updateBypassLogin",{userId:this.user.id,group:e.group,bypassLogin:e.bypassLogin}))}))}}});var d=(0,s(1900).Z)(o,n,[],!1,null,null,null);d.options.__file="src/components/admin/UserInfo.vue";const u=d.exports},9229:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>k});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container card card-body py-1"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.updateUserPoints(e)}}},[t._v("\n                    Update user points\n                ")]),t._v(" "),t.calculatingPoints?s("span",{staticClass:"ml-2 small text-white-50"},[t._v("calculating points...")]):t._e(),t._v(" "),s("data-table",{attrs:{data:t.users,headers:["USERNAME","RANK","BADGE"],"custom-data-target":"#editUser"},on:{"update:selected-id":function(e){t.selectedUserId=e}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.obj;return[s("td",[s("a",{attrs:{href:"https://osu.ppy.sh/users/"+n.osuId,target:"_blank"}},[t._v(t._s(n.username))])]),t._v(" "),s("td",[n.rank>0?s("i",{staticClass:"fas fa-crown",class:"text-rank-"+n.rank,attrs:{"data-toggle":"tooltip","data-placement":"top",title:"rank "+n.rank+" user"}}):t._e()]),t._v(" "),s("td",{class:{"bg-open":n.rank!=n.badge}},[n.badge>0?s("i",{staticClass:"fas fa-crown",class:"text-rank-"+n.rank,attrs:{"data-toggle":"tooltip","data-placement":"top",title:"rank "+n.rank+" user"}}):t._e()])]}}])})],1)])]),t._v(" "),s("user-info",{attrs:{user:t.selectedUser},on:{"update-user":function(e){return t.updateUser(e)}}}),t._v(" "),s("tiered-user-list"),t._v(" "),s("discord-highlight-generator")],1)};n._withStripped=!0;var i=s(2934),a=s.n(i),r=s(1636),o=s(3173),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container card card-body py-1 mb-4"},[s("button",{staticClass:"btn btn-sm btn-block btn-outline-info",on:{click:function(e){return t.findTieredUsers(e)}}},[t._v("\n        Load tiered users\n    ")]),t._v(" "),t.osuUsers.length?s("div",[t._v("\n        osu\n        "),s("copy-paste",{attrs:{distinct:"osu"}},t._l(t.osuUsers,(function(e){return s("div",{key:e.id},[t._v("\n                "+t._s(e.username)+"\n            ")])})),0)],1):t._e(),t._v(" "),t.taikoUsers.length?s("div",[t._v("\n        taiko\n        "),s("copy-paste",{attrs:{distinct:"taiko"}},t._l(t.taikoUsers,(function(e){return s("div",{key:e.id},[t._v("\n                "+t._s(e.username)+"\n            ")])})),0)],1):t._e(),t._v(" "),t.catchUsers.length?s("div",[t._v("\n        catch\n        "),s("copy-paste",{attrs:{distinct:"catch"}},t._l(t.catchUsers,(function(e){return s("div",{key:e.id},[t._v("\n                "+t._s(e.username)+"\n            ")])})),0)],1):t._e(),t._v(" "),t.maniaUsers.length?s("div",[t._v("\n        mania\n        "),s("copy-paste",{attrs:{distinct:"mania"}},t._l(t.maniaUsers,(function(e){return s("div",{key:e.id},[t._v("\n                "+t._s(e.username)+"\n            ")])})),0)],1):t._e()])};d._withStripped=!0;var u=s(5030);const c=a().extend({name:"TieredUserList",components:{CopyPaste:u.Z},data:()=>({osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}),methods:{findTieredUsers(t){return e=this,s=void 0,i=function*(){const e=yield this.executeGet("/admin/users/findTieredUsers",t);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)},new((n=void 0)||(n=Promise))((function(t,a){function r(t){try{d(i.next(t))}catch(t){a(t)}}function o(t){try{d(i.throw(t))}catch(t){a(t)}}function d(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,o)}d((i=i.apply(e,s||[])).next())}));var e,s,n,i}}});var l=s(1900),p=(0,l.Z)(c,d,[],!1,null,null,null);p.options.__file="src/components/admin/TieredUserList.vue";const v=p.exports;var h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container card card-body py-1 mb-4"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.inputUsers,expression:"inputUsers"}],staticClass:"form-control form-control-sm mx-2 mt-2 w-100",attrs:{type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},domProps:{value:t.inputUsers},on:{input:function(e){e.target.composing||(t.inputUsers=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-sm btn-block btn-outline-info",on:{click:function(e){return t.generateDiscordHighlights(e)}}},[t._v("\n        Generate Discord highlights\n    ")]),t._v(" "),t.users.length?s("div",[s("copy-paste",[t._v("\n            "+t._s(t.discordHighlights)+"\n        ")])],1):t._e()])};h._withStripped=!0;const m=a().extend({name:"DiscordHighlightGenerator",components:{CopyPaste:u.Z},data:()=>({inputUsers:"",users:[]}),computed:{discordHighlights(){let t="";for(const e of this.users)t+=`<@${e.discordId}> `;return t}},methods:{generateDiscordHighlights(t){return e=this,s=void 0,i=function*(){const e=yield this.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},t);e&&!e.error&&(this.users=e.users)},new((n=void 0)||(n=Promise))((function(t,a){function r(t){try{d(i.next(t))}catch(t){a(t)}}function o(t){try{d(i.throw(t))}catch(t){a(t)}}function d(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,o)}d((i=i.apply(e,s||[])).next())}));var e,s,n,i}}});var f=(0,l.Z)(m,h,[],!1,null,null,null);f.options.__file="src/components/admin/DiscordHighlightGenerator.vue";const g=f.exports;var _=s(6564),b=s(3887),y=function(t,e,s,n){return new(s||(s=Promise))((function(i,a){function r(t){try{d(n.next(t))}catch(t){a(t)}}function o(t){try{d(n.throw(t))}catch(t){a(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}d((n=n.apply(t,e||[])).next())}))};const U=a().extend({components:{DataTable:o.Z,UserInfo:r.Z,TieredUserList:v,DiscordHighlightGenerator:g},data:()=>({selectedUserId:"",calculatingPoints:!1}),computed:Object.assign(Object.assign({},(0,_.rn)({users:t=>t.usersAdmin.users})),{selectedUser(){return this.users.find((t=>t.id===this.selectedUserId))}}),beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",b.Z)},destroyed(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},created(){return y(this,void 0,void 0,(function*(){const t=yield this.initialRequest("/admin/users/load");this.isError(t)||this.$store.commit("setUsers",t)}))},methods:{updateUser(t){const e=this.users.findIndex((e=>e.id==t.id));-1!==e&&a().set(this.users,e,t)},updateUserPoints(t){return y(this,void 0,void 0,(function*(){this.calculatingPoints=!0,(yield this.executePost("/admin/users/updateAllUserPoints",{},t))&&(this.calculatingPoints=!1)}))}}});var x=(0,l.Z)(U,n,[],!1,null,null,null);x.options.__file="src/pages/admin/UserPage.vue";const k=x.exports}}]);