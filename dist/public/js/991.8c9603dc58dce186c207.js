(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[991],{5030:(t,e,a)=>{"use strict";a.d(e,{Z:()=>i});var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"copy-text small text-white-50 text-monospace",attrs:{id:"copyText"+t.distinct},on:{click:t.copy}},[t._t("default")],2)};s._withStripped=!0;const o={name:"CopyPaste",props:{distinct:{type:String,default:""}},methods:{copy(){const t=document.querySelector(`#copyText${this.distinct}`);t.classList.add("animate-flicker"),this.$store.dispatch("updateToastMessages",{message:"Copied",type:"info"}),setTimeout((()=>{t.classList.remove("animate-flicker")}),500);const e=t.innerHTML.replace(/<br>/gi,"\r\n"),a=document.createElement("div");a.innerHTML=e,navigator.clipboard.writeText(a.textContent.trim())}}};var n=(0,a(1900).Z)(o,s,[],!1,null,null,null);n.options.__file="src/components/CopyPaste.vue";const i=n.exports},1515:(t,e,a)=>{"use strict";a.d(e,{Z:()=>r});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{tabindex:"-1"}},[a("div",{staticClass:"modal-dialog",class:"modal-"+t.modalSize},[t.loaded?a("div",{staticClass:"modal-content the-a-background"},[a("div",{staticClass:"modal-header",class:t.headerClass||"bg-primary"},[a("h5",{staticClass:"modal-title"},[t._t("header",[t._v("\n                        "+t._s(t.title)+"\n                    ")])],2),t._v(" "),a("a",{staticClass:"close",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(t){t.preventDefault()}}},[t._v("\n                    Ã—\n                ")])]),t._v(" "),a("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),t.$slots.footer?a("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()]):t._e()])])};s._withStripped=!0;var o=a(2934);const n=a.n(o)().extend({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});var i=(0,a(1900).Z)(n,s,[],!1,null,null,null);i.options.__file="src/components/ModalDialog.vue";const r=i.exports},1309:(t,e,a)=>{"use strict";a.d(e,{Z:()=>u});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal-dialog",{attrs:{id:"editBeatmap",loaded:Boolean(t.beatmap)},scopedSlots:t._u([{key:"header",fn:function(){return[t.beatmap.url?a("a",{attrs:{href:t.beatmap.url,target:"_blank"}},[t._v("\n            "+t._s(t.beatmap.song.artist)+" - "+t._s(t.beatmap.song.title)+"\n        ")]):a("span",[t._v(t._s(t.beatmap.song.artist)+" - "+t._s(t.beatmap.song.title))]),t._v("\n        ("),a("a",{attrs:{href:"https://osu.ppy.sh/users/"+t.beatmap.host.osuId,target:"_blank"}},[t._v(t._s(t.beatmap.host.username))]),t._v(")\n    ")]},proxy:!0},{key:"default",fn:function(){return[a("div",{staticClass:"container"},[a("p",{staticClass:"form-row"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"form-control form-control-sm w-25 mx-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.status=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"WIP"}},[t._v("\n                        WIP\n                    ")]),t._v(" "),a("option",{attrs:{value:"Done"}},[t._v("\n                        Done\n                    ")]),t._v(" "),a("option",{attrs:{value:"Qualified"}},[t._v("\n                        Qualified\n                    ")]),t._v(" "),a("option",{attrs:{value:"Ranked"}},[t._v("\n                        Ranked\n                    ")])]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateBeatmapStatus(e)}}},[t._v("\n                    Save status\n                ")])]),t._v(" "),a("p",{staticClass:"form-row"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.taskId,expression:"taskId"}],staticClass:"form-control form-control-sm w-50 mx-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.taskId=e.target.multiple?a:a[0]}}},t._l(t.sortedTasks,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name)+" ---\n                        "),t._l(e.mappers,(function(a,s){return[t._v("\n                            "+t._s(t.listUser(a.username,s,e.mappers.length))+"\n                        ")]})),t._v("\n                        "+t._s("Storyboard"==e.name?" --- "+e.sbQuality:"")+"\n                    ")],2)})),0),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){return t.deleteTask(e)}}},[t._v("\n                    Remove difficulty\n                ")])]),t._v(" "),a("p",{staticClass:"form-row"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.modderId,expression:"modderId"}],staticClass:"form-control form-control-sm w-50 mx-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.modderId=e.target.multiple?a:a[0]}}},t._l(t.beatmap.modders,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.username)+"\n                    ")])})),0),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){return t.deleteModder(e)}}},[t._v("\n                    Remove modder\n                ")])]),t._v(" "),a("p",{staticClass:"form-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.beatmapUrl,expression:"beatmapUrl"}],staticClass:"form-control form-control-sm mx-2 w-75",attrs:{type:"text",autocomplete:"off",placeholder:"beatmap url..."},domProps:{value:t.beatmapUrl},on:{input:function(e){e.target.composing||(t.beatmapUrl=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateUrl(e)}}},[t._v("\n                    Save URL\n                ")])]),t._v(" "),t.storyboardTaskId?a("p",{staticClass:"form-row"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.storyboardQuality,expression:"storyboardQuality"}],staticClass:"form-control form-control-sm w-25 mx-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.storyboardQuality=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("\n                        1\n                    ")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("\n                        2\n                    ")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("\n                        3\n                    ")])]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateStoryboardQuality(e)}}},[t._v("\n                    Save Storyboard Quality\n                ")])]):t._e(),t._v(" "),a("p",{staticClass:"form-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.packId,expression:"packId"}],staticClass:"form-control form-control-sm mx-2 w-50",attrs:{type:"text",autocomplete:"off",placeholder:"osu! beatmap pack ID..."},domProps:{value:t.packId},on:{input:function(e){e.target.composing||(t.packId=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updatePackId(e)}}},[t._v("\n                    Save pack ID\n                ")])]),t._v(" "),a("p",[t._v("\n                Featured Artist showcase:\n                "),a("span",{staticClass:"text-danger"},[t._v(t._s(t.beatmap.isShowcase?"true":"false"))]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateIsShowcase(e)}}},[t._v("\n                    Toggle\n                ")])])])]},proxy:!0}])})};s._withStripped=!0;var o=a(2934),n=a.n(o),i=a(1515),r=function(t,e,a,s){return new(a||(a=Promise))((function(o,n){function i(t){try{d(s.next(t))}catch(t){n(t)}}function r(t){try{d(s.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(i,r)}d((s=s.apply(t,e||[])).next())}))};const d=n().extend({name:"BeatmapInfoAdmin",components:{ModalDialog:i.Z},props:{beatmap:{type:Object,required:!0}},data(){return{status:this.beatmap.status,taskId:null,modderId:null,beatmapUrl:this.beatmap.url,storyboardQuality:null,storyboardTaskId:null,packId:this.beatmap.packId}},computed:{sortedTasks(){const t=["Easy","Normal","Hard","Insane","Expert","Storyboard"];return[...this.beatmap.tasks].sort((function(e,a){return t.indexOf(e.name)-t.indexOf(a.name)}))}},watch:{beatmap(){this.findBeatmapInfo()}},mounted(){this.findBeatmapInfo()},methods:{findBeatmapInfo(){this.status=this.beatmap.status,this.taskId=null,this.modderId=null,this.beatmapUrl=this.beatmap.url,this.storyboardQuality=null,this.storyboardTaskId=null,this.packId=this.beatmap.packId,this.beatmap.tasks.forEach((t=>{"Storyboard"==t.name&&(t.sbQuality&&(this.storyboardQuality=t.sbQuality),this.storyboardTaskId=t.id)}))},updateBeatmapStatus(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/beatmaps/${this.beatmap.id}/updateStatus`,{status:this.status},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap status",type:"info"}),this.$store.commit("updateBeatmapStatus",{beatmapId:this.beatmap.id,status:e}))}))},deleteTask(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/beatmaps/${this.beatmap.id}/tasks/${this.taskId}/delete`,{},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"deleted task",type:"info"}),this.$store.commit("deleteTask",{beatmapId:this.beatmap.id,taskId:this.taskId}))}))},deleteModder(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/beatmaps/${this.beatmap.id}/modders/${this.modderId}/delete`,{},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"deleted modder",type:"info"}),this.$store.commit("deleteModder",{beatmapId:this.beatmap.id,modderId:this.modderId}))}))},updateUrl(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/beatmaps/${this.beatmap.id}/updateUrl`,{url:this.beatmapUrl},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated URL",type:"info"}),this.$store.commit("updateUrl",{beatmapId:this.beatmap.id,url:e}))}))},updateStoryboardQuality(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/beatmaps/${this.beatmap.id}/updateStoryboardQuality`,{storyboardQuality:this.storyboardQuality,taskId:this.storyboardTaskId},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated storyboard quality",type:"info"}),this.$store.commit("updateStoryboardQuality",{beatmapId:this.beatmap.id,taskId:this.storyboardTaskId,task:e}))}))},updatePackId(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/beatmaps/${this.beatmap.id}/updatePackId`,{packId:this.packId},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated pack id",type:"info"}),this.$store.commit("updatePackId",{beatmapId:this.beatmap.id,packId:e}))}))},updateIsShowcase(t){return r(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/beatmaps/${this.beatmap.id}/updateIsShowcase`,{isShowcase:!this.beatmap.isShowcase},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated isShowcase",type:"info"}),this.$store.commit("updateIsShowcase",{beatmapId:this.beatmap.id,isShowcase:e}))}))}}});var l=(0,a(1900).Z)(d,s,[],!1,null,null,null);l.options.__file="src/components/admin/BeatmapInfoAdmin.vue";const u=l.exports}}]);