(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[715],{1161:(t,e,s)=>{"use strict";var a,i;s.d(e,{U:()=>a,O:()=>i}),function(t){t.WIP="WIP",t.Done="Done",t.Qualified="Qualified",t.Ranked="Ranked",t.Secret="Secret"}(a||(a={})),function(t){t.Osu="osu",t.Taiko="taiko",t.Catch="catch",t.Mania="mania",t.Hybrid="hybrid"}(i||(i={}))},1107:(t,e,s)=>{"use strict";var a,i,r,n;s.d(e,{XE:()=>a,hY:()=>r}),function(t){t.Easy="Easy",t.Normal="Normal",t.Hard="Hard",t.Insane="Insane",t.Expert="Expert",t.Storyboard="Storyboard"}(a||(a={})),function(t){t.Osu="osu",t.Taiko="taiko",t.Catch="catch",t.Mania="mania",t.SB="sb"}(i||(i={})),function(t){t.WIP="WIP",t.Done="Done"}(r||(r={})),function(t){t[t.Meh=1]="Meh",t[t.Ok=2]="Ok",t[t.Nice=3]="Nice"}(n||(n={}))},1124:(t,e,s)=>{"use strict";var a;s.d(e,{X:()=>a}),function(t){t.any="any",t.osu="osu",t.taiko="taiko",t.catch="catch",t.mania="mania"}(a||(a={}))},3512:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("update-filter-value",t.newFilterValue)}}},[s("i",{staticClass:"fas fa-search"})])]),t._v(" "),s("input",{staticClass:"form-control",attrs:{type:"text",maxlength:"48",placeholder:t.placeholder,autocomplete:"off"},domProps:{value:t.filterValue},on:{input:function(e){t.newFilterValue=e.target.value},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("update-filter-value",e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[t._t("default")],2)])])]),t._v(" "),s("div",{staticClass:"row small"},[s("div",{staticClass:"col"},[t._t("filters")],2)])])};a._withStripped=!0;var i=s(2934);const r=s.n(i)().extend({props:{placeholder:{type:String,required:!0},filterValue:{type:String,default:""}},data:()=>({newFilterValue:""})});var n=(0,s(1900).Z)(r,a,[],!1,null,null,null);n.options.__file="src/components/FilterBox.vue";const o=n.exports},1515:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{tabindex:"-1"}},[s("div",{staticClass:"modal-dialog",class:"modal-"+t.modalSize},[t.loaded?s("div",{staticClass:"modal-content the-a-background"},[s("div",{staticClass:"modal-header",class:t.headerClass||"bg-primary"},[s("h5",{staticClass:"modal-title"},[t._t("header",[t._v("\n                        "+t._s(t.title)+"\n                    ")])],2),t._v(" "),s("a",{staticClass:"close",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(t){t.preventDefault()}}},[t._v("\n                    Ã—\n                ")])]),t._v(" "),s("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),t.$slots.footer?s("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()]):t._e()])])};a._withStripped=!0;var i=s(2934);const r=s.n(i)().extend({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});var n=(0,s(1900).Z)(r,a,[],!1,null,null,null);n.options.__file="src/components/ModalDialog.vue";const o=n.exports},9015:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row mt-3"},[s("div",{staticClass:"col-auto filter-title"},[t._v("\n        Mode\n    ")]),t._v(" "),s("div",{staticClass:"col"},[t._l(t.modes,(function(e,a){return s("a",{key:a,staticClass:"mode",class:t.getModeSortClass(a),attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("update-filter-mode",a)}}},[t._v("\n            "+t._s(e)+"\n        ")])})),t._v(" "),t.isLoading?s("span",{staticClass:"small text-white-50"},[t._v("loading...")]):t._e()],2)])};a._withStripped=!0;var i=s(2934);const r=s.n(i)().extend({name:"ModeFilters",props:{isLoading:Boolean,filterMode:{type:String,default:""}},data:()=>({modes:{any:"Any",osu:"osu!",taiko:"osu!taiko",catch:"osu!catch",mania:"osu!mania"}}),methods:{getModeSortClass(t){return this.filterMode===t?"sorted":"unsorted"}}});var n=(0,s(1900).Z)(r,a,[],!1,null,null,null);n.options.__file="src/components/ModeFilters.vue";const o=n.exports},2298:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>O});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("user-page-filters"),t._v(" "),s("div",{staticClass:"container card card-body py-3"},[s("button",{staticClass:"btn btn-sm btn-primary mx-auto my-2 d-block",attrs:{disabled:1==t.pagination.page,type:"button"},on:{click:t.showNewer}},[s("i",{staticClass:"fas fa-angle-up mr-1"}),t._v(" show newer\n            "),s("i",{staticClass:"fas fa-angle-up ml-1"})]),t._v(" "),s("div",[s("transition-group",{staticClass:"row px-3",attrs:{name:"list",tag:"div"}},t._l(t.paginatedUsers,(function(t){return s("user-card",{key:t.id,attrs:{user:t}})})),1),t._v(" "),s("div",{staticClass:"small text-center mx-auto"},[t._v("\n                "+t._s(0===t.paginatedUsers.length?"0":t.pagination.page)+" of "+t._s(t.pagination.maxPages)+"\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-primary mx-auto my-2 d-block",attrs:{disabled:t.pagination.page>=t.pagination.maxPages,type:"button"},on:{click:t.showOlder}},[s("i",{staticClass:"fas fa-angle-down mr-1"}),t._v(" show older\n                "),s("i",{staticClass:"fas fa-angle-down ml-1"})])],1)]),t._v(" "),s("user-info")],1)};a._withStripped=!0;var i=s(2934),r=s.n(i),n=s(6564),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-6 col-md-4 col-lg-4 col-xl-3 my-2",on:{click:function(e){return t.selectUser()}}},[s("div",{staticClass:"card card-hover card-level-2 card-body",class:"border-rank-"+t.user.rank,attrs:{"data-toggle":"modal","data-target":"#extendedInfo","data-user":t.user.osuId}},[s("img",{staticClass:"card-avatar-img",attrs:{src:"https://a.ppy.sh/"+t.user.osuId}}),t._v(" "),s("a",{staticClass:"mb-2",attrs:{href:"https://osu.ppy.sh/users/"+t.user.osuId,target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v("\n            "+t._s(t.user.username)+"\n        ")]),t._v(" "),s("div",{staticClass:"text-secondary"},[s("div",{staticClass:"card-text small"},[s("b",[t._v("Total points: "+t._s(t.user.totalPoints))])]),t._v(" "),s("div",{staticClass:"card-text small"},[t._v("\n                Available points: "+t._s(t.user.availablePoints)+" "),s("i",{staticClass:"fas fa-coins"})]),t._v(" "),"osu"==t.filterMode?s("p",{staticClass:"card-text small"},[t._v("\n                osu! points: "+t._s(Math.round(10*t.user.osuPoints)/10)+"\n            ")]):"taiko"==t.filterMode?s("p",{staticClass:"card-text small"},[t._v("\n                osu!taiko points: "+t._s(Math.round(10*t.user.taikoPoints)/10)+"\n            ")]):"catch"==t.filterMode?s("p",{staticClass:"card-text small"},[t._v("\n                osu!catch points: "+t._s(Math.round(10*t.user.catchPoints)/10)+"\n            ")]):"mania"==t.filterMode?s("p",{staticClass:"card-text small"},[t._v("\n                osu!mania points: "+t._s(Math.round(10*t.user.maniaPoints)/10)+"\n            ")]):t._e()])])])};o._withStripped=!0;const l=r().extend({name:"UserCard",props:{user:{type:Object,required:!0}},computed:(0,n.rn)(["filterMode"]),methods:{selectUser(){this.$store.commit("users/setSelectedUserId",this.user.id)}}});var c=s(1900),d=(0,c.Z)(l,o,[],!1,null,"2eae9ed2",null);d.options.__file="src/components/users/UserCard.vue";const u=d.exports;var p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-dialog",{attrs:{id:"extendedInfo",loaded:Boolean(t.selectedUser),"header-class":t.selectedUser?"bg-rank-"+t.selectedUser.rank:""},scopedSlots:t._u([{key:"header",fn:function(){return[s("a",{staticClass:"text-dark",attrs:{href:"https://osu.ppy.sh/users/"+t.selectedUser.osuId,target:"_blank"}},[t._v("\n            "+t._s(t.selectedUser.username)+"\n        ")])]},proxy:!0},{key:"default",fn:function(){return[s("div",{staticClass:"row col-lg-12"},[s("table",{staticClass:"table table-sm col-md-6"},[s("thead",[s("th",{attrs:{scope:"col"}},[t._v("\n                        Task\n                    ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                        Points\n                    ")])]),t._v(" "),s("tbody",[t.selectedUser.easyPoints?s("user-points-row",{attrs:{points:t.selectedUser.easyPoints,display:"mapping Easy difficulties","tooltip-title":"~5 points per difficulty. +2 if quest mapset"}}):t._e(),t._v(" "),t.selectedUser.normalPoints?s("user-points-row",{attrs:{points:t.selectedUser.normalPoints,display:"mapping Normal difficulties","tooltip-title":"~6 points per difficulty. +2 if quest mapset"}}):t._e(),t._v(" "),t.selectedUser.hardPoints?s("user-points-row",{attrs:{points:t.selectedUser.hardPoints,display:"mapping Hard difficulties","tooltip-title":"~7 points per difficulty. +2 if quest mapset"}}):t._e(),t._v(" "),t.selectedUser.insanePoints?s("user-points-row",{attrs:{points:t.selectedUser.insanePoints,display:"mapping Insane difficulties","tooltip-title":"~8 points per difficulty. +2 if quest mapset"}}):t._e(),t._v(" "),t.selectedUser.expertPoints?s("user-points-row",{attrs:{points:t.selectedUser.expertPoints,display:"mapping Expert difficulties","tooltip-title":"~8 points per difficulty. +2 if quest mapset"}}):t._e(),t._v(" "),t.selectedUser.storyboardPoints?s("user-points-row",{attrs:{points:t.selectedUser.storyboardPoints,display:"creating storyboards","tooltip-title":"2, 7.5, or 10 points per storyboard"}}):t._e(),t._v(" "),t.selectedUser.questPoints?s("user-points-row",{attrs:{points:t.selectedUser.questPoints,display:"completing quests","tooltip-title":"5 bonus points for completing quests on time"}}):t._e(),t._v(" "),t.selectedUser.modPoints?s("user-points-row",{attrs:{points:t.selectedUser.modPoints,display:"modding mapsets","tooltip-title":"1 point per mod"}}):t._e(),t._v(" "),t.selectedUser.hostPoints?s("user-points-row",{attrs:{points:t.selectedUser.hostPoints,display:"hosting mapsets","tooltip-title":"5 points per mapset hosted"}}):t._e(),t._v(" "),t.selectedUser.contestParticipantPoints?s("user-points-row",{attrs:{points:t.selectedUser.contestParticipantPoints,display:"MBC participation","tooltip-title":"participation in Monthly Beatmapping Contests"}}):t._e(),t._v(" "),t.selectedUser.contestScreenerPoints?s("user-points-row",{attrs:{points:t.selectedUser.contestScreenerPoints,display:"MBC screening","tooltip-title":"screening entries for Monthly Beatmapping Contests"}}):t._e(),t._v(" "),t.selectedUser.contestJudgePoints?s("user-points-row",{attrs:{points:t.selectedUser.contestJudgePoints,display:"MBC judging","tooltip-title":"judging entries for Monthly Beatmapping Contests"}}):t._e(),t._v(" "),t.selectedUser.legacyPoints?s("user-points-row",{attrs:{points:t.selectedUser.legacyPoints,display:"legacy","tooltip-title":"points for things that are no longer applicable to Mappers' Guild"}}):t._e(),t._v(" "),t.selectedUser.osuPoints?s("user-points-row",{attrs:{points:t.selectedUser.osuPoints,display:"Total osu! points","tooltip-title":"mapping osu! game mode"}}):t._e(),t._v(" "),t.selectedUser.taikoPoints?s("user-points-row",{attrs:{points:t.selectedUser.taikoPoints,display:"Total osu!taiko points","tooltip-title":"mapping osu!taiko game mode"}}):t._e(),t._v(" "),t.selectedUser.catchPoints?s("user-points-row",{attrs:{points:t.selectedUser.catchPoints,display:"Total osu!catch points","tooltip-title":"mapping osu!catch game mode"}}):t._e(),t._v(" "),t.selectedUser.maniaPoints?s("user-points-row",{attrs:{points:t.selectedUser.maniaPoints,display:"Total osu!mania points","tooltip-title":"mapping osu!mania game mode"}}):t._e(),t._v(" "),s("tr",[s("td",{attrs:{scope:"row"}},[t._v("\n                            Total points earned\n                        ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                            "+t._s(t.selectedUser.totalPoints)+"\n                        ")])]),t._v(" "),s("tr",[s("td",{attrs:{scope:"row"}},[t._v("\n                            Available points\n                        ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                            "+t._s(t.selectedUser.availablePoints)+" "),s("i",{staticClass:"fas fa-coins"})])])],1)]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("p",{staticClass:"small"},[t._v("\n                    Rank:\n                    "),t.selectedUser.rank>0?s("i",{staticClass:"fas fa-crown",class:"text-rank-"+t.selectedUser.rank,attrs:{"data-toggle":"tooltip","data-placement":"top",title:"rank "+t.selectedUser.rank+" user"}}):s("span",{staticClass:"text-white-50"},[t._v("\n                        None\n                    ")])]),t._v(" "),t.currentQuests.length?s("div",{staticClass:"small"},[t._v("\n                    Current quests:\n                ")]):t._e(),t._v(" "),s("ul",{staticClass:"p-0 mb-2 ml-4"},t._l(t.currentQuests,(function(e){return s("li",{key:e.id,staticClass:"small text-white-50"},[s("a",{attrs:{href:"/quests?id="+e.id,target:"_blank"}},[t._v("\n                            "+t._s(e.name.length>40?e.name.slice(0,40)+"...":e.name)+"\n                        ")])])})),0),t._v(" "),t.currentQuests.length?s("div",{staticClass:"small"},[t._v("\n                    Created quests:\n                ")]):t._e(),t._v(" "),s("ul",{staticClass:"p-0 mb-2 ml-4"},t._l(t.createdQuestNames,(function(e){return s("li",{key:e,staticClass:"small text-white-50"},[t._v("\n                        "+t._s(e.length>40?e.slice(0,40)+"...":e)+"\n                    ")])})),0),t._v(" "),t.selectedUser.completedQuests.length?s("div",{staticClass:"small"},[t._v("\n                    Completed quests:\n                ")]):t._e(),t._v(" "),s("ul",{staticClass:"p-0 mb-2 ml-4"},t._l(t.selectedUser.completedQuests,(function(e){return s("li",{key:e.id,staticClass:"small text-white-50"},[s("a",{attrs:{href:"/quests?id="+e.id,target:"_blank"}},[t._v("\n                            "+t._s(e.name.length>40?e.name.slice(0,40)+"...":e.name)+"\n                        ")])])})),0)])]),t._v(" "),s("div",{staticClass:"radial-divisor"}),t._v(" "),s("p",[t._v("Mappers' Guild beatmaps:")]),t._v(" "),s("table",{staticClass:"table table-sm"},[s("thead",[s("th",{attrs:{scope:"col"}},[t._v("\n                    Mapset\n                ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                    Host\n                ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                    Tasks\n                ")]),t._v(" "),s("th",{attrs:{scope:"col"}})]),t._v(" "),s("tbody",[t.userBeatmaps.length?t._e():s("tr",[s("td",{attrs:{scope:"row"}},[t._v("\n                        ...\n                    ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                        ...\n                    ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                        ...\n                    ")]),t._v(" "),s("td",{attrs:{scope:"row"}})]),t._v(" "),t._l(t.userBeatmaps,(function(e){return s("tr",{key:e.id},[s("td",{attrs:{scope:"row"}},[s("i",{staticClass:"fas",class:["text-"+e.status.toLowerCase(),t.findIcon(e.status)],attrs:{"data-toggle":"tooltip",title:e.status}}),t._v(" "),s("a",{attrs:{href:"/beatmaps?id="+e.id,target:"_blank"}},[t._v("\n                            "+t._s(e.song.artist)+" - "+t._s(e.song.title)+"\n                        ")]),t._v(" "),"taiko"==e.mode?s("i",{staticClass:"fas fa-drum"}):"catch"==e.mode?s("i",{staticClass:"fas fa-apple-alt"}):"mania"==e.mode?s("i",{staticClass:"fas fa-stream"}):t._e()]),t._v(" "),s("td",{attrs:{scope:"row"}},[s("a",{attrs:{href:"https://osu.ppy.sh/users/"+e.host.osuId,target:"_blank"}},[t._v("\n                            "+t._s(e.host.username)+"\n                        ")])]),t._v(" "),s("td",{staticClass:"text-white-50",attrs:{scope:"row"}},[t._v("\n                        "+t._s(t.userTasks(e))+"\n                    ")]),t._v(" "),s("td",{staticClass:"text-white-50",attrs:{scope:"row"}},[e.url?s("a",{attrs:{href:e.url,target:"_blank"}},[s("i",{staticClass:"fas fa-link"})]):t._e()])])}))],2)]),t._v(" "),s("div",{staticClass:"radial-divisor"}),t._v(" "),s("p",[t._v("Spent points logs:")]),t._v(" "),s("table",{staticClass:"table table-sm col-md-12"},[s("thead",[s("th",{attrs:{scope:"col"}},[t._v("\n                    Action\n                ")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("\n                    Spent points\n                ")])]),t._v(" "),s("tbody",[t.spentPoints.length?t._e():s("tr",[s("td",{attrs:{scope:"row"}},[t._v("\n                        ...\n                    ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n                        ...\n                    ")])]),t._v(" "),t._l(t.spentPoints,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"text-white-50",attrs:{scope:"row"}},[t._v("\n                        "+t._s(t.findSpentPointsAction(e.category))+"\n                        "),s("a",{attrs:{href:"/quests/?id="+e.quest.id,target:"_blank"}},[t._v("\n                            "+t._s(e.quest.name)+"\n                        ")])]),t._v(" "),s("td",{staticClass:"text-white-50",attrs:{scope:"row"}},[t._v("\n                        "+t._s(t.findSpentPointsValue(e.category,e.quest))+" "),s("i",{staticClass:"fas fa-coins"})])])}))],2)]),t._v(" "),s("div",{staticClass:"radial-divisor"}),t._v(" "),s("p",{staticClass:"float-right"},[t._v("\n            Joined: "+t._s(t.selectedUser.createdAt.slice(0,10))+"\n        ")])]},proxy:!0}])})};p._withStripped=!0;var m=s(1515),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"text-white-50"},[s("td",{attrs:{scope:"row","data-toggle":"tooltip","data-placement":"left",title:t.tooltipTitle}},[t._v("\n        "+t._s(t.display)+"\n    ")]),t._v(" "),s("td",{attrs:{scope:"row"}},[t._v("\n        "+t._s(Math.round(10*t.points)/10)+"\n    ")])])};f._withStripped=!0;const _=r().extend({name:"UserPointsRow",props:{points:{type:Number,required:!0},display:{type:String,required:!0},tooltipTitle:{type:String,required:!0}}});var v=(0,c.Z)(_,f,[],!1,null,null,null);v.options.__file="src/components/users/UserPointsRow.vue";const h=v.exports;var g=s(1107),y=s(1161);const P=r().extend({name:"UserInfo",components:{UserPointsRow:h,ModalDialog:m.Z},data:()=>({currentQuests:[],createdQuestNames:[],spentPoints:[],userBeatmaps:[],sortOrder:Object.values(g.XE)}),computed:Object.assign(Object.assign({},(0,n.rn)(["loggedInUser"])),(0,n.Se)("users",["selectedUser"])),watch:{selectedUser(){return t=this,e=void 0,a=function*(){if(!this.selectedUser||this.selectedUser.id===this.$route.query.id)return;this.$router.push(`/users?id=${this.selectedUser.id}`),this.currentQuests=[],this.createdQuestNames=[],this.spentPoints=[],this.userBeatmaps=[];const[t,e,s,a]=yield Promise.all([this.executeGet(`/users/${this.selectedUser.id}/quests`),this.executeGet(`/users/findCreatedQuests/${this.selectedUser.id}`),this.executeGet(`/users/findSpentPoints/${this.selectedUser.id}`),this.executeGet(`/users/findUserBeatmaps/${this.selectedUser.id}`)]);if(this.isError(t)||(this.currentQuests=t),this.isError(e)||(this.createdQuestNames=e),this.isError(s)||(this.spentPoints=s),!this.isError(a)){const t=["WIP","Done","Qualified","Ranked"];this.userBeatmaps=a.sort((function(e,s){return t.indexOf(e.status)-t.indexOf(s.status)}))}},new((s=void 0)||(s=Promise))((function(i,r){function n(t){try{l(a.next(t))}catch(t){r(t)}}function o(t){try{l(a.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(n,o)}l((a=a.apply(t,e||[])).next())}));var t,e,s,a}},methods:{findIcon:t=>t==y.U.WIP?"fa-ellipsis-h":t==y.U.Done?"fa-check":t==y.U.Qualified||t==y.U.Ranked?"fa-check-circle":"",userTasks(t){[...t.tasks].sort(((t,e)=>this.sortOrder.indexOf(t.name)-this.sortOrder.indexOf(e.name)));let e="";return t.tasks.forEach((t=>{t.mappers.forEach((s=>{s.id==this.selectedUser.id&&(e+=t.name+", ")}))})),e.slice(0,-2)},calculatePoints(t){let e=25;return t.art||(e+=10),t.requiredMapsets<1?e=727:1==t.requiredMapsets?e+=100:t.requiredMapsets<10&&(e+=7.5*(10-t.requiredMapsets)),e},findSpentPointsAction(t){switch(t){case"acceptQuest":return"Accepted quest:";case"reopenQuest":return"Reopened quest:";case"extendDeadline":return"Extended quest deadline:";case"createQuest":return"Created quest:";default:return"undefined action"}},findSpentPointsValue(t,e){switch(t){case"acceptQuest":return e.price;case"reopenQuest":return e.reopenPrice;case"extendDeadline":return 10;case"createQuest":return this.calculatePoints(e);default:return 0}}}});var C=(0,c.Z)(P,p,[],!1,null,null,null);C.options.__file="src/components/users/UserInfo.vue";const U=C.exports;var w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-body mb-2"},[s("div",{staticClass:"container"},[s("filter-box",{attrs:{placeholder:"enter to search for username...","filter-value":t.filterValue},on:{"update-filter-value":function(e){return t.updateFilterValue(e)}},scopedSlots:t._u([{key:"filters",fn:function(){return[s("mode-filters",{attrs:{"filter-mode":t.filterMode},on:{"update-filter-mode":function(e){return t.updateFilterMode(e)}}})]},proxy:!0}])}),t._v(" "),s("div",{staticClass:"row small mt-3"},[s("div",{staticClass:"col-auto filter-title"},[t._v("\n                Sort\n            ")]),t._v(" "),s("div",{staticClass:"col"},t._l(t.sortOptions,(function(e,a){return s("a",{key:a,class:t.sortBy===a?"sorted":"unsorted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updateSorting(a)}}},[t._v("\n                    "+t._s(e)+"\n                ")])})),0)])],1)])};w._withStripped=!0;var k=s(3512),x=s(9015);const b=r().extend({name:"UserPageFilters",components:{FilterBox:k.Z,ModeFilters:x.Z},data:()=>({sorted:!1,sortOptions:{username:"Name",rank:"Rank",createdAt:"Joined"}}),computed:(0,n.rn)("users",["sortBy","filterMode","filterValue"]),methods:Object.assign({},(0,n.nv)("users",["updateSorting","updateFilterValue","updateFilterMode"]))});var M=(0,c.Z)(b,w,[],!1,null,null,null);M.options.__file="src/pages/users/UserPageFilters.vue";const S=M.exports;var q=s(1124);const I={namespaced:!0,state:{users:[],selectedUserId:null,filterValue:"",filterMode:q.X.any,sortBy:"createdAt",sortDesc:!1,pagination:{page:1,limit:16,maxPages:1}},mutations:{setUsers(t,e){t.users=e},setFilterValue(t,e){t.filterValue=e},setFilterMode(t,e){t.filterMode=e},setSelectedUserId(t,e){t.selectedUserId=e},updateUser(t,e){const s=t.users.findIndex((t=>t.id===e.id));-1!==s&&r().set(t.users,s,e)},setSortBy(t,e){t.sortBy=e},setSortDesc(t,e){t.sortDesc=e},increasePaginationPage(t){t.pagination.page+=1},decreasePaginationPage(t){t.pagination.page-=1},resetPaginationPage(t){t.pagination.page=1},updatePaginationMaxPages(t,e){t.pagination.maxPages=e}},getters:{filteredUsers:t=>{let e=[...t.users];if(t.filterMode!==q.X.any){const s=t.filterMode;e=e.filter((t=>!!("osu"==s&&t.osuPoints||"taiko"==s&&t.taikoPoints||"catch"==s&&t.catchPoints||"mania"==s&&t.maniaPoints)))}return t.filterValue.length>2&&(e=e.filter((e=>e.username.toLowerCase().includes(t.filterValue.toLowerCase())))),"createdAt"===t.sortBy?e.sort(((t,e)=>+t.createdAt-+e.createdAt)):"username"===t.sortBy?e.sort(((t,e)=>e.username.toLowerCase().localeCompare(t.username.toLowerCase()))):"rank"===t.sortBy&&("osu"===t.filterMode?e.sort(((t,e)=>t.osuPoints-e.osuPoints)):"taiko"===t.filterMode?e.sort(((t,e)=>t.taikoPoints-e.taikoPoints)):"catch"===t.filterMode?e.sort(((t,e)=>t.catchPoints-e.catchPoints)):"mania"===t.filterMode?e.sort(((t,e)=>t.maniaPoints-e.maniaPoints)):e.sort(((t,e)=>t.totalPoints-e.totalPoints))),t.sortDesc&&e.reverse(),e},paginatedUsers:(t,e)=>e.filteredUsers.slice(t.pagination.limit*(t.pagination.page-1),t.pagination.limit*t.pagination.page),selectedUser:t=>t.users.find((e=>e.id===t.selectedUserId)),allUsers:t=>t.users},actions:{updateFilterMode({commit:t},e){t("resetPaginationPage"),t("setFilterMode",e)},updateFilterValue({commit:t},e){t("resetPaginationPage"),t("setFilterValue",e)},updatePaginationMaxPages({commit:t,getters:e,state:s}){t("updatePaginationMaxPages",Math.ceil(e.filteredUsers.length/s.pagination.limit))},updateSorting({commit:t,state:e},s){e.sortBy!==s||!1===e.sortDesc?t("setSortDesc",!0):t("setSortDesc",!1),t("setSortBy",s)}}};const B=r().extend({name:"UserPage",components:{UserCard:u,UserInfo:U,UserPageFilters:S},computed:Object.assign(Object.assign({},(0,n.rn)("users",["pagination"])),(0,n.Se)("users",["paginatedUsers","allUsers"])),watch:{paginatedUsers(){this.$store.dispatch("users/updatePaginationMaxPages")}},beforeCreate(){this.$store.hasModule("users")||this.$store.registerModule("users",I)},created(){return t=this,e=void 0,a=function*(){const t=yield this.initialRequest("/users/query");if(!this.isError(t)){this.$store.commit("users/setUsers",t.users);const e=new URLSearchParams(document.location.search.substring(1));e.get("id")&&e.get("id").length&&this.allUsers.findIndex((t=>t.id==e.get("id")))>=0&&(this.$store.commit("users/setSelectedUserId",e.get("id")),$("#extendedInfo").modal("show"))}},new((s=void 0)||(s=Promise))((function(i,r){function n(t){try{l(a.next(t))}catch(t){r(t)}}function o(t){try{l(a.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(n,o)}l((a=a.apply(t,e||[])).next())}));var t,e,s,a},methods:{showOlder(){this.$store.commit("users/increasePaginationPage")},showNewer(){this.$store.commit("users/decreasePaginationPage")}}});var E=(0,c.Z)(B,a,[],!1,null,null,null);E.options.__file="src/pages/users/UserPage.vue";const O=E.exports}}]);