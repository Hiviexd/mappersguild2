(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[45],{1515:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{tabindex:"-1"}},[s("div",{staticClass:"modal-dialog",class:"modal-"+t.modalSize},[t.loaded?s("div",{staticClass:"modal-content the-a-background"},[s("div",{staticClass:"modal-header",class:t.headerClass||"bg-primary"},[s("h5",{staticClass:"modal-title"},[t._t("header",[t._v("\n                        "+t._s(t.title)+"\n                    ")])],2),t._v(" "),s("a",{staticClass:"close",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(t){t.preventDefault()}}},[t._v("\n                    Ã—\n                ")])]),t._v(" "),s("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),t.$slots.footer?s("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()]):t._e()])])};a._withStripped=!0;var i=s(2934);const n=s.n(i)().extend({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});var o=(0,s(1900).Z)(n,a,[],!1,null,null,null);o.options.__file="src/components/ModalDialog.vue";const r=o.exports},3173:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data.length?s("table",{staticClass:"table table-sm"},[s("thead",[t._l(t.headers,(function(e){return s("th",{key:e},[t._v("\n                "+t._s(e)+"\n            ")])})),t._v(" "),s("th",[t._v("EDIT")])],2),t._v(" "),s("tbody",t._l(t.data,(function(e){return s("tr",{key:e.id,staticClass:"text-white-50"},[t._t("default",null,{obj:e}),t._v(" "),s("td",[s("a",{attrs:{href:"#","data-toggle":"modal","data-target":t.customDataTarget||"#edit"},on:{click:function(s){return s.preventDefault(),t.$emit("update:selected-id",e.id)}}},[t._v("\n                        edit\n                    ")])])],2)})),0)]):t.isLoading?t._e():s("span",{staticClass:"text-white-50"},[t._v("None...")])])};a._withStripped=!0;var i=s(2934);const n=s.n(i)().extend({name:"DataTable",props:{data:{type:Array,required:!0},headers:{type:Array,required:!0},isLoading:Boolean,customDataTarget:{type:String,default:null}}});var o=(0,s(1900).Z)(n,a,[],!1,null,null,null);o.options.__file="src/components/admin/DataTable.vue";const r=o.exports},4467:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>_});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container card card-body py-1"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("data-table",{attrs:{data:t.featuredArtists,headers:["ARTIST"]},on:{"update:selected-id":function(e){t.selectedFeaturedArtistId=e}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.obj;return[s("td",[a.osuId?s("a",{attrs:{href:"https://osu.ppy.sh/beatmaps/artists/"+a.osuId,target:"_blank"}},[t._v("\n                            "+t._s(a.label)+"\n                        ")]):s("span",[t._v(t._s(a.label))])])]}}])})],1)])]),t._v(" "),s("featured-artist-info",{attrs:{"featured-artist":t.selectedFeaturedArtist}})],1)};a._withStripped=!0;var i=s(2934),n=s.n(i),o=s(6564),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-dialog",{attrs:{id:"edit",loaded:Boolean(t.featuredArtist)},scopedSlots:t._u([{key:"header",fn:function(){return[t.featuredArtist.osuId?s("a",{attrs:{href:"https://osu.ppy.sh/beatmaps/artists/"+t.featuredArtist.osuId,target:"_blank"}},[t._v("\n            "+t._s(t.featuredArtist.label)+"\n        ")]):s("span",[t._v(t._s(t.featuredArtist.label))]),t._v("\n        ("+t._s(t.featuredArtist.songs.length)+")\n    ")]},proxy:!0},{key:"default",fn:function(){return[s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateOsuId(e)}}},[t._v("\n                Save osu! ID\n            ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.osuId,expression:"osuId"}],staticClass:"form-control form-control-sm mx-2 w-50",attrs:{type:"text",autocomplete:"off",placeholder:"osu id..."},domProps:{value:t.osuId},on:{input:function(e){e.target.composing||(t.osuId=e.target.value)}}})]),t._v(" "),s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateName(e)}}},[t._v("\n                Save name\n            ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control form-control-sm mx-2 w-50",attrs:{type:"text",autocomplete:"off",placeholder:"artist name..."},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("p",{staticClass:"form-row"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"form-control form-control-sm w-25 mx-2",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.status=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"public"}},[t._v("\n                    Public\n                ")]),t._v(" "),s("option",{attrs:{value:"private"}},[t._v("\n                    Private\n                ")]),t._v(" "),s("option",{attrs:{value:"showcase"}},[t._v("\n                    Showcase\n                ")])]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateStatus(e)}}},[t._v("\n                Save status\n            ")])]),t._v(" "),s("p",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedSong,expression:"selectedSong"}],staticClass:"form-control form-control-sm",attrs:{id:"editSongSelection"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedSong=e.target.multiple?s:s[0]}}},t._l(t.alphabeticalSongs,(function(e){return s("option",{key:e.id,domProps:{value:e}},[t._v("\n                    "+t._s(e.title)+" --- ("+t._s(e.artist)+")\n                ")])})),0)]),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.artist,expression:"artist"}],staticClass:"form-control form-control-sm mx-2 w-75",attrs:{type:"text",autocomplete:"off",placeholder:"artist..."},domProps:{value:t.artist},on:{input:function(e){e.target.composing||(t.artist=e.target.value)}}})]),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control form-control-sm mx-2 w-75",attrs:{type:"text",autocomplete:"off",placeholder:"title..."},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.addSong(e)}}},[t._v("\n                Add song\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.editSong(e)}}},[t._v("\n                Edit song\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){return t.deleteSong(e)}}},[t._v("\n                Delete song\n            ")])])]},proxy:!0}])})};r._withStripped=!0;var d=s(1515),u=function(t,e,s,a){return new(s||(s=Promise))((function(i,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))};const l=n().extend({name:"FeaturedArtistInfo",components:{ModalDialog:d.Z},props:{featuredArtist:{type:Object,default:null}},data:()=>({osuId:0,name:"",status:"",selectedSong:null,artist:"",title:""}),computed:{alphabeticalSongs(){return[...this.featuredArtist.songs].sort(((t,e)=>t.title.toLowerCase()>e.title.toLowerCase()?1:e.title.toLowerCase()>t.title.toLowerCase()?-1:0))}},watch:{featuredArtist(){this.osuId=this.featuredArtist.osuId,this.name=this.featuredArtist.label,this.status=this.featuredArtist.status,this.title=""},selectedSong(){this.selectedSong&&(this.artist=this.selectedSong.artist,this.title=this.selectedSong.title)}},methods:{updateOsuId(t){return u(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOsuId`,{osuId:this.osuId},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated osu id",type:"info"}),this.$store.commit("updateOsuId",{featuredArtistId:this.featuredArtist.id,osuId:e})),yield this.executePost("/artists/toggleIsUpToDate/"+this.featuredArtist.id,{value:!0})}))},updateName(t){return u(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateName`,{name:this.name},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated name",type:"info"}),this.$store.commit("updateName",{featuredArtistId:this.featuredArtist.id,name:e}))}))},updateStatus(t){return u(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateStatus`,{status:this.status},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated status",type:"info"}),this.$store.commit("updateStatus",{featuredArtistId:this.featuredArtist.id,status:e}))}))},addSong(t){return u(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/create`,{artist:this.artist,title:this.title},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"added song",type:"info"}),this.$store.commit("addSong",{featuredArtistId:this.featuredArtist.id,song:e}))}))},editSong(t){return u(this,void 0,void 0,(function*(){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song"});const e=yield this.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/update`,{artist:this.artist,title:this.title},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated song",type:"info"}),this.$store.commit("updateSong",{featuredArtistId:this.featuredArtist.id,song:e}))}))},deleteSong(t){return u(this,void 0,void 0,(function*(){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song"});const e=yield this.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/delete`,{},t);this.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"deleted song",type:"info"}),this.$store.commit("deleteSong",{featuredArtistId:this.featuredArtist.id,songId:this.selectedSong.id}))}))}}});var c=s(1900),f=(0,c.Z)(l,r,[],!1,null,null,null);f.options.__file="src/components/admin/FeaturedArtistInfo.vue";const p=f.exports;var m=s(3173);const h={state:{featuredArtists:[]},mutations:{setFeaturedArtists(t,e){t.featuredArtists=e},updateOsuId(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));s&&(s.osuId=e.osuId)},updateName(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));s&&(s.label=e.name)},addSong(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));s&&s.songs.push(e.song)},updateSong(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));if(s){const t=s.songs.findIndex((t=>t.id==e.song.id));-1!==t&&n().set(s.songs,t,e.song)}},deleteSong(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));if(s){const t=s.songs.findIndex((t=>t.id==e.songId));-1!==t&&s.songs.splice(t,1)}}}};const v=n().extend({components:{DataTable:m.Z,FeaturedArtistInfo:p},data:()=>({selectedFeaturedArtistId:""}),computed:Object.assign(Object.assign({},(0,o.rn)({featuredArtists:t=>t.artistsAdmin.featuredArtists})),{selectedFeaturedArtist(){return this.featuredArtists.find((t=>t.id===this.selectedFeaturedArtistId))}}),beforeCreate(){this.$store.hasModule("artistsAdmin")||this.$store.registerModule("artistsAdmin",h)},destroyed(){this.$store.hasModule("artistsAdmin")&&this.$store.unregisterModule("artistsAdmin")},created(){return t=this,e=void 0,a=function*(){const t=yield this.initialRequest("/admin/featuredArtists/load");this.isError(t)||this.$store.commit("setFeaturedArtists",t)},new((s=void 0)||(s=Promise))((function(i,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}));var t,e,s,a}});var g=(0,c.Z)(v,a,[],!1,null,null,null);g.options.__file="src/pages/admin/FeaturedArtistPage.vue";const _=g.exports}}]);