(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[879],{1787:(e,t,o)=>{"use strict";var s,a;o.d(t,{U:()=>s,O:()=>a}),function(e){e.WIP="WIP",e.Done="Done",e.Qualified="Qualified",e.Ranked="Ranked",e.Secret="Secret"}(s||(s={})),function(e){e.Osu="osu",e.Taiko="taiko",e.Catch="catch",e.Mania="mania",e.Hybrid="hybrid"}(a||(a={}))},358:(e,t,o)=>{"use strict";var s,a,r,i;o.d(t,{XE:()=>s,hY:()=>r}),function(e){e.Easy="Easy",e.Normal="Normal",e.Hard="Hard",e.Insane="Insane",e.Expert="Expert",e.Storyboard="Storyboard"}(s||(s={})),function(e){e.Osu="osu",e.Taiko="taiko",e.Catch="catch",e.Mania="mania",e.SB="sb"}(a||(a={})),function(e){e.WIP="WIP",e.Done="Done"}(r||(r={})),function(e){e[e.Meh=1]="Meh",e[e.Ok=2]="Ok",e[e.Nice=3]="Nice"}(i||(i={}))},3700:(e,t,o)=>{"use strict";var s;o.d(t,{X:()=>s}),function(e){e.any="any",e.osu="osu",e.taiko="taiko",e.catch="catch",e.mania="mania"}(s||(s={}))},8166:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var s=o(5393);const a={class:"row mb-2"},r={class:"col"},i={class:"input-group"},l=(0,s.createVNode)("i",{class:"fas fa-search"},null,-1),n={class:"row small"},c={class:"col"},d=(0,s.defineComponent)({props:{placeholder:{type:String,required:!0},filterValue:{type:String,default:""}},emits:["update:filterValue"],data:()=>({newFilterValue:""})});d.render=function(e,t,o,d,p,u){return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("div",a,[(0,s.createVNode)("div",r,[(0,s.createVNode)("div",i,[(0,s.createVNode)("button",{class:"btn btn-primary",href:"#",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.$emit("update:filterValue",e.newFilterValue)),["prevent"]))},[l]),(0,s.createVNode)("input",{class:"form-control",type:"text",maxlength:"48",placeholder:e.placeholder,autocomplete:"off",value:e.filterValue,onInput:t[2]||(t[2]=t=>e.newFilterValue=t.target.value),onKeyup:t[3]||(t[3]=(0,s.withKeys)((t=>e.$emit("update:filterValue",t.target.value)),["enter"]))},null,40,["placeholder","value"]),(0,s.renderSlot)(e.$slots,"default")])])]),(0,s.createVNode)("div",n,[(0,s.createVNode)("div",c,[(0,s.renderSlot)(e.$slots,"filters")])])])};const p=d},1516:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var s=o(5393);const a={class:"modal fade",tabindex:"-1"},r={key:0,class:"modal-content the-a-background"},i={class:"modal-title"},l=(0,s.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),n={class:"modal-body"},c={key:0,class:"modal-footer"},d=(0,s.defineComponent)({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});d.render=function(e,t,o,d,p,u){return(0,s.openBlock)(),(0,s.createBlock)("div",a,[(0,s.createVNode)("div",{class:["modal-dialog modal-fullscreen-lg-down",`modal-${e.modalSize}`]},[e.loaded?((0,s.openBlock)(),(0,s.createBlock)("div",r,[(0,s.createVNode)("div",{class:["modal-header",e.headerClass||"bg-primary"]},[(0,s.createVNode)("h5",i,[(0,s.renderSlot)(e.$slots,"header",{},(()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.title),1)]))]),l],2),(0,s.createVNode)("div",n,[(0,s.renderSlot)(e.$slots,"default")]),e.$slots.footer?((0,s.openBlock)(),(0,s.createBlock)("div",c,[(0,s.renderSlot)(e.$slots,"footer")])):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)],2)])};const p=d},1519:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var s=o(5393);const a={class:"row mt-3"},r=(0,s.createVNode)("div",{class:"col-auto filter-title"}," Mode ",-1),i={class:"col"},l={key:0,class:"small text-white-50"},n=(0,s.defineComponent)({name:"ModeFilters",props:{isLoading:Boolean,filterMode:{type:String,default:""}},emits:["update:filterMode"],data:()=>({modes:{any:"Any",osu:"osu!",taiko:"osu!taiko",catch:"osu!catch",mania:"osu!mania"}}),methods:{getModeSortClass(e){return this.filterMode===e?"sorted":"unsorted"}}});n.render=function(e,t,o,n,c,d){return(0,s.openBlock)(),(0,s.createBlock)("div",a,[r,(0,s.createVNode)("div",i,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.modes,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("a",{key:o,href:"#",class:["mode",e.getModeSortClass(o)],onClick:(0,s.withModifiers)((t=>e.$emit("update:filterMode",o)),["prevent"])},(0,s.toDisplayString)(t),11,["onClick"])))),128)),e.isLoading?((0,s.openBlock)(),(0,s.createBlock)("span",l,"loading...")):(0,s.createCommentVNode)("",!0)])])};const c=n},8834:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var s=o(5393);const a={key:0,class:"fas fa-circle mode-margin"},r={key:1,class:"fas fa-drum mode-margin"},i={key:2,class:"fas fa-apple-alt mode-margin"},l={key:3,class:"fas fa-stream mode-margin"},n={key:4,class:"fas fa-check-double mode-margin"},c=(0,s.defineComponent)({name:"ModesIcons",props:{modes:{type:Array,required:!0},toggler:Boolean},emits:["toggle"]});c.render=function(e,t,o,c,d,p){const u=(0,s.resolveDirective)("bs-tooltip");return e.toggler?((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:0},[(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[1]||(t[1]=(0,s.withModifiers)((t=>e.$emit("toggle","osu")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-circle",e.modes.includes("osu")?"":"text-white-50"]},null,2),[[u,"toggle osu!"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[2]||(t[2]=(0,s.withModifiers)((t=>e.$emit("toggle","taiko")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-drum",e.modes.includes("taiko")?"":"text-white-50"]},null,2),[[u,"toggle osu!taiko"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[3]||(t[3]=(0,s.withModifiers)((t=>e.$emit("toggle","catch")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-apple-alt",e.modes.includes("catch")?"":"text-white-50"]},null,2),[[u,"toggle osu!catch"]])]),(0,s.createVNode)("a",{class:"mode-margin",href:"#",onClick:t[4]||(t[4]=(0,s.withModifiers)((t=>e.$emit("toggle","mania")),["prevent"]))},[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas fa-stream",e.modes.includes("mania")?"":"text-white-50"]},null,2),[[u,"toggle osu!"]])])],64)):((0,s.openBlock)(),(0,s.createBlock)(s.Fragment,{key:1},[e.modes.includes("osu")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",a,null,512)),[[u,"osu!"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("taiko")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",r,null,512)),[[u,"osu!taiko"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("catch")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",i,null,512)),[[u,"osu!catch"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("mania")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",l,null,512)),[[u,"osu!mania"]]):(0,s.createCommentVNode)("",!0),e.modes.includes("hybrid")?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",n,null,512)),[[u,"multiple game modes"]]):(0,s.createCommentVNode)("",!0)],64))};const d=c},353:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>_e});var s=o(5393);const a={class:"container card card-body py-3"},r=(0,s.createVNode)("i",{class:"fas fa-angle-up me-1"},null,-1),i=(0,s.createTextVNode)(" show newer "),l=(0,s.createVNode)("i",{class:"fas fa-angle-up ms-1"},null,-1),n={class:"small text-center mx-auto"},c=(0,s.createVNode)("i",{class:"fas fa-angle-down me-1"},null,-1),d=(0,s.createTextVNode)(" show older "),p=(0,s.createVNode)("i",{class:"fas fa-angle-down ms-1"},null,-1);var u=o(6564);const m=(0,s.withScopeId)("data-v-02990def");(0,s.pushScopeId)("data-v-02990def");const k={class:"mb-2"},f={class:"text-secondary"},h={class:"card-text small"},g={class:"card-text small"},y=(0,s.createVNode)("i",{class:"fas fa-coins"},null,-1),V={key:0,class:"card-text small"},N={key:1,class:"card-text small"},B={key:2,class:"card-text small"},v={key:3,class:"card-text small"};(0,s.popScopeId)();const P=m(((e,t,o,a,r,i)=>{const l=(0,s.resolveComponent)("user-link");return(0,s.openBlock)(),(0,s.createBlock)("div",{class:"col-sm-6 col-md-4 col-lg-4 col-xl-3 my-2",onClick:t[1]||(t[1]=t=>e.selectUser())},[(0,s.createVNode)("div",{class:["card card-hover card-level-2 card-body","border-rank-"+e.user.rank],"data-bs-toggle":"modal","data-bs-target":"#extendedInfo"},[(0,s.createVNode)("img",{src:"https://a.ppy.sh/"+e.user.osuId,class:"card-avatar-img"},null,8,["src"]),(0,s.createVNode)("div",k,[(0,s.createVNode)(l,{user:e.user},null,8,["user"])]),(0,s.createVNode)("div",f,[(0,s.createVNode)("div",h,[(0,s.createVNode)("b",null,"Total points: "+(0,s.toDisplayString)(e.user.totalPoints),1)]),(0,s.createVNode)("div",g,[(0,s.createTextVNode)(" Available points: "+(0,s.toDisplayString)(e.user.availablePoints)+" ",1),y]),"osu"==e.filterMode?((0,s.openBlock)(),(0,s.createBlock)("p",V," osu! points: "+(0,s.toDisplayString)(Math.round(10*e.user.osuPoints)/10),1)):"taiko"==e.filterMode?((0,s.openBlock)(),(0,s.createBlock)("p",N," osu!taiko points: "+(0,s.toDisplayString)(Math.round(10*e.user.taikoPoints)/10),1)):"catch"==e.filterMode?((0,s.openBlock)(),(0,s.createBlock)("p",B," osu!catch points: "+(0,s.toDisplayString)(Math.round(10*e.user.catchPoints)/10),1)):"mania"==e.filterMode?((0,s.openBlock)(),(0,s.createBlock)("p",v," osu!mania points: "+(0,s.toDisplayString)(Math.round(10*e.user.maniaPoints)/10),1)):(0,s.createCommentVNode)("",!0)])],2)])})),w=(0,s.defineComponent)({name:"UserCard",props:{user:{type:Object,required:!0}},computed:(0,u.rn)(["filterMode"]),methods:{selectUser(){this.$store.commit("users/setSelectedUserId",this.user.id)}}});w.render=P,w.__scopeId="data-v-02990def";const U=w,C={class:"row"},b={class:"col-md-6"},x={class:"table table-sm"},S=(0,s.createVNode)("thead",null,[(0,s.createVNode)("tr",null,[(0,s.createVNode)("th",{scope:"col"}," Task "),(0,s.createVNode)("th",{scope:"col"}," Points ")])],-1),M=(0,s.createVNode)("td",{scope:"row"}," Total points earned ",-1),D={scope:"row"},$=(0,s.createVNode)("td",{scope:"row"}," Available points ",-1),q={scope:"row"},I=(0,s.createVNode)("i",{class:"fas fa-coins"},null,-1),F={class:"col-md-6"},O={class:"small"},Q=(0,s.createTextVNode)(" Rank: "),T={key:1,class:"text-white-50"},E={key:0,class:"small"},L={class:"p-0 mb-2 ms-4"},A={key:1,class:"small"},R={class:"p-0 mb-2 ms-4"},_={key:2,class:"small"},j={class:"p-0 mb-2 ms-4"},Z=(0,s.createVNode)("div",{class:"radial-divisor"},null,-1),G={class:"row"},W={class:"col-sm"},H=(0,s.createVNode)("p",null,"Mappers' Guild beatmaps:",-1),X={class:"table table-sm"},J=(0,s.createVNode)("thead",null,[(0,s.createVNode)("tr",null,[(0,s.createVNode)("th",{scope:"col"}," Mapset "),(0,s.createVNode)("th",{scope:"col"}," Host "),(0,s.createVNode)("th",{scope:"col"}," Tasks "),(0,s.createVNode)("th",{scope:"col"})])],-1),z={key:0},K=(0,s.createVNode)("td",{scope:"row"}," ... ",-1),Y=(0,s.createVNode)("td",{scope:"row"}," ... ",-1),ee=(0,s.createVNode)("td",{scope:"row"}," ... ",-1),te=(0,s.createVNode)("td",{scope:"row"},null,-1),oe={scope:"row"},se={scope:"row"},ae={scope:"row",class:"text-white-50"},re={scope:"row",class:"text-white-50"},ie=(0,s.createVNode)("i",{class:"fas fa-link"},null,-1),le=(0,s.createVNode)("div",{class:"radial-divisor"},null,-1),ne={class:"row"},ce={class:"col-sm"},de=(0,s.createVNode)("p",null,"Spent points logs:",-1),pe={class:"table table-sm"},ue=(0,s.createVNode)("thead",null,[(0,s.createVNode)("tr",null,[(0,s.createVNode)("th",{scope:"col"}," Action "),(0,s.createVNode)("th",{scope:"col"}," Spent points ")])],-1),me={key:0},ke=(0,s.createVNode)("td",{scope:"row"}," ... ",-1),fe=(0,s.createVNode)("td",{scope:"row"}," ... ",-1),he={scope:"row",class:"text-white-50"},ge={scope:"row",class:"text-white-50"},ye=(0,s.createVNode)("i",{class:"fas fa-coins"},null,-1),Ve=(0,s.createVNode)("div",{class:"radial-divisor"},null,-1),Ne={class:"float-end"};var Be=o(1516);const ve={class:"text-white-50"},Pe={scope:"row"},we=(0,s.defineComponent)({name:"UserPointsRow",props:{points:{type:Number,required:!0},display:{type:String,required:!0},tooltipTitle:{type:String,required:!0}}});we.render=function(e,t,o,a,r,i){const l=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("tr",ve,[(0,s.withDirectives)((0,s.createVNode)("td",{scope:"row"},(0,s.toDisplayString)(e.display),513),[[l,e.tooltipTitle,"left"]]),(0,s.createVNode)("td",Pe,(0,s.toDisplayString)(Math.round(10*e.points)/10),1)])};const Ue=we;var Ce=o(358),be=o(1787),xe=o(8834);const Se=(0,s.defineComponent)({name:"UserInfo",components:{UserPointsRow:Ue,ModalDialog:Be.Z,ModesIcons:xe.Z},data:()=>({currentQuests:[],createdQuestNames:[],spentPoints:[],userBeatmaps:[],sortOrder:Object.values(Ce.XE)}),computed:Object.assign(Object.assign({},(0,u.rn)(["loggedInUser"])),(0,u.Se)("users",["selectedUser"])),watch:{selectedUser(){return e=this,t=void 0,s=function*(){if(!this.selectedUser||this.selectedUser.id===this.$route.query.id)return;this.$router.push(`/users?id=${this.selectedUser.id}`),this.currentQuests=[],this.createdQuestNames=[],this.spentPoints=[],this.userBeatmaps=[];const[e,t,o,s]=yield Promise.all([this.$http.executeGet(`/users/${this.selectedUser.id}/quests`),this.$http.executeGet(`/users/findCreatedQuests/${this.selectedUser.id}`),this.$http.executeGet(`/users/findSpentPoints/${this.selectedUser.id}`),this.$http.executeGet(`/users/findUserBeatmaps/${this.selectedUser.id}`)]);if(this.$http.isError(e)||(this.currentQuests=e),this.$http.isError(t)||(this.createdQuestNames=t),this.$http.isError(o)||(this.spentPoints=o),!this.$http.isError(s)){const e=["WIP","Done","Qualified","Ranked"];this.userBeatmaps=s.sort((function(t,o){return e.indexOf(t.status)-e.indexOf(o.status)}))}},new((o=void 0)||(o=Promise))((function(a,r){function i(e){try{n(s.next(e))}catch(e){r(e)}}function l(e){try{n(s.throw(e))}catch(e){r(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}n((s=s.apply(e,t||[])).next())}));var e,t,o,s}},methods:{findIcon:e=>e==be.U.WIP?"fa-ellipsis-h":e==be.U.Done?"fa-check":e==be.U.Qualified||e==be.U.Ranked?"fa-check-circle":"",userTasks(e){[...e.tasks].sort(((e,t)=>this.sortOrder.indexOf(e.name)-this.sortOrder.indexOf(t.name)));let t="";return e.tasks.forEach((e=>{e.mappers.forEach((o=>{o.id==this.selectedUser.id&&(t+=e.name+", ")}))})),t.slice(0,-2)},calculatePoints(e){let t=25;return e.art||(t+=10),e.requiredMapsets<1?t=727:1==e.requiredMapsets?t+=100:e.requiredMapsets<10&&(t+=7.5*(10-e.requiredMapsets)),t},findSpentPointsAction(e){switch(e){case"acceptQuest":return"Accepted quest:";case"reopenQuest":return"Reopened quest:";case"extendDeadline":return"Extended quest deadline:";case"createQuest":return"Created quest:";default:return"undefined action"}},findSpentPointsValue(e,t){switch(e){case"acceptQuest":return t.price;case"reopenQuest":return t.reopenPrice;case"extendDeadline":return 10;case"createQuest":return this.calculatePoints(t);default:return 0}}}});Se.render=function(e,t,o,a,r,i){const l=(0,s.resolveComponent)("user-link"),n=(0,s.resolveComponent)("user-points-row"),c=(0,s.resolveComponent)("modes-icons"),d=(0,s.resolveComponent)("modal-dialog"),p=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)(d,{id:"extendedInfo",loaded:Boolean(e.selectedUser),"header-class":e.selectedUser?"bg-rank-"+e.selectedUser.rank:""},{header:(0,s.withCtx)((()=>[(0,s.createVNode)(l,{class:"text-dark",user:e.selectedUser},null,8,["user"])])),default:(0,s.withCtx)((()=>[(0,s.createVNode)("div",C,[(0,s.createVNode)("div",b,[(0,s.createVNode)("table",x,[S,(0,s.createVNode)("tbody",null,[e.selectedUser.easyPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:0,points:e.selectedUser.easyPoints,display:"mapping Easy difficulties","tooltip-title":"~5 points per difficulty. +2 if quest mapset"},null,8,["points","tooltip-title"])):(0,s.createCommentVNode)("",!0),e.selectedUser.normalPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:1,points:e.selectedUser.normalPoints,display:"mapping Normal difficulties","tooltip-title":"~6 points per difficulty. +2 if quest mapset"},null,8,["points","tooltip-title"])):(0,s.createCommentVNode)("",!0),e.selectedUser.hardPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:2,points:e.selectedUser.hardPoints,display:"mapping Hard difficulties","tooltip-title":"~7 points per difficulty. +2 if quest mapset"},null,8,["points","tooltip-title"])):(0,s.createCommentVNode)("",!0),e.selectedUser.insanePoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:3,points:e.selectedUser.insanePoints,display:"mapping Insane difficulties","tooltip-title":"~8 points per difficulty. +2 if quest mapset"},null,8,["points","tooltip-title"])):(0,s.createCommentVNode)("",!0),e.selectedUser.expertPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:4,points:e.selectedUser.expertPoints,display:"mapping Expert difficulties","tooltip-title":"~8 points per difficulty. +2 if quest mapset"},null,8,["points","tooltip-title"])):(0,s.createCommentVNode)("",!0),e.selectedUser.storyboardPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:5,points:e.selectedUser.storyboardPoints,display:"creating storyboards","tooltip-title":"2, 7.5, or 10 points per storyboard"},null,8,["points","tooltip-title"])):(0,s.createCommentVNode)("",!0),e.selectedUser.questPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:6,points:e.selectedUser.questPoints,display:"completing quests","tooltip-title":"5 bonus points for completing quests on time"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.modPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:7,points:e.selectedUser.modPoints,display:"modding mapsets","tooltip-title":"1 point per mod"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.hostPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:8,points:e.selectedUser.hostPoints,display:"hosting mapsets","tooltip-title":"5 points per mapset hosted"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.contestParticipantPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:9,points:e.selectedUser.contestParticipantPoints,display:"MBC participation","tooltip-title":"participation in Monthly Beatmapping Contests"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.contestScreenerPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:10,points:e.selectedUser.contestScreenerPoints,display:"MBC screening","tooltip-title":"screening entries for Monthly Beatmapping Contests"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.contestJudgePoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:11,points:e.selectedUser.contestJudgePoints,display:"MBC judging","tooltip-title":"judging entries for Monthly Beatmapping Contests"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.legacyPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:12,points:e.selectedUser.legacyPoints,display:"legacy","tooltip-title":"points for things that are no longer applicable to Mappers' Guild"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.osuPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:13,points:e.selectedUser.osuPoints,display:"Total osu! points","tooltip-title":"mapping osu! game mode"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.taikoPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:14,points:e.selectedUser.taikoPoints,display:"Total osu!taiko points","tooltip-title":"mapping osu!taiko game mode"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.catchPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:15,points:e.selectedUser.catchPoints,display:"Total osu!catch points","tooltip-title":"mapping osu!catch game mode"},null,8,["points"])):(0,s.createCommentVNode)("",!0),e.selectedUser.maniaPoints?((0,s.openBlock)(),(0,s.createBlock)(n,{key:16,points:e.selectedUser.maniaPoints,display:"Total osu!mania points","tooltip-title":"mapping osu!mania game mode"},null,8,["points"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)("tr",null,[M,(0,s.createVNode)("td",D,(0,s.toDisplayString)(e.selectedUser.totalPoints),1)]),(0,s.createVNode)("tr",null,[$,(0,s.createVNode)("td",q,[(0,s.createTextVNode)((0,s.toDisplayString)(e.selectedUser.availablePoints)+" ",1),I])])])])]),(0,s.createVNode)("div",F,[(0,s.createVNode)("p",O,[Q,e.selectedUser.rank>0?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",{key:0,class:["fas fa-crown","text-rank-"+e.selectedUser.rank]},null,2)),[[p,`rank ${e.selectedUser.rank} user`]]):((0,s.openBlock)(),(0,s.createBlock)("span",T," None "))]),e.currentQuests.length?((0,s.openBlock)(),(0,s.createBlock)("div",E," Current quests: ")):(0,s.createCommentVNode)("",!0),(0,s.createVNode)("ul",L,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.currentQuests,(e=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:e.id,class:"small text-white-50"},[(0,s.createVNode)("a",{href:"/quests?id="+e.id,target:"_blank"},(0,s.toDisplayString)(e.name.length>40?e.name.slice(0,40)+"...":e.name),9,["href"])])))),128))]),e.currentQuests.length?((0,s.openBlock)(),(0,s.createBlock)("div",A," Created quests: ")):(0,s.createCommentVNode)("",!0),(0,s.createVNode)("ul",R,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.createdQuestNames,(e=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:e,class:"small text-white-50"},(0,s.toDisplayString)(e.length>40?e.slice(0,40)+"...":e),1)))),128))]),e.selectedUser.completedQuests.length?((0,s.openBlock)(),(0,s.createBlock)("div",_," Completed quests: ")):(0,s.createCommentVNode)("",!0),(0,s.createVNode)("ul",j,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.selectedUser.completedQuests,(e=>((0,s.openBlock)(),(0,s.createBlock)("li",{key:e.id,class:"small text-white-50"},[(0,s.createVNode)("a",{href:"/quests?id="+e.id,target:"_blank"},(0,s.toDisplayString)(e.name.length>40?e.name.slice(0,40)+"...":e.name),9,["href"])])))),128))])])]),Z,(0,s.createVNode)("div",G,[(0,s.createVNode)("div",W,[H,(0,s.createVNode)("table",X,[J,(0,s.createVNode)("tbody",null,[e.userBeatmaps.length?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("tr",z,[K,Y,ee,te])),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.userBeatmaps,(t=>((0,s.openBlock)(),(0,s.createBlock)("tr",{key:t.id},[(0,s.createVNode)("td",oe,[(0,s.withDirectives)((0,s.createVNode)("i",{class:["fas me-1",["text-"+t.status.toLowerCase(),e.findIcon(t.status)]]},null,2),[[p,t.status]]),(0,s.createVNode)("a",{href:"/beatmaps?id="+t.id,target:"_blank",class:"me-1"},(0,s.toDisplayString)(t.song.artist)+" - "+(0,s.toDisplayString)(t.song.title),9,["href"]),"osu"!==t.mode?((0,s.openBlock)(),(0,s.createBlock)(c,{key:0,modes:[t.mode]},null,8,["modes"])):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)("td",se,[(0,s.createVNode)(l,{user:t.host},null,8,["user"])]),(0,s.createVNode)("td",ae,(0,s.toDisplayString)(e.userTasks(t)),1),(0,s.createVNode)("td",re,[t.url?((0,s.openBlock)(),(0,s.createBlock)("a",{key:0,href:t.url,target:"_blank"},[ie],8,["href"])):(0,s.createCommentVNode)("",!0)])])))),128))])])])]),le,(0,s.createVNode)("div",ne,[(0,s.createVNode)("div",ce,[de,(0,s.createVNode)("table",pe,[ue,(0,s.createVNode)("tbody",null,[e.spentPoints.length?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("tr",me,[ke,fe])),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.spentPoints,(t=>((0,s.openBlock)(),(0,s.createBlock)("tr",{key:t.id},[(0,s.createVNode)("td",he,[(0,s.createTextVNode)((0,s.toDisplayString)(e.findSpentPointsAction(t.category))+" ",1),(0,s.createVNode)("a",{href:"/quests/?id="+t.quest.id,target:"_blank"},(0,s.toDisplayString)(t.quest.name),9,["href"])]),(0,s.createVNode)("td",ge,[(0,s.createTextVNode)((0,s.toDisplayString)(e.findSpentPointsValue(t.category,t.quest))+" ",1),ye])])))),128))])])])]),Ve,(0,s.createVNode)("p",Ne," Joined: "+(0,s.toDisplayString)(e.selectedUser.createdAt.slice(0,10)),1)])),_:1},8,["loaded","header-class"])};const Me=Se,De={class:"card card-body mb-2"},$e={class:"container"},qe={class:"row small mt-3"},Ie=(0,s.createVNode)("div",{class:"col-auto filter-title"}," Sort ",-1),Fe={class:"col"};var Oe=o(8166),Qe=o(1519);const Te=(0,s.defineComponent)({name:"UserPageFilters",components:{FilterBox:Oe.Z,ModeFilters:Qe.Z},data:()=>({sorted:!1,sortOptions:{username:"Name",rank:"Rank",createdAt:"Joined"}}),computed:(0,u.rn)("users",["sortBy","filterMode","filterValue"]),methods:Object.assign({},(0,u.nv)("users",["updateSorting","updateFilterValue","updateFilterMode"]))});Te.render=function(e,t,o,a,r,i){const l=(0,s.resolveComponent)("mode-filters"),n=(0,s.resolveComponent)("filter-box");return(0,s.openBlock)(),(0,s.createBlock)("div",De,[(0,s.createVNode)("div",$e,[(0,s.createVNode)(n,{placeholder:"enter to search for username...","filter-value":e.filterValue,"onUpdate:filterValue":t[2]||(t[2]=t=>e.updateFilterValue(t))},{filters:(0,s.withCtx)((()=>[(0,s.createVNode)(l,{"filter-mode":e.filterMode,"onUpdate:filterMode":t[1]||(t[1]=t=>e.updateFilterMode(t))},null,8,["filter-mode"])])),_:1},8,["filter-value"]),(0,s.createVNode)("div",qe,[Ie,(0,s.createVNode)("div",Fe,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.sortOptions,((t,o)=>((0,s.openBlock)(),(0,s.createBlock)("a",{key:o,class:e.sortBy===o?"sorted":"unsorted",href:"#",onClick:(0,s.withModifiers)((t=>e.updateSorting(o)),["prevent"])},(0,s.toDisplayString)(t),11,["onClick"])))),128))])])])])};const Ee=Te;var Le=o(3700);const Ae={namespaced:!0,state:{users:[],selectedUserId:null,filterValue:"",filterMode:Le.X.any,sortBy:"createdAt",sortDesc:!1,pagination:{page:1,limit:16,maxPages:1}},mutations:{setUsers(e,t){e.users=t},setFilterValue(e,t){e.filterValue=t},setFilterMode(e,t){e.filterMode=t},setSelectedUserId(e,t){e.selectedUserId=t},updateUser(e,t){const o=e.users.findIndex((e=>e.id===t.id));-1!==o&&(e.users[o]=t)},setSortBy(e,t){e.sortBy=t},setSortDesc(e,t){e.sortDesc=t},increasePaginationPage(e){e.pagination.page+=1},decreasePaginationPage(e){e.pagination.page-=1},resetPaginationPage(e){e.pagination.page=1},updatePaginationMaxPages(e,t){e.pagination.maxPages=t}},getters:{filteredUsers:e=>{let t=[...e.users];if(e.filterMode!==Le.X.any){const o=e.filterMode;t=t.filter((e=>!!("osu"==o&&e.osuPoints||"taiko"==o&&e.taikoPoints||"catch"==o&&e.catchPoints||"mania"==o&&e.maniaPoints)))}return e.filterValue.length>2&&(t=t.filter((t=>t.username.toLowerCase().includes(e.filterValue.toLowerCase())))),"createdAt"===e.sortBy?t.sort(((e,t)=>+e.createdAt-+t.createdAt)):"username"===e.sortBy?t.sort(((e,t)=>t.username.toLowerCase().localeCompare(e.username.toLowerCase()))):"rank"===e.sortBy&&("osu"===e.filterMode?t.sort(((e,t)=>e.osuPoints-t.osuPoints)):"taiko"===e.filterMode?t.sort(((e,t)=>e.taikoPoints-t.taikoPoints)):"catch"===e.filterMode?t.sort(((e,t)=>e.catchPoints-t.catchPoints)):"mania"===e.filterMode?t.sort(((e,t)=>e.maniaPoints-t.maniaPoints)):t.sort(((e,t)=>e.totalPoints-t.totalPoints))),e.sortDesc&&t.reverse(),t},paginatedUsers:(e,t)=>t.filteredUsers.slice(e.pagination.limit*(e.pagination.page-1),e.pagination.limit*e.pagination.page),selectedUser:e=>e.users.find((t=>t.id===e.selectedUserId)),allUsers:e=>e.users},actions:{updateFilterMode({commit:e},t){e("resetPaginationPage"),e("setFilterMode",t)},updateFilterValue({commit:e},t){e("resetPaginationPage"),e("setFilterValue",t)},updatePaginationMaxPages({commit:e,getters:t,state:o}){e("updatePaginationMaxPages",Math.ceil(t.filteredUsers.length/o.pagination.limit))},updateSorting({commit:e,state:t},o){t.sortBy!==o||!1===t.sortDesc?e("setSortDesc",!0):e("setSortDesc",!1),e("setSortBy",o)}}};const Re=(0,s.defineComponent)({name:"UserPage",components:{UserCard:U,UserInfo:Me,UserPageFilters:Ee},computed:Object.assign(Object.assign({},(0,u.rn)("users",["pagination"])),(0,u.Se)("users",["paginatedUsers","allUsers"])),watch:{paginatedUsers(){this.$store.dispatch("users/updatePaginationMaxPages")}},beforeCreate(){this.$store.hasModule("users")||this.$store.registerModule("users",Ae)},created(){return e=this,t=void 0,s=function*(){const e=yield this.$http.initialRequest("/users/query");if(!this.$http.isError(e)){this.$store.commit("users/setUsers",e.users);const t=this.$route.query.id;t&&this.allUsers.findIndex((e=>e.id==t))>=0&&(this.$store.commit("users/setSelectedUserId",t),this.$bs.showModal("extendedInfo"))}},new((o=void 0)||(o=Promise))((function(a,r){function i(e){try{n(s.next(e))}catch(e){r(e)}}function l(e){try{n(s.throw(e))}catch(e){r(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}n((s=s.apply(e,t||[])).next())}));var e,t,o,s},methods:{showOlder(){this.$store.commit("users/increasePaginationPage")},showNewer(){this.$store.commit("users/decreasePaginationPage")}}});Re.render=function(e,t,o,u,m,k){const f=(0,s.resolveComponent)("user-page-filters"),h=(0,s.resolveComponent)("user-card"),g=(0,s.resolveComponent)("user-info");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)(f),(0,s.createVNode)("div",a,[(0,s.createVNode)("button",{disabled:1==e.pagination.page,class:"btn btn-sm btn-primary mx-auto my-2 d-block",type:"button",onClick:t[1]||(t[1]=(...t)=>e.showNewer&&e.showNewer(...t))},[r,i,l],8,["disabled"]),(0,s.createVNode)("div",null,[(0,s.createVNode)(s.TransitionGroup,{name:"list",tag:"div",class:"row px-3"},{default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.paginatedUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)(h,{key:e.id,user:e},null,8,["user"])))),128))])),_:1}),(0,s.createVNode)("div",n,(0,s.toDisplayString)(0===e.paginatedUsers.length?"0":e.pagination.page)+" of "+(0,s.toDisplayString)(e.pagination.maxPages),1),(0,s.createVNode)("button",{disabled:e.pagination.page>=e.pagination.maxPages,class:"btn btn-sm btn-primary mx-auto my-2 d-block",type:"button",onClick:t[2]||(t[2]=(...t)=>e.showOlder&&e.showOlder(...t))},[c,d,p],8,["disabled"])])]),(0,s.createVNode)(g)])};const _e=Re}}]);