(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[613],{8707:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>x});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.contests,(function(e){return s("div",{key:e.id,staticClass:"container card card-body py-1"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("h4",{staticClass:"my-2 text-center"},[t._v("\n                    "+t._s(e.name)+"\n                ")]),t._v(" "),e.submissions.length?s("transition-group",{staticClass:"row",attrs:{name:"list",tag:"div"}},t._l(e.submissions,(function(t){return s("submission-card",{key:t.id,attrs:{submission:t}})})),1):s("p",{staticClass:"ml-4"},[t._v("\n                    No submissions...\n                ")])],1)])])})),t._v(" "),t.contests.length?t._e():s("div",{staticClass:"text-center p-3"},[t._v("\n        No contests available for screening...\n    ")])],2)};n._withStripped=!0;var i=s(2934),o=s.n(i),r=s(6564),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-sm-12 my-1"},[s("div",{staticClass:"card",class:t.relatedScreening&&t.relatedScreening.vote?"bg-vote":"bg-dark"},[s("div",{staticClass:"card-body p-2"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-6"},[t._v("\n                    "+t._s(t.submission.name)+"\n                ")]),t._v(" "),s("div",{staticClass:"col-sm-6 text-right"},[s("screening-vote",{attrs:{"submission-id":t.submission.id,"saved-vote":t.relatedScreening&&t.relatedScreening.vote}})],1)]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("screening-notes",{attrs:{"submission-id":t.submission.id,"saved-comment":t.relatedScreening&&t.relatedScreening.comment}})],1)])])])])};a._withStripped=!0;var c,u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(5,(function(e){return s("a",{key:e,staticClass:"mx-1",class:{disabled:t.usedVotes.includes(e)&&t.savedVote!=e},attrs:{disabled:t.voteLoading,href:"#"},on:{click:function(s){return s.preventDefault(),t.updateVote(e)}}},[s("i",{staticClass:"fa-star",class:{fas:t.usedVotes.includes(e)||t.savedVote==e,far:!t.usedVotes.includes(e)}})])})),0)};u._withStripped=!0,function(t){t[t.First=5]="First",t[t.Second=4]="Second",t[t.Third=3]="Third",t[t.Fourth=2]="Fourth",t[t.Fifth=1]="Fifth",t[t.None=0]="None"}(c||(c={}));const d=o().extend({name:"ScreeningVote",props:{submissionId:{type:String,required:!0},savedVote:{type:Number,default:0}},computed:Object.assign(Object.assign({},(0,r.rn)({voteLoading:t=>t.voteLoading})),(0,r.Se)(["usedVotes"])),methods:{updateVote(t){return e=this,s=void 0,i=function*(){this.$store.commit("setVoteLoading",!0),this.savedVote==t&&(t=c.None);const e=yield this.executePost("/screening/updateSubmission/"+this.submissionId,{vote:t});this.isError(e)||this.$store.commit("updateSubmission",e),this.$store.commit("setVoteLoading",!1)},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,a)}c((i=i.apply(e,s||[])).next())}));var e,s,n,i}}});var m=s(1900),l=(0,m.Z)(d,u,[],!1,null,null,null);l.options.__file="src/components/screening/ScreeningVote.vue";const v=l.exports;var h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[t.showCommentInput?t._e():s("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showCommentInput=!t.showCommentInput}}},[s("i",{staticClass:"fas fa-edit"})]),t._v(" "),t.showCommentInput?[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.newComment,expression:"newComment",modifiers:{trim:!0}}],staticClass:"form-control form-control-sm",staticStyle:{overflow:"hidden","overflow-wrap":"break-word"},attrs:{rows:"4",type:"text",placeholder:"map comments...",maxlength:"1000"},domProps:{value:t.newComment},on:{input:function(e){e.target.composing||(t.newComment=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-sm btn-outline-info  mt-1",attrs:{type:"button"},on:{click:function(e){return t.cancelUpdate()}}},[t._v("\n                Cancel\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info  mt-1",attrs:{type:"button"},on:{click:function(e){return t.updateComment(e)}}},[t._v("\n                Save\n            ")])])]:s("span",{staticClass:"small text-white-50"},[t._v(t._s(t.newComment||"..."))])],2)};h._withStripped=!0;const p=o().extend({name:"ScreeningNotes",props:{submissionId:{type:String,required:!0},savedComment:{type:String,default:""}},data(){return{showCommentInput:!1,newComment:this.savedComment}},methods:{cancelUpdate(){this.showCommentInput=!this.showCommentInput,this.newComment=this.savedComment},updateComment(t){return e=this,s=void 0,i=function*(){if(this.savedComment!=this.newComment){const e=yield this.executePost("/screening/updateSubmission/"+this.submissionId,{comment:this.newComment.trim()},t);this.isError(e)||(this.showCommentInput=!this.showCommentInput,this.$store.commit("updateSubmission",e))}else this.showCommentInput=!this.showCommentInput},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(r,a)}c((i=i.apply(e,s||[])).next())}));var e,s,n,i}}});var f=(0,m.Z)(p,h,[],!1,null,null,null);f.options.__file="src/components/screening/ScreeningNotes.vue";const g=f.exports,C=o().extend({name:"SubmissionCard",components:{ScreeningVote:v,ScreeningNotes:g},props:{submission:{type:Object,required:!0}},computed:Object.assign(Object.assign({},(0,r.rn)(["loggedInUser"])),{relatedScreening(){return this.submission.evaluations.find((t=>t.screener._id===this.loggedInUser.id))}})});var b=(0,m.Z)(C,a,[],!1,null,"26eb7d36",null);b.options.__file="src/components/screening/SubmissionCard.vue";const w=b.exports,_={state:{contests:[],voteLoading:!1},mutations:{setContests(t,e){t.contests=e},setVoteLoading(t,e){t.voteLoading=e},updateSubmission(t,e){let s=-1;const n=t.contests.findIndex((t=>{if(s=t.submissions.findIndex((t=>t.id===e.id)),-1!==s)return!0}));-1!==n&&-1!==s&&o().set(t.contests[n].submissions,s,e)}},getters:{usedVotes:(t,e,s)=>{const n=[];return t.contests.forEach((t=>{t.submissions.forEach((t=>{const e=t.evaluations.find((t=>t.screener.id===s.loggedInUser.id));e&&n.push(e.vote)}))})),n}}};const S=o().extend({name:"ScreeningPage",components:{SubmissionCard:w},computed:(0,r.rn)({contests:t=>t.screening.contests}),beforeCreate(){this.$store.hasModule("screening")||this.$store.registerModule("screening",_)},destroyed(){this.$store.hasModule("screening")&&this.$store.unregisterModule("screening")},created(){return t=this,e=void 0,n=function*(){const t=yield this.initialRequest("/screening/relevantInfo");this.isError(t)||this.$store.commit("setContests",t.contests||[])},new((s=void 0)||(s=Promise))((function(i,o){function r(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}c((n=n.apply(t,e||[])).next())}));var t,e,s,n}});var y=(0,m.Z)(S,n,[],!1,null,null,null);y.options.__file="src/pages/ScreeningPage.vue";const x=y.exports}}]);