(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1hI8":function(t,e,s){"use strict";s.r(e);var a=s("pIHV"),n=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);e.default=n.a},"3CyY":function(t,e,s){"use strict";s.r(e);var a=s("JIOV"),n=s("RPEt");for(var r in n)"default"!==r&&function(t){s.d(e,t,(function(){return n[t]}))}(r);var i=s("KHd+"),o=Object(i.a)(n.default,a.a,a.b,!1,null,null,null);o.options.__file="src/pages/admin/UserPage.vue",e.default=o.exports},"4/B4":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.data.length?s("table",{staticClass:"table table-sm table-dark table-hover"},[s("thead",[t._l(t.headers,(function(e){return s("th",{key:e},[t._v("\n                "+t._s(e)+"\n            ")])})),t._v(" "),s("th",[t._v("EDIT")])],2),t._v(" "),s("tbody",t._l(t.data,(function(e){return s("tr",{key:e.id,staticClass:"text-white-50"},[t._t("default",null,{obj:e}),t._v(" "),s("td",[s("a",{attrs:{href:"#","data-toggle":"modal","data-target":t.customDataTarget||"#edit"},on:{click:function(s){return s.preventDefault(),t.$emit("update:selected-id",e.id)}}},[t._v("\n                        edit\n                    ")])])],2)})),0)]):t.isLoading?t._e():s("span",{staticClass:"text-white-50"},[t._v("None...")])])},n=[];a._withStripped=!0,s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return n}))},"7bO+":function(t,e,s){"use strict";s.r(e);var a=s("V/l8"),n=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);e.default=n.a},"82fW":function(t,e,s){"use strict";s.r(e);var a=s("rQUL"),n=s("7bO+");for(var r in n)"default"!==r&&function(t){s.d(e,t,(function(){return n[t]}))}(r);s("F/lc");var i=s("KHd+"),o=Object(i.a)(n.default,a.a,a.b,!1,null,null,null);o.options.__file="src/components/ToastMessages.vue",e.default=o.exports},"F/lc":function(t,e,s){"use strict";var a=s("ccWs");s.n(a).a},JIOV:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("div",{staticClass:"container bg-container py-1"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("button",{staticClass:"btn btn-sm btn-info btn-block",on:{click:function(e){return t.updateUserPoints(e)}}},[t._v("\n                    Update user points\n                ")]),t._v(" "),t.calculatingPoints?s("span",{staticClass:"ml-2 small text-white-50"},[t._v("calculating points...")]):t._e(),t._v(" "),s("data-table",{attrs:{data:t.users,headers:["USERNAME","RANK","BADGE"],"custom-data-target":"#editUser"},on:{"update:selected-id":function(e){t.selectedUserId=e}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.obj;return[s("td",[s("a",{attrs:{href:"https://osu.ppy.sh/users/"+a.osuId,target:"_blank"}},[t._v(t._s(a.username))])]),t._v(" "),s("td",[a.rank>0?s("i",{staticClass:"fas fa-crown",class:1==a.rank?"text-rank-1":2==a.rank?"text-rank-2":"text-rank-3",attrs:{"data-toggle":"tooltip","data-placement":"top",title:1==a.rank?"rank 1 user":2==a.rank?"rank 2 user":"rank 3 user"}}):t._e()]),t._v(" "),s("td",{class:{"bg-open":a.rank!=a.badge}},[a.badge>0?s("i",{staticClass:"fas fa-crown",class:1==a.badge?"text-rank-1":2==a.badge?"text-rank-2":"text-rank-3",attrs:{"data-toggle":"tooltip","data-placement":"top",title:1==a.badge?"rank 1 user":2==a.badge?"rank 2 user":"rank 3 user"}}):t._e()])]}}])})],1)])]),t._v(" "),s("user-info",{attrs:{user:t.selectedUser},on:{"update-user":function(e){return t.updateUser(e)}}}),t._v(" "),s("toast-messages")],1)},n=[];a._withStripped=!0,s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return n}))},KtIn:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"editUser",tabindex:"-1"}},[s("div",{staticClass:"modal-dialog"},[t.user?s("div",{staticClass:"modal-content bg-dark"},[s("div",{staticClass:"modal-header text-dark",class:"bg-rank-"+t.user.rank},[s("h5",{staticClass:"modal-title"},[s("a",{staticClass:"text-dark",attrs:{href:"https://osu.ppy.sh/users/"+t.user.osuId,target:"_blank"}},[t._v("\n                        "+t._s(t.user.username)+"\n                    ")])]),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"modal-body",staticStyle:{overflow:"hidden"}},[s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.badge,expression:"badge"}],staticClass:"form-control-sm mx-2",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.badge},on:{input:function(e){e.target.composing||(t.badge=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.updateBadge(e)}}},[t._v("\n                        Save badge\n                    ")])]),t._v(" "),s("p",[s("button",{staticClass:"btn btn-sm btn-outline-info",on:{click:function(e){return t.calculateUserPoints(e)}}},[t._v("\n                        Calculate user points\n                    ")])])])]):t._e()])])},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[e("span",[this._v("Ã—")])])}];a._withStripped=!0,s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return n}))},NsCO:function(t,e,s){(t.exports=s("JPst")(!1)).push([t.i,"\n.toast {\r\n    -webkit-animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    -moz-animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    -o-animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    -webkit-animation-fill-mode: forwards;\r\n    animation-fill-mode: forwards;\n}\n@keyframes fadeOutAnimation {\nfrom {\r\n        display: block;\r\n        opacity: 1;\n}\nto {\r\n        display: none;\r\n        opacity: 0;\n}\n}\n@-webkit-keyframes fadeOutAnimation {\nfrom {\r\n        display: block;\r\n        opacity: 1;\n}\nto {\r\n        display: none;\r\n        opacity: 0;\n}\n}\r\n",""])},OIxf:function(t,e,s){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(s("oCYn")),r=a(s("L2JU")),i=a(s("3CyY"));s("qIrM");const o=a(s("vCLK")),u=a(s("Z1WV"));n.default.mixin(o.default),n.default.use(r.default);const d=new r.default.Store({modules:{toasts:u.default},state:{users:[]},mutations:{setUsers(t,e){t.users=e},updateBadge(t,e){const s=t.users.find(t=>t.id==e.userId);s&&(s.badge=e.badge)}},strict:!1});new n.default({el:"#app",store:d,components:{UserPage:i.default}})},RPEt:function(t,e,s){"use strict";s.r(e);var a=s("zHs3"),n=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);e.default=n.a},"V/l8":function(t,e,s){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(s("oCYn")),r=s("L2JU");e.default=n.default.extend({computed:Object.assign({},r.mapState({toastMessages:t=>t.toasts.toastMessages})),methods:{getToastTypeClass:t=>"success"===t.type?"bg-success":"info"===t.type?"bg-info":"bg-danger"}})},Z1WV:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a={namespace:!1,state:{toastMessages:[]},mutations:{addToastMessage(t,e){t.toastMessages.push(e)},removeFirstToastMessage(t){t.toastMessages.splice(0,1)}},actions:{updateToastMessages({commit:t},e){t("addToastMessage",e),setTimeout(()=>{t("removeFirstToastMessage")},3500)}}};e.default=a},aSVZ:function(t,e,s){"use strict";s.r(e);var a=s("KtIn"),n=s("xB15");for(var r in n)"default"!==r&&function(t){s.d(e,t,(function(){return n[t]}))}(r);var i=s("KHd+"),o=Object(i.a)(n.default,a.a,a.b,!1,null,null,null);o.options.__file="src/components/admin/UserInfo.vue",e.default=o.exports},ccWs:function(t,e,s){var a=s("NsCO");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,s("SZ7m").default)("dbaab28e",a,!1,{})},fVeH:function(t,e,s){"use strict";s.r(e);var a=s("4/B4"),n=s("1hI8");for(var r in n)"default"!==r&&function(t){s.d(e,t,(function(){return n[t]}))}(r);var i=s("KHd+"),o=Object(i.a)(n.default,a.a,a.b,!1,null,null,null);o.options.__file="src/components/admin/DataTable.vue",e.default=o.exports},oG6K:function(t,e,s){"use strict";var a=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))((function(n,r){function i(t){try{u(a.next(t))}catch(t){r(t)}}function o(t){try{u(a.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(i,o)}u((a=a.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s("oCYn"));e.default=r.default.extend({name:"UserInfo",props:{user:{type:Object,default:null}},data:()=>({badge:0}),computed:{},watch:{user(){this.badge=this.user.badge||0}},created(){this.user&&(this.badge=this.user.badge||0)},methods:{updateBadge(t){return a(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/updateBadge`,{badge:this.badge},t);e&&(this.$store.dispatch("updateToastMessages",{message:`set badge to ${e}`,type:"info"}),this.$store.commit("updateBadge",{userId:this.user.id,badge:e}))}))},calculateUserPoints(t){return a(this,void 0,void 0,(function*(){const e=yield this.executePost(`/admin/users/${this.user.id}/calculateUserPoints`,{},t);e&&this.$store.dispatch("updateToastMessages",{message:`calculated points: ${e}`,type:"info"})}))}}})},pIHV:function(t,e,s){"use strict";var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(s("oCYn"));e.default=n.default.extend({name:"DataTable",props:{data:{type:Array,required:!0},headers:{type:Array,required:!0},isLoading:Boolean,customDataTarget:{type:String,default:null}}})},qIrM:function(t,e,s){"use strict";$(document).ready((function(){$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover"})}))},rQUL:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"fixed",bottom:"20px",left:"20px","z-index":"2000"}},t._l(t.toastMessages,(function(e,a){return s("div",{key:a,staticClass:"toast show"},[s("div",{staticClass:"toast-body",class:t.getToastTypeClass(e)},[t._v("\n            "+t._s(e.message)+"\n        ")])])})),0)},n=[];a._withStripped=!0,s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return n}))},vCLK:function(t,e,s){"use strict";var a=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))((function(n,r){function i(t){try{u(a.next(t))}catch(t){r(t)}}function o(t){try{u(a.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(i,o)}u((a=a.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s("oCYn")),i=n(s("vDqi"));e.default=r.default.extend({methods:{executeGet(t,e){return a(this,void 0,void 0,(function*(){e&&(e.target.disabled=!0),$("[data-toggle='tooltip']").tooltip("hide");try{const s=yield i.default.get(t);return s.data.error?(this.$store.dispatch("updateToastMessages",{message:s.data.error}),{error:s.data.error}):s.data}catch(t){return this.$store.dispatch("updateToastMessages",{message:"Something went wrong!"}),{error:"Something went wrong!"}}finally{e&&(e.target.disabled=!1)}}))},executePost(t,e={},s){return a(this,void 0,void 0,(function*(){s&&(s.target.disabled=!0),$("[data-toggle='tooltip']").tooltip("hide");try{const a=yield i.default.post(t,e);return a.data.error?(this.$store.dispatch("updateToastMessages",{message:a.data.error}),{error:a.data.error}):a.data}catch(t){return this.$store.dispatch("updateToastMessages",{message:"Something went wrong!"}),{error:"Something went wrong!"}}finally{s&&(s.target.disabled=!1)}}))},isError:t=>void 0!==t.error,listUser:(t,e,s)=>t+(e<s-1?", ":"")}})},xB15:function(t,e,s){"use strict";s.r(e);var a=s("oG6K"),n=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);e.default=n.a},zHs3:function(t,e,s){"use strict";var a=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))((function(n,r){function i(t){try{u(a.next(t))}catch(t){r(t)}}function o(t){try{u(a.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(i,o)}u((a=a.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(s("oCYn")),i=n(s("aSVZ")),o=n(s("fVeH")),u=n(s("82fW")),d=s("L2JU");e.default=r.default.extend({components:{DataTable:o.default,UserInfo:i.default,ToastMessages:u.default},data:()=>({selectedUserId:"",calculatingPoints:!1}),computed:Object.assign(Object.assign({},d.mapState(["users"])),{selectedUser(){return this.users.find(t=>t.id===this.selectedUserId)}}),created(){return a(this,void 0,void 0,(function*(){const t=yield this.executeGet("/admin/users/load");this.isError(t)||this.$store.commit("setUsers",t),$("#loading").fadeOut(),$("#app").attr("style","visibility: visible").hide().fadeIn()}))},methods:{updateUser(t){const e=this.users.findIndex(e=>e.id==t.id);-1!==e&&r.default.set(this.users,e,t)},updateUserPoints(t){return a(this,void 0,void 0,(function*(){this.calculatingPoints=!0,(yield this.executePost("/admin/users/updateAllUserPoints",{},t))&&(this.calculatingPoints=!1)}))}}})}},[["OIxf",0,1]]]);