(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[42],{1161:(t,e,s)=>{"use strict";var i,a;s.d(e,{U:()=>i,O:()=>a}),function(t){t.WIP="WIP",t.Done="Done",t.Qualified="Qualified",t.Ranked="Ranked",t.Secret="Secret"}(i||(i={})),function(t){t.Osu="osu",t.Taiko="taiko",t.Catch="catch",t.Mania="mania",t.Hybrid="hybrid"}(a||(a={}))},1515:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{tabindex:"-1"}},[s("div",{staticClass:"modal-dialog",class:"modal-"+t.modalSize},[t.loaded?s("div",{staticClass:"modal-content the-a-background"},[s("div",{staticClass:"modal-header",class:t.headerClass||"bg-primary"},[s("h5",{staticClass:"modal-title"},[t._t("header",[t._v("\n                        "+t._s(t.title)+"\n                    ")])],2),t._v(" "),s("a",{staticClass:"close",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(t){t.preventDefault()}}},[t._v("\n                    Ã—\n                ")])]),t._v(" "),s("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),t.$slots.footer?s("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()]):t._e()])])};i._withStripped=!0;var a=s(2934);const n=s.n(a)().extend({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});var r=(0,s(1900).Z)(n,i,[],!1,null,null,null);r.options.__file="src/components/ModalDialog.vue";const o=r.exports},5278:(t,e,s)=>{"use strict";s.d(e,{Z:()=>j});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal-dialog",{attrs:{id:"submitQuest",title:t.isAdmin?"Add quest":"Submit quest"}},[s("div",{staticClass:"container"},[s("form-select",{attrs:{label:"Artist",placeholder:"No specific artist"},model:{value:t.selectedArtist,callback:function(e){t.selectedArtist=e},expression:"selectedArtist"}},[s("option",{attrs:{value:"-",disabled:""}},[t._v("\n                ---\n            ")]),t._v(" "),t._l(t.featuredArtists,(function(e){return s("option",{key:e.id,domProps:{value:e.osuId+"|"+e.label}},[t._v("\n                "+t._s(e.label)+"\n            ")])}))],2),t._v(" "),t.isAdmin?t._e():s("div",{staticClass:"row col"},[s("ul",{staticClass:"small text-secondary"},[s("li",[t._v("This artist's logo will be used as the quest's icon.")]),t._v(" "),s("li",[t._v("If your quest allows songs from a few artists, choose whichever best expresses its theme.")]),t._v(" "),s("li",[t._v('If your quest allows songs from many artists, choose "No specific artist".')]),t._v(" "),s("li",[t._v('Selecting an artist pre-fills the "Name" and "Objective" fields, though these can still be customized.')])])]),t._v(" "),s("form-input",{attrs:{label:"Required mapsets",type:"number"},model:{value:t.mapsetCount,callback:function(e){t.mapsetCount=t._n(e)},expression:"mapsetCount"}}),t._v(" "),t.isAdmin?t._e():s("div",{staticClass:"row col"},[s("ul",{staticClass:"small text-secondary"},[s("li",[t._v("Submitting quest for approval requires you to spend points correlating to how many mapsets are required. The fewer required mapsets, the more points you'll have to spend (and vice versa).")]),t._v(" "),s("li",[t._v("Choosing a number pre-fills various fields, though these can still be customized.")])])]),t._v(" "),s("form-input",{attrs:{label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),s("form-textarea",{attrs:{label:"Objective"},model:{value:t.objective,callback:function(e){t.objective=e},expression:"objective"}}),t._v(" "),s("form-input",{attrs:{label:"Price",type:"number",placeholder:"price per party member...",description:"...points required per party member"},model:{value:t.price,callback:function(e){t.price=t._n(e)},expression:"price"}}),t._v(" "),s("form-input",{attrs:{label:"Timeframe",type:"number",description:"...days to complete quest"},model:{value:t.timeframe,callback:function(e){t.timeframe=t._n(e)},expression:"timeframe"}}),t._v(" "),s("form-input",{attrs:{label:"Party size (min)",type:"number"},model:{value:t.minParty,callback:function(e){t.minParty=t._n(e)},expression:"minParty"}}),t._v(" "),s("form-input",{attrs:{label:"Party size (max)",type:"number",description:"...members required to accept quest (min/max)"},model:{value:t.maxParty,callback:function(e){t.maxParty=t._n(e)},expression:"maxParty"}}),t._v(" "),t.isAdmin?[s("form-input",{attrs:{label:"Party rank (min)",type:"number",description:"...rank required to accept quest"},model:{value:t.minRank,callback:function(e){t.minRank=t._n(e)},expression:"minRank"}}),t._v(" "),s("form-checkbox",{attrs:{id:"isMbcCheckbox",label:"is MBC",info:"Toggle isMbc"},model:{value:t.isMbc,callback:function(e){t.isMbc=e},expression:"isMbc"}})]:t._e(),t._v(" "),s("div",{staticClass:"radial-divisor"}),t._v(" "),t.isAdmin?s("div",{staticClass:"row col-sm"},[s("button",{staticClass:"btn btn-outline-secondary btn-block",on:{click:function(e){return t.addToQueue()}}},[t._v("\n                Add quest to queue\n                "),s("i",{staticClass:"fas fa-coins"})]),t._v(" "),t.queuedQuests.length?s("div",{staticClass:"mt-2"},[t._v("\n                Pending quests\n                "),s("ul",{staticClass:"small text-secondary"},t._l(t.queuedQuests,(function(e){return s("li",{key:e.name},[t._v("\n                        "+t._s(e.name)+"\n                        "),s("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.removeFromQueue(e.name)}}},[s("i",{staticClass:"fas fa-minus"})])])})),0)]):t._e(),t._v(" "),t.queuedQuests.length?s("button",{staticClass:"btn btn-outline-success btn-block",on:{click:function(e){return t.publishQuests(e)}}},[t._v("\n                Publish quests\n            ")]):t._e()]):s("div",{staticClass:"row col-sm small text-secondary"},[s("p",[t._v("\n                Keep in mind that your quest may need revision before it is approved and published on the Mappers' Guild quest listing!\n            ")]),t._v(" "),s("p",[t._v("\n                If your quest is rejected, your spent points will be returned and pishifat will send you a message explaining why it was rejected.\n                You may re-submit the quest with changes according to that message. Minor wording changes will be modified by pishifat without rejection.\n            ")]),t._v(" "),s("button",{staticClass:"btn btn-outline-success btn-block",attrs:{disabled:!t.enoughPoints},on:{click:function(e){return t.submitQuest(e)}}},[t._v("\n                "+t._s("Submit quest for approval: "+t.points+" pts")+"\n                "),s("i",{staticClass:"fas fa-coins"})])])],2)])};i._withStripped=!0;var a=s(2934),n=s.n(a),r=s(6564),o=s(1515),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form-field-base",{attrs:{label:t.label,description:t.description}},[s("input",{staticClass:"form-control form-control-sm",attrs:{type:t.type,placeholder:t.placeholder,autocomplete:"off"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])};l._withStripped=!0;var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-sm-3 col-form-label"},[s("b",[t._v(t._s(t.label))])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[t._t("default"),t._v(" "),t.description?s("p",{staticClass:"text-secondary small"},[t._v("\n            "+t._s(t.description)+"\n        ")]):t._e()],2)])};c._withStripped=!0;const u=n().extend({name:"FormFieldBase",props:{label:{type:String,required:!0},description:{type:String,default:""}}});var d=s(1900),m=(0,d.Z)(u,c,[],!1,null,null,null);m.options.__file="src/components/admin/FormFieldBase.vue";const p=m.exports,h=n().extend({name:"FormField",components:{FormFieldBase:p},props:{label:{type:String,required:!0},placeholder:{type:String,default:""},value:{type:[String,Number],required:!0},type:{type:String,default:"text"},description:{type:String,default:""}}});var f=(0,d.Z)(h,l,[],!1,null,null,null);f.options.__file="src/components/admin/FormInput.vue";const v=f.exports;var b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form-field-base",{attrs:{label:t.label}},[s("textarea",{staticClass:"form-control form-control-sm",attrs:{rows:t.rows,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])};b._withStripped=!0;const _=n().extend({name:"FormField",components:{FormFieldBase:p},props:{label:{type:String,required:!0},placeholder:{type:String,default:""},value:{type:String,required:!0},rows:{type:Number,default:3}}});var y=(0,d.Z)(_,b,[],!1,null,null,null);y.options.__file="src/components/admin/FormTextarea.vue";const g=y.exports;var C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form-field-base",{attrs:{label:t.label}},[s("select",{staticClass:"form-control form-control-sm",on:{input:function(e){return t.$emit("input",e.target.value)}}},[s("option",{attrs:{value:"",selected:""}},[t._v("\n            "+t._s(t.placeholder)+"\n        ")]),t._v(" "),t._t("default",t._l(t.options,(function(e,i){return s("option",{key:i,domProps:{value:e,selected:e===t.value}},[t._v("\n                "+t._s(e)+"\n            ")])})))],2)])};C._withStripped=!0;const x=n().extend({name:"FormField",components:{FormFieldBase:p},props:{label:{type:String,required:!0},placeholder:{type:String,default:"..."},value:{type:String,required:!0},type:{type:String,default:"text"},options:{type:Array,default:()=>[]}}});var k=(0,d.Z)(x,C,[],!1,null,null,null);k.options.__file="src/components/admin/FormSelect.vue";const q=k.exports;var P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form-field-base",{attrs:{label:t.label}},[s("div",{staticClass:"form-check"},[s("input",{staticClass:"form-check-input",attrs:{id:t.id,type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:t.id}},[t._v("\n            "+t._s(t.info)+"\n        ")])])])};P._withStripped=!0;const w=n().extend({name:"FormCheckbox",components:{FormFieldBase:p},model:{prop:"checked",event:"change"},props:{id:{type:String,required:!0},label:{type:String,required:!0},info:{type:String,default:""},checked:Boolean}});var S=(0,d.Z)(w,P,[],!1,null,null,null);S.options.__file="src/components/admin/FormCheckbox.vue";const A=S.exports;var F=function(t,e,s,i){return new(s||(s=Promise))((function(a,n){function r(t){try{l(i.next(t))}catch(t){n(t)}}function o(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}l((i=i.apply(t,e||[])).next())}))};const Q=n().extend({name:"SubmitQuestModal",components:{ModalDialog:o.Z,FormInput:v,FormTextarea:g,FormSelect:q,FormCheckbox:A},props:{isAdmin:Boolean},data:()=>({featuredArtists:[],selectedArtist:"",mapsetCount:6,name:"",price:0,objective:"",timeframe:0,minParty:0,maxParty:0,minRank:0,isMbc:!1,queuedQuests:[]}),computed:Object.assign(Object.assign({},(0,r.rn)(["loggedInUser"])),{packType(){return 1==this.mapsetCount?"single":2==this.mapsetCount?"double":this.mapsetCount<=4?"mini-pack":this.mapsetCount<=9?"pack":this.mapsetCount>=10?"mega-pack":"invalid-pack"},selectedArtistOsuId(){return this.selectedArtist.length?this.selectedArtist.split("|")[0]:""},selectedArtistName(){return this.selectedArtist.length?this.selectedArtist.split("|")[1]:""},points(){let t=25;return this.selectedArtist||(t+=10),this.mapsetCount<1?t=727:1==this.mapsetCount?t+=100:this.mapsetCount<10&&(t+=7.5*(10-this.mapsetCount)),t},enoughPoints(){return this.loggedInUser.availablePoints-this.points>0}}),watch:{selectedArtist(){this.selectedArtistName.length&&this.mapsetCount>0&&(this.name=this.findName(),this.objective=this.findObjective(),this.price=this.findPrice(),this.timeframe=this.findTimeframe(),this.minParty=this.mapsetCount,this.maxParty=3*this.mapsetCount)},mapsetCount(){this.selectedArtistName.length&&this.mapsetCount>0&&(this.name=this.findName(),this.objective=this.findObjective(),this.price=this.findPrice(),this.timeframe=this.findTimeframe(),this.minParty=this.mapsetCount,this.maxParty=3*this.mapsetCount)}},created(){return F(this,void 0,void 0,(function*(){const t=yield this.executeGet("/featuredArtists");t&&(this.featuredArtists=t.sort(((t,e)=>t.label.toLowerCase()>e.label.toLowerCase()?1:e.label.toLowerCase()>t.label.toLowerCase()?-1:0)))}))},methods:{findName(){return this.selectedArtistName+" "+this.packType},findObjective(){return 1==this.mapsetCount?`Create and rank ${this.mapsetCount} mapset of any song by ${this.selectedArtistName}.`:`Create and rank at least ${this.mapsetCount} mapsets of songs by ${this.selectedArtistName}, each hosted by a different user.`},findPrice(){switch(this.mapsetCount){case 1:return 20;case 2:return 10;case 3:return 5;default:return 0}},findTimeframe(){return 10*this.mapsetCount+70},resetQuestDetails(){this.selectedArtist="",this.mapsetCount=6,this.name="",this.price=0,this.objective="",this.timeframe=0,this.minParty=0,this.maxParty=0,this.minRank=0,this.isMbc=!1},addToQueue(){this.queuedQuests.push({name:this.name,price:this.price,descriptionMain:this.objective,timeframe:864e5*this.timeframe,minParty:this.minParty,maxParty:this.maxParty,minRank:this.minRank,isMbc:this.isMbc,art:parseInt(this.selectedArtistOsuId),requiredMapsets:this.mapsetCount}),this.resetQuestDetails()},removeFromQueue(t){this.queuedQuests=this.queuedQuests.filter((e=>e.name!=t))},submitQuest(t){return F(this,void 0,void 0,(function*(){const e={name:this.name,price:this.price,descriptionMain:this.objective,timeframe:864e5*this.timeframe,minParty:this.minParty,maxParty:this.maxParty,art:this.selectedArtistOsuId,requiredMapsets:this.mapsetCount},s=yield this.executePost("/quests/submit",e,t);this.isError(s)||($("#submitQuest").modal("hide"),this.resetQuestDetails())}))},publishQuests(t){return F(this,void 0,void 0,(function*(){const e={quests:this.queuedQuests},s=yield this.executePost("/admin/quests/create",e,t);this.isError(s)||($("#submitQuest").modal("hide"),this.queuedQuests=[])}))}}});var M=(0,d.Z)(Q,i,[],!1,null,null,null);M.options.__file="src/components/quests/SubmitQuestModal.vue";const j=M.exports},5871:(t,e,s)=>{"use strict";s.d(e,{Z:()=>c});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-body container"},[s("h5",[t._v("\n        Associated maps\n    ")]),t._v(" "),t.associatedMaps.length?s("ul",{staticClass:"pl-3 mb-0"},t._l(t.associatedMaps,(function(e){return s("li",{key:e.id,staticClass:"text-secondary"},[s("i",{staticClass:"fas",class:["text-"+e.status.toLowerCase(),t.findIcon(e.status)],attrs:{"data-toggle":"tooltip",title:e.status}}),t._v(" "),e.url?s("a",{attrs:{href:e.url,target:"_blank"}},[t._v("\n                "+t._s(e.song.artist)+" - "+t._s(e.song.title)+"\n            ")]):s("span",[t._v(t._s(e.song.artist)+" - "+t._s(e.song.title))]),t._v("\n            by "),s("a",{attrs:{href:"https://osu.ppy.sh/users/"+e.host.osuId,target:"_blank"}},[t._v(t._s(e.host.username))])])})),0):s("div",{staticClass:"small text-white-50 ml-3"},[t._v("\n        No associated maps...\n    ")])])};i._withStripped=!0;var a=s(2934),n=s.n(a),r=s(1161);const o=n().extend({props:{associatedMaps:{type:Array,required:!0}},methods:{findIcon:t=>t==r.U.WIP?"fa-ellipsis-h":t==r.U.Done?"fa-check":t==r.U.Qualified||t==r.U.Ranked?"fa-check-circle":""}});var l=(0,s(1900).Z)(o,i,[],!1,null,"d6975d28",null);l.options.__file="src/components/quests/partyInfo/AssociatedBeatmaps.vue";const c=l.exports}}]);