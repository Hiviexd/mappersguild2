(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[999],{1516:(t,e,s)=>{"use strict";s.d(e,{Z:()=>u});var o=s(5393);const a={class:"modal fade",tabindex:"-1"},i={key:0,class:"modal-content the-a-background"},d={class:"modal-title"},r=(0,o.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),n={class:"modal-body"},l={key:0,class:"modal-footer"},c=(0,o.defineComponent)({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});c.render=function(t,e,s,c,u,p){return(0,o.openBlock)(),(0,o.createBlock)("div",a,[(0,o.createVNode)("div",{class:["modal-dialog modal-fullscreen-lg-down",`modal-${t.modalSize}`]},[t.loaded?((0,o.openBlock)(),(0,o.createBlock)("div",i,[(0,o.createVNode)("div",{class:["modal-header",t.headerClass||"bg-primary"]},[(0,o.createVNode)("h5",d,[(0,o.renderSlot)(t.$slots,"header",{},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.title),1)]))]),r],2),(0,o.createVNode)("div",n,[(0,o.renderSlot)(t.$slots,"default")]),t.$slots.footer?((0,o.openBlock)(),(0,o.createBlock)("div",l,[(0,o.renderSlot)(t.$slots,"footer")])):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0)],2)])};const u=c},9352:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var o=s(5393);const a={key:0,class:"table table-sm"},i=(0,o.createVNode)("th",null,"EDIT",-1),d={key:1,class:"text-white-50"},r=(0,o.defineComponent)({name:"DataTable",props:{data:{type:Array,required:!0},headers:{type:Array,required:!0},isLoading:Boolean,customDataTarget:{type:String,default:null}},emits:["update:selectedId"]});r.render=function(t,e,s,r,n,l){return(0,o.openBlock)(),(0,o.createBlock)("div",null,[t.data.length?((0,o.openBlock)(),(0,o.createBlock)("table",a,[(0,o.createVNode)("thead",null,[(0,o.createVNode)("tr",null,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(t.headers,(t=>((0,o.openBlock)(),(0,o.createBlock)("th",{key:t},(0,o.toDisplayString)(t),1)))),128)),i])]),(0,o.createVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(t.data,(e=>((0,o.openBlock)(),(0,o.createBlock)("tr",{key:e.id,class:"text-white-50"},[(0,o.renderSlot)(t.$slots,"default",{obj:e}),(0,o.createVNode)("td",null,[(0,o.createVNode)("a",{href:"#","data-bs-toggle":"modal","data-bs-target":t.customDataTarget||"#edit",onClick:(0,o.withModifiers)((s=>t.$emit("update:selectedId",e.id)),["prevent"])}," edit ",8,["data-bs-target","onClick"])])])))),128))])])):t.isLoading?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)("span",d,"None..."))])};const n=r},656:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>B});var o=s(5393);const a={class:"container card card-body py-1"},i={class:"row"},d={class:"col-sm"},r={key:1};var n=s(6564);const l={key:1},c={class:"container"},u={class:"row"},p={class:"row"},h={class:"row"},f=(0,o.createVNode)("option",{value:"public"}," Public ",-1),m=(0,o.createVNode)("option",{value:"private"}," Private ",-1),g=(0,o.createVNode)("option",{value:"showcase"}," Showcase ",-1),A=(0,o.createVNode)("hr",null,null,-1),v={class:"row"},b={class:"row"},y={class:"row"};var k=s(1516),S=function(t,e,s,o){return new(s||(s=Promise))((function(a,i){function d(t){try{n(o.next(t))}catch(t){i(t)}}function r(t){try{n(o.throw(t))}catch(t){i(t)}}function n(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(d,r)}n((o=o.apply(t,e||[])).next())}))};const N=(0,o.defineComponent)({name:"FeaturedArtistInfo",components:{ModalDialog:k.Z},props:{featuredArtist:{type:Object,default:null}},data:()=>({osuId:0,name:"",status:"",selectedSong:null,artist:"",title:""}),computed:{alphabeticalSongs(){return[...this.featuredArtist.songs].sort(((t,e)=>t.title.toLowerCase()>e.title.toLowerCase()?1:e.title.toLowerCase()>t.title.toLowerCase()?-1:0))}},watch:{featuredArtist(){this.osuId=this.featuredArtist.osuId,this.name=this.featuredArtist.label,this.status=this.featuredArtist.status,this.title=""},selectedSong(){this.selectedSong&&(this.artist=this.selectedSong.artist,this.title=this.selectedSong.title)}},methods:{updateOsuId(t){return S(this,void 0,void 0,(function*(){const e=yield this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOsuId`,{osuId:this.osuId},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated osu id",type:"info"}),this.$store.commit("updateOsuId",{featuredArtistId:this.featuredArtist.id,osuId:e})),yield this.$http.executePost("/artists/toggleIsUpToDate/"+this.featuredArtist.id,{value:!0})}))},updateName(t){return S(this,void 0,void 0,(function*(){const e=yield this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateName`,{name:this.name},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated name",type:"info"}),this.$store.commit("updateName",{featuredArtistId:this.featuredArtist.id,name:e}))}))},updateStatus(t){return S(this,void 0,void 0,(function*(){const e=yield this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateStatus`,{status:this.status},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated status",type:"info"}),this.$store.commit("updateStatus",{featuredArtistId:this.featuredArtist.id,status:e}))}))},addSong(t){return S(this,void 0,void 0,(function*(){const e=yield this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/create`,{artist:this.artist,title:this.title},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"added song",type:"info"}),this.$store.commit("addSong",{featuredArtistId:this.featuredArtist.id,song:e}))}))},editSong(t){return S(this,void 0,void 0,(function*(){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song"});const e=yield this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/update`,{artist:this.artist,title:this.title},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated song",type:"info"}),this.$store.commit("updateSong",{featuredArtistId:this.featuredArtist.id,song:e}))}))},deleteSong(t){return S(this,void 0,void 0,(function*(){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song"});const e=yield this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/delete`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"deleted song",type:"info"}),this.$store.commit("deleteSong",{featuredArtistId:this.featuredArtist.id,songId:this.selectedSong.id}))}))}}});N.render=function(t,e,s,a,i,d){const r=(0,o.resolveComponent)("modal-dialog");return(0,o.openBlock)(),(0,o.createBlock)(r,{id:"edit",loaded:Boolean(t.featuredArtist)},{header:(0,o.withCtx)((()=>[t.featuredArtist.osuId?((0,o.openBlock)(),(0,o.createBlock)("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+t.featuredArtist.osuId,target:"_blank"},(0,o.toDisplayString)(t.featuredArtist.label),9,["href"])):((0,o.openBlock)(),(0,o.createBlock)("span",l,(0,o.toDisplayString)(t.featuredArtist.label),1)),(0,o.createTextVNode)(" ("+(0,o.toDisplayString)(t.featuredArtist.songs.length)+") ",1)])),default:(0,o.withCtx)((()=>[(0,o.createVNode)("div",c,[(0,o.createVNode)("p",u,[(0,o.withDirectives)((0,o.createVNode)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.osuId=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"osu id..."},null,512),[[o.vModelText,t.osuId]]),(0,o.createVNode)("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[2]||(e[2]=e=>t.updateOsuId(e))}," Save osu! ID ")]),(0,o.createVNode)("p",p,[(0,o.withDirectives)((0,o.createVNode)("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.name=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"artist name..."},null,512),[[o.vModelText,t.name]]),(0,o.createVNode)("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[4]||(e[4]=e=>t.updateName(e))}," Save name ")]),(0,o.createVNode)("p",h,[(0,o.withDirectives)((0,o.createVNode)("select",{"onUpdate:modelValue":e[5]||(e[5]=e=>t.status=e),class:"form-select form-select-sm w-50 mx-2"},[f,m,g],512),[[o.vModelSelect,t.status]]),(0,o.createVNode)("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[6]||(e[6]=e=>t.updateStatus(e))}," Save status ")]),A,(0,o.createVNode)("p",v,[(0,o.withDirectives)((0,o.createVNode)("select",{id:"editSongSelection","onUpdate:modelValue":e[7]||(e[7]=e=>t.selectedSong=e),class:"form-select form-select-sm"},[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(t.alphabeticalSongs,(t=>((0,o.openBlock)(),(0,o.createBlock)("option",{key:t.id,value:t},(0,o.toDisplayString)(t.title)+" --- ("+(0,o.toDisplayString)(t.artist)+") ",9,["value"])))),128))],512),[[o.vModelSelect,t.selectedSong]])]),(0,o.createVNode)("p",b,[(0,o.withDirectives)((0,o.createVNode)("input",{"onUpdate:modelValue":e[8]||(e[8]=e=>t.artist=e),class:"form-control form-control-sm mx-2 w-75",type:"text",autocomplete:"off",placeholder:"artist..."},null,512),[[o.vModelText,t.artist]])]),(0,o.createVNode)("p",y,[(0,o.withDirectives)((0,o.createVNode)("input",{"onUpdate:modelValue":e[9]||(e[9]=e=>t.title=e),class:"form-control form-control-sm mx-2 w-75",type:"text",autocomplete:"off",placeholder:"title..."},null,512),[[o.vModelText,t.title]])]),(0,o.createVNode)("p",null,[(0,o.createVNode)("button",{class:"btn btn-sm btn-outline-info mx-1",onClick:e[10]||(e[10]=e=>t.addSong(e))}," Add song "),(0,o.createVNode)("button",{class:"btn btn-sm btn-outline-info mx-1",onClick:e[11]||(e[11]=e=>t.editSong(e))}," Edit song "),(0,o.createVNode)("button",{class:"btn btn-sm btn-outline-danger mx-1",onClick:e[12]||(e[12]=e=>t.deleteSong(e))}," Delete song ")])])])),_:1},8,["loaded"])};const V=N;var $=s(9352);const I={state:{featuredArtists:[]},mutations:{setFeaturedArtists(t,e){t.featuredArtists=e},updateOsuId(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));s&&(s.osuId=e.osuId)},updateName(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));s&&(s.label=e.name)},addSong(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));s&&s.songs.push(e.song)},updateSong(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));if(s){const t=s.songs.findIndex((t=>t.id==e.song.id));-1!==t&&(s.songs[t]=e.song)}},deleteSong(t,e){const s=t.featuredArtists.find((t=>t.id==e.featuredArtistId));if(s){const t=s.songs.findIndex((t=>t.id==e.songId));-1!==t&&s.songs.splice(t,1)}}}};const w=(0,o.defineComponent)({components:{DataTable:$.Z,FeaturedArtistInfo:V},data:()=>({selectedFeaturedArtistId:""}),computed:Object.assign(Object.assign({},(0,n.rn)({featuredArtists:t=>t.artistsAdmin.featuredArtists})),{selectedFeaturedArtist(){return this.featuredArtists.find((t=>t.id===this.selectedFeaturedArtistId))}}),beforeCreate(){this.$store.hasModule("artistsAdmin")||this.$store.registerModule("artistsAdmin",I)},unmounted(){this.$store.hasModule("artistsAdmin")&&this.$store.unregisterModule("artistsAdmin")},created(){return t=this,e=void 0,o=function*(){const t=yield this.$http.initialRequest("/admin/featuredArtists/load");this.$http.isError(t)||this.$store.commit("setFeaturedArtists",t)},new((s=void 0)||(s=Promise))((function(a,i){function d(t){try{n(o.next(t))}catch(t){i(t)}}function r(t){try{n(o.throw(t))}catch(t){i(t)}}function n(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(d,r)}n((o=o.apply(t,e||[])).next())}));var t,e,s,o}});w.render=function(t,e,s,n,l,c){const u=(0,o.resolveComponent)("data-table"),p=(0,o.resolveComponent)("featured-artist-info");return(0,o.openBlock)(),(0,o.createBlock)("div",null,[(0,o.createVNode)("div",a,[(0,o.createVNode)("div",i,[(0,o.createVNode)("div",d,[(0,o.createVNode)(u,{data:t.featuredArtists,headers:["ARTIST"],"onUpdate:selectedId":e[1]||(e[1]=e=>t.selectedFeaturedArtistId=e)},{default:(0,o.withCtx)((({obj:t})=>[(0,o.createVNode)("td",null,[t.osuId?((0,o.openBlock)(),(0,o.createBlock)("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+t.osuId,target:"_blank"},(0,o.toDisplayString)(t.label),9,["href"])):((0,o.openBlock)(),(0,o.createBlock)("span",r,(0,o.toDisplayString)(t.label),1))])])),_:1},8,["data"])])])]),(0,o.createVNode)(p,{"featured-artist":t.selectedFeaturedArtist},null,8,["featured-artist"])])};const B=w}}]);