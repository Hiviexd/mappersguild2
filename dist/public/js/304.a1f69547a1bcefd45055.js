(self.webpackChunkmappersguild=self.webpackChunkmappersguild||[]).push([[304],{285:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var s=o(5393);const r={name:"CopyPaste",props:{distinct:{type:String,default:""}},methods:{copy(){const e=document.querySelector(`#copyText${this.distinct}`);e.classList.add("animate-flicker"),this.$store.dispatch("updateToastMessages",{message:"Copied",type:"info"}),setTimeout((()=>{e.classList.remove("animate-flicker")}),500);const t=e.innerHTML.replace(/<br>/gi,"\r\n"),o=document.createElement("div");o.innerHTML=t,navigator.clipboard.writeText(o.textContent.trim())}},render:function(e,t,o,r,n,a){return(0,s.openBlock)(),(0,s.createBlock)("div",{id:"copyText"+o.distinct,class:"copy-text small text-white-50 font-monospace",onClick:t[1]||(t[1]=(...e)=>a.copy&&a.copy(...e))},[(0,s.renderSlot)(e.$slots,"default")],8,["id"])}}},1516:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var s=o(5393);const r={class:"modal fade",tabindex:"-1"},n={key:0,class:"modal-content the-a-background"},a={class:"modal-title"},i=(0,s.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),c={class:"modal-body"},d={key:0,class:"modal-footer"},l=(0,s.defineComponent)({name:"ModalDialog",props:{title:{type:String,default:""},modalSize:{type:String,default:"lg"},headerClass:{type:String,default:"bg-primary"},loaded:{type:Boolean,default:!0}}});l.render=function(e,t,o,l,u,p){return(0,s.openBlock)(),(0,s.createBlock)("div",r,[(0,s.createVNode)("div",{class:["modal-dialog modal-fullscreen-lg-down",`modal-${e.modalSize}`]},[e.loaded?((0,s.openBlock)(),(0,s.createBlock)("div",n,[(0,s.createVNode)("div",{class:["modal-header",e.headerClass||"bg-primary"]},[(0,s.createVNode)("h5",a,[(0,s.renderSlot)(e.$slots,"header",{},(()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.title),1)]))]),i],2),(0,s.createVNode)("div",c,[(0,s.renderSlot)(e.$slots,"default")]),e.$slots.footer?((0,s.openBlock)(),(0,s.createBlock)("div",d,[(0,s.renderSlot)(e.$slots,"footer")])):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)],2)])};const u=l},9352:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var s=o(5393);const r={key:0,class:"table table-sm"},n=(0,s.createVNode)("th",null,"EDIT",-1),a={key:1,class:"text-white-50"},i=(0,s.defineComponent)({name:"DataTable",props:{data:{type:Array,required:!0},headers:{type:Array,required:!0},isLoading:Boolean,customDataTarget:{type:String,default:null}},emits:["update:selectedId"]});i.render=function(e,t,o,i,c,d){return(0,s.openBlock)(),(0,s.createBlock)("div",null,[e.data.length?((0,s.openBlock)(),(0,s.createBlock)("table",r,[(0,s.createVNode)("thead",null,[(0,s.createVNode)("tr",null,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.headers,(e=>((0,s.openBlock)(),(0,s.createBlock)("th",{key:e},(0,s.toDisplayString)(e),1)))),128)),n])]),(0,s.createVNode)("tbody",null,[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.data,(t=>((0,s.openBlock)(),(0,s.createBlock)("tr",{key:t.id,class:"text-white-50"},[(0,s.renderSlot)(e.$slots,"default",{obj:t}),(0,s.createVNode)("td",null,[(0,s.createVNode)("a",{href:"#","data-bs-toggle":"modal","data-bs-target":e.customDataTarget||"#edit",onClick:(0,s.withModifiers)((o=>e.$emit("update:selectedId",t.id)),["prevent"])}," edit ",8,["data-bs-target","onClick"])])])))),128))])])):e.isLoading?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)("span",a,"None..."))])};const c=i},7182:(e,t,o)=>{"use strict";o.d(t,{Z:()=>g});var s=o(5393);const r={class:"container"},n={class:"row"},a=(0,s.createVNode)("option",{value:"user"}," User ",-1),i=(0,s.createVNode)("option",{value:"admin"}," Admin ",-1),c=(0,s.createVNode)("option",{value:"secret"}," Secret ",-1),d=(0,s.createVNode)("option",{value:"spectator"}," Spectator ",-1),l={class:"row"},u={class:"row"};var p=o(1516),m=function(e,t,o,s){return new(o||(o=Promise))((function(r,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function i(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,i)}c((s=s.apply(e,t||[])).next())}))};const h=(0,s.defineComponent)({name:"UserInfo",components:{ModalDialog:p.Z},props:{user:{type:Object,default:null}},data:()=>({badge:0,discordId:"",group:""}),watch:{user(){this.badge=this.user.badge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||""}},created(){this.user&&(this.badge=this.user.badge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||"")},methods:{updateGroup(e){return m(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/users/${this.user.id}/updateGroup`,{group:this.group},e);t&&(this.$store.dispatch("updateToastMessages",{message:`set group to ${t}`,type:"info"}),this.$store.commit("updateGroup",{userId:this.user.id,group:t}))}))},updateBadge(e){return m(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/users/${this.user.id}/updateBadge`,{badge:this.badge},e);t&&(this.$store.dispatch("updateToastMessages",{message:`set queued badge to ${t}`,type:"info"}),this.$store.commit("updateBadge",{userId:this.user.id,badge:t}))}))},updateDiscordId(e){return m(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/users/${this.user.id}/updateDiscordId`,{discordId:this.discordId},e);t&&(this.$store.dispatch("updateToastMessages",{message:`set discord ID to ${t}`,type:"info"}),this.$store.commit("updateDiscordId",{userId:this.user.id,discordId:t}))}))},calculateUserPoints(e){return m(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/users/${this.user.id}/calculateUserPoints`,{},e);t&&this.$store.dispatch("updateToastMessages",{message:`calculated points: ${t}`,type:"info"})}))},toggleBypassLogin(e){return m(this,void 0,void 0,(function*(){const t=yield this.$http.executePost(`/admin/users/${this.user.id}/toggleBypassLogin`,{bypassLogin:!this.user.bypassLogin},e);t&&(this.$store.dispatch("updateToastMessages",{message:`set bypassLogin to ${t.bypassLogin}`,type:"info"}),this.$store.commit("updateBypassLogin",{userId:this.user.id,group:t.group,bypassLogin:t.bypassLogin}))}))}}});h.render=function(e,t,o,p,m,h){const g=(0,s.resolveComponent)("user-link"),k=(0,s.resolveComponent)("modal-dialog");return(0,s.openBlock)(),(0,s.createBlock)(k,{id:"editUser","header-class":e.user?"bg-rank-"+e.user.rank:"",loaded:Boolean(e.user)},{header:(0,s.withCtx)((()=>[(0,s.createVNode)(g,{user:e.user},null,8,["user"])])),default:(0,s.withCtx)((()=>[(0,s.createVNode)("div",r,[(0,s.createVNode)("p",n,[(0,s.withDirectives)((0,s.createVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.group=t),class:"form-select form-select-sm w-50 mx-2"},[a,i,c,d],512),[[s.vModelSelect,e.group]]),(0,s.createVNode)("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[2]||(t[2]=t=>e.updateGroup(t))}," Save group ")]),(0,s.createVNode)("p",l,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.badge=t),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off"},null,512),[[s.vModelText,e.badge]]),(0,s.createVNode)("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[4]||(t[4]=t=>e.updateBadge(t))}," Queue badge ")]),(0,s.createVNode)("p",u,[(0,s.withDirectives)((0,s.createVNode)("input",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.discordId=t),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off"},null,512),[[s.vModelText,e.discordId]]),(0,s.createVNode)("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[6]||(t[6]=t=>e.updateDiscordId(t))}," Save Discord ID ")]),(0,s.createVNode)("p",null,[(0,s.createVNode)("button",{class:"btn btn-sm btn-outline-info w-100",onClick:t[7]||(t[7]=t=>e.calculateUserPoints(t))}," Calculate user points ")]),(0,s.createVNode)("p",null,[(0,s.createVNode)("button",{class:"btn btn-sm btn-outline-info w-100",onClick:t[8]||(t[8]=t=>e.toggleBypassLogin(t))},(0,s.toDisplayString)(e.user.bypassLogin?"Enable":"Disable")+" ranked maps login requirement ",1)])])])),_:1},8,["header-class","loaded"])};const g=h},1454:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>P});var s=o(5393);const r={class:"container card card-body py-1"},n={class:"row"},a={class:"col-sm"},i={key:0,class:"ms-2 small text-white-50"};var c=o(7182),d=o(9352);const l={class:"container card card-body py-1 mb-4"},u={key:0},p=(0,s.createTextVNode)(" osu "),m={key:0,class:"btn btn-sm btn-outline-info"},h={key:1},g=(0,s.createTextVNode)(" taiko "),k={class:"btn btn-sm btn-outline-info"},f={key:2},y=(0,s.createTextVNode)(" catch "),b={key:0,class:"btn btn-sm btn-outline-info"},B={key:3},v=(0,s.createTextVNode)(" mania "),V={class:"btn btn-sm btn-outline-info"};var N=o(285);const U=(0,s.defineComponent)({name:"TieredUserList",components:{CopyPaste:N.Z},data:()=>({osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}),methods:{findTieredUsers(e){return t=this,o=void 0,r=function*(){const t=yield this.$http.executeGet("/admin/users/findTieredUsers",e);t&&!t.error&&(this.osuUsers=t.osuUsers,this.taikoUsers=t.taikoUsers,this.catchUsers=t.catchUsers,this.maniaUsers=t.maniaUsers)},new((s=void 0)||(s=Promise))((function(e,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function i(e){try{c(r.throw(e))}catch(e){n(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(a,i)}c((r=r.apply(t,o||[])).next())}));var t,o,s,r}}});U.render=function(e,t,o,r,n,a){const i=(0,s.resolveComponent)("copy-paste");return(0,s.openBlock)(),(0,s.createBlock)("div",l,[(0,s.createVNode)("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:t[1]||(t[1]=t=>e.findTieredUsers(t))}," Load tiered users "),e.osuUsers.length?((0,s.openBlock)(),(0,s.createBlock)("div",u,[p,(0,s.createVNode)(i,{distinct:"osu"},{default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.osuUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:e.id},(0,s.toDisplayString)(e.username),1)))),128))])),_:1}),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.osuUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("p",{key:e.osuId},["secret"!==e.group?((0,s.openBlock)(),(0,s.createBlock)("button",m,[(0,s.createVNode)("a",{href:"https://osu.ppy.sh/community/chat?sendto="+e.osuId,target:"_blank"},(0,s.toDisplayString)(e.username),9,["href"])])):(0,s.createCommentVNode)("",!0)])))),128))])):(0,s.createCommentVNode)("",!0),e.taikoUsers.length?((0,s.openBlock)(),(0,s.createBlock)("div",h,[g,(0,s.createVNode)(i,{distinct:"taiko"},{default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.taikoUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:e.id},(0,s.toDisplayString)(e.username),1)))),128))])),_:1}),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.taikoUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("p",{key:e.osuId},[(0,s.createVNode)("button",k,[(0,s.createVNode)("a",{href:"https://osu.ppy.sh/community/chat?sendto="+e.osuId,target:"_blank"},(0,s.toDisplayString)(e.username),9,["href"])])])))),128))])):(0,s.createCommentVNode)("",!0),e.catchUsers.length?((0,s.openBlock)(),(0,s.createBlock)("div",f,[y,(0,s.createVNode)(i,{distinct:"catch"},{default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.catchUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:e.id},(0,s.toDisplayString)(e.username),1)))),128))])),_:1}),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.catchUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("p",{key:e.osuId},["secret"!==e.group?((0,s.openBlock)(),(0,s.createBlock)("button",b,[(0,s.createVNode)("a",{href:"https://osu.ppy.sh/community/chat?sendto="+e.osuId,target:"_blank"},(0,s.toDisplayString)(e.username),9,["href"])])):(0,s.createCommentVNode)("",!0)])))),128))])):(0,s.createCommentVNode)("",!0),e.maniaUsers.length?((0,s.openBlock)(),(0,s.createBlock)("div",B,[v,(0,s.createVNode)(i,{distinct:"mania"},{default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.maniaUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("div",{key:e.id},(0,s.toDisplayString)(e.username),1)))),128))])),_:1}),((0,s.openBlock)(!0),(0,s.createBlock)(s.Fragment,null,(0,s.renderList)(e.maniaUsers,(e=>((0,s.openBlock)(),(0,s.createBlock)("p",{key:e.osuId},[(0,s.createVNode)("button",V,[(0,s.createVNode)("a",{href:"https://osu.ppy.sh/community/chat?sendto="+e.osuId,target:"_blank"},(0,s.toDisplayString)(e.username),9,["href"])])])))),128))])):(0,s.createCommentVNode)("",!0)])};const C=U,w={class:"container card card-body py-1 mb-4"},x={key:0};const $=(0,s.defineComponent)({name:"DiscordHighlightGenerator",components:{CopyPaste:N.Z},data:()=>({inputUsers:"",users:[]}),computed:{discordHighlights(){let e="";for(const t of this.users)e+=`<@${t.discordId}> `;return e}},methods:{generateDiscordHighlights(e){return t=this,o=void 0,r=function*(){const t=yield this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},e);t&&!t.error&&(this.users=t.users)},new((s=void 0)||(s=Promise))((function(e,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function i(e){try{c(r.throw(e))}catch(e){n(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(a,i)}c((r=r.apply(t,o||[])).next())}));var t,o,s,r}}});$.render=function(e,t,o,r,n,a){const i=(0,s.resolveComponent)("copy-paste");return(0,s.openBlock)(),(0,s.createBlock)("div",w,[(0,s.withDirectives)((0,s.createVNode)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.inputUsers=t),class:"form-control form-control-sm mx-2 mt-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[s.vModelText,e.inputUsers]]),(0,s.createVNode)("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:t[2]||(t[2]=t=>e.generateDiscordHighlights(t))}," Generate Discord highlights "),e.users.length?((0,s.openBlock)(),(0,s.createBlock)("div",x,[(0,s.createVNode)(i,null,{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.discordHighlights),1)])),_:1})])):(0,s.createCommentVNode)("",!0)])};const I=$;var D=o(6564);const L={state:{users:[]},mutations:{setUsers(e,t){e.users=t},updateBadge(e,t){const o=e.users.find((e=>e.id==t.userId));o&&(o.queuedBadge=t.badge)},updateDiscordId(e,t){const o=e.users.find((e=>e.id==t.userId));o&&(o.discordId=t.discordId)},updateBypassLogin(e,t){const o=e.users.find((e=>e.id==t.userId));o&&(o.bypassLogin=t.bypassLogin)}}};var S=function(e,t,o,s){return new(o||(o=Promise))((function(r,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function i(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,i)}c((s=s.apply(e,t||[])).next())}))};const T=(0,s.defineComponent)({components:{DataTable:d.Z,UserInfo:c.Z,TieredUserList:C,DiscordHighlightGenerator:I},data:()=>({selectedUserId:"",calculatingPoints:!1}),computed:Object.assign(Object.assign({},(0,D.rn)({users:e=>e.usersAdmin.users})),{selectedUser(){return this.users.find((e=>e.id===this.selectedUserId))}}),beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",L)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},created(){return S(this,void 0,void 0,(function*(){const e=yield this.$http.initialRequest("/admin/users/load");this.$http.isError(e)||this.$store.commit("setUsers",e)}))},methods:{updateUser(e){const t=this.users.findIndex((t=>t.id==e.id));-1!==t&&(this.users[t]=e)},updateUserPoints(e){return S(this,void 0,void 0,(function*(){this.calculatingPoints=!0,(yield this.$http.executePost("/admin/users/updateAllUserPoints",{},e))&&(this.calculatingPoints=!1)}))}}});T.render=function(e,t,o,c,d,l){const u=(0,s.resolveComponent)("user-link"),p=(0,s.resolveComponent)("data-table"),m=(0,s.resolveComponent)("user-info"),h=(0,s.resolveComponent)("tiered-user-list"),g=(0,s.resolveComponent)("discord-highlight-generator"),k=(0,s.resolveDirective)("bs-tooltip");return(0,s.openBlock)(),(0,s.createBlock)("div",null,[(0,s.createVNode)("div",r,[(0,s.createVNode)("div",n,[(0,s.createVNode)("div",a,[(0,s.createVNode)("button",{class:"btn btn-sm btn-info w-100",onClick:t[1]||(t[1]=t=>e.updateUserPoints(t))}," Update user points "),e.calculatingPoints?((0,s.openBlock)(),(0,s.createBlock)("span",i,"calculating points...")):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(p,{data:e.users,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":"#editUser","onUpdate:selectedId":t[2]||(t[2]=t=>e.selectedUserId=t)},{default:(0,s.withCtx)((({obj:e})=>[(0,s.createVNode)("td",null,[(0,s.createVNode)(u,{user:e},null,8,["user"])]),(0,s.createVNode)("td",null,[e.rank?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",{key:0,class:["fas fa-crown","text-rank-"+e.rank]},null,2)),[[k,`rank ${e.rank} user`]]):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)("td",{class:{"bg-open":e.rank!=e.queuedBadge}},[e.queuedBadge?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",{key:0,class:["fas fa-crown","text-rank-"+e.queuedBadge]},null,2)),[[k,`rank ${e.queuedBadge} user`]]):(0,s.createCommentVNode)("",!0)],2),(0,s.createVNode)("td",{class:{"bg-open":e.rank!=e.badge}},[e.badge?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createBlock)("i",{key:0,class:["fas fa-crown","text-rank-"+e.badge]},null,2)),[[k,`rank ${e.badge} user`]]):(0,s.createCommentVNode)("",!0)],2)])),_:1},8,["data"])])])]),(0,s.createVNode)(m,{user:e.selectedUser,onUpdateUser:t[3]||(t[3]=t=>e.updateUser(t))},null,8,["user"]),(0,s.createVNode)(h),(0,s.createVNode)(g)])};const P=T}}]);