import{U as q}from"./UserInfo-76b802a7.js";import{D as B}from"./DataTable-b016a1a2.js";import{d as w,m as M,_ as v,o as t,e as r,a as n,j as f,t as k,y as E,i,w as m,b,n as y,k as p,p as h,q as G,F as g,r as _,s as V,u as N,f as D,g as L}from"./index-05be1e6e.js";import{C}from"./CopyPaste-3a6f9915.js";import{A as F}from"./AddRestrictedUser-a456cd19.js";import"./ModalDialog-18392add.js";const P=w({components:{DataTable:B,UserInfo:q},props:{groupedUsers:{type:Array,default:()=>[]},group:{type:String,required:!0}},data(){return{selectedUserId:""}},computed:{...M({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)}}}),K=["href"],T=n("i",{class:"fas fa-angle-down"},null,-1);function O(s,e,a,c,U,I){const u=h("user-link"),o=h("data-table"),l=h("user-info"),A=G("bs-tooltip");return t(),r("div",null,[n("a",{href:`#${s.group}`,"data-bs-toggle":"collapse",class:"ms-1",onClick:e[0]||(e[0]=E(()=>{},["prevent"]))},[n("h6",null,[f(k(s.group)+" ",1),T])],8,K),i(o,{id:s.group,class:y(s.groupedUsers.length>30?"collapse":"show"),data:s.groupedUsers,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":`#editUser${s.group}`,"onUpdate:selectedId":e[1]||(e[1]=d=>s.selectedUserId=d)},{default:m(({obj:d})=>[n("td",null,[i(u,{user:d},null,8,["user"])]),n("td",null,[d.rank?b((t(),r("i",{key:0,class:y(["fas fa-crown","text-rank-"+d.rank])},null,2)),[[A,`rank ${d.rank} user`]]):p("",!0)]),n("td",{class:y({"bg-open":d.rank!=d.queuedBadge})},[d.queuedBadge?b((t(),r("i",{key:0,class:y(["fas fa-crown","text-rank-"+d.queuedBadge])},null,2)),[[A,`rank ${d.queuedBadge} user`]]):p("",!0)],2),n("td",{class:y({"bg-open":d.rank!=d.badge})},[d.badge?b((t(),r("i",{key:0,class:y(["fas fa-crown","text-rank-"+d.badge])},null,2)),[[A,`rank ${d.badge} user`]]):p("",!0)],2)]),_:1},8,["id","class","data","custom-data-target"]),i(l,{user:s.selectedUser,"current-group":s.group},null,8,["user","current-group"])])}const R=v(P,[["render",O]]),j=w({name:"ShowcaseUserList",components:{CopyPaste:C},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const a of s)e.find(U=>U.osuId==a.osuId)||e.push(a);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://osu.ppy.sh/home/news/2022-07-25-mappers-guild-updates#how-to-participate`),s.push("if you'd like to map an upcoming featured artist song for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("i'll link some upcoming artists in return"),s.push("thank you!! -pishifat"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const z=s=>(V("data-v-902d16a2"),s=s(),N(),s),J={class:"container card card-body py-1"},Q=z(()=>n("h5",{class:"mt-2"}," FA showcase users by mode ",-1)),W={key:0,class:"row"},X={key:0,class:"col-sm-3"},Y={key:1,class:"col-sm-3"},Z={key:2,class:"col-sm-3"},x={key:3,class:"col-sm-3"};function ss(s,e,a,c,U,I){const u=h("user-link"),o=h("copy-paste");return t(),r("div",J,[Q,n("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=l=>s.findShowcaseUsers(l))}," Load users "),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(t(),r("div",W,[s.osuUsers.length?(t(),r("div",X,[f(" osu! "),i(o,{distinct:"osu"},{default:m(()=>[(t(!0),r(g,null,_(s.osuUsers,l=>(t(),r("div",{key:l.id},[i(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.taikoUsers.length?(t(),r("div",Y,[f(" osu!taiko "),i(o,{distinct:"taiko"},{default:m(()=>[(t(!0),r(g,null,_(s.taikoUsers,l=>(t(),r("div",{key:l.id},[i(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.catchUsers.length?(t(),r("div",Z,[f(" osu!catch "),i(o,{distinct:"catch"},{default:m(()=>[(t(!0),r(g,null,_(s.catchUsers,l=>(t(),r("div",{key:l.id},[i(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.maniaUsers.length?(t(),r("div",x,[f(" osu!mania "),i(o,{distinct:"mania"},{default:m(()=>[(t(!0),r(g,null,_(s.maniaUsers,l=>(t(),r("div",{key:l.id},[i(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0)])):p("",!0)])}const es=v(j,[["render",ss],["__scopeId","data-v-902d16a2"]]),ts=w({name:"ShowcaseUserList",components:{CopyPaste:C},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const a of s)e.find(U=>U.osuId==a.osuId)||e.push(a);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png`),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findContestHelperUsers(s){const e=await this.$http.executeGet("/admin/users/findContestHelperUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}}),rs={class:"container card card-body py-1"},os=n("h5",{class:"mt-2"}," Contest helper users by mode ",-1),ns={key:0,class:"row"},as={key:0,class:"col-sm-3"},is={key:1,class:"col-sm-3"},us={key:2,class:"col-sm-3"},ds={key:3,class:"col-sm-3"};function cs(s,e,a,c,U,I){const u=h("copy-paste");return t(),r("div",rs,[os,n("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=o=>s.findContestHelperUsers(o))}," Load users "),s.osuUsers&&s.taikoUsers&&s.catchUsers&&s.maniaUsers?(t(),r("div",ns,[s.osuUsers.length?(t(),r("div",as,[f(" osu! "),i(u,{distinct:"osu"},{default:m(()=>[(t(!0),r(g,null,_(s.osuUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):p("",!0),s.taikoUsers.length?(t(),r("div",is,[f(" osu!taiko "),i(u,{distinct:"taiko"},{default:m(()=>[(t(!0),r(g,null,_(s.taikoUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):p("",!0),s.catchUsers.length?(t(),r("div",us,[f(" osu!catch "),i(u,{distinct:"catch"},{default:m(()=>[(t(!0),r(g,null,_(s.catchUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):p("",!0),s.maniaUsers.length?(t(),r("div",ds,[f(" osu!mania "),i(u,{distinct:"mania"},{default:m(()=>[(t(!0),r(g,null,_(s.maniaUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):p("",!0)])):p("",!0)])}const ls=v(ts,[["render",cs]]),ps=w({name:"DiscordHighlightGenerator",components:{CopyPaste:C},data(){return{inputUsers:"",users:[]}},computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}}),hs={class:"container card card-body py-1"},ms=n("h5",{class:"mt-2"}," Generate Discord highlights ",-1),fs={key:0};function Us(s,e,a,c,U,I){const u=h("copy-paste");return t(),r("div",hs,[ms,b(n("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.inputUsers=o),class:"form-control form-control-sm mx-2 mb-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[D,s.inputUsers]]),n("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[1]||(e[1]=o=>s.generateDiscordHighlights(o))}," Generate Discord highlights "),s.users.length?(t(),r("div",fs,[i(u,null,{default:m(()=>[f(k(s.discordHighlights),1)]),_:1})])):p("",!0)])}const gs=v(ps,[["render",Us]]),_s=w({name:"DiscordHighlightGenerator",components:{CopyPaste:C},data(){return{osuId:null,output:null}},methods:{async searchUser(s){const e=await this.$http.executePost("/admin/users/searchUser",{osuId:this.osuId},s);e&&!e.error&&(this.output=e)}}}),$s={class:"container card card-body py-1"},ks=n("h5",{class:"mt-2"}," Search user in osu! API ",-1),ys={key:0};function bs(s,e,a,c,U,I){const u=h("copy-paste");return t(),r("div",$s,[ks,b(n("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.osuId=o),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=L(o=>s.searchUser(o),["enter"]))},null,544),[[D,s.osuId]]),n("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[2]||(e[2]=o=>s.searchUser(o))}," Load user "),s.output?(t(),r("div",ys,[i(u,null,{default:m(()=>[n("pre",null,k(s.output),1)]),_:1})])):p("",!0)])}const ws=v(_s,[["render",bs]]);var S=(s=>(s.User="user",s.Admin="admin",s.Secret="secret",s))(S||{});const vs={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const a=s.users.find(c=>c.id==e.userId);a&&(a.queuedBadge=e.badge)},updateDiscordId(s,e){const a=s.users.find(c=>c.id==e.userId);a&&(a.discordId=e.discordId)},updateIsShowcaseMapper(s,e){const a=s.users.find(c=>c.id==e.userId);a&&(a.isShowcaseMapper=e.isShowcaseMapper)},updateIsMentorshipAdmin(s,e){const a=s.users.find(c=>c.id==e.userId);a&&(a.isMentorshipAdmin=e.isMentorshipAdmin)},updateHasMerchAccess(s,e){const a=s.users.find(c=>c.id==e.userId);a&&(a.hasMerchAccess=e.hasMerchAccess)}}},Is=vs,As=w({components:{AdminUserTable:R,ShowcaseUserList:es,ContestHelperUserList:ls,DiscordHighlightGenerator:gs,OsuApiUserSearch:ws,AddRestrictedUser:F},data(){return{selectedUserId:"",userInput:""}},computed:{...M({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)},normalUsers(){return this.users.filter(s=>s.group==S.User)},showcaseUsers(){return this.users.filter(s=>s.group==S.Secret)},admins(){return this.users.filter(s=>s.group==S.Admin)}},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",Is)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},methods:{async loadAllUsers(s){const e=await this.$http.executeGet("/admin/users/load",s);this.$http.isError(e)||this.$store.commit("setUsers",e)},async searchUser(s){const e=await this.$http.executeGet(`/admin/users/searchUser/${this.userInput}`,s);this.$http.isError(e)||this.$store.commit("setUsers",[e])}}}),Ss={class:"container card card-body"},Cs=n("h4",null," Load users ",-1),Ds=n("h5",{class:"mt-2"}," Single user ",-1),Ms=n("h5",{class:"mt-2"}," All users ",-1),Ls={key:0},Hs=n("hr",null,null,-1),qs=n("hr",null,null,-1);function Bs(s,e,a,c,U,I){const u=h("admin-user-table"),o=h("osu-api-user-search"),l=h("add-restricted-user"),A=h("showcase-user-list"),d=h("contest-helper-user-list"),H=h("discord-highlight-generator");return t(),r("div",null,[n("div",Ss,[Cs,Ds,b(n("input",{"onUpdate:modelValue":e[0]||(e[0]=$=>s.userInput=$),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=L($=>s.searchUser($),["enter"]))},null,544),[[D,s.userInput]]),n("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[2]||(e[2]=$=>s.searchUser($))}," Load user "),Ms,n("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[3]||(e[3]=$=>s.loadAllUsers($))}," Load all users "),s.users.length?(t(),r("div",Ls,[i(u,{"grouped-users":s.admins,group:"admin"},null,8,["grouped-users"]),i(u,{"grouped-users":s.showcaseUsers,group:"secret"},null,8,["grouped-users"]),i(u,{"grouped-users":s.normalUsers,group:"user"},null,8,["grouped-users"])])):p("",!0)]),Hs,i(o,{class:"mb-2"}),i(l,{class:"mb-2"}),qs,i(A,{class:"mb-2"}),i(d,{class:"mb-2"}),i(H,{class:"mb-2"})])}const Ks=v(As,[["render",Bs]]);export{Ks as default};
