import{d as _,m as b,x as R,_ as v,o as l,e as i,i as I,a as o,F as h,r as g,n as z,y as A,t as u,p,k as d,j as n,s as C,u as V,b as f,v as k,f as y,z as D,c as E}from"./index-3761deb6.js";import{F as P}from"./FilterBox-ea460d96.js";const U={namespaced:!0,state:{filterValue:"",locusInfos:[],selfLocusInfo:null},mutations:{setFilterValue(s,e){s.filterValue=e},setLocusInfos(s,e){s.locusInfos=e},setSelfLocusInfo(s,e){s.selfLocusInfo=e},setRoleIs(s,e){s.roleIs=e},updateTimezone(s,e){s.selfLocusInfo.timezone=e},updateAvailability(s,e){s.selfLocusInfo.availability=e},updateLanguage(s,e){if(s.selfLocusInfo.languages&&s.selfLocusInfo.languages.length){const a=s.selfLocusInfo.languages.findIndex(c=>c==e);a>-1?s.selfLocusInfo.languages.splice(a,1):s.selfLocusInfo.languages.push(e)}else s.selfLocusInfo.languages=[e]},updateRole(s,e){if(s.selfLocusInfo.roles&&s.selfLocusInfo.roles.length){const a=s.selfLocusInfo.roles.findIndex(c=>c==e);a>-1?s.selfLocusInfo.roles.splice(a,1):s.selfLocusInfo.roles.push(e)}else s.selfLocusInfo.roles=[e]},updateDiscord(s,e){s.selfLocusInfo.discord=e},updateEmail(s,e){s.selfLocusInfo.email=e},updateAbout(s,e){s.selfLocusInfo.about=e},updateIsPublic(s,e){s.selfLocusInfo.isPublic=e}},getters:{filteredLocusInfos:s=>{let e=s.locusInfos;return s.filterValue.length&&(e=e.filter(a=>{let c;return a.user.username.toLowerCase().includes(s.filterValue.toLowerCase())&&(c=!0),a.user.osuId.toString().includes(s.filterValue)&&(c=!0),a.languages.includes(s.filterValue.toLowerCase())&&(c=!0),c})),s.roleIs&&s.roleIs!=="any"&&(e=e.filter(a=>a.roles.includes(s.roleIs))),e}},actions:{updateFilterValue({commit:s},e){s("setFilterValue",e)},updateRole({commit:s,state:e},a){e.roleIs!==a&&s("setRoleIs",a)}}},M=U,S=_({name:"LocusPageFilters",components:{FilterBox:P},data(){return{roleOptions:{any:"Any",designer:"Visual designer",mapper:"Mapper",musician:"Musician"}}},computed:b("locus",["roleIs"]),methods:R("locus",["updateFilterValue","updateRole"])}),F={class:"container card card-body py-3 mb-2"},O={class:"row small mt-3"},j=o("div",{class:"col-auto filter-title"}," Role ",-1),B={class:"col"},N=["onClick"];function Y(s,e,a,c,$,L){const r=p("filter-box");return l(),i("div",F,[I(r,{placeholder:"search username...","onUpdate:filterValue":e[0]||(e[0]=t=>s.updateFilterValue(t))}),o("div",O,[j,o("div",B,[(l(!0),i(h,null,g(s.roleOptions,(t,m)=>(l(),i("a",{key:m,class:z(s.roleIs===m?"sorted":"unsorted"),href:"#",onClick:A(w=>s.updateRole(m),["prevent"])},u(t),11,N))),128))])])])}const q=v(S,[["render",Y]]),H=_({name:"LocusCard",props:{locusInfo:{type:Object,required:!0}}});const W=s=>(C("data-v-02543138"),s=s(),V(),s),G={key:0},J={class:"card card-level-2 card-body my-2"},K=["src"],Q={class:"ms-3 mt-1 mb-1"},X={class:"ms-3"},Z={key:0,class:"ms-2 text-secondary text-capitalize"},x={key:1,class:"ms-2 text-secondary"},ss={key:0,class:"mb-3"},es={key:1,class:"small"},os={key:0},ts={class:"text-secondary"},ls={key:1},is={class:"text-secondary"},ns={key:2,class:"ms-2"},as={class:"text-secondary"},us={key:2,class:"small"},ds={class:"text-secondary"},cs=W(()=>o("a",{href:"https://www.timeanddate.com/time/map/#!cities=1440",target:"_blank"},"UTC",-1)),rs={key:3,class:"small"},fs={class:"text-secondary"},ps={key:4,class:"small"},ms={class:"text-secondary text-capitalize"},hs={key:5},gs={key:6,class:"small"},bs=["innerHTML"];function Is(s,e,a,c,$,L){const r=p("user-link");return s.locusInfo?(l(),i("div",G,[o("div",J,[o("img",{src:"https://a.ppy.sh/"+s.locusInfo.user.osuId,class:"card-avatar-img"},null,8,K),o("div",Q,[I(r,{class:"ms-2",user:s.locusInfo.user},null,8,["user"])]),o("div",X,[s.locusInfo.roles&&s.locusInfo.roles.length?(l(),i("i",Z,u(s.locusInfo.roles.join(", ")),1)):(l(),i("i",x,"No roles selected"))]),s.locusInfo.timezone||s.locusInfo.availability||s.locusInfo.languages&&s.locusInfo.languages.length?(l(),i("hr",ss)):d("",!0),s.locusInfo.discord||s.locusInfo.email?(l(),i("div",es,[s.locusInfo.discord&&s.locusInfo.discord.length&&s.locusInfo.email&&s.locusInfo.email.length?(l(),i("div",os,[n(" Discord: "),o("span",ts,[o("i",null,u(s.locusInfo.discord?s.locusInfo.discord:"Discord ID")+" ("+u(s.locusInfo.email)+")",1)])])):s.locusInfo.discord&&s.locusInfo.discord.length?(l(),i("div",ls,[n(" Discord: "),o("span",is,[o("i",null,u(s.locusInfo.discord?s.locusInfo.discord:"Discord ID"),1)])])):!s.locusInfo.discord&&!s.locusInfo.discord.length&&s.locusInfo.email&&s.locusInfo.email.length?(l(),i("div",ns,[n(" Email: "),o("span",as,[o("i",null,u(s.locusInfo.email),1)])])):d("",!0)])):d("",!0),s.locusInfo.timezone?(l(),i("div",us,[n(" Timezone: "),o("i",ds,[n(u(s.locusInfo.timezone)+" ",1),cs])])):d("",!0),s.locusInfo.availability?(l(),i("div",rs,[n(" Availability: "),o("i",fs,u(s.locusInfo.availability),1)])):d("",!0),s.locusInfo.languages&&s.locusInfo.languages.length?(l(),i("div",ps,[n(" Languages: "),o("i",ms,"English, "+u(s.locusInfo.languages.join(", ")),1)])):d("",!0),s.locusInfo.about?(l(),i("hr",hs)):d("",!0),s.locusInfo.about?(l(),i("div",gs,[o("span",{class:"text-secondary",innerHTML:s.$md.render(s.locusInfo.about.trim())},null,8,bs)])):d("",!0)])])):d("",!0)}const T=v(H,[["render",Is],["__scopeId","data-v-02543138"]]),ys=_({name:"SelfLocusInfo",components:{LocusCard:T},data(){return{timezoneOptions:["-11","-10","-9","-8","-7","-6","-5","-4","-3","-2","-1","+0","+1","+2","+3","+4","+5","+6","+7","+8","+9","+10","+11","+12"],languageOptions:["afrikaans","arabic","belarusian","cantonese","catalan","chinese","danish","dutch","filipino","finnish","french","galician","german","indonesian","italian","japanese","korean","lithuanian","malay","polish","portuguese","romanian","russian","serbian","spanish","swedish","thai","turkish","urdu","vietnamese"],roleOptions:["visual designer","mapper","musician"],newTimezone:"",newAvailability:"",newLanguage:"",newRole:"",newDiscord:"",newEmail:"",newAbout:""}},computed:{...b(["loggedInUser"]),...b("locus",["selfLocusInfo"]),userLanguages(){return this.selfLocusInfo&&this.selfLocusInfo.languages&&this.selfLocusInfo.languages.length?this.selfLocusInfo.languages:[]},userRoles(){return this.selfLocusInfo&&this.selfLocusInfo.roles&&this.selfLocusInfo.roles.length?this.selfLocusInfo.roles:[]}},watch:{selfLocusInfo(){this.newTimezone=this.selfLocusInfo.timezone,this.newAvailability=this.selfLocusInfo.availability,this.newDiscord=this.selfLocusInfo.discord,this.newEmail=this.selfLocusInfo.email,this.newAbout=this.selfLocusInfo.about}},methods:{async updateTimezone(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateTimezone`,{timezone:this.newTimezone},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated timezone",type:"info"}),this.$store.commit("locus/updateTimezone",e))},async updateAvailability(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateAvailability`,{availability:this.newAvailability},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated availability",type:"info"}),this.$store.commit("locus/updateAvailability",e))},async updateLanguage(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateLanguage`,{language:this.newLanguage},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated language",type:"info"}),this.$store.commit("locus/updateLanguage",e))},async updateRole(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateRole`,{role:this.newRole},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated role",type:"info"}),this.$store.commit("locus/updateRole",e))},async updateDiscord(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateDiscord`,{discord:this.newDiscord},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated discord",type:"info"}),this.$store.commit("locus/updateDiscord",e))},async updateEmail(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateEmail`,{email:this.newEmail},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated email",type:"info"}),this.$store.commit("locus/updateEmail",e))},async updateAbout(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateAbout`,{about:this.newAbout},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated about",type:"info"}),this.$store.commit("locus/updateAbout",e))},async toggleIsPublic(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/toggleIsPublic`,{},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated public display",type:"info"}),this.$store.commit("locus/updateIsPublic",e))}}}),_s={class:"row"},vs={class:"col-sm-6"},$s={class:"mb-2"},Ls={class:"small"},ws={class:"small text-secondary mb-1"},ks={class:"mb-2"},Ts={class:"small"},Rs=o("div",{class:"small text-secondary"},' What roles best describe you? Feel free to elaborate in "about" section ',-1),zs={class:"input-group"},As=o("option",{value:"",selected:"",disabled:""}," Select a role ",-1),Cs=["value"],Vs={class:"input-group-append"},Ds=["disabled"],Es=o("i",{class:"fas fa-plus"},null,-1),Ps=[Es],Us={class:"input-group-append"},Ms=["disabled"],Ss=o("i",{class:"fas fa-minus"},null,-1),Fs=[Ss],Os=o("hr",null,null,-1),js={class:"mb-2"},Bs={class:"small"},Ns=o("div",{class:"small text-secondary"}," Your Discord ID (if you want to communicate through Discord) ",-1),Ys={class:"mb-2"},qs={class:"small"},Hs=o("div",{class:"small text-secondary"}," Your email (if you want to communicate through email) ",-1),Ws={class:"mb-2"},Gs={class:"small"},Js=o("div",{class:"small text-secondary"},[n(" Relative to "),o("a",{href:"https://www.timeanddate.com/time/map/#!cities=1440",target:"_blank"},"UTC")],-1),Ks=o("option",{value:"",selected:"",disabled:""}," Select a timezone ",-1),Qs=["value"],Xs={class:"mb-2"},Zs={class:"small"},xs=o("div",{class:"small text-secondary"}," When you're usually available ",-1),se={class:"mb-2"},ee={class:"small"},oe=o("div",{class:"small text-secondary"}," Any languages you're comfortable communicating with (excluding English) ",-1),te={class:"input-group"},le=o("option",{value:"",selected:"",disabled:""}," Select a language ",-1),ie=["value"],ne={class:"input-group-append"},ae=["disabled"],ue=o("i",{class:"fas fa-plus"},null,-1),de=[ue],ce={class:"input-group-append"},re=["disabled"],fe=o("i",{class:"fas fa-minus"},null,-1),pe=[fe],me=o("hr",null,null,-1),he={class:"mb-2"},ge={class:"small"},be=o("div",{class:"small text-secondary"},[n(" Any info you'd like people to know about you, such as your preferred genres, mapping experience, or other relevant skills. This section also supports "),o("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),n("! ")],-1),Ie={key:0,class:"col-sm-6"},ye={class:"text-danger small mt-3"},_e=o("hr",null,null,-1);function ve(s,e,a,c,$,L){const r=p("locus-card");return l(),i("div",null,[o("div",null,[o("div",null,[o("div",_s,[o("div",vs,[o("div",$s,[o("div",Ls,[n(" Visibility "),o("div",ws,[n(" Toggle this for public display. Your listing is currently "),o("i",null,u(s.selfLocusInfo.isPublic?"visible":"not visible"),1),n("! ")]),o("button",{class:"btn btn-sm btn-outline-info mb-2 w-100",onClick:e[0]||(e[0]=t=>s.toggleIsPublic(t))},u(s.selfLocusInfo.isPublic?"Hide from public listing":"Show on public listing"),1)])]),o("div",ks,[o("div",Ts,[n(" Roles "),Rs,o("div",zs,[f(o("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.newRole=t),class:"form-control form-control-sm ml-2"},[As,(l(!0),i(h,null,g(s.roleOptions,t=>(l(),i("option",{key:t,value:t,class:"text-capitalize"},u(t),9,Cs))),128))],512),[[k,s.newRole]]),o("div",Vs,[s.userRoles.includes(s.newRole)?d("",!0):(l(),i("button",{key:0,disabled:s.userRoles.includes(s.newRole),class:"btn btn-sm btn-outline-success",type:"button",onClick:e[2]||(e[2]=t=>s.updateRole(t))},Ps,8,Ds))]),o("div",Us,[s.userRoles.includes(s.newRole)?(l(),i("button",{key:0,disabled:!s.userRoles.includes(s.newRole),class:"btn btn-sm btn-outline-danger",type:"button",onClick:e[3]||(e[3]=t=>s.updateRole(t))},Fs,8,Ms)):d("",!0)])])])]),Os,o("div",js,[o("div",Bs,[n(" Discord "),Ns,f(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.newDiscord=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"discord...",maxlength:"40",onChange:e[5]||(e[5]=t=>s.updateDiscord(t))},null,544),[[y,s.newDiscord]])])]),o("div",Ys,[o("div",qs,[n(" Email "),Hs,f(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.newEmail=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"email...",maxlength:"100",onChange:e[7]||(e[7]=t=>s.updateEmail(t))},null,544),[[y,s.newEmail]])])]),o("div",Ws,[o("div",Gs,[n(" Timezone "),Js,f(o("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>s.newTimezone=t),class:"form-select form-select-sm w-100 d-inline",onChange:e[9]||(e[9]=t=>s.updateTimezone(t))},[Ks,(l(!0),i(h,null,g(s.timezoneOptions,t=>(l(),i("option",{key:t,value:t},u(t)+" UTC ",9,Qs))),128))],544),[[k,s.newTimezone]])])]),o("div",Xs,[o("div",Zs,[n(" Availability "),xs,f(o("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>s.newAvailability=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"availability...",maxlength:"400",onChange:e[11]||(e[11]=t=>s.updateAvailability(t))},null,544),[[y,s.newAvailability]])])]),o("div",se,[o("div",ee,[n(" Languages "),oe,o("div",te,[f(o("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>s.newLanguage=t),class:"form-control form-control-sm ml-2"},[le,(l(!0),i(h,null,g(s.languageOptions,t=>(l(),i("option",{key:t,value:t,class:"text-capitalize"},u(t),9,ie))),128))],512),[[k,s.newLanguage]]),o("div",ne,[s.userLanguages.includes(s.newLanguage)?d("",!0):(l(),i("button",{key:0,disabled:s.userLanguages.includes(s.newLanguage),class:"btn btn-sm btn-outline-success",type:"button",onClick:e[13]||(e[13]=t=>s.updateLanguage(t))},de,8,ae))]),o("div",ce,[s.userLanguages.includes(s.newLanguage)?(l(),i("button",{key:0,disabled:!s.userLanguages.includes(s.newLanguage),class:"btn btn-sm btn-outline-danger",type:"button",onClick:e[14]||(e[14]=t=>s.updateLanguage(t))},pe,8,re)):d("",!0)])])])]),me,o("div",he,[o("div",ge,[n(" About "),be,f(o("textarea",{"onUpdate:modelValue":e[15]||(e[15]=t=>s.newAbout=t),length:"4",class:"ml-1 form-control form-control-sm",placeholder:"about...",maxlength:"40000",rows:"4",onChange:e[16]||(e[16]=t=>s.updateAbout(t))},null,544),[[y,s.newAbout]])])])]),s.selfLocusInfo?(l(),i("div",Ie,[I(r,{"locus-info":s.selfLocusInfo},null,8,["locus-info"]),o("div",ye,u(s.selfLocusInfo.isPublic?"":"Your info is currently hidden from public display."),1)])):d("",!0)])])]),_e])}const $e=v(ys,[["render",ve]]),Le=_({name:"LocusPage",components:{LocusPageFilters:q,SelfLocusInfo:$e,LocusCard:T},data(){return{userInput:null}},computed:{...b(["loggedInUser"]),...b("locus",["selfLocusInfo"]),...D("locus",["filteredLocusInfos"])},beforeCreate(){this.$store.hasModule("locus")||this.$store.registerModule("locus",M)},async created(){const s=await this.$http.initialRequest("/locus/query");this.$http.isError(s)||(this.$store.commit("locus/setLocusInfos",s.locusInfos),this.$store.commit("locus/setSelfLocusInfo",s.selfLocusInfo))},methods:{}}),we={class:"container card card-body mb-2"},ke=o("h5",{class:"mt-2"},[o("a",{"data-bs-toggle":"collapse",href:"#selfDetails"},[n(" Your details "),o("i",{class:"fas fa-angle-down"})])],-1),Te=o("div",{class:"radial-divisor"},null,-1),Re={class:"container card card-body"},ze=o("h4",null,"Marketplace",-1),Ae={class:"row"};function Ce(s,e,a,c,$,L){const r=p("locus-page-filters"),t=p("self-locus-info"),m=p("locus-card");return l(),i("div",null,[I(r),o("div",we,[ke,I(t,{id:"selfDetails",class:"collapse"})]),Te,o("div",Re,[ze,o("div",Ae,[(l(!0),i(h,null,g(s.filteredLocusInfos,w=>(l(),E(m,{key:w.id,"locus-info":w,class:"col-sm-6"},null,8,["locus-info"]))),128))])])])}const Ee=v(Le,[["render",Ce]]);export{Ee as default};
