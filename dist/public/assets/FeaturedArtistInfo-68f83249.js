import{M as $}from"./ModalDialog-d2726697.js";import{U}from"./UserLinkList-e60aa00a.js";import{d as v,_ as y,o as a,c as S,w as f,e as n,t as d,h as u,a as i,b as o,A as r,B as l,v as h,k as c,q as g,r as C,F as T,i as w}from"./index-c80135de.js";const I=v({name:"FeaturedArtistInfo",components:{ModalDialog:$,UserLinkList:U},props:{featuredArtist:{type:Object,default:null}},data(){return{osuId:0,name:"",status:"",referenceUrl:"",oszTemplatesUrl:"",offeredUsers:"",selectedSong:null,artist:"",title:"",reviewComment:""}},computed:{alphabeticalSongs(){return[...this.featuredArtist.songs].sort((e,t)=>e.title.toLowerCase()>t.title.toLowerCase()?1:t.title.toLowerCase()>e.title.toLowerCase()?-1:0)}},watch:{featuredArtist(){this.osuId=this.featuredArtist.osuId,this.name=this.featuredArtist.label,this.status=this.featuredArtist.status,this.referenceUrl=this.featuredArtist.referenceUrl,this.oszTemplatesUrl=this.featuredArtist.oszTemplatesUrl,this.offeredUsers=this.generateUserListText(this.featuredArtist.offeredUsers),this.title="",this.reviewComment=this.featuredArtist.reviewComment},selectedSong(){this.selectedSong&&(this.artist=this.selectedSong.artist,this.title=this.selectedSong.title)}},methods:{generateUserListText(e){let t="";return!e||!e.length?t:e.map(m=>m.username).join(", ")},async updateOsuId(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOsuId`,{osuId:this.osuId},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated osu id",type:"info"}),this.$store.commit("updateOsuId",{featuredArtistId:this.featuredArtist.id,osuId:t})),await this.$http.executePost("/artists/toggleIsUpToDate/"+this.featuredArtist.id,{value:!0})},async updateName(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateName`,{name:this.name},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated name",type:"info"}),this.$store.commit("updateName",{featuredArtistId:this.featuredArtist.id,name:t}))},async updateStatus(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateStatus`,{status:this.status},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated status",type:"info"}),this.$store.commit("updateStatus",{featuredArtistId:this.featuredArtist.id,status:t}))},async updateReferenceUrl(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateReferenceUrl`,{referenceUrl:this.referenceUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated reference URL",type:"info"}),this.$store.commit("updateReferenceUrl",{featuredArtistId:this.featuredArtist.id,referenceUrl:t}))},async updateOszTemplatesUrl(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOszTemplatesUrl`,{oszTemplatesUrl:this.oszTemplatesUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated osz templates URL",type:"info"}),this.$store.commit("updateOszTemplatesUrl",{featuredArtistId:this.featuredArtist.id,oszTemplatesUrl:t}))},async updateOfferedUsers(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOfferedUsers`,{offeredUsers:this.offeredUsers},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated offered users",type:"info"}),this.$store.commit("updateOfferedUsers",{featuredArtistId:this.featuredArtist.id,offeredUsers:t}))},async addSong(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/create`,{artist:this.artist,title:this.title},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"added song",type:"info"}),this.$store.commit("addSong",{featuredArtistId:this.featuredArtist.id,song:t}))},async editSong(e){if(!this.selectedSong){this.$store.dispatch("updateToastMessages",{message:"Select a song"});return}const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/update`,{artist:this.artist,title:this.title},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated song",type:"info"}),this.$store.commit("updateSong",{featuredArtistId:this.featuredArtist.id,song:t}))},async deleteSong(e){if(!this.selectedSong){this.$store.dispatch("updateToastMessages",{message:"Select a song"});return}const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/delete`,{},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"deleted song",type:"info"}),this.$store.commit("deleteSong",{featuredArtistId:this.featuredArtist.id,songId:this.selectedSong.id}))},async updateReviewComment(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateReviewComment`,{reviewComment:this.reviewComment},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated review comment",type:"info"}),this.$store.commit("updateReviewComment",{featuredArtistId:this.featuredArtist.id,reviewComment:t}))},async updateLastReviewed(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateLastReviewed`,{},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"updated last reviewed",type:"info"}),this.$store.commit("updateLastReviewed",{featuredArtistId:this.featuredArtist.id,lastReviewed:t}))},async updatePermanentlyDismiss(e){const t=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/togglePermanentlyDismiss`,{},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`updated permanenlty dismiss: ${t}`,type:"info"}),this.$store.commit("updatePermanentlyDismiss",{featuredArtistId:this.featuredArtist.id,permanentlyDismiss:t}))}}}),k=["href"],M={key:1},P={class:"container"},R=i("h5",null,"General",-1),L={class:"row mb-2 mx-1"},z={class:"row mb-2 mx-1"},O={class:"row mb-2 mx-1"},E=i("option",{value:"public"}," Public ",-1),V=i("option",{value:"private"}," Private ",-1),D=i("option",{value:"showcase"}," Showcase ",-1),N=[E,V,D],K=i("hr",null,null,-1),B=i("h5",null,"Showcase info",-1),F={class:"row mb-2 mx-1"},j={class:"row mb-2 mx-1"},x={class:"row mb-2 mx-1"},q={key:0,class:"small mx-4"},G={key:1,class:"small mx-4"},H=i("hr",null,null,-1),J=i("h5",null,"Songs",-1),Q={class:"row mb-2 mx-2 w-50"},W=["value"],X={class:"row mb-2 mx-2"},Y={class:"row mb-2 mx-2"},Z={class:"mx-1"},_=i("hr",null,null,-1),tt=i("h5",null,"Admin review",-1),et={class:"row mb-2 mx-1"},st={class:"row mb-2"},it={class:"col-sm-6"},ot={class:"text-secondary"},rt={class:"row mb-2"},at={class:"col-sm-6"},dt={class:"text-danger me-2"};function nt(e,t,A,m,lt,ut){const p=w("user-link-list"),b=w("modal-dialog");return a(),S(b,{id:"editFeaturedArtist",loaded:Boolean(e.featuredArtist)},{header:f(()=>[e.featuredArtist.osuId?(a(),n("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+e.featuredArtist.osuId,target:"_blank"},d(e.featuredArtist.label),9,k)):(a(),n("span",M,d(e.featuredArtist.label),1)),u(" ("+d(e.featuredArtist.songs.length)+") ",1)]),default:f(()=>[i("div",P,[R,i("div",L,[o(i("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.osuId=s),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"osu id...",onKeyup:t[1]||(t[1]=l(s=>e.updateOsuId(s),["enter"]))},null,544),[[r,e.osuId]]),i("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[2]||(t[2]=s=>e.updateOsuId(s))}," Save osu! ID ")]),i("div",z,[o(i("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.name=s),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"artist name...",onKeyup:t[4]||(t[4]=l(s=>e.updateName(s),["enter"]))},null,544),[[r,e.name]]),i("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[5]||(t[5]=s=>e.updateName(s))}," Save name ")]),i("div",O,[o(i("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>e.status=s),class:"form-select form-select-sm w-50 mx-2"},N,512),[[h,e.status]]),i("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[7]||(t[7]=s=>e.updateStatus(s))}," Save status ")]),K,B,i("div",F,[o(i("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>e.referenceUrl=s),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"artist reference url...",onKeyup:t[9]||(t[9]=l(s=>e.updateReferenceUrl(s),["enter"]))},null,544),[[r,e.referenceUrl]]),i("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[10]||(t[10]=s=>e.updateReferenceUrl(s))}," Save reference URL ")]),i("div",j,[o(i("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>e.oszTemplatesUrl=s),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"osz templates url...",onKeyup:t[12]||(t[12]=l(s=>e.updateOszTemplatesUrl(s),["enter"]))},null,544),[[r,e.oszTemplatesUrl]]),i("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[13]||(t[13]=s=>e.updateOszTemplatesUrl(s))}," Save .osz templates URL ")]),i("div",x,[o(i("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>e.offeredUsers=s),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"offered user usernames...",onKeyup:t[15]||(t[15]=l(s=>e.updateOfferedUsers(s),["enter"]))},null,544),[[r,e.offeredUsers]]),i("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[16]||(t[16]=s=>e.updateOfferedUsers(s))}," Save offered users ")]),e.featuredArtist.offeredUsers&&e.featuredArtist.offeredUsers.length?(a(),n("div",q,[u(" offered: "),c(p,{users:e.featuredArtist.offeredUsers},null,8,["users"])])):g("",!0),e.featuredArtist.showcaseMappers&&e.featuredArtist.showcaseMappers.length?(a(),n("div",G,[u(" showcase mappers: "),c(p,{users:e.featuredArtist.showcaseMappers},null,8,["users"])])):g("",!0),H,J,i("div",Q,[o(i("select",{id:"editSongSelection","onUpdate:modelValue":t[17]||(t[17]=s=>e.selectedSong=s),class:"form-select form-select-sm"},[(a(!0),n(T,null,C(e.alphabeticalSongs,s=>(a(),n("option",{key:s.id,value:s},d(s.title)+" --- ("+d(s.artist)+") ",9,W))),128))],512),[[h,e.selectedSong]])]),i("div",X,[o(i("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>e.artist=s),class:"form-control form-control-sm w-75",type:"text",autocomplete:"off",placeholder:"artist..."},null,512),[[r,e.artist]])]),i("div",Y,[o(i("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>e.title=s),class:"form-control form-control-sm w-75",type:"text",autocomplete:"off",placeholder:"title..."},null,512),[[r,e.title]])]),i("div",Z,[i("button",{class:"btn btn-sm btn-outline-info mx-1",onClick:t[20]||(t[20]=s=>e.addSong(s))}," Add song "),i("button",{class:"btn btn-sm btn-outline-info mx-1",onClick:t[21]||(t[21]=s=>e.editSong(s))}," Edit song "),i("button",{class:"btn btn-sm btn-outline-danger mx-1",onClick:t[22]||(t[22]=s=>e.deleteSong(s))}," Delete song ")]),_,tt,i("div",et,[o(i("input",{"onUpdate:modelValue":t[23]||(t[23]=s=>e.reviewComment=s),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"review comment...",onKeyup:t[24]||(t[24]=l(s=>e.updateReviewComment(s),["enter"]))},null,544),[[r,e.reviewComment]]),i("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[25]||(t[25]=s=>e.updateReviewComment(s))}," Update review comment ")]),i("div",st,[i("span",it,[u(" Last reviewed: "),i("span",ot,d(new Date(e.featuredArtist.lastReviewed)||"Never"),1)]),i("button",{class:"btn btn-sm btn-outline-info ms-3 w-25",onClick:t[26]||(t[26]=s=>e.updateLastReviewed(s))}," Set as today ")]),i("div",rt,[i("span",at,[u(" Permanently dismissed: "),i("span",dt,d(e.featuredArtist.permanentlyDismiss?"true":"false"),1)]),i("button",{class:"btn btn-sm btn-outline-info ms-3 w-25",onClick:t[27]||(t[27]=s=>e.updatePermanentlyDismiss(s))}," Toggle ")])])]),_:1},8,["loaded"])}const ht=y(I,[["render",nt]]);export{ht as F};
