var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,s,n)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&r(t,s,e[s]);if(n)for(var s of n(e))i.call(e,s)&&r(t,s,e[s]);return t};import{d as l,i as d,o as c,b as u,f as p,t as m,u as h,e as g,q as f,O as y,s as b,l as v,P as C,p as w,a as I,J as S,z as k,F as $,g as j,j as U,n as x,w as M,m as D,H as T,x as E}from"./vendor.8b5721c7.js";import{_ as J}from"./ContestCard.f4b3ec41.js";import{_ as A}from"./UserLinkList.b6d2284f.js";import{C as L}from"./CopyPaste.7cb4b414.js";import{_ as N}from"./ModalDialog.2c18b0dc.js";import"./ModesIcons.88090f43.js";var q=l({name:"ContestHeader",components:{UserLinkList:A},props:{contestId:{type:String,required:!0},name:{type:String,required:!0},url:{type:String,default:null},creators:{type:Array,required:!0}},data:()=>({showCreatorInput:!1,creatorInput:""}),watch:{creators(){this.generateUsernamesString()}},created(){this.generateUsernamesString()},methods:{generateUsernamesString(){const t=this.creators.map((t=>t.username)).join(", ");this.creatorInput=t},async updateCreators(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateCreators`,{creatorInput:this.creatorInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest creators",type:"info"}),this.$store.commit("updateCreators",{contestId:this.contestId,creators:e}),this.showCreatorInput=!1)}}});const R=["href"],V={key:1},O={class:"form-inline"},P={class:"form-group"},B=v(" hosted by "),_=[p("i",{class:"fas fa-edit"},null,-1)],z=p("hr",null,null,-1);q.render=function(t,e,s,n,o,i){const r=d("user-link-list");return c(),u("div",null,[p("h4",null,[t.url?(c(),u("a",{key:0,href:t.url,target:"_blank"},m(t.name),9,R)):(c(),u("span",V,m(t.name),1))]),p("div",O,[p("div",P,[B,t.showCreatorInput?g("",!0):(c(),h(r,{key:0,users:t.creators},null,8,["users"])),t.showCreatorInput?f((c(),u("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=e=>t.creatorInput=e),class:"ml-1 form-control w-50 d-inline form-control-sm",onChange:e[1]||(e[1]=e=>t.updateCreators(e))},null,544)),[[y,t.creatorInput]]):g("",!0),p("a",{href:"#",class:"ms-1",onClick:e[2]||(e[2]=b((e=>t.showCreatorInput=!t.showCreatorInput),["prevent"]))},_)])]),z])};var F=l({name:"ContestBanner",props:{bannerUrl:{type:String,required:!0}}});const G=["src"],H=p("hr",null,null,-1);F.render=function(t,e,s,n,o,i){return c(),u("div",null,[p("img",{class:"w-100",src:t.bannerUrl},null,8,G),H])};var K=l({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null},contestEnd:{type:String,default:null}},data(){return{newContestStart:this.contestStart,newContestEnd:this.contestEnd}},watch:{contestId(){this.newContestStart=this.contestStart,this.newContestEnd=this.contestEnd}},methods:{async updateContestStart(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestStart`,{date:this.newContestStart},t);this.$http.isError(e)?this.newContestStart=this.contestStart:(this.$store.dispatch("updateToastMessages",{message:"Updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:e}))},async updateContestEnd(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestEnd`,{date:this.newContestEnd},t);this.$http.isError(e)?this.newContestEnd=this.contestEnd:(this.$store.dispatch("updateToastMessages",{message:"Updated contest end date",type:"info"}),this.$store.commit("updateContestEnd",{contestId:this.contestId,contestEnd:e}))}}});const Y={class:"row"},Q={class:"col-sm-6"},W={class:"form-inline w-100"},X=v(" Submissions open: "),Z={class:"input-group"},tt={class:"input-group-append"},et={class:"col-sm-6"},st={class:"form-inline w-100"},nt=v(" Submissions close: "),ot={class:"input-group"},it={class:"input-group-append"};K.render=function(t,e,s,n,o,i){return c(),u("div",Y,[p("div",Q,[p("div",W,[X,p("div",Z,[f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newContestStart=e),class:"ml-1 form-control",type:"date",onKeyup:e[1]||(e[1]=C((e=>t.updateContestStart(e)),["enter"]))},null,544),[[y,t.newContestStart]]),p("div",tt,[p("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.updateContestStart(e))}," Save date ")])])])]),p("div",et,[p("div",st,[nt,p("div",ot,[f(p("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.newContestEnd=e),class:"ml-1 form-control",type:"date",onKeyup:e[4]||(e[4]=C((e=>t.updateContestEnd(e)),["enter"]))},null,544),[[y,t.newContestEnd]]),p("div",it,[p("button",{class:"btn btn-primary",href:"#",onClick:e[5]||(e[5]=e=>t.updateContestEnd(e))}," Save date ")])])])])])};var rt=l({name:"TitleEdit",props:{contestId:{type:String,required:!0},name:{type:String,default:null}},data(){return{newName:this.name}},watch:{contestId(){this.newName=this.name}},methods:{async updateName(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateName`,{name:this.newName},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest name",type:"info"}),this.$store.commit("updateName",{contestId:this.contestId,name:e}))}}});const at={class:"form-inline w-100 mt-2"},lt=v(" Name: ");rt.render=function(t,e,s,n,o,i){return c(),u("div",at,[lt,f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newName=e),class:"ml-1 form-control d-inline w-75",onChange:e[1]||(e[1]=e=>t.updateName(e))},null,544),[[y,t.newName]])])};var dt=l({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null},isApproved:{type:Boolean,required:!0}},data(){return{newStatus:this.status}},watch:{contestId(){this.newStatus=this.status}},methods:{async updateStatus(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateStatus`,{status:this.newStatus},t);this.$http.isError(e)?this.newStatus=this.status:(this.$store.dispatch("updateToastMessages",{message:"Updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:e}))}}});w("data-v-4a3e98ae");const ct=v(" Status: "),ut=[k('<option value="" disabled data-v-4a3e98ae> Select a status </option><option value="hidden" data-v-4a3e98ae> Hidden </option><option value="beatmapping" data-v-4a3e98ae> Beatmapping </option><option value="screening" data-v-4a3e98ae> Screening </option><option value="judging" data-v-4a3e98ae> Judging </option><option value="complete" data-v-4a3e98ae> Complete </option>',6)],pt={key:0,class:"small text-danger mt-2"};I(),dt.render=function(t,e,s,n,o,i){return c(),u("div",null,[ct,f(p("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newStatus=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateStatus(e))},ut,544),[[S,t.newStatus]]),t.isApproved||"hidden"===t.status?g("",!0):(c(),u("div",pt,' Your contest has been queued for approval. Once approved, it will appear in "Active contests". '))])},dt.__scopeId="data-v-4a3e98ae";var mt=l({name:"ModeInfo",props:{contestId:{type:String,required:!0},mode:{type:String,default:""}},data(){return{newMode:this.mode}},watch:{contestId(){this.newMode=this.mode}},methods:{async updateMode(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateMode`,{mode:this.newMode},t);this.$http.isError(e)?this.newMode=this.mode:(this.$store.dispatch("updateToastMessages",{message:"Updated contest mode",type:"info"}),this.$store.commit("updateMode",{contestId:this.contestId,mode:e}))}}});w("data-v-5ffc0e64");const ht=v(" Mode: "),gt=[k('<option value="" selected disabled data-v-5ffc0e64> Select a mode </option><option value="osu" data-v-5ffc0e64> osu! </option><option value="taiko" data-v-5ffc0e64> osu!taiko </option><option value="catch" data-v-5ffc0e64> osu!catch </option><option value="mania" data-v-5ffc0e64> osu!mania </option>',5)];I(),mt.render=function(t,e,s,n,o,i){return c(),u("div",null,[ht,f(p("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newMode=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateMode(e))},gt,544),[[S,t.newMode]])])},mt.__scopeId="data-v-5ffc0e64";var ft=l({name:"AnonymizationGuide",props:{contestId:{type:String,required:!0}},data:()=>({csvOutput:null,errors:[]}),methods:{async applyCsvOutput(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/syncAnonymousNames`,{csv:this.csvOutput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated submission names",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e.submissions}),e.errors.length&&(this.errors=e.errors))}}});const yt={class:"mx-4"},bt=v(" Submissions must be anonymized locally, then transferred to Mappers' Guild. You have 3 options: "),vt=p("ol",null,[p("li",null,[v("Follow instructions on the "),p("a",{href:"https://github.com/pishifat/contest-anonymization#readme",target:"_blank"},"contest anonymization GitHub repository"),v(".")]),p("li",null,[v("Ask "),p("a",{href:"https://osu.ppy.sh/users/3178418",target:"_blank"},"pishifat"),v(" to do option 1 for you.")]),p("li",null,"Manually anonymize entries (please don't waste your time with this).")],-1),Ct=p("span",{class:"small text-secondary"},[v("If you succeed with step 1, paste your "),p("code",null,".csv"),v(" output here as raw text to replace anonymized names:")],-1),wt={class:"row"},It={class:"col-sm-10"},St={class:"col-sm-2"},kt={key:0,class:"small text-warning"},$t=v(" The following submissions could not be processed and will need to be renamed manually: ");ft.render=function(t,e,s,n,o,i){return c(),u("div",yt,[bt,vt,p("div",null,[Ct,p("div",wt,[p("div",It,[f(p("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.csvOutput=e),class:"form-control form-inline",rows:"1"},null,512),[[y,t.csvOutput]])]),p("div",St,[p("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:e[1]||(e[1]=e=>t.applyCsvOutput())}," Save ")])]),t.errors.length?(c(),u("div",kt,[$t,p("ul",null,[(c(!0),u($,null,j(t.errors,(t=>(c(),u("li",{key:t},m(t),1)))),128))])])):g("",!0)])])};var jt=l({name:"Urls",props:{contestId:{type:String,required:!0},url:{type:String,default:null},osuContestListingUrl:{type:String,default:null},resultsUrl:{type:String,default:null},bannerUrl:{type:String,default:null}},data(){return{newUrl:this.url,newOsuContestListingUrl:this.osuContestListingUrl,newResultsUrl:this.resultsUrl,newBannerUrl:this.bannerUrl}},watch:{contestId(){this.newUrl=this.url,this.newOsuContestListingUrl=this.osuContestListingUrl,this.newResultsUrl=this.resultsUrl,this.newBannerUrl=this.bannerUrl}},methods:{async updateUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateUrl`,{url:this.newUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest url",type:"info"}),this.$store.commit("updateUrl",{contestId:this.contestId,url:e}))},async updateOsuContestListingUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateOsuContestListingUrl`,{url:this.newOsuContestListingUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated osu! contest listing url",type:"info"}),this.$store.commit("updateOsuContestListingUrl",{contestId:this.contestId,osuContestListingUrl:e}))},async updateResultsUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateResultsUrl`,{url:this.newResultsUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated results url",type:"info"}),this.$store.commit("updateResultsUrl",{contestId:this.contestId,resultsUrl:e}))},async updateBannerUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateBannerUrl`,{url:this.newBannerUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated banner url",type:"info"}),this.$store.commit("updateBannerUrl",{contestId:this.contestId,bannerUrl:e}))}}});const Ut={class:"row"},xt={class:"col-sm-6"},Mt={class:"form-inline w-100"},Dt=v(" Contest details URL: "),Tt={class:"col-sm-6"},Et={class:"form-inline w-100"},Jt=v(" osu! contest listing URL: "),At={class:"col-sm-6"},Lt={class:"form-inline w-100"},Nt=v(" Results URL: "),qt={class:"col-sm-6"},Rt={class:"form-inline w-100"},Vt=v(" Banner URL: ");jt.render=function(t,e,s,n,o,i){return c(),u("div",Ut,[p("div",xt,[p("div",Mt,[Dt,f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newUrl=e),class:"ml-1 form-control",onChange:e[1]||(e[1]=e=>t.updateUrl(e))},null,544),[[y,t.newUrl]])])]),p("div",Tt,[p("div",Et,[Jt,f(p("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.newOsuContestListingUrl=e),class:"ml-1 form-control",onChange:e[3]||(e[3]=e=>t.updateOsuContestListingUrl(e))},null,544),[[y,t.newOsuContestListingUrl]])])]),p("div",At,[p("div",Lt,[Nt,f(p("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.newResultsUrl=e),class:"ml-1 form-control",onChange:e[5]||(e[5]=e=>t.updateResultsUrl(e))},null,544),[[y,t.newResultsUrl]])])]),p("div",qt,[p("div",Rt,[Vt,f(p("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.newBannerUrl=e),class:"ml-1 form-control",onChange:e[7]||(e[7]=e=>t.updateBannerUrl(e))},null,544),[[y,t.newBannerUrl]])])])])};var Ot=l({name:"Description",props:{contestId:{type:String,required:!0},description:{type:String,default:null}},data(){return{newDescription:this.description}},watch:{contestId(){this.newDescription=this.description}},methods:{async updateDescription(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDescription`,{description:this.newDescription},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest description",type:"info"}),this.$store.commit("updateDescription",{contestId:this.contestId,description:e}))}}});const Pt={class:"form-inline w-100 mt-2"},Bt=p("div",null,"Contest description",-1),_t=p("small",{class:"text-secondary"},[v("Click outside the text box to save. Also, this section supports "),p("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),v("!")],-1),zt=p("div",{class:"mt-2"}," Preview description ",-1),Ft=["innerHTML"];Ot.render=function(t,e,s,n,o,i){return c(),u("div",Pt,[Bt,f(p("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDescription=e),length:"4",class:"ml-1 form-control",placeholder:"click outside the box to save...",maxlength:"40000",rows:"6",onChange:e[1]||(e[1]=e=>t.updateDescription(e))},null,544),[[y,t.newDescription]]),_t,t.newDescription?(c(),u($,{key:0},[zt,p("div",null,[p("div",{class:"small bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.newDescription.trim())},null,8,Ft)])],64)):g("",!0)])};var Gt=l({name:"SubmissionsInfo",props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null,processingDelete:!1,manualAnonEdit:null,newAnonymousName:""}),watch:{manualAnonEdit(){this.findAnonymousSubmissionName()}},methods:{findAnonymousSubmissionName(){const t=this.submissions.find((t=>t.id==this.manualAnonEdit));t&&(this.newAnonymousName=t.name)},async updateAnonymousSubmissionName(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/updateAnonymousSubmissionName`,{name:this.newAnonymousName},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Updated anonymous submission name",type:"info"}),this.$store.commit("updateAnonymousSubmissionName",{contestId:this.contestId,submissionId:t,name:s}))},async deleteSubmission(t,e){this.processingDelete=!0;const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/delete`,{},e);this.processingDelete=!1,this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted submission",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:t}))}}});const Ht={key:0,class:"table table-sm table-responsive-lg"},Kt=p("thead",null,[p("tr",null,[p("th",null,"Creator"),p("th",null,"Anonymized name"),p("th",null,"Link"),p("th")])],-1),Yt=["onChange"],Qt={key:1,class:"me-1"},Wt=["onClick"],Xt=[p("i",{class:"fas fa-edit"},null,-1)],Zt=["href"],te=["onClick"],ee=["onClick"];Gt.render=function(t,e,s,n,o,i){const r=d("user-link");return c(),u("div",null,[t.submissions.length?(c(),u("table",Ht,[Kt,p("tbody",null,[(c(!0),u($,null,j(t.submissions,(s=>(c(),u("tr",{key:s.id},[p("td",null,[U(r,{user:s.creator},null,8,["user"])]),p("td",{class:x(s.name?"":"text-danger")},[t.manualAnonEdit==s.id?f((c(),u("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=e=>t.newAnonymousName=e),class:"ml-1 form-control form-control-sm",onChange:e=>t.updateAnonymousSubmissionName(s.id,e)},null,40,Yt)),[[y,t.newAnonymousName]]):(c(),u("span",Qt,m(s.name||"TBD"),1)),p("a",{href:"#",onClick:b((e=>t.manualAnonEdit==s.id?t.manualAnonEdit=null:t.manualAnonEdit=s.id),["prevent"])},Xt,8,Wt)],2),p("td",null,[p("a",{href:s.url,target:"_blank"},m(s.url),9,Zt)]),p("td",null,[t.confirmDelete!=s.id?(c(),u("a",{key:0,href:"#",class:"text-danger",onClick:b((e=>t.confirmDelete=s.id),["prevent"])}," delete ",8,te)):(c(),u("a",{key:1,class:x(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:b((e=>t.deleteSubmission(s.id,e)),["prevent"])}," confirm ",10,ee))])])))),128))])])):g("",!0)])};var se=l({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download}},watch:{contestId(){this.newDownload=this.download}},methods:{async updateDownload(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDownload`,{download:this.newDownload},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest submissions download link",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:e}))}}});w("data-v-3eff7a20");const ne={class:"row"},oe={class:"col-sm-6"},ie=v(" Download: "),re={key:0,class:"me-2 text-secondary"},ae={class:"col-sm-6 small text-secondary"},le=v(" This link will appear at the top of judging/screening pages for users to download beatmaps. For contest integrity, user data should be removed as explained in the anonymization guide below. "),de=["href"];I(),se.render=function(t,e,s,n,o,i){return c(),u("div",ne,[p("div",oe,[ie,t.download?g("",!0):(c(),u("span",re,"No download")),f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDownload=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:e[1]||(e[1]=e=>t.updateDownload(e))},null,544),[[y,t.newDownload]])]),p("div",ae,[le,t.download?(c(),u("a",{key:0,href:t.download,target:"_blank"},"Test the link here!",8,de)):g("",!0)])])},se.__scopeId="data-v-3eff7a20";var ce=l({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),watch:{contestId(){this.screenerInput=null,this.screenerInput=null}},methods:{async addScreener(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.screenerInput} to list (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:e}))},async removeScreener(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/remove`,{screenerId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:t}))}}});const ue={class:"input-group mb-2"},pe={class:"input-group-append"},me=[p("i",{class:"fas fa-plus fa-xs"},null,-1)],he={key:0},ge=["onClick"],fe=["onClick"],ye={key:1,class:"text-white-50 m-4"};ce.render=function(t,e,s,n,o,i){const r=d("user-link");return c(),u("div",null,[p("div",ue,[f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.screenerInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:e[1]||(e[1]=C((e=>t.addScreener(e)),["enter"]))},null,544),[[y,t.screenerInput,void 0,{number:!0}]]),p("div",pe,[p("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=b((e=>t.addScreener(e)),["prevent"]))},me)])]),t.screeners.length?(c(),u("ol",he,[(c(!0),u($,null,j(t.screeners,(e=>(c(),u("li",{key:e.id},[U(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(c(),u("a",{key:0,href:"#",class:"text-danger",onClick:b((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,ge)):(c(),u("a",{key:1,class:"text-danger",href:"#",onClick:b((s=>t.removeScreener(e.id,s)),["prevent"])}," confirm ",8,fe))])))),128))])):(c(),u("div",ye," None... "))])};var be=l({name:"ScreeningStatus",props:{contest:{type:Object,required:!0}},methods:{findScreenerDetails(t){let e=0,s=[];for(const i of this.contest.submissions)for(const n of i.screenings)n.screener.id==t.id&&n.vote&&(e++,s.push(n.vote));const n=[1,2,3,4,5],o=[];for(const i of n)s.includes(i)||o.push(i);return{count:e,unusedVotes:o}}}});const ve={class:"table table-sm table-responsive-lg small"},Ce=p("thead",null,[p("tr",null,[p("th",null,"Screener"),p("th",null,"Count"),p("th",null,"Unused ratings")])],-1),we={class:"mx-1"};be.render=function(t,e,s,n,o,i){const r=d("user-link");return c(),u("div",null,[p("table",ve,[Ce,p("tbody",null,[(c(!0),u($,null,j(t.contest.screeners,(e=>(c(),u("tr",{key:e.id},[p("td",null,[U(r,{user:e},null,8,["user"])]),p("td",{class:x(t.findScreenerDetails(e).count>=5?"text-success":"text-danger")},m(t.findScreenerDetails(e).count)+"/5 ",3),p("td",null,[(c(!0),u($,null,j(t.findScreenerDetails(e).unusedVotes,(t=>(c(),u("span",{key:t},[p("span",we,[(c(!0),u($,null,j(t,(t=>(c(),u("i",{key:t,class:"fa-star fas text-warning small"})))),128)),v(" ("+m(t)+") ",1)])])))),128))])])))),128))])])])};var Ie=l({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),watch:{contestId(){this.judgeInput=null,this.confirmDelete=null}},methods:{async addJudge(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.judgeInput} to list (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:e}))},async removeJudge(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/remove`,{judgeId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:t}))}}});const Se={class:"input-group mb-2"},ke={class:"input-group-append"},$e=[p("i",{class:"fas fa-plus fa-xs"},null,-1)],je={key:0},Ue=["onClick"],xe=["onClick"],Me={key:1,class:"text-white-50 m-4"};Ie.render=function(t,e,s,n,o,i){const r=d("user-link");return c(),u("div",null,[p("div",Se,[f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.judgeInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new judge username/osuId...",onKeyup:e[1]||(e[1]=C((e=>t.addJudge(e)),["enter"]))},null,544),[[y,t.judgeInput,void 0,{number:!0}]]),p("div",ke,[p("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=b((e=>t.addJudge(e)),["prevent"]))},$e)])]),t.judges.length?(c(),u("ul",je,[(c(!0),u($,null,j(t.judges,(e=>(c(),u("li",{key:e.id},[U(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(c(),u("a",{key:0,href:"#",class:"text-danger",onClick:b((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,Ue)):(c(),u("a",{key:1,class:"text-danger",href:"#",onClick:b((s=>t.removeJudge(e.id,s)),["prevent"])}," confirm ",8,xe))])))),128))])):(c(),u("div",Me," None... "))])};var De=l({name:"MarkdownUserList",components:{CopyPaste:L},props:{users:{type:Array,default:()=>[]}}});w("data-v-0f02c955");const Te=v(" Comma separation: "),Ee=p("br",null,null,-1),Je=p("br",null,null,-1),Ae=p("br",null,null,-1),Le=v(" Newline separation: "),Ne=p("br",null,null,-1),qe=p("br",null,null,-1);I(),De.render=function(t,e,s,n,o,i){const r=d("copy-paste");return c(),h(r,{class:"tiny"},{default:M((()=>[Te,Ee,(c(!0),u($,null,j(t.users,((e,s)=>(c(),u("span",{key:e.id}," ["+m(e.username)+"](https://osu.ppy.sh/users/"+m(e.osuId)+")"+m(s===t.users.length-2?", and ":s===t.users.length-1?"":", "),1)))),128)),Je,Ae,Le,Ne,(c(!0),u($,null,j(t.users,(t=>(c(),u("span",{key:t.id},[v(" ["+m(t.username)+"](https://osu.ppy.sh/users/"+m(t.osuId)+")",1),qe])))),128))])),_:1})},De.__scopeId="data-v-0f02c955";var Re=l({name:"ScreeningDetail",props:{screenings:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},methods:{findComment(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.comment:"No comment"},findVote(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.vote:0}}});const Ve={class:"ms-4 small"},Oe={class:"ms-4 small text-secondary"};Re.render=function(t,e,s,n,o,i){const r=d("user-link");return c(),u("div",Ve,[(c(!0),u($,null,j(t.screeners,(e=>(c(),u("div",{key:e.id},[U(r,{user:e},null,8,["user"]),(c(!0),u($,null,j(t.findVote(e.id),(t=>(c(),u("i",{key:t,class:"fa-star fas mx-1 text-warning small"})))),128)),p("div",Oe,m(t.findComment(e.id)),1)])))),128))])};var Pe=l({name:"ScreeningResults",components:{ScreeningDetail:Re},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const t=JSON.parse(JSON.stringify(this.submissions));for(let e=0;e<t.length;e++){const s=t[e].screenings.reduce(((t,e)=>e.vote?t+e.vote:t),0);t[e].total=s}return t.sort(((t,e)=>t.total>e.total?-1:e.total>t.total?1:0)),t}}});w("data-v-0aa6204d");const Be={class:"d-flex justify-content-between"},_e=["href"],ze=p("i",{class:"fa-star fas small"},null,-1),Fe=v(") "),Ge=p("i",{class:"fas fa-angle-down"},null,-1),He=["id"];I(),Pe.render=function(t,e,s,n,o,i){const r=d("screening-detail");return c(),u("div",null,[p("ul",null,[(c(!0),u($,null,j(t.sortedSubmissions,(e=>(c(),u("li",{key:e.id},[p("div",Be,[p("a",{class:x(e.total>=t.judgingThreshold?"pass-threshold":""),"data-bs-toggle":"collapse",href:`#collapse-${e.id}`},[v(m(e.creator.username)+" ("+m(e.total)+" ",1),ze,Fe,Ge],10,_e)]),p("div",{id:`collapse-${e.id}`,class:"collapse"},[p("div",null,[U(r,{screenings:e.screenings,screeners:t.screeners},null,8,["screenings","screeners"])])],8,He)])))),128))])])},Pe.__scopeId="data-v-0aa6204d";var Ke=l({name:"JudgingThreshold",props:{contestId:{type:String,required:!0},judgingThreshold:{type:Number,default:0}},data(){return{newJudgingThreshold:this.judgingThreshold}},watch:{contestId(){this.newJudgingThreshold=this.judgingThreshold}},methods:{async updateJudgingThreshold(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated judging threshold to ${e}`,type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:e}))}}});const Ye={class:"row"},Qe={class:"input-group col-sm-4"},We={class:"input-group-append"},Xe=[v(" save "),p("i",{class:"fa-star fas small"},null,-1)];Ke.render=function(t,e,s,n,o,i){return c(),u("div",Ye,[p("div",Qe,[f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newJudgingThreshold=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"judging threshold",onKeyup:e[1]||(e[1]=C((e=>t.updateJudgingThreshold(e)),["enter"]))},null,544),[[y,t.newJudgingThreshold,void 0,{number:!0}]]),p("div",We,[p("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=b((e=>t.updateJudgingThreshold(e)),["prevent"]))},Xe)])])])};var Ze=l({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({nameInput:null,maxScoreInput:null,processingDelete:!1,confirmDelete:null}),computed:{scoredCriteria(){return this.criterias.filter((t=>"comments"!==t.name))},commentsEnabled(){return this.criterias.some((t=>"comments"==t.name))}},watch:{contestId(){this.nameInput=null,this.maxScoreInput=null,this.confirmDelete=null}},methods:{async addCriteria(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/addCriteria`,{name:this.nameInput,maxScore:this.maxScoreInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:e}))},async deleteCriteria(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/deleteCriteria`,{criteriaId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:s}))},async toggleComments(){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleComments`,{});this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Toggled comments",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))}}});const ts={class:"input-group w-75 mb-2"},es={class:"input-group-append"},ss=[v(" Add criteria "),p("i",{class:"fas fa-plus fa-xs"},null,-1)],ns={class:"ms-2 mb-2"},os=[v(" See judging criteria "),p("i",{class:"fas fa-angle-down"},null,-1)],is={id:"judgingCriteria",class:"collapse mx-2"},rs={key:0,class:"table table-sm table-responsive-lg"},as=p("thead",null,[p("tr",null,[p("th",null,"Criteria"),p("th",null,"Max score"),p("th",null,"Delete")])],-1),ls={class:"text-capitalize"},ds=["onClick"],cs=["onClick"],us={key:1};Ze.render=function(t,e,s,n,o,i){return c(),u("div",null,[p("div",ts,[f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.nameInput=e),type:"text",class:"form-control",placeholder:"criteria name..."},null,512),[[y,t.nameInput]]),f(p("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.maxScoreInput=e),type:"number",class:"form-control",placeholder:"total points..."},null,512),[[y,t.maxScoreInput]]),p("div",es,[p("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.addCriteria(e))},ss)])]),p("div",ns,[p("a",{href:"#judgingCriteria","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=b((()=>{}),["prevent"]))},os),p("div",is,[t.criterias.length?(c(),u("table",rs,[as,p("tbody",null,[(c(!0),u($,null,j(t.scoredCriteria,(e=>(c(),u("tr",{key:e.id},[p("td",ls,m(e.name),1),p("td",null,m(e.maxScore),1),p("td",null,[t.confirmDelete!=e.id?(c(),u("a",{key:0,href:"#",class:"text-danger",onClick:b((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,ds)):(c(),u("a",{key:1,class:x(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:b((s=>t.deleteCriteria(e.id,s)),["prevent"])}," confirm ",10,cs))])])))),128)),p("tr",null,[p("td",{class:x(t.commentsEnabled?"":"text-secondary")}," Comments "+m(t.commentsEnabled?"":"(disabled)"),3),p("td",{class:x(t.commentsEnabled?"":"text-secondary")}," N/A ",2),p("td",null,[p("a",{href:"#",class:"text-danger",onClick:e[4]||(e[4]=b((e=>t.toggleComments()),["prevent"]))},m(t.commentsEnabled?"disable":"enable"),1)])])])])):(c(),u("div",us," No criteria yet... "))])])])};var ps=l({name:"JudgingLeaderboard",props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data:()=>({selectedScore:null,displayMode:"criterias",sortDesc:!1}),computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((t=>{var e;return t.creator.id==(null==(e=this.selectedScore)?void 0:e.creator.id)}))},scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))},judges(){return this.contest.judges}},methods:{getCriteriaScore(t,e){var s;return(null==(s=t.criteriaSum.find((t=>t.criteriaId===e)))?void 0:s.sum)||0},getJudgeScore(t,e,s=!1){const n=t.judgingSum.find((t=>t.judgeId===e)),o=(null==n?void 0:n.standardized)||0;return s?`${(null==n?void 0:n.sum)||0} (${o.toFixed(3)})`:(null==n?void 0:n.sum)||0},getJudgeAvg(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.rawAvg.toFixed(4))||0},getJudgeSd(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.sd.toFixed(4))||0},getJudgeCorrel(t){var e;return((null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.correl)||0).toFixed(4)},getFinalScore:t=>isNaN(t)?"0":t.toFixed(4),sortByCriteria(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:t,sortDesc:this.sortDesc})},sortByJudge(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:t,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});const ms={class:"row"},hs={class:"col-sm"},gs=v(" Score display: "),fs=v(" | "),ys=v(" | "),bs={class:"row"},vs={class:"col-sm"},Cs={class:"table table-sm small table-responsive-lg"},ws=p("th",null,"#",-1),Is=p("th",null,"User",-1),Ss=["onClick"],ks={class:"cursor-default"},$s=p("td",null,null,-1),js=p("td",null,"AVG",-1),Us=p("td",null,null,-1),xs=p("td",null,null,-1),Ms={class:"cursor-default"},Ds=p("td",null,null,-1),Ts=p("td",null,"SD",-1),Es=p("td",null,null,-1),Js=p("td",null,null,-1),As={class:"cursor-default"},Ls=p("td",null,null,-1),Ns=p("td",null,"COR",-1),qs=p("td",null,null,-1),Rs=p("td",null,null,-1);ps.render=function(t,e,s,n,o,i){const r=d("user-link");return c(),u("div",null,[p("div",ms,[p("div",hs,[gs,p("a",{href:"#",class:x("criterias"===t.displayMode?"border-bottom border-secondary":""),onClick:e[0]||(e[0]=b((e=>t.displayMode="criterias"),["prevent"]))}," Criteria ",2),fs,p("a",{href:"#",class:x("judges"===t.displayMode?"border-bottom border-secondary":""),onClick:e[1]||(e[1]=b((e=>t.displayMode="judges"),["prevent"]))}," Judge ",2),ys,p("a",{href:"#",class:x("detail"===t.displayMode?"border-bottom border-secondary":""),onClick:e[2]||(e[2]=b((e=>t.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),p("div",bs,[p("div",vs,[p("table",Cs,[p("thead",null,[p("tr",null,[ws,Is,"criterias"===t.displayMode?(c(!0),u($,{key:0},j(t.scoredCriteria,(t=>(c(),u("th",{key:t.id},m(t.name),1)))),128)):(c(!0),u($,{key:1},j(t.judges,(t=>(c(),u("th",{key:t.id},m(t.username),1)))),128)),p("th",null,[p("a",{href:"#",onClick:e[3]||(e[3]=b(((...e)=>t.sortByRawScore&&t.sortByRawScore(...e)),["prevent"]))}," Final Score (raw) ")]),p("th",null,[p("a",{href:"#",onClick:e[4]||(e[4]=b(((...e)=>t.sortByStdScore&&t.sortByStdScore(...e)),["prevent"]))}," Final Score (standardized) ")])])]),p("tbody",null,[(c(!0),u($,null,j(t.usersScores,((e,s)=>(c(),u("tr",{key:s,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:s=>t.selectedScore=e},[p("td",null,m(s+1),1),p("td",null,[U(r,{user:e.creator},null,8,["user"])]),"criterias"===t.displayMode?(c(!0),u($,{key:0},j(t.scoredCriteria,(s=>(c(),u("td",{key:s.id},m(t.getCriteriaScore(e,s.id)),1)))),128)):(c(!0),u($,{key:1},j(t.judges,(s=>(c(),u("td",{key:s.id},m(t.getJudgeScore(e,s.id,"detail"===t.displayMode)),1)))),128)),p("td",null,m(e.rawFinalScore),1),p("td",null,m(t.getFinalScore(e.standardizedFinalScore)),1)],8,Ss)))),128)),"detail"===t.displayMode?(c(),u($,{key:0},[p("tr",ks,[$s,js,(c(!0),u($,null,j(t.judges,(e=>(c(),u("td",{key:e.id},m(t.getJudgeAvg(e.id)),1)))),128)),Us,xs]),p("tr",Ms,[Ds,Ts,(c(!0),u($,null,j(t.judges,(e=>(c(),u("td",{key:e.id},m(t.getJudgeSd(e.id)),1)))),128)),Es,Js]),p("tr",As,[Ls,Ns,(c(!0),u($,null,j(t.judges,(e=>(c(),u("td",{key:e.id},m(t.getJudgeCorrel(e.id)),1)))),128)),qs,Rs])],64)):g("",!0)])])])])])};var Vs=l({name:"JudgingDetail",components:{ModalDialog:N},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(t){const e=this.commentsExpanded.findIndex((e=>e===t));-1!==e?this.commentsExpanded.splice(e,1):this.commentsExpanded.push(t)},getCollapseClass(t){return this.commentsExpanded.includes(t)?"fa-chevron-down":"fa-chevron-right"}}});const Os={class:"container"},Ps=["href","onClick"],Bs={key:1,class:"small text-capitalize ms-3"},_s=["id"],zs={class:"small text-white-50",style:{"white-space":"pre-line"}},Fs={key:0};Vs.render=function(t,e,s,n,o,i){const r=d("user-link"),a=d("modal-dialog");return c(),h(a,{id:"detailModal",loaded:Boolean(t.submission)},{header:M((()=>[v(m(t.submission.creator.username)+" ("+m(t.submission.name)+") ",1)])),default:M((()=>[p("div",Os,[(c(!0),u($,null,j(t.submission.judgings,((e,s)=>(c(),u("div",{key:e.id},[U(r,{user:e.judge},null,8,["user"]),(c(!0),u($,null,j(e.judgingScores,(e=>(c(),u("div",{key:e.id,class:"my-1"},["comments"==e.criteria.name?(c(),u("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${e.id}`,onClick:s=>t.showComment(e.id)},[p("i",{class:x(["small fas me-2",t.getCollapseClass(e.id)])},null,2),v(" "+m(e.criteria.name),1)],8,Ps)):(c(),u("span",Bs,m(e.criteria.name)+" ("+m(e.score)+") ",1)),p("p",{id:`judgingToCriteria${e.id}`,class:"text-light ms-4 collapse"},[p("span",zs,m(e.comment),1)],8,_s)])))),128)),s<t.submission.judgings.length-1?(c(),u("hr",Fs)):g("",!0)])))),128))])])),_:1},8,["loaded"])};var Gs=l({name:"JudgeStatuses",components:{JudgingDetail:Vs},props:{contest:{type:Object,required:!0}},data:()=>({selected:null}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},methods:{getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getMissingJudges(t){const e=t.judgings.map((t=>t.judge.id)),s=[];for(const n of this.contest.judges)if(e.includes(n.id)){const e=t.judgings.find((t=>t.judge.id===n.id));e&&e.judgingScores.length!==this.contest.criterias.length&&s.push(n)}else s.push(n);return s.map((t=>t.username)).join(", ")},getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});w("data-v-a36d03c2");const Hs={class:"table table-sm table-responsive-lg small"},Ks=p("thead",null,[p("tr",null,[p("th",null,"Submission creator"),p("th",null,"Count"),p("th",null,"Incomplete judges")])],-1),Ys=["onClick"];I(),Gs.render=function(t,e,s,n,o,i){const r=d("user-link"),a=d("judging-detail");return c(),u("div",null,[p("table",Hs,[Ks,p("tbody",null,[(c(!0),u($,null,j(t.contest.submissions,(e=>(c(),u("tr",{key:e.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",class:"modalable",onClick:s=>t.selected=e},[p("td",null,[U(r,{user:e.creator},null,8,["user"])]),p("td",{class:x(t.getJudgesInvolvedCount(e)>=t.judgeCount?"text-success":"text-danger")},m(t.getJudgesInvolvedCount(e))+"/"+m(t.judgeCount),3),p("td",null,m(t.getMissingJudges(e)),1)],8,Ys)))),128))])]),U(a,{id:"detailModalAdmin",submission:t.selected},null,8,["submission"])])},Gs.__scopeId="data-v-a36d03c2";var Qs=l({name:"MarkdownJudgingLeaderboard",components:{CopyPaste:L},props:{usersScores:{type:Array,required:!0},contest:{type:Object,required:!0},judgeCount:{type:Number,required:!0}},computed:{scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))}},methods:{getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id},getCriteriaSumbyName(t,e){const s=e.find((e=>e.name===t));return(null==s?void 0:s.sum)||NaN}}});w("data-v-4fcd74b7");const Ws=p("div",null," | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | ",-1);I(),Qs.render=function(t,e,s,n,o,i){const r=d("copy-paste");return c(),h(r,{class:"tiny"},{default:M((()=>[p("div",null," | Rank | Beatmap | Judging | Musical representation ("+m(10*t.judgeCount)+") | Creativity ("+m(10*t.judgeCount)+") | Gameplay ("+m(10*t.judgeCount)+") | Limitation ("+m(5*t.judgeCount)+") | Total (standardized/raw) | ",1),Ws,(c(!0),u($,null,j(t.usersScores,((e,s)=>(c(),u("div",{key:s},[v(" | \\#"+m(s+1)+" | [TITLE](LINK) by ["+m(e.creator.username)+"](https://osu.ppy.sh/users/"+m(e.creator.osuId)+") | [details](https://mappersguild.com/contests/results?submission="+m(t.getSubmissionIdByCreatorId(e.creator.id))+") ",1),(c(!0),u($,null,j(t.scoredCriteria,(s=>(c(),u("span",{key:s.id},"| "+m(t.getCriteriaSumbyName(s.name,e.criteriaSum)+" "),1)))),128)),v(" | **"+m(Math.round(100*e.standardizedFinalScore)/100)+"** ("+m(e.rawFinalScore)+") | ",1)])))),128))])),_:1})},Qs.__scopeId="data-v-4fcd74b7";var Xs=l({name:"JudgingResults",components:{JudgingLeaderboard:ps,MarkdownJudgingLeaderboard:Qs,JudgeStatuses:Gs},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},watch:{async contestId(){await this.getJudgingResults()}},async created(){await this.getJudgingResults()},methods:{async getJudgingResults(){const t=await this.$http.executeGet(`/contests/listing/${this.contestId}/judgingResults`);this.$http.isError(t)||(this.contest=t.contest,this.usersScores=t.usersScores,this.judgesCorrel=t.judgesCorrel)},getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getJudgesInvolved:t=>t.judgings.map((t=>t.judge.username)).join(", "),getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});const Zs={key:0},tn={class:"ms-2 mb-2"},en=[v(" See judging status per submission "),p("i",{class:"fas fa-angle-down"},null,-1)],sn={class:"ms-2 mb-2"},nn=[v(" See judging leaderboard "),p("i",{class:"fas fa-angle-down"},null,-1)],on={class:"ms-2 mb-2"},rn=[v(" See markdown judging leaderboard "),p("i",{class:"fas fa-angle-down"},null,-1)];Xs.render=function(t,e,s,n,o,i){const r=d("judge-statuses"),a=d("judging-leaderboard"),l=d("markdown-judging-leaderboard");return t.contest?(c(),u("div",Zs,[p("div",tn,[p("a",{href:"#judgeStatuses","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=b((()=>{}),["prevent"]))},en),U(r,{id:"judgeStatuses",class:"collapse mx-2",contest:t.contest},null,8,["contest"])]),p("div",sn,[p("a",{href:"#judgingLeaderboard","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=b((()=>{}),["prevent"]))},nn),U(a,{id:"judgingLeaderboard",class:"collapse mx-2","contest-id":t.contest.id,contest:t.contest,"users-scores":t.usersScores,"judges-correl":t.judgesCorrel},null,8,["contest-id","contest","users-scores","judges-correl"])]),p("div",on,[p("a",{href:"#markdownJudgingLeaderboard","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=b((()=>{}),["prevent"]))},rn),U(l,{id:"markdownJudgingLeaderboard",class:"collapse","users-scores":t.usersScores,contest:t.contest,"judge-count":t.judgeCount},null,8,["users-scores","contest","judge-count"])])])):g("",!0)};var an=l({name:"ContestInfo",components:{ContestHeader:q,ContestBanner:F,DateInfo:K,Name:rt,AnonymizationGuide:ft,ModeInfo:mt,StatusInfo:dt,SubmissionsInfo:Gt,DownloadInfo:se,Urls:jt,Description:Ot,ScreenersInfo:ce,JudgesInfo:Ie,MarkdownUserList:De,ScreeningResults:Pe,ScreeningStatus:be,JudgingThreshold:Ke,CriteriaSelection:Ze,JudgingResults:Xs},props:{contest:{type:Object,required:!0}},data:()=>({screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}),methods:{async deleteContest(t){if(confirm("Are you sure?")){const e=await this.$http.executePost(`/contests/listing/${this.contest.id}/delete`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Deleted contest",type:"info"}),this.$store.commit("deleteContest",this.contest.id))}}}});const ln=p("h5",null,"General",-1),dn=p("hr",null,null,-1),cn=p("h5",null," Submissions ",-1),un={class:"ms-2 mb-2"},pn=p("i",{class:"fas fa-angle-down"},null,-1),mn={class:"ms-2 mb-2"},hn=[v(" See submission anonymization guide "),p("i",{class:"fas fa-angle-down"},null,-1)],gn=p("hr",null,null,-1),fn=p("h4",{class:"mb-4"}," Screening ",-1),yn=p("h5",null," Screeners ",-1),bn={class:"ms-2 mb-2"},vn=p("i",{class:"fas fa-angle-down"},null,-1),Cn={id:"screeners",class:"row collapse mb-2"},wn=p("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their screening progress. ",-1),In=p("div",null,'To begin screening, send this link to the users above and ensure your contest\'s status is set to "Screening"!',-1),Sn=p("hr",null,null,-1),kn=p("h5",null," Screening Results ",-1),$n={class:"ms-2 mb-2"},jn=[v(" See screening status per screener "),p("i",{class:"fas fa-angle-down"},null,-1)],Un={class:"row mb-2"},xn=p("div",{class:"col-sm-8 small text-secondary"},[v(" Submissions with this "),p("i",{class:"fa-star fas text-warning small"}),v(' score or above in "screening results" will be available to judges. If your contest skips the screening process, set this to "0". ')],-1),Mn={class:"ms-2 mb-2"},Dn=[v(" See screening results "),p("i",{class:"fas fa-angle-down"},null,-1)],Tn=p("hr",null,null,-1),En=p("h4",{class:"mb-4"}," Judging ",-1),Jn=p("h5",null," Judges ",-1),An={class:"ms-2 mb-2"},Ln=p("i",{class:"fas fa-angle-down"},null,-1),Nn={id:"judges",class:"row collapse mb-2"},qn=p("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their judging progress. ",-1),Rn=p("div",null,'To begin judging, send this link to the users above and ensure your contest\'s status is set to "Judging"!',-1),Vn=p("hr",null,null,-1),On=p("h5",null," Judging Criteria ",-1),Pn=p("hr",null,null,-1),Bn=p("h5",null," Judging Results ",-1),_n=p("hr",null,null,-1);an.render=function(t,e,s,n,o,i){const r=d("contest-header"),a=d("contest-banner"),l=d("name"),f=d("status-info"),y=d("mode-info"),C=d("date-info"),w=d("urls"),I=d("description"),S=d("submissions-info"),k=d("download-info"),$=d("anonymization-guide"),j=d("screeners-info"),x=d("markdown-user-list"),M=d("screening-status"),D=d("judging-threshold"),T=d("screening-results"),E=d("judges-info"),J=d("criteria-selection"),A=d("judging-results");return c(),u("div",null,[U(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(c(),h(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):g("",!0),ln,p("div",null,[U(l,{class:"mb-2","contest-id":t.contest.id,name:t.contest.name},null,8,["contest-id","name"]),U(f,{class:"mb-2","contest-id":t.contest.id,status:t.contest.status,"is-approved":t.contest.isApproved},null,8,["contest-id","status","is-approved"]),U(y,{class:"mb-2","contest-id":t.contest.id,mode:t.contest.mode},null,8,["contest-id","mode"]),U(C,{class:"mb-2","contest-id":t.contest.id,"contest-start":t.contest.contestStart?t.contest.contestStart.slice(0,10):null,"contest-end":t.contest.contestEnd?t.contest.contestEnd.slice(0,10):null},null,8,["contest-id","contest-start","contest-end"]),U(w,{"contest-id":t.contest.id,url:t.contest.url||null,"osu-contest-listing-url":t.contest.osuContestListingUrl||null,"results-url":t.contest.resultsUrl||null,"banner-url":t.contest.bannerUrl||null},null,8,["contest-id","url","osu-contest-listing-url","results-url","banner-url"]),U(I,{"contest-id":t.contest.id,description:t.contest.description},null,8,["contest-id","description"]),dn,p("div",null,[cn,p("div",un,[p("a",{href:"#submissions","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=b((()=>{}),["prevent"]))},[v(" See all submissions ("+m(t.contest.submissions.length)+") ",1),pn])]),U(S,{id:"submissions",class:"collapse","contest-id":t.contest.id,submissions:t.contest.submissions},null,8,["contest-id","submissions"]),U(k,{"contest-id":t.contest.id,download:t.contest.download},null,8,["contest-id","download"]),p("div",mn,[p("a",{href:"#anonymizationGuide","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=b((()=>{}),["prevent"]))},hn)]),U($,{id:"anonymizationGuide",class:"collapse","contest-id":t.contest.id},null,8,["contest-id"]),gn,fn,yn,p("div",bn,[p("a",{href:"#screeners","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=b((()=>{}),["prevent"]))},[v(" See all screeners ("+m(t.contest.screeners.length)+") ",1),vn])]),p("div",Cn,[U(j,{class:"col-sm-4","contest-id":t.contest.id,screeners:t.contest.screeners},null,8,["contest-id","screeners"]),U(x,{class:"col-sm-7",users:t.contest.screeners},null,8,["users"]),wn]),In,p("code",null,"https://mappersguild.com/contests/screening?contest="+m(t.contest.id),1),Sn,kn,p("div",$n,[p("a",{href:"#screeningStatus","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=b((()=>{}),["prevent"]))},jn)]),U(M,{id:"screeningStatus",class:"collapse mx-2",contest:t.contest},null,8,["contest"]),p("div",Un,[U(D,{class:"col-sm-4","contest-id":t.contest.id,"judging-threshold":t.contest.judgingThreshold},null,8,["contest-id","judging-threshold"]),xn]),p("div",Mn,[p("a",{href:"#screeningResults","data-bs-toggle":"collapse",onClick:e[4]||(e[4]=b((()=>{}),["prevent"]))},Dn)]),U(T,{id:"screeningResults",class:"collapse","contest-id":t.contest.id,"contest-name":t.contest.name,submissions:t.contest.submissions,"judging-threshold":t.contest.judgingThreshold,screeners:t.contest.screeners},null,8,["contest-id","contest-name","submissions","judging-threshold","screeners"]),Tn,En,Jn,p("div",An,[p("a",{href:"#judges","data-bs-toggle":"collapse",onClick:e[5]||(e[5]=b((()=>{}),["prevent"]))},[v(" See all judges ("+m(t.contest.judges.length)+") ",1),Ln])]),p("div",Nn,[U(E,{class:"col-sm-4","contest-id":t.contest.id,judges:t.contest.judges},null,8,["contest-id","judges"]),U(x,{class:"col-sm-7",users:t.contest.judges},null,8,["users"]),qn]),Rn,p("code",null,"https://mappersguild.com/contests/judging?contest="+m(t.contest.id),1),Vn,On,U(J,{"contest-id":t.contest.id,criterias:t.contest.criterias},null,8,["contest-id","criterias"]),Pn,Bn,U(A,{"contest-id":t.contest.id},null,8,["contest-id"]),_n,"hidden"!=t.contest.status||t.contest.submissions.length?g("",!0):(c(),u("button",{key:0,class:"btn btn-sm btn-outline-danger w-100",onClick:e[6]||(e[6]=e=>t.deleteContest(e))}," Delete contest "))])])])};var zn=l({name:"MapSubmissionForm",props:{contestId:{type:String,required:!0}},data(){return{newSubmissionUrl:this.ok}},computed:a(a({},D(["loggedInUser"])),T(["userSubmission"])),watch:{contestId(){this.newSubmissionUrl=this.userSubmission?this.userSubmission.url:""}},methods:{async createSubmission(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/createSubmission`,{submissionUrl:this.newSubmissionUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Submitted!",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e}))}}});w("data-v-f0e10694");const Fn={class:"row"},Gn={class:"col-sm-12 mb-2"},Hn=v(" Current submission: "),Kn={key:0,class:"me-2 text-secondary"},Yn={key:1},Qn=["href"],Wn={class:"small text-secondary ms-1"},Xn=v("(last updated "),Zn=v(")"),to={class:"col-sm-8"},eo={class:"col-sm-4"},so=p("div",{class:"small text-secondary"}," Upload your beatmap to a file sharing service and provide a link here! For various reasons, this website does not host beatmap uploads. ",-1);I(),zn.render=function(t,e,s,n,o,i){return c(),u("div",Fn,[p("div",Gn,[Hn,t.userSubmission?t.userSubmission&&t.userSubmission.url?(c(),u("span",Yn,[p("a",{href:t.userSubmission.url,target:"_blank",class:"small"},m(t.userSubmission.url),9,Qn),p("span",Wn,[Xn,p("code",null,m(new Date(t.userSubmission.updatedAt).toString().slice(4,33)),1),Zn])])):g("",!0):(c(),u("span",Kn,"No submission yet!"))]),p("div",to,[f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newSubmissionUrl=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link..."},null,512),[[y,t.newSubmissionUrl]])]),p("div",eo,[p("button",{class:"btn btn-sm btn-outline-info w-100",onClick:e[1]||(e[1]=e=>t.createSubmission(e))}," Submit ")]),so])},zn.__scopeId="data-v-f0e10694";var no=l({name:"LimitedContestInfo",components:{ContestHeader:q,ContestBanner:F,MapSubmissionForm:zn},props:{contest:{type:Object,required:!0}}});const oo=p("h5",null,"General",-1),io={key:1},ro=["innerHTML"],ao={key:2},lo=v(" This contest is currently in the "),co=v(" phase. "),uo={key:3},po=["href"],mo=p("hr",null,null,-1),ho={key:4},go=p("h5",null,"Submission",-1),fo={key:0},yo={key:0},bo={key:1},vo=p("div",null,"This contest is not yet opened for submissions.",-1),Co=v("Maps can be submitted after "),wo={key:2},Io=v(" Maps can be submitted until "),So={key:1},ko=v(" This contest is being hosted on "),$o=p("a",{href:"https://osu.ppy.sh/community/contests",target:"_blank"},"osu!'s contest listing",-1),jo=v(". Submit your beatmap on the "),Uo=["href"],xo=v("! "),Mo={key:5},Do=p("h5",null,"Results",-1),To=["href"],Eo=["href"];no.render=function(t,e,s,n,o,i){const r=d("contest-header"),a=d("contest-banner"),l=d("map-submission-form");return c(),u("div",null,[U(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(c(),h(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):g("",!0),oo,t.contest.description?(c(),u("div",io,[p("div",{class:"small mt-2 bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.contest.description.trim())},null,8,ro)])):g("",!0),"complete"!==t.contest.status?(c(),u("div",ao,[lo,p("b",null,m(t.contest.status),1),co])):g("",!0),t.contest.url?(c(),u("div",uo,[p("a",{href:t.contest.url,target:"_blank"},"Read more about the contest here!",8,po)])):g("",!0),mo,"complete"!==t.contest.status?(c(),u("div",ho,[go,t.contest.osuContestListingUrl?(c(),u("div",So,[ko,$o,jo,p("a",{href:t.contest.osuContestListingUrl,target:"_blank"},"official contest page",8,Uo),xo])):(c(),u("div",fo,[new Date(t.contest.contestEnd)<new Date?(c(),u("div",yo," This contest is no longer accepting new submissions. ")):new Date(t.contest.contestStart)>new Date?(c(),u("div",bo,[vo,p("div",null,[Co,p("code",null,m(new Date(t.contest.contestStart)),1)])])):(c(),u("div",wo,[Io,p("code",null,m(new Date(t.contest.contestEnd)),1),U(l,{class:"mt-2","contest-id":t.contest.id},null,8,["contest-id"])]))]))])):(c(),u("div",Mo,[Do,p("div",null,[p("a",{href:t.contest.resultsUrl,target:"_blank"},"View contest results here!",8,To)]),p("div",null,[p("a",{href:"/contests/results?contest="+t.contest.id,target:"_blank"},"View Mappers' Guild judging scores here!",8,Eo)])]))])};var Jo=l({name:"AddContest",data:()=>({contestName:"",userContests:[],templateContest:""}),async created(){const t=await this.$http.executeGet("/contests/listing/loadUserContests");this.userContests=t},methods:{async addContest(t){const e=await this.$http.executePost("/contests/listing/create",{name:this.contestName,templateId:this.templateContest},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",e),this.$router.replace(`/contests/listing?contest=${e.id}`))}}});const Ao={class:"container card card-body py-3 mb-2"},Lo=p("option",{value:"",disabled:""}," Contest details template ",-1),No=["value"],qo={key:0,value:"x",disabled:""};Jo.render=function(t,e,s,n,o,i){return c(),u("div",Ao,[f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.contestName=e),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[y,t.contestName,void 0,{trim:!0}]]),f(p("select",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.templateContest=e),class:"form-select form-select-sm mb-2"},[Lo,(c(!0),u($,null,j(t.userContests,(t=>(c(),u("option",{key:t.id,value:t.id},m(t.name),9,No)))),128)),t.userContests.length?g("",!0):(c(),u("option",qo," No templates available "))],512),[[S,t.templateContest]]),p("button",{class:"btn w-100 btn-info",type:"button",onClick:e[2]||(e[2]=e=>t.addContest(e))}," Add new contest ")])};var Ro,Vo,Oo={state:{contests:[],selectedContestId:null},mutations:{setContests(t,e){t.contests=e},addContest(t,e){t.contests.unshift(e),t.selectedContestId=e.id},deleteContest(t,e){t.selectedContestId=null;const s=t.contests.findIndex((t=>t.id==e));-1!==s&&t.contests.splice(s,1)},setSelectedContestId(t,e){t.selectedContestId=e},updateContestStart(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestStart=e.contestStart)},updateContestEnd(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestEnd=e.contestEnd)},updateUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.url=e.url)},updateOsuContestListingUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.osuContestListingUrl=e.osuContestListingUrl)},updateResultsUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.resultsUrl=e.resultsUrl)},updateBannerUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.bannerUrl=e.bannerUrl)},updateDownload(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.download=e.download)},updateCreators(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.creators=e.creators)},deleteSubmission(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&s.submissions.splice(t,1)}},addScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.screeners.push(e.screener)},deleteScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.screeners.findIndex((t=>t.id==e.screenerId));-1!==t&&s.screeners.splice(t,1)}},addJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.judges.push(e.judge)},deleteJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.judges.findIndex((t=>t.id==e.judgeId));-1!==t&&s.judges.splice(t,1)}},updateJudgingThreshold(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.judgingThreshold=e.judgingThreshold)},updateStatus(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.status=e.status)},updateMode(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.mode=e.mode)},updateContestCriterias(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.criterias=e.criterias)},updateName(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.name=e.name)},updateDescription(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.description=e.description)},updateSubmissions(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.submissions=e.submissions)},updateAnonymousSubmissionName(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&(s.submissions[t].name=e.name)}}},getters:{selectedContest:t=>t.contests.find((e=>e.id===t.selectedContestId)),userSubmission:t=>{const e=t.contests.find((e=>e.id===t.selectedContestId));return e&&e.submissions&&e.submissions.length?e.submissions[0]:null}}},Po=l({name:"ContestPage",components:{ContestCard:J,AddContest:Jo,ContestInfo:an,LimitedContestInfo:no},data:()=>({displayMode:"activeContests",filterMode:"",filterValue:"",firstLoadComplete:!1,loadedSpecificContest:!1,limit:200,skip:0,total:0,moreContestsAvailable:!0,loadingCategory:!1}),computed:(Ro=a(a(a({},D(["loggedInUser"])),D({contests:t=>t.contests.contests,selectedContestId:t=>t.contests.selectedContestId})),T(["selectedContest"])),Vo={filteredContests(){if(this.contests){let t=[...this.contests];if(this.filterMode.length&&(t=t.filter((t=>t.mode==this.filterMode))),this.filterValue.length){const e=this.filterValue.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)))}return t}return[]},creatorIds(){return this.selectedContest.creators.map((t=>t.id))}},e(Ro,s(Vo))),watch:{async displayMode(){this.moreContestsAvailable=!0,this.skip=0,this.firstLoadComplete&&(this.loadingCategory=!0,this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null),this.$router.replace("/contests/listing"),await this.loadContests(),this.loadingCategory=!1)}},beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",Oo)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},async created(){await this.loadContests(),this.firstLoadComplete=!0},methods:{async loadContests(){const t=this.$route.query.contest;if(t&&!this.firstLoadComplete){const e=await this.$http.initialRequest(`/contests/listing/searchContest/${t}`);if(this.$http.isError(e))this.$router.replace("/contests/listing"),this.firstLoadComplete=!0,await this.loadContests();else{e.creators.map((t=>t.id)).includes(this.loggedInUser.id)?this.displayMode="myContests":"complete"==e.status?this.displayMode="completedContests":this.displayMode,this.$store.commit("setContests",[e]),this.$store.commit("setSelectedContestId",t),this.loadedSpecificContest=!0}}else{let t;t=this.firstLoadComplete?await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`):await this.$http.initialRequest(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`),this.$http.isError(t)||(this.skip+=this.limit,this.$store.commit("setContests",t),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1,t.length<this.limit&&(this.moreContestsAvailable=!1))}},async loadMore(t){this.total=this.contests.length;const e=await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`,t);this.$http.isError(e)||(0==this.skip?this.$store.commit("setContests",e):this.$store.commit("setContests",[...this.contests||[],...e]),this.skip+=this.limit,this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1),this.total==this.contests.length&&(this.moreContestsAvailable=!1,this.$store.dispatch("updateToastMessages",{message:"No more contests to load!",type:"info"}))}}});const Bo={class:"row"},_o={class:"col-sm-3"},zo={class:"container card card-body py-3 mb-2"},Fo={class:"input-group"},Go=p("button",{class:"btn btn-primary",href:"#"},[p("i",{class:"fas fa-search"})],-1),Ho=p("hr",null,null,-1),Ko=p("div",null," Contest category ",-1),Yo={class:"small ms-2"},Qo=p("hr",null,null,-1),Wo=p("div",null," Contest mode ",-1),Xo={class:"small mx-2"},Zo=p("hr",null,null,-1),ti={key:1,class:"container card card-body py-3 mb-2 text-secondary"},ei={key:2,class:"container card card-body py-3 mb-2 text-secondary"},si={key:3},ni={key:4},oi={class:"col-sm-9 container card card-body"},ii={key:0},ri=p("div",{class:"radial-divisor"},null,-1);Po.render=function(t,e,s,n,o,i){const r=d("add-contest"),a=d("contest-card"),l=d("limited-contest-info"),m=d("contest-info");return c(),u("div",null,[p("div",Bo,[p("div",_o,[p("div",zo,[p("div",Fo,[Go,f(p("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.filterValue=e),class:"form-control form-control-sm",type:"text",placeholder:"search",maxlength:"200",autocomplete:"off"},null,512),[[y,t.filterValue]])]),Ho,Ko,p("div",Yo,[p("div",null,[p("a",{href:"#",class:x(t.loadingCategory?"pe-none opacity-50":""),onClick:e[1]||(e[1]=b((e=>t.displayMode="activeContests"),["prevent"]))},[p("span",{class:x("activeContests"===t.displayMode?"border-bottom border-secondary":"")}," Active ",2)],2)]),p("div",null,[p("a",{href:"#",class:x(t.loadingCategory?"pe-none opacity-50":""),onClick:e[2]||(e[2]=b((e=>t.displayMode="completedContests"),["prevent"]))},[p("span",{class:x("completedContests"===t.displayMode?"border-bottom border-secondary":"")}," Completed ",2)],2)]),p("div",null,[p("a",{href:"#",class:x(t.loadingCategory?"pe-none opacity-50":""),onClick:e[3]||(e[3]=b((e=>t.displayMode="myContests"),["prevent"]))},[p("span",{class:x("myContests"===t.displayMode?"border-bottom border-secondary":"")}," My contests ",2)],2)])]),Qo,Wo,p("div",Xo,[p("div",null,[p("a",{href:"#",onClick:e[4]||(e[4]=b((e=>t.filterMode=""),["prevent"]))},[p("span",{class:x(""===t.filterMode?"border-bottom border-secondary":"")}," Any ",2)])]),p("div",null,[p("a",{href:"#",onClick:e[5]||(e[5]=b((e=>t.filterMode="osu"),["prevent"]))},[p("span",{class:x("osu"===t.filterMode?"border-bottom border-secondary":"")}," osu! ",2)])]),p("div",null,[p("a",{href:"#",onClick:e[6]||(e[6]=b((e=>t.filterMode="taiko"),["prevent"]))},[p("span",{class:x("taiko"===t.filterMode?"border-bottom border-secondary":"")}," osu!taiko ",2)])]),p("div",null,[p("a",{href:"#",onClick:e[7]||(e[7]=b((e=>t.filterMode="catch"),["prevent"]))},[p("span",{class:x("catch"===t.filterMode?"border-bottom border-secondary":"")}," osu!catch ",2)])]),p("div",null,[p("a",{href:"#",onClick:e[8]||(e[8]=b((e=>t.filterMode="mania"),["prevent"]))},[p("span",{class:x("mania"===t.filterMode?"border-bottom border-secondary":"")}," osu!mania ",2)])])])]),Zo,"myContests"==t.displayMode&&t.contests&&!t.loadedSpecificContest?(c(),h(r,{key:0})):g("",!0),U(E,{name:"list",tag:"div",class:"row"},{default:M((()=>[(c(!0),u($,null,j(t.filteredContests,(t=>(c(),h(a,{key:t.id,class:"col-sm-12 my-2",contest:t,route:"listing"},null,8,["contest"])))),128))])),_:1}),t.contests?g("",!0):(c(),u("div",ti," Loading... ")),t.contests&&!t.filteredContests.length?(c(),u("div",ei," No contests available. Try other filters! ")):g("",!0),t.loadedSpecificContest?(c(),u("div",si,[p("button",{class:"btn w-100 btn-info",type:"button",onClick:e[9]||(e[9]=e=>t.loadMore(e))}," Load other contests ")])):t.moreContestsAvailable&&t.contests&&t.contests.length>=t.limit?(c(),u("div",ni,[p("button",{class:"btn w-100 btn-info",type:"button",onClick:e[10]||(e[10]=e=>t.loadMore(e))}," Load more contests ")])):g("",!0)]),p("div",oi,[t.selectedContestId?"myContests"!==t.displayMode?(c(),h(l,{key:1,contest:t.selectedContest},null,8,["contest"])):t.creatorIds.includes(t.loggedInUser.id)||3178418==t.loggedInUser.osuId?(c(),h(m,{key:2,contest:t.selectedContest},null,8,["contest"])):g("",!0):(c(),u("div",ii," No contest selected! Choose one on the left. "))])]),ri])};export{Po as default};
