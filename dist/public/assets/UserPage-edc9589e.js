import{U as D}from"./UserInfo-489430f6.js";import{D as S}from"./DataTable-bfc9d334.js";import{C as q}from"./CopyPaste-2a57d2be.js";import{_ as M,o as t,e as n,a as c,F as f,r as U,t as v,q as l,d as I,c as L,h as _,k as a,w as p,b as y,i as m,s as B,A as H,m as E,n as C}from"./index-9dfcaa88.js";import"./ModalDialog-73183670.js";const G={name:"BotChatMessage",props:{messages:{type:Array,default(){return[]},required:!0},messageType:{type:String,required:!0},mongoId:{type:String,required:!0},users:{type:Array,default(){return[]}}},methods:{async sendMessages(s){if(confirm("Are you sure?")){let o="";switch(this.messageType){case"contest":o=`/admin/contests/${this.mongoId}/sendMessages`;break;case"showcase":o="/admin/users/sendMessages";break;default:return""}await this.$http.executePost(o,{users:this.users,messages:this.messages},s)}}}},N={class:"card card-body message-text small mb-2"};function T(s,e,o,u,k,w){return t(),n("div",null,[c("div",N,[(t(!0),n(f,null,U(o.messages,(h,r)=>(t(),n("span",{key:r},v(h),1))),128))]),o.users.length?(t(),n("a",{key:0,class:"btn btn-sm w-100 btn-success mb-2",onClick:e[0]||(e[0]=h=>w.sendMessages(h))}," Send messages ")):l("",!0)])}const F=M(G,[["render",T]]),P=I({name:"ShowcaseUserList",components:{CopyPaste:q,BotChatMessage:F},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const o of s)e.find(k=>k.osuId==o.osuId)||e.push(o);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://osu.ppy.sh/home/news/2022-07-25-mappers-guild-updates#how-to-participate`),s.push("if you'd like to map an upcoming featured artist song for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("i'll link some upcoming artists in return"),s.push("thank you!! -pishifat"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)},async sendMessages(s,e){if(confirm("Are you sure you want to send messages to the user?")){const u=await this.$http.executePost("/admin/users/sendMessages",{users:[s],messages:this.messages},e);this.$http.isError(u)||this.$store.dispatch("updateToastMessages",{message:"sent",type:"info"})}}}});const V={class:"container card card-body py-1 my-2"},R={key:1,class:"row"},O={key:0,class:"col-sm-3"},j=["onClick"],z={key:1,class:"col-sm-3"},J=["onClick"],K={key:2,class:"col-sm-3"},Q=["onClick"],W={key:3,class:"col-sm-3"},X=["onClick"];function Y(s,e,o,u,k,w){const h=m("bot-chat-message"),r=m("user-link"),b=m("copy-paste"),$=B("bs-tooltip");return t(),n("div",V,[c("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=i=>s.findShowcaseUsers(i))}," Load FA showcase users "),s.uniqueUsers.length?(t(),L(h,{key:0,messages:s.messages,"message-type":"showcase","mongo-id":"",users:s.uniqueUsers},null,8,["messages","users"])):l("",!0),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(t(),n("div",R,[s.osuUsers.length?(t(),n("div",O,[_(" osu! "),a(b,{distinct:"osu"},{default:p(()=>[(t(!0),n(f,null,U(s.osuUsers,i=>(t(),n("div",{key:i.id},[a(r,{user:i},null,8,["user"]),y(c("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:g=>s.sendMessages(i,g)},null,8,j),[[$,"send messages"]])]))),128))]),_:1})])):l("",!0),s.taikoUsers.length?(t(),n("div",z,[_(" osu!taiko "),a(b,{distinct:"taiko"},{default:p(()=>[(t(!0),n(f,null,U(s.taikoUsers,i=>(t(),n("div",{key:i.id},[a(r,{user:i},null,8,["user"]),y(c("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:g=>s.sendMessages(i,g)},null,8,J),[[$,"send messages"]])]))),128))]),_:1})])):l("",!0),s.catchUsers.length?(t(),n("div",K,[_(" osu!catch "),a(b,{distinct:"catch"},{default:p(()=>[(t(!0),n(f,null,U(s.catchUsers,i=>(t(),n("div",{key:i.id},[a(r,{user:i},null,8,["user"]),y(c("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:g=>s.sendMessages(i,g)},null,8,Q),[[$,"send messages"]])]))),128))]),_:1})])):l("",!0),s.maniaUsers.length?(t(),n("div",W,[_(" osu!mania "),a(b,{distinct:"mania"},{default:p(()=>[(t(!0),n(f,null,U(s.maniaUsers,i=>(t(),n("div",{key:i.id},[a(r,{user:i},null,8,["user"]),y(c("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:g=>s.sendMessages(i,g)},null,8,X),[[$,"send messages"]])]))),128))]),_:1})])):l("",!0)])):l("",!0)])}const Z=M(P,[["render",Y],["__scopeId","data-v-d226a2f0"]]),x=I({name:"ShowcaseUserList",components:{CopyPaste:q},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const o of s)e.find(k=>k.osuId==o.osuId)||e.push(o);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png`),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findContestHelperUsers(s){const e=await this.$http.executeGet("/admin/users/findContestHelperUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}}),ss={class:"container card card-body py-1 my-2"},es={key:0,class:"row"},ts={key:0,class:"col-sm-3"},ns={key:1,class:"col-sm-3"},os={key:2,class:"col-sm-3"},rs={key:3,class:"col-sm-3"};function is(s,e,o,u,k,w){const h=m("copy-paste");return t(),n("div",ss,[c("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=r=>s.findContestHelperUsers(r))}," Load contest helper users "),s.osuUsers&&s.taikoUsers&&s.catchUsers&&s.maniaUsers?(t(),n("div",es,[s.osuUsers.length?(t(),n("div",ts,[_(" osu! "),a(h,{distinct:"osu"},{default:p(()=>[(t(!0),n(f,null,U(s.osuUsers,r=>(t(),n("div",{key:r.id},v(r.username),1))),128))]),_:1})])):l("",!0),s.taikoUsers.length?(t(),n("div",ns,[_(" osu!taiko "),a(h,{distinct:"taiko"},{default:p(()=>[(t(!0),n(f,null,U(s.taikoUsers,r=>(t(),n("div",{key:r.id},v(r.username),1))),128))]),_:1})])):l("",!0),s.catchUsers.length?(t(),n("div",os,[_(" osu!catch "),a(h,{distinct:"catch"},{default:p(()=>[(t(!0),n(f,null,U(s.catchUsers,r=>(t(),n("div",{key:r.id},v(r.username),1))),128))]),_:1})])):l("",!0),s.maniaUsers.length?(t(),n("div",rs,[_(" osu!mania "),a(h,{distinct:"mania"},{default:p(()=>[(t(!0),n(f,null,U(s.maniaUsers,r=>(t(),n("div",{key:r.id},v(r.username),1))),128))]),_:1})])):l("",!0)])):l("",!0)])}const as=M(x,[["render",is]]),us=I({name:"DiscordHighlightGenerator",components:{CopyPaste:q},data(){return{inputUsers:"",users:[]}},computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}}),ds={class:"container card card-body py-1 mb-4"},cs={key:0};function ls(s,e,o,u,k,w){const h=m("copy-paste");return t(),n("div",ds,[y(c("textarea",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.inputUsers=r),class:"form-control form-control-sm mx-2 mt-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[H,s.inputUsers]]),c("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[1]||(e[1]=r=>s.generateDiscordHighlights(r))}," Generate Discord highlights "),s.users.length?(t(),n("div",cs,[a(h,null,{default:p(()=>[_(v(s.discordHighlights),1)]),_:1})])):l("",!0)])}const hs=M(us,[["render",ls]]),ms={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const o=s.users.find(u=>u.id==e.userId);o&&(o.queuedBadge=e.badge)},updateDiscordId(s,e){const o=s.users.find(u=>u.id==e.userId);o&&(o.discordId=e.discordId)},updateBypassLogin(s,e){const o=s.users.find(u=>u.id==e.userId);o&&(o.bypassLogin=e.bypassLogin)},updateIsShowcaseMapper(s,e){const o=s.users.find(u=>u.id==e.userId);o&&(o.isShowcaseMapper=e.isShowcaseMapper)},updateIsMentorshipAdmin(s,e){const o=s.users.find(u=>u.id==e.userId);o&&(o.isMentorshipAdmin=e.isMentorshipAdmin)}}},ps=ms,gs=I({components:{DataTable:S,UserInfo:D,ShowcaseUserList:Z,ContestHelperUserList:as,DiscordHighlightGenerator:hs},data(){return{selectedUserId:""}},computed:{...E({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)}},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",ps)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},async created(){const s=await this.$http.initialRequest("/admin/users/load");this.$http.isError(s)||this.$store.commit("setUsers",s)},methods:{updateUser(s){const e=this.users.findIndex(o=>o.id==s.id);e!==-1&&(this.users[e]=s)}}}),fs={class:"container card card-body py-1"},Us={class:"row"},_s={class:"col-sm"};function ks(s,e,o,u,k,w){const h=m("user-link"),r=m("data-table"),b=m("user-info"),$=m("showcase-user-list"),i=m("contest-helper-user-list"),g=m("discord-highlight-generator"),A=B("bs-tooltip");return t(),n("div",null,[c("div",fs,[c("div",Us,[c("div",_s,[a(r,{data:s.users,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":"#editUser","onUpdate:selectedId":e[0]||(e[0]=d=>s.selectedUserId=d)},{default:p(({obj:d})=>[c("td",null,[a(h,{user:d},null,8,["user"])]),c("td",null,[d.rank?y((t(),n("i",{key:0,class:C(["fas fa-crown","text-rank-"+d.rank])},null,2)),[[A,`rank ${d.rank} user`]]):l("",!0)]),c("td",{class:C({"bg-open":d.rank!=d.queuedBadge})},[d.queuedBadge?y((t(),n("i",{key:0,class:C(["fas fa-crown","text-rank-"+d.queuedBadge])},null,2)),[[A,`rank ${d.queuedBadge} user`]]):l("",!0)],2),c("td",{class:C({"bg-open":d.rank!=d.badge})},[d.badge?y((t(),n("i",{key:0,class:C(["fas fa-crown","text-rank-"+d.badge])},null,2)),[[A,`rank ${d.badge} user`]]):l("",!0)],2)]),_:1},8,["data"])])])]),a(b,{user:s.selectedUser,onUpdateUser:e[1]||(e[1]=d=>s.updateUser(d))},null,8,["user"]),a($),a(i),a(g)])}const Cs=M(gs,[["render",ks]]);export{Cs as default};
