import{O as F,d as y,P as S,R as U,S as L,m as f,A as B,U as M,_ as $,o as a,c as b,w,r as l,a as e,k as o,t as g,e as u,l as q,j as m,s as V,u as T,V as P,y as I,x as D,W as A,F as x,f as C}from"./index-47031d8c.js";import{F as E,M as G}from"./extras-7bd6a145.js";import{M as z}from"./ModalDialog-42d9c792.js";import{F as N}from"./FilterBox-2c1ed8f4.js";const Y={namespaced:!0,state:{filterValue:"",filterMode:"",selectedMissionId:null,missions:[],userBeatmaps:[],isLoadingMissions:!0,isFirstLoadDone:!1,exampleMission:null},mutations:{setFirstLoadDone(s){s.isFirstLoadDone=!0},setMissions(s,i){s.missions=i},setUserBeatmaps(s,i){s.userBeatmaps=i},setFilterValue(s,i){s.filterValue=i},setExampleMission(s,i){s.exampleMission=i},setFilterMode(s,i){s.filterMode=i},setSelectedMissionId(s,i){s.selectedMissionId=i},updateMission(s,i){const t=s.missions.findIndex(r=>r.id===i.id);t!==-1&&(s.missions[t]=i)}},getters:{filteredMissions:s=>{let i=s.missions;if(s.filterMode!==E.any){const t=s.filterMode;i=i.filter(r=>r.modes.includes(t))}return s.filterValue.length>2&&(i=i.filter(t=>t.name.toLowerCase().includes(s.filterValue.toLowerCase()))),i},openMissions:(s,i)=>i.filteredMissions.filter(t=>t.status==F.Open),closedMissions:(s,i)=>i.filteredMissions.filter(t=>t.status==F.Closed),selectedMission:s=>s.missions.find(i=>i.id===s.selectedMissionId)},actions:{updateFilterValue({commit:s},i){s("setFilterValue",i)},updateFilterMode({commit:s},i){s("setFilterValue",""),s("setFilterMode",i)}}},j=Y,O=y({name:"MissionCard",components:{AssociatedBeatmaps:S,AddBeatmapToMission:U,MissionDetails:L,ModalDialog:z},computed:{...f(["loggedInUser"]),...B("missions",["selectedMission"]),findTierImage(){switch(this.selectedMission.tier){case 1:return"/images/bronze.png";case 2:return"/images/silver.png";case 3:return"/images/gold.png";case 4:return"/images/platinum.png";default:return"/images/bronze.png"}},meetsRequirements(){return!((this.selectedMission.userMaximumRankedBeatmapsCount||this.selectedMission.userMaximumRankedBeatmapsCount==0)&&this.loggedInUser.rankedBeatmapsCount>this.selectedMission.userMaximumRankedBeatmapsCount||this.selectedMission.userMaximumGlobalRank&&this.loggedInUser.globalRank<this.selectedMission.userMaximumGlobalRank||this.selectedMission.userMaximumPp&&this.loggedInUser.pp>this.selectedMission.userMaximumPp)},cleanModes(){const s=[];for(const i of this.selectedMission.modes)switch(i){case M.Osu:s.push("osu!");break;case M.Taiko:s.push("osu!taiko");break;case M.Catch:s.push("osu!catch");break;case M.Mania:s.push("osu!mania");break}return s}}});const R=s=>(V("data-v-46eb92d1"),s=s(),T(),s),H=["href"],W={key:0,class:"text-primary small"},J={class:"container"},K={class:"text-center"},Q=["src"],X={class:"fs-4"},Z=R(()=>e("hr",null,null,-1)),ss=R(()=>e("hr",null,null,-1));function es(s,i,t,r,p,v){const c=l("mission-details"),_=l("add-beatmap-to-mission"),d=l("associated-beatmaps"),k=l("modal-dialog");return a(),b(k,{id:"editMission","header-class":`bg-rank-${s.selectedMission?s.selectedMission.tier:1}`,loaded:Boolean(s.selectedMission)},{header:w(()=>[e("a",{href:`/missions?id=${s.selectedMission.id}`,target:"_blank",class:"text-dark"},[o(g(s.selectedMission.name)+" ",1),s.selectedMission.modes&&s.selectedMission.modes.length&&s.selectedMission.modes.length<4?(a(),u("span",W,"("+g(s.cleanModes.join(", ")+" only")+")",1)):q("",!0)],8,H)]),default:w(()=>[e("div",J,[e("div",K,[e("img",{src:s.findTierImage,class:"info-mission-tier"},null,8,Q),e("div",X,[e("b",null,g(s.selectedMission.name.trim()),1)]),e("div",null,[e("b",null,"Tier "+g(s.selectedMission.tier),1),o(" priority quest")]),Z]),m(c,{"meets-requirements":s.meetsRequirements,mission:s.selectedMission},null,8,["meets-requirements","mission"]),ss,e("div",null,[s.meetsRequirements&&s.selectedMission.status=="open"?(a(),b(_,{key:0,"mission-id":s.selectedMission.id},null,8,["mission-id"])):q("",!0),m(d,{mission:s.selectedMission},null,8,["mission"])])])]),_:1},8,["header-class","loaded"])}const is=$(O,[["render",es],["__scopeId","data-v-46eb92d1"]]),os=y({name:"MissionInformation",components:{ExampleMission:P},computed:{...f("missions",["exampleMission"])}});const n=s=>(V("data-v-18bd0391"),s=s(),T(),s),ts={class:"container card card-body py-3 mb-2"},ns=n(()=>e("i",{class:"fas fa-angle-down"},null,-1)),as={id:"missionInformation",class:"collapse ms-4 mb-2"},ls=n(()=>e("div",{class:"small text-secondary"},[o(" Priority quests differ from "),e("a",{href:"/quests"},"normal quests"),o(" in a few ways: "),e("ol",null,[e("li",null,[e("b",null,"You don't need to claim a priority quest to participate."),o(" You only need to make a map and connect it to the quest!")]),e("li",null,[e("b",null,"Some priority quests have user-specific requirements."),o(" These generally aim to give newer mappers an opportunity to get involved, like only allowing users without ranked maps to participate.")]),e("li",null,[e("b",null,"Multiple users can complete the same quest."),o(" This depends on the quest's win condition.")])]),o(" Here's a breakdown of this example priority quest: ")],-1)),rs=n(()=>e("i",{class:"fas fa-angle-down"},null,-1)),ds={id:"missionRewards",class:"collapse ms-4 mb-2 small text-secondary"},ms=n(()=>e("b",null,"The host",-1)),cs=n(()=>e("li",null,[e("b",null,"Progress towards a profile badge specific to priority quests."),o(" You'll need to host 3 beatmapsets that complete priority quests to earn the badge!")],-1)),us=["src"],ps=n(()=>e("li",null,[e("b",null,"Customized mapping keychain for each priority quest completed:")],-1)),_s={class:"row"},hs={class:"col-sm-4"},fs=["src"],Ms=n(()=>e("ul",null,[e("li",null," Front: Pattern from your beatmap. "),e("li",null," Back: Your username and Mappers' Guild logos. "),e("li",null," Depending on your country, shipping may be difficult (or even impossible). These are being made and shipped individually by pishifat, so don't expect the efficiency of a professional company! ")],-1)),gs={class:"col-sm-6"},bs=["src"],ys=n(()=>e("b",null,"All users",-1)),$s=n(()=>e("li",null,[e("b",null,"+2 bonus points per difficulty on a ranked beatmap."),o(" This scales with length, so longer maps earn more points")],-1)),vs=n(()=>e("li",null,[e("b",null,"Variable points for completing a priority quest."),o(" This depends on the quest's difficulty tier:")],-1)),ks=["src"],ws=n(()=>e("b",null,"Tier 1:",-1)),qs=["src"],Is=n(()=>e("b",null,"Tier 2:",-1)),Fs=["src"],xs=n(()=>e("b",null,"Tier 3:",-1)),Cs=["src"],Bs=n(()=>e("b",null,"Tier 4:",-1)),Vs=n(()=>e("ul",null,[e("li",null,[e("b",null,"+1 bonus point per difficulty (also scaling with length) on a ranked beatmap")])],-1));function Ts(s,i,t,r,p,v){const c=l("example-mission");return a(),u("div",ts,[e("a",{href:"#missionInformation","data-bs-toggle":"collapse",onClick:i[0]||(i[0]=I(()=>{},["prevent"]))},[o(" How do priority quests work? "),ns]),e("div",as,[ls,m(c,{mission:s.exampleMission},null,8,["mission"])]),e("a",{href:"#missionRewards","data-bs-toggle":"collapse",onClick:i[1]||(i[1]=I(()=>{},["prevent"]))},[o(" What are the rewards for completing a priority quest? "),rs]),e("div",ds,[ms,o(" of a beatmap that completes a priority quest earns: "),e("ul",null,[cs,e("img",{class:"ms-2 text-center rounded",src:"/images/questbadge.png"},null,8,us),ps,e("div",_s,[e("div",hs,[e("img",{class:"text-center w-100 ms-2 rounded",src:"/images/examplemap.png"},null,8,fs),Ms]),e("div",gs,[e("img",{class:"ms-2 text-center w-100 rounded",src:"/images/keychain.jpg"},null,8,bs)])])]),ys,o(" involved in a beatmap that completes a priority quest earn: "),e("ul",null,[$s,vs,e("ul",null,[e("li",null,[e("img",{class:"tier-example me-1",src:"/images/bronze.png"},null,8,ks),ws,o(" 7 points ")]),e("li",null,[e("img",{class:"tier-example me-1",src:"/images/silver.png"},null,8,qs),Is,o(" 10 points ")]),e("li",null,[e("img",{class:"tier-example me-1",src:"/images/gold.png"},null,8,Fs),xs,o(" 13 points ")]),e("li",null,[e("img",{class:"tier-example me-1",src:"/images/platinum.png"},null,8,Cs),Bs,o(" 20 points ")])])]),o(" Anyone who participates in a map linked to a priority questearns: "),Vs])])}const Rs=$(os,[["render",Ts],["__scopeId","data-v-18bd0391"]]),Ss=y({name:"MissionPageFilters",components:{FilterBox:N,ModeFilters:G},computed:{...f("missions",["filterMode"])},methods:D("missions",["updateFilterValue","updateFilterMode"])}),Us={class:"container card card-body py-3 mb-2"};function Ls(s,i,t,r,p,v){const c=l("mode-filters"),_=l("filter-box");return a(),u("div",Us,[m(_,{placeholder:"filter by quest name...","onUpdate:filterValue":i[1]||(i[1]=d=>s.updateFilterValue(d))},{filters:w(()=>[m(c,{"filter-mode":s.filterMode,"onUpdate:filterMode":i[0]||(i[0]=d=>s.updateFilterMode(d))},null,8,["filter-mode"])]),_:1})])}const Ps=$(Ss,[["render",Ls]]),Ds=y({name:"MissionPage",components:{MissionCard:A,MissionInformation:Rs,MissionPageFilters:Ps,MissionInfoModal:is},computed:{...f(["loggedInUser"]),...f("missions",["isFirstLoadDone","isLoadingMissions"]),...B("missions",["openMissions","closedMissions","selectedMission"])},beforeCreate(){this.$store.hasModule("missions")||this.$store.registerModule("missions",j)},async created(){const s=this.$route.query.id;let i="/missions/relevantInfo";const t=await this.$http.initialRequest(i);this.$http.isError(t)||(this.$store.commit("missions/setMissions",t.missions),this.$store.commit("missions/setUserBeatmaps",t.beatmaps),this.$store.commit("missions/setFilterMode",this.loggedInUser.mainMode),this.$store.commit("missions/setFirstLoadDone"),s&&t.missions.some(p=>p.id==s)&&(this.$store.commit("missions/setSelectedMissionId",s),this.$bs.showModal("editMission")));const r=await this.$http.executeGet("/exampleMission");this.$http.isError(r)||this.$store.commit("missions/setExampleMission",r)}}),As=e("div",{class:"radial-divisor"},null,-1),Es={class:"container card card-body my-2"},Gs=e("h4",null,"Active priority quests",-1),zs={key:0,class:"container card card-body my-4"},Ns=e("i",{class:"fas fa-angle-down"},null,-1),Ys={id:"closedMissions",class:"collapse"};function js(s,i,t,r,p,v){const c=l("mission-page-filters"),_=l("mission-information"),d=l("mission-card"),k=l("mission-info-modal");return a(),u("div",null,[m(c),m(_),As,e("div",Es,[Gs,(a(!0),u(x,null,C(s.openMissions,h=>(a(),b(d,{key:h.id,mission:h},null,8,["mission"]))),128))]),s.closedMissions&&s.closedMissions.length?(a(),u("div",zs,[e("h4",null,[e("a",{href:"#closedMissions","data-bs-toggle":"collapse",onClick:i[0]||(i[0]=I(()=>{},["prevent"]))},[o(" Inactive priority quests "),Ns])]),e("div",Ys,[(a(!0),u(x,null,C(s.closedMissions,h=>(a(),b(d,{key:h.id,mission:h},null,8,["mission"]))),128))])])):q("",!0),m(k)])}const Ks=$(Ds,[["render",js]]);export{Ks as default};
