import{d as U,m as b,_ as $,o as a,e as i,a as n,j as M,t as w,y as C,i as l,w as _,b as p,n as u,k as m,p as f,q as S,z as v,f as B,g as D}from"./index-c9cec695.js";import{U as E}from"./UserInfo-6f895ba5.js";import{D as q}from"./DataTable-7d968865.js";const y=U({components:{DataTable:q,UserInfo:E},props:{groupedUsers:{type:Array,default:()=>[]},group:{type:String,required:!0}},data(){return{selectedUserId:""}},computed:{...b({users:e=>e.usersAdmin.users}),selectedUser(){return this.users.find(e=>e.id===this.selectedUserId)}}}),L=["href"],N=n("i",{class:"fas fa-angle-down"},null,-1);function H(e,s,r,t,A,I){const c=f("user-link"),d=f("data-table"),k=f("user-info"),g=S("bs-tooltip");return a(),i("div",null,[n("a",{href:`#${e.group}`,"data-bs-toggle":"collapse",class:"ms-1",onClick:s[0]||(s[0]=C(()=>{},["prevent"]))},[n("h6",null,[M(w(e.group)+" ",1),N])],8,L),l(d,{id:e.group,class:u(e.groupedUsers.length>30?"collapse":"show"),data:e.groupedUsers,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":`#editUser${e.group}`,"onUpdate:selectedId":s[1]||(s[1]=o=>e.selectedUserId=o)},{default:_(({obj:o})=>[n("td",null,[l(c,{user:o},null,8,["user"])]),n("td",null,[o.rank?p((a(),i("i",{key:0,class:u(["fas fa-crown","text-rank-"+o.rank])},null,2)),[[g,`rank ${o.rank} user`]]):m("",!0)]),n("td",{class:u({"bg-open":o.rank!=o.queuedBadge})},[o.queuedBadge?p((a(),i("i",{key:0,class:u(["fas fa-crown","text-rank-"+o.queuedBadge])},null,2)),[[g,`rank ${o.queuedBadge} user`]]):m("",!0)],2),n("td",{class:u({"bg-open":o.rank!=o.badge})},[o.badge?p((a(),i("i",{key:0,class:u(["fas fa-crown","text-rank-"+o.badge])},null,2)),[[g,`rank ${o.badge} user`]]):m("",!0)],2)]),_:1},8,["id","class","data","custom-data-target"]),l(k,{user:e.selectedUser,"current-group":e.group},null,8,["user","current-group"])])}const V=$(y,[["render",H]]);var h=(e=>(e.User="user",e.Admin="admin",e.Secret="secret",e))(h||{});const T={state:{users:[]},mutations:{setUsers(e,s){e.users=s},updateBadge(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.queuedBadge=s.badge)},updateDiscordId(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.discordId=s.discordId)},updateIsShowcaseMapper(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.isShowcaseMapper=s.isShowcaseMapper)},updateIsMentorshipAdmin(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.isMentorshipAdmin=s.isMentorshipAdmin)},updateIsWorldCupHelper(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.isWorldCupHelper=s.isWorldCupHelper)},updateHasMerchAccess(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.hasMerchAccess=s.hasMerchAccess)},updateHasSpecificMerchOrder(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.hasSpecificMerchOrder=s.hasSpecificMerchOrder)},updateWorldCupMerch(e,s){const r=e.users.find(t=>t.id==s.userId);r&&(r.worldCupMerch=s.worldCupMerch)}},getters:{normalUsers:e=>e.users.filter(s=>s.group==h.User),showcaseUsers:e=>e.users.filter(s=>s.group==h.Secret),adminUsers:e=>e.users.filter(s=>s.group==h.Admin)}},W=T,G=U({name:"LoadUsers",components:{AdminUserTable:V},data(){return{selectedUserId:"",userInput:""}},computed:{...b({users:e=>e.usersAdmin.users}),...v(["normalUsers","showcaseUsers","adminUsers"])},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",W)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},methods:{async loadAllUsers(e){const s=await this.$http.executeGet("/admin/users/load",e);this.$http.isError(s)||this.$store.commit("setUsers",s)},async searchUser(e){const s=await this.$http.executeGet(`/admin/users/searchUser/${this.userInput}`,e);this.$http.isError(s)||this.$store.commit("setUsers",[s])}}}),K={class:"container card card-body"},O=n("h4",null," Load users ",-1),j=n("h5",{class:"mt-2"}," Single user ",-1),z=n("h5",{class:"mt-2"}," All users ",-1),R={key:0};function Q(e,s,r,t,A,I){const c=f("admin-user-table");return a(),i("div",K,[O,j,p(n("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>e.userInput=d),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:s[1]||(s[1]=D(d=>e.searchUser(d),["enter"]))},null,544),[[B,e.userInput]]),n("button",{class:"btn btn-sm w-100 btn-info mb-2",onClick:s[2]||(s[2]=d=>e.searchUser(d))}," Load user "),z,n("button",{class:"btn btn-sm w-100 btn-info",onClick:s[3]||(s[3]=d=>e.loadAllUsers(d))}," Load all users "),e.users&&e.users.length?(a(),i("div",R,[l(c,{"grouped-users":e.adminUsers,group:"admin"},null,8,["grouped-users"]),l(c,{"grouped-users":e.showcaseUsers,group:"secret"},null,8,["grouped-users"]),l(c,{"grouped-users":e.normalUsers,group:"user"},null,8,["grouped-users"])])):m("",!0)])}const X=$(G,[["render",Q]]);export{X as L};
