import{d as A,_ as h,o as i,e as n,a,i as u,w as _,F as y,r as k,t as l,k as w,p as c,j as $,b,f as I,m as F}from"./index-8a13ac61.js";import{F as U}from"./FeaturedArtistInfo-6c545a48.js";import{C as v}from"./CopyPaste-8875cfec.js";import{D as S}from"./DataTable-6a5f6706.js";import"./ModalDialog-8b1d3cdc.js";import"./UserLinkList-8734a6de.js";const M=A({name:"RecentLicensedSongs",components:{CopyPaste:v},data(){return{songs:[]}},methods:{async findRecentlyLicensedSongs(e){const t=await this.$http.executeGet("/admin/featuredArtists/findRecentlyLicensedSongs",e);t&&!t.error&&(this.songs=t.songs)}}}),C={class:"container card card-body py-1 my-2"},L={key:0};function T(e,t,s,r,o,g){const m=c("copy-paste");return i(),n("div",C,[a("button",{class:"btn btn-sm w-50 btn-outline-info mb-3",onClick:t[0]||(t[0]=d=>e.findRecentlyLicensedSongs(d))}," Load recently licensed songs "),e.songs.length?(i(),n("div",L,[u(m,{distinct:"songs"},{default:_(()=>[(i(!0),n(y,null,k(e.songs,(d,p)=>(i(),n("div",{key:p},l(d.artist)+" - "+l(d.title),1))),128))]),_:1})])):w("",!0)])}const D=h(M,[["render",T]]),N=A({name:"ArtistRankedMaps",components:{CopyPaste:v},data(){return{artists:[],date:"2024-01-01",threshold:0}},methods:{async loadArtists(e){const t=await this.$http.executePost("/admin/featuredArtists/loadArtistsWithoutRankedMaps",{date:this.date,threshold:this.threshold},e);t&&!t.error&&(this.artists=t.artists)}}}),V={class:"container card card-body py-1 my-2"},P={class:"row mb-2 mx-1"},z={key:0},B=["href"];function O(e,t,s,r,o,g){const m=c("copy-paste");return i(),n("div",V,[$(" load artists and mg ranked maps info between date below and today "),a("div",P,[b(a("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>e.date=d),class:"form-control form-control-sm mx-2 w-25",type:"date",autocomplete:"off",placeholder:"how far back to check"},null,512),[[I,e.date]]),b(a("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>e.threshold=d),class:"form-control form-control-sm mx-2 w-25",type:"number",autocomplete:"off",placeholder:"how many maps"},null,512),[[I,e.threshold]]),a("button",{class:"btn btn-sm btn-outline-info w-25",onClick:t[2]||(t[2]=d=>e.loadArtists(d))}," Load artists ")]),e.artists.length?(i(),n("div",z,[u(m,{distinct:"artists"},{default:_(()=>[(i(!0),n(y,null,k(e.artists,(d,p)=>(i(),n("div",{key:p},[$(l(d.rankedMaps)+" - ",1),a("a",{href:`https://osu.ppy.sh/beatmaps/artists/${d.osuId}`},l(d.name),9,B)]))),128))]),_:1})])):w("",!0)])}const j=h(N,[["render",O]]),x={state:{featuredArtists:[]},mutations:{setFeaturedArtists(e,t){e.featuredArtists=t},updateOsuId(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.osuId=t.osuId)},updateName(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.label=t.name)},updateReferenceUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.referenceUrl=t.referenceUrl)},updateOszTemplatesUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.oszTemplatesUrl=t.oszTemplatesUrl)},updateOfferedUsers(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.offeredUsers=t.offeredUsers)},addSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&s.songs.push(t.song)},updateSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(o=>o.id==t.song.id);r!==-1&&(s.songs[r]=t.song)}},deleteSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(o=>o.id==t.songId);r!==-1&&s.songs.splice(r,1)}},updateNotes(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.notes=t.notes)},updateLastReviewed(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.lastReviewed=t.lastReviewed)},updatePermanentlyDismiss(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.permanentlyDismiss=t.permanentlyDismiss)}}},E=x,q=A({components:{DataTable:S,FeaturedArtistInfo:U,RecentLicensedSongs:D,ArtistRankedMaps:j},data(){return{selectedFeaturedArtistId:""}},computed:{...F({featuredArtists:e=>e.artistsAdmin.featuredArtists}),selectedFeaturedArtist(){return this.featuredArtists.find(e=>e.id===this.selectedFeaturedArtistId)}},beforeCreate(){this.$store.hasModule("artistsAdmin")||this.$store.registerModule("artistsAdmin",E)},unmounted(){this.$store.hasModule("artistsAdmin")&&this.$store.unregisterModule("artistsAdmin")},async created(){const e=await this.$http.initialRequest("/admin/featuredArtists/load");this.$http.isError(e)||this.$store.commit("setFeaturedArtists",e)}}),G={class:"container card card-body py-1"},W={class:"row"},H={class:"col-sm"},J=["href"],K={key:1};function Q(e,t,s,r,o,g){const m=c("data-table"),d=c("recent-licensed-songs"),p=c("artist-ranked-maps"),R=c("featured-artist-info");return i(),n("div",null,[a("div",G,[a("div",W,[a("div",H,[u(m,{data:e.featuredArtists,headers:["ARTIST"],"custom-data-target":"#editFeaturedArtist","onUpdate:selectedId":t[0]||(t[0]=f=>e.selectedFeaturedArtistId=f)},{default:_(({obj:f})=>[a("td",null,[f.osuId?(i(),n("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+f.osuId,target:"_blank"},l(f.label),9,J)):(i(),n("span",K,l(f.label),1))])]),_:1},8,["data"])])])]),u(d),u(p),u(R,{"featured-artist":e.selectedFeaturedArtist},null,8,["featured-artist"])])}const rt=h(q,[["render",Q]]);export{rt as default};
