import{d as g,x as V,_ as b,o as i,e as a,i as p,p as m,a as o,j as n,t as d,k as c,s as z,u as C,m as y,b as f,v as w,F as $,r as v,f as h,A as D,c as E}from"./index-5ff07746.js";import{F as P}from"./FilterBox-be20d52f.js";const U={namespaced:!0,state:{filterValue:"",locusInfos:[],selfLocusInfo:null},mutations:{setFilterValue(s,e){s.filterValue=e},setLocusInfos(s,e){s.locusInfos=e},setSelfLocusInfo(s,e){s.selfLocusInfo=e},updateTimezone(s,e){s.selfLocusInfo.timezone=e},updateAvailability(s,e){s.selfLocusInfo.availability=e},updateLanguage(s,e){if(s.selfLocusInfo.languages&&s.selfLocusInfo.languages.length){const l=s.selfLocusInfo.languages.findIndex(u=>u==e);l>-1?s.selfLocusInfo.languages.splice(l,1):s.selfLocusInfo.languages.push(e)}else s.selfLocusInfo.languages=[e]},updateDiscord(s,e){s.selfLocusInfo.discord=e},updateEmail(s,e){s.selfLocusInfo.email=e},updateAbout(s,e){s.selfLocusInfo.about=e},updateIsPublic(s,e){s.selfLocusInfo.isPublic=e}},getters:{filteredLocusInfos:s=>{let e=s.locusInfos;return s.filterValue.length&&(e=e.filter(l=>{let u;return l.user.username.toLowerCase().includes(s.filterValue.toLowerCase())&&(u=!0),l.user.osuId.toString().includes(s.filterValue)&&(u=!0),l.languages.includes(s.filterValue.toLowerCase())&&(u=!0),l.about.includes(s.filterValue.toLowerCase())&&(u=!0),l.timezone.includes(s.filterValue.toLowerCase())&&(u=!0),u})),e}},actions:{updateFilterValue({commit:s},e){s("setFilterValue",e)}}},M=U,S=g({name:"LocusPageFilters",components:{FilterBox:P},methods:V("locus",["updateFilterValue"])}),F={class:"container card card-body py-3 mb-2"};function B(s,e,l,u,_,I){const r=m("filter-box");return i(),a("div",F,[p(r,{placeholder:"search user, language, or anything else...","onUpdate:filterValue":e[0]||(e[0]=t=>s.updateFilterValue(t))})])}const O=b(S,[["render",B]]),j=g({name:"LocusCard",props:{locusInfo:{type:Object,required:!0}}});const k=s=>(z("data-v-9635401e"),s=s(),C(),s),N={key:0},Y={class:"card card-level-2 card-body my-2"},q=["src"],H={class:"mb-2 ms-3"},R={key:0,class:"ms-3 mb-1 small"},G={key:0,class:"ms-2"},W={class:"text-secondary"},J={key:1,class:"ms-2"},K={key:1,class:"ms-3 mb-1 small"},Q=k(()=>o("div",{class:"ms-2"}," Contact info ",-1)),X=[Q],Z={key:2,class:"mb-2"},x={key:3,class:"small"},ss={class:"text-secondary"},es=k(()=>o("a",{href:"https://www.timeanddate.com/time/map/#!cities=1440",target:"_blank"},"UTC",-1)),os={key:4,class:"small"},ts={class:"text-secondary"},is={key:5,class:"small"},as={class:"text-secondary text-capitalize"},ns={key:6},ls={key:7,class:"small"},us=["innerHTML"];function cs(s,e,l,u,_,I){const r=m("user-link");return s.locusInfo?(i(),a("div",N,[o("div",Y,[o("img",{src:"https://a.ppy.sh/"+s.locusInfo.user.osuId,class:"card-avatar-img"},null,8,q),o("div",H,[p(r,{class:"ms-2",user:s.locusInfo.user},null,8,["user"])]),s.locusInfo.discord||s.locusInfo.email?(i(),a("div",R,[s.locusInfo.discord&&s.locusInfo.discord.length?(i(),a("div",G,[n(" Discord: "),o("span",W,d(s.locusInfo.discord?s.locusInfo.discord:"Discord ID")+" "+d(s.locusInfo.email?"/ "+s.locusInfo.email:""),1)])):!s.locusInfo.discord&&!s.locusInfo.discord.length&&s.locusInfo.email&&s.locusInfo.email.length?(i(),a("div",J," Email: "+d(s.locusInfo.email),1)):c("",!0)])):(i(),a("div",K,X)),s.locusInfo.timezone||s.locusInfo.availability||s.locusInfo.languages&&s.locusInfo.languages.length?(i(),a("hr",Z)):c("",!0),s.locusInfo.timezone?(i(),a("div",x,[n(" Timezone: "),o("i",ss,[n(d(s.locusInfo.timezone)+" ",1),es])])):c("",!0),s.locusInfo.availability?(i(),a("div",os,[n(" Availability: "),o("i",ts,d(s.locusInfo.availability),1)])):c("",!0),s.locusInfo.languages&&s.locusInfo.languages.length?(i(),a("div",is,[n(" Languages: "),o("i",as,d(s.locusInfo.languages.join(", ")),1)])):c("",!0),s.locusInfo.about?(i(),a("hr",ns)):c("",!0),s.locusInfo.about?(i(),a("div",ls,[o("span",{class:"text-secondary",innerHTML:s.$md.render(s.locusInfo.about.trim())},null,8,us)])):c("",!0)])])):c("",!0)}const T=b(j,[["render",cs],["__scopeId","data-v-9635401e"]]),ds=g({name:"SelfLocusInfo",components:{LocusCard:T},data(){return{timezoneOptions:["-11","-10","-9","-8","-7","-6","-5","-4","-3","-2","-1","+0","+1","+2","+3","+4","+5","+6","+7","+8","+9","+10","+11","+12"],languageOptions:["afrikaans","arabic","belarusian","cantonese","catalan","chinese","danish","dutch","filipino","finnish","french","galician","german","indonesian","italian","japanese","korean","lithuanian","malay","polish","portuguese","romanian","russian","serbian","spanish","swedish","thai","turkish","urdu","vietnamese"],newTimezone:"",newAvailability:"",newLanguage:"",newDiscord:"",newEmail:"",newAbout:""}},computed:{...y(["loggedInUser"]),...y("locus",["selfLocusInfo"]),userLanguages(){return this.selfLocusInfo&&this.selfLocusInfo.languages&&this.selfLocusInfo.languages.length?this.selfLocusInfo.languages:[]}},watch:{selfLocusInfo(){this.newTimezone=this.selfLocusInfo.timezone,this.newAvailability=this.selfLocusInfo.availability,this.newDiscord=this.selfLocusInfo.discord,this.newEmail=this.selfLocusInfo.email,this.newAbout=this.selfLocusInfo.about}},methods:{async updateTimezone(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateTimezone`,{timezone:this.newTimezone},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated timezone",type:"info"}),this.$store.commit("locus/updateTimezone",e))},async updateAvailability(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateAvailability`,{availability:this.newAvailability},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated availability",type:"info"}),this.$store.commit("locus/updateAvailability",e))},async updateLanguage(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateLanguage`,{language:this.newLanguage},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated language",type:"info"}),this.$store.commit("locus/updateLanguage",e))},async updateDiscord(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateDiscord`,{discord:this.newDiscord},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated discord",type:"info"}),this.$store.commit("locus/updateDiscord",e))},async updateEmail(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateEmail`,{email:this.newEmail},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated email",type:"info"}),this.$store.commit("locus/updateEmail",e))},async updateAbout(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateAbout`,{about:this.newAbout},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated about",type:"info"}),this.$store.commit("locus/updateAbout",e))},async toggleIsPublic(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/toggleIsPublic`,{},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated public display",type:"info"}),this.$store.commit("locus/updateIsPublic",e))}}}),rs={id:"selfDetails",class:"collapse"},fs={class:"row"},ms={class:"col-sm-6"},ps={class:"mb-2"},hs={class:"small"},gs=o("div",{class:"small text-secondary"},[n("Relative to "),o("a",{href:"https://www.timeanddate.com/time/map/#!cities=1440",target:"_blank"},"UTC")],-1),bs=o("option",{value:"",selected:"",disabled:""}," Select a timezone ",-1),_s=["value"],Is={class:"mb-2"},ys={class:"small"},$s=o("div",{class:"small text-secondary"},"When you're usually available",-1),vs={class:"mb-2"},Ls={class:"small"},ws=o("div",{class:"small text-secondary"},"Any languages you're comfortable communicating with",-1),ks={class:"input-group"},Ts=o("option",{value:"",selected:"",disabled:""}," Select a language ",-1),As=["value"],Vs={class:"input-group-append"},zs=["disabled"],Cs=o("i",{class:"fas fa-plus"},null,-1),Ds=[Cs],Es={class:"input-group-append"},Ps=["disabled"],Us=o("i",{class:"fas fa-minus"},null,-1),Ms=[Us],Ss={class:"mb-2"},Fs={class:"small"},Bs=o("div",{class:"small text-secondary"},"Your Discord ID (if you want to communicate through Discord)",-1),Os={class:"mb-2"},js={class:"small"},Ns=o("div",{class:"small text-secondary"},"Your email (if you want to communicate through email)",-1),Ys={class:"mb-2"},qs={class:"small"},Hs=o("div",{class:"small text-secondary"},[n(" Any info you'd like people to know about you, such as your preferred genres, mapping experience, or other relevant skills. This section also supports "),o("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),n("! ")],-1),Rs={key:0,class:"mb-2"},Gs={class:"small"},Ws=o("div",{class:"small text-secondary"}," Toggle this for public display. ",-1),Js={key:0,class:"col-sm-6"},Ks={class:"text-danger small mt-3"},Qs=o("hr",null,null,-1);function Xs(s,e,l,u,_,I){const r=m("locus-card");return i(),a("div",null,[o("div",null,[o("div",rs,[o("div",fs,[o("div",ms,[o("div",ps,[o("div",hs,[n(" Timezone "),gs,f(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.newTimezone=t),class:"form-select form-select-sm w-100 d-inline",onChange:e[1]||(e[1]=t=>s.updateTimezone(t))},[bs,(i(!0),a($,null,v(s.timezoneOptions,t=>(i(),a("option",{key:t,value:t},d(t)+" UTC ",9,_s))),128))],544),[[w,s.newTimezone]])])]),o("div",Is,[o("div",ys,[n(" Availability "),$s,f(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.newAvailability=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"availability...",maxlength:"400",onChange:e[3]||(e[3]=t=>s.updateAvailability(t))},null,544),[[h,s.newAvailability]])])]),o("div",vs,[o("div",Ls,[n(" Languages "),ws,o("div",ks,[f(o("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.newLanguage=t),class:"form-control form-control-sm ml-2"},[Ts,(i(!0),a($,null,v(s.languageOptions,t=>(i(),a("option",{key:t,value:t,class:"text-capitalize"},d(t),9,As))),128))],512),[[w,s.newLanguage]]),o("div",Vs,[s.userLanguages.includes(s.newLanguage)?c("",!0):(i(),a("button",{key:0,disabled:s.userLanguages.includes(s.newLanguage),class:"btn btn-sm btn-outline-success",type:"button",onClick:e[5]||(e[5]=t=>s.updateLanguage(t))},Ds,8,zs))]),o("div",Es,[s.userLanguages.includes(s.newLanguage)?(i(),a("button",{key:0,disabled:!s.userLanguages.includes(s.newLanguage),class:"btn btn-sm btn-outline-danger",type:"button",onClick:e[6]||(e[6]=t=>s.updateLanguage(t))},Ms,8,Ps)):c("",!0)])])])]),o("div",Ss,[o("div",Fs,[n(" Discord "),Bs,f(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.newDiscord=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"discord...",maxlength:"40",onChange:e[8]||(e[8]=t=>s.updateDiscord(t))},null,544),[[h,s.newDiscord]])])]),o("div",Os,[o("div",js,[n(" Email "),Ns,f(o("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>s.newEmail=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"email...",maxlength:"100",onChange:e[10]||(e[10]=t=>s.updateEmail(t))},null,544),[[h,s.newEmail]])])]),o("div",Ys,[o("div",qs,[n(" About "),Hs,f(o("textarea",{"onUpdate:modelValue":e[11]||(e[11]=t=>s.newAbout=t),length:"4",class:"ml-1 form-control form-control-sm",placeholder:"about...",maxlength:"40000",rows:"4",onChange:e[12]||(e[12]=t=>s.updateAbout(t))},null,544),[[h,s.newAbout]])])]),s.selfLocusInfo?(i(),a("div",Rs,[o("div",Gs,[n(" Visibility "),Ws,o("button",{class:"btn btn-sm btn-outline-info mb-2 w-100",onClick:e[13]||(e[13]=t=>s.toggleIsPublic())},d(s.selfLocusInfo.isPublic?"Hide from public listing":"Show on public listing"),1)])])):c("",!0)]),s.selfLocusInfo?(i(),a("div",Js,[p(r,{"locus-info":s.selfLocusInfo},null,8,["locus-info"]),o("div",Ks,d(s.selfLocusInfo.isPublic?"":"Your info is currently hidden from public display."),1)])):c("",!0)])])]),Qs])}const Zs=b(ds,[["render",Xs]]),xs=g({name:"LocusPage",components:{LocusPageFilters:O,SelfLocusInfo:Zs,LocusCard:T},data(){return{userInput:null}},computed:{...y(["loggedInUser"]),...D("locus",["filteredLocusInfos"])},beforeCreate(){this.$store.hasModule("locus")||this.$store.registerModule("locus",M)},async created(){const s=await this.$http.initialRequest("/locus/query");this.$http.isError(s)||(this.$store.commit("locus/setLocusInfos",s.locusInfos),this.$store.commit("locus/setSelfLocusInfo",s.selfLocusInfo))},methods:{}}),se={class:"container card card-body mb-2"},ee=o("a",{"data-bs-toggle":"collapse",href:"#selfDetails"},[o("h5",null,[n(" Your details "),o("i",{class:"fas fa-angle-down"})])],-1),oe=o("div",{class:"radial-divisor"},null,-1),te={class:"container card card-body"},ie=o("h4",null,"Marketplace",-1),ae={class:"row"};function ne(s,e,l,u,_,I){const r=m("locus-page-filters"),t=m("self-locus-info"),A=m("locus-card");return i(),a("div",null,[p(r),o("div",se,[ee,p(t,{id:"selfDetails",class:"collapse"})]),oe,o("div",te,[ie,o("div",ae,[(i(!0),a($,null,v(s.filteredLocusInfos,L=>(i(),E(A,{key:L.id,"locus-info":L,class:"col-sm-6"},null,8,["locus-info"]))),128))])])])}const ce=b(xs,[["render",ne]]);export{ce as default};
