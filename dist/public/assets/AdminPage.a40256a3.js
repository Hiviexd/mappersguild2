import{d as t,p as s,a as e,h as a,o as i,s as o,w as n,k as r,t as d,j as c,f as l,q as u,b as p,l as m,H as h,m as f,i as g,e as y,F as b,g as I,n as A}from"./vendor.b9ef672a.js";import{_ as q}from"./BeatmapInfoAdmin.4b2ba478.js";import{_ as w}from"./QuestInfo.761bb3ce.js";import{_ as v}from"./ModalDialog.4a9168b4.js";import{_ as k}from"./CopyPaste.4b23b3fb.js";import{_ as $}from"./UserInfo.ae97e797.js";import{_ as C}from"./FeaturedArtistInfo.3a60f15f.js";import{a as P,_ as x}from"./index.85c79094.js";import{_ as M}from"./UserLinkList.9aab0eb3.js";import{_ as Q}from"./ArtistSearch.7c8abe90.js";import"./AssociatedBeatmaps.36fa295d.js";var B=t({name:"ReviewQuest",components:{CopyPaste:k,ModalDialog:v},props:{quest:{type:Object,required:!0}},data(){return{showArtistInput:!1,artistInput:this.quest.art,showNameInput:!1,nameInput:this.quest.name,showObjectiveInput:!1,objectiveInput:this.quest.descriptionMain,showRequiredMapsetsInput:!1,requiredMapsetsInput:this.quest.requiredMapsets,showPriceInput:!1,priceInput:this.quest.price,showTimeframeInput:!1,timeframeInput:this.quest.timeframe/864e5,showPartySizeInput:!1,minPartyInput:this.quest.minParty,maxPartyInput:this.quest.maxParty}},watch:{quest(){this.showArtistInput=!1,this.artistInput=this.quest.art,this.showNameInput=!1,this.nameInput=this.quest.name,this.showObjectiveInput=!1,this.objectiveInput=this.quest.descriptionMain,this.showRequiredMapsetsInput=!1,this.requiredMapsetsInput=this.quest.requiredMapsets,this.showPriceInput=!1,this.priceInput=this.quest.price,this.showTimeframeInput=!1,this.timeframeInput=this.quest.timeframe/864e5}},methods:{async acceptPendingQuest(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/schedule`,{},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"scheduled quest",type:"info"}),this.$store.commit("updateStatus",{questId:this.quest.id,status:s}),this.$bs.hideModal("reviewQuest"))},async rejectPendingQuest(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/reject`,{},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"rejected quest",type:"info"}),this.$store.commit("updateStatus",{questId:this.quest.id,status:s}),this.$bs.hideModal("reviewQuest"))},async updateArt(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/updateArt`,{art:this.artistInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated artist",type:"info"}),this.$store.commit("updateArt",{questId:this.quest.id,art:s}),this.showArtistInput=!1)},async renameQuest(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/rename`,{name:this.nameInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"renamed quest",type:"info"}),this.$store.commit("renameQuest",{questId:this.quest.id,name:s}),this.showNameInput=!1)},async updateDescription(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/updateDescription/`,{description:this.objectiveInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated quest description",type:"info"}),this.$store.commit("updateDescription",{questId:this.quest.id,description:s}),this.showObjectiveInput=!1)},async updateRequiredMapsets(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/updateRequiredMapsets`,{requiredMapsets:this.requiredMapsetsInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated required mapsets",type:"info"}),this.$store.commit("updateRequiredMapsets",{questId:this.quest.id,requiredMapsets:s}),this.showRequiredMapsetsInput=!1)},async updatePrice(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/updatePrice`,{price:this.priceInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated price",type:"info"}),this.$store.commit("updatePrice",{questId:this.quest.id,price:s}),this.showPriceInput=!1)},async updateTimeframe(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/updateTimeframe`,{timeframe:this.timeframeInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated timeframe",type:"info"}),this.$store.commit("updateTimeframe",{questId:this.quest.id,timeframe:s}),this.showTimeframeInput=!1)},async updateMinParty(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/updateMinParty`,{minParty:this.minPartyInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated minParty",type:"info"}),this.$store.commit("updateMinParty",{questId:this.quest.id,minParty:s}),this.showPartySizeInput=!1)},async updateMaxParty(t){const s=await this.$http.executePost(`/admin/quests/${this.quest.id}/updateMaxParty`,{maxParty:this.maxPartyInput},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated maxParty",type:"info"}),this.$store.commit("updateMaxParty",{questId:this.quest.id,maxParty:s}),this.showPartySizeInput=!1)}}});s("data-v-205013f9");const U={class:"container"},L={class:"small text-secondary"},T=r(" Artist "),E=[l("i",{class:"fas fa-edit"},null,-1)],F={key:0},S={key:1,class:"ms-2"},j=["href"],R=["src"],D={key:2,class:"ms-2"},N={class:"small text-secondary"},_=r(" Name "),O=[l("i",{class:"fas fa-edit"},null,-1)],G={key:3},z={key:4,class:"ms-2"},V={class:"small text-secondary"},K=r(" Objective "),H=[l("i",{class:"fas fa-edit"},null,-1)],J={key:5},W={key:6,class:"ms-2"},X={class:"small text-secondary"},Y=r(" Required mapsets "),Z=[l("i",{class:"fas fa-edit"},null,-1)],tt={key:7},st={key:8,class:"ms-2"},et={class:"small text-secondary"},at=r(" Price "),it=[l("i",{class:"fas fa-edit"},null,-1)],ot={key:9},nt={key:10,class:"ms-2"},rt={class:"small text-secondary"},dt=r(" Timeframe "),ct=[l("i",{class:"fas fa-edit"},null,-1)],lt={key:11},ut={key:12,class:"ms-2"},pt={class:"small text-secondary"},mt=r(" Party size "),ht=[l("i",{class:"fas fa-edit"},null,-1)],ft={key:13},gt={key:14,class:"ms-2"},yt=l("div",{class:"small text-secondary"}," Party rank ",-1),bt={class:"ms-2"},It=l("div",{class:"small text-secondary"}," MBC ",-1),At={class:"ms-2"},qt=l("div",{class:"radial-divisor"},null,-1),wt=l("button",{class:"btn btn-outline-secondary w-100","data-bs-toggle":"collapse","data-bs-target":"#forumPm"},[r(" See rejection message "),l("i",{class:"fas fa-angle-down"})],-1),vt={id:"forumPm",class:"collapse"},kt=l("div",null,"hello, you're receiving this message because you submitted a Mappers' Guild quest for review",-1),$t=l("div",null,"[box=your quest info]",-1),Ct=l("div",null,"[/box]",-1),Pt=l("div",null,"your quest has been rejected for the following reason(s):",-1),xt=l("div",null,"[notice] REASONS [/notice]",-1),Mt=l("div",null,"points spent for submitting the quest have been returned to your \"available points\" pool. if you'd like to modify the quest according to above feedback, you can resubmit it and i'll review it again! or if you'd like to submit any other quest, that's fine too!",-1),Qt=l("div",null,"thanks for being cool",-1);e(),B.render=function(t,s,e,f,g,y){const b=a("user-link"),I=a("copy-paste"),A=a("modal-dialog");return i(),o(A,{id:"reviewQuest",loaded:Boolean(t.quest)},{header:n((()=>[r(d(t.quest.name)+" by ",1),c(b,{class:"text-dark",user:t.quest.creator},null,8,["user"])])),default:n((()=>[l("div",U,[l("div",L,[T,l("a",{href:"#",onClick:s[0]||(s[0]=u((s=>t.showArtistInput=!t.showArtistInput),["prevent"]))},E)]),t.showArtistInput?(i(),p("p",F,[m(l("input",{"onUpdate:modelValue":s[1]||(s[1]=s=>t.artistInput=s),class:"form-control form-control-sm w-100",type:"number",autocomplete:"off",placeholder:"artist ID...",onChange:s[2]||(s[2]=s=>t.updateArt(s))},null,544),[[h,t.artistInput,void 0,{number:!0}]])])):t.quest.art?(i(),p("p",S,[l("a",{href:"https://osu.ppy.sh/beatmaps/artists/"+t.quest.art,target:"_blank"},[l("img",{src:"https://assets.ppy.sh/artists/"+t.quest.art+"/cover.jpg",class:"card-avatar-img"},null,8,R)],8,j)])):(i(),p("p",D," None ")),l("div",N,[_,l("a",{href:"#",onClick:s[3]||(s[3]=u((s=>t.showNameInput=!t.showNameInput),["prevent"]))},O)]),t.showNameInput?(i(),p("p",G,[m(l("input",{"onUpdate:modelValue":s[4]||(s[4]=s=>t.nameInput=s),class:"form-control form-control-sm w-100",type:"text",autocomplete:"off",placeholder:"name...",onChange:s[5]||(s[5]=s=>t.renameQuest(s))},null,544),[[h,t.nameInput]])])):(i(),p("p",z,d(t.quest.name),1)),l("div",V,[K,l("a",{href:"#",onClick:s[6]||(s[6]=u((s=>t.showObjectiveInput=!t.showObjectiveInput),["prevent"]))},H)]),t.showObjectiveInput?(i(),p("p",J,[m(l("textarea",{"onUpdate:modelValue":s[7]||(s[7]=s=>t.objectiveInput=s),class:"form-control form-control-sm w-100",rows:"2",type:"text",autocomplete:"off",placeholder:"objective...",onChange:s[8]||(s[8]=s=>t.updateDescription(s))},null,544),[[h,t.objectiveInput]])])):(i(),p("p",W,d(t.quest.descriptionMain),1)),l("div",X,[Y,l("a",{href:"#",onClick:s[9]||(s[9]=u((s=>t.showRequiredMapsetsInput=!t.showRequiredMapsetsInput),["prevent"]))},Z)]),t.showRequiredMapsetsInput?(i(),p("p",tt,[m(l("input",{"onUpdate:modelValue":s[10]||(s[10]=s=>t.requiredMapsetsInput=s),class:"form-control form-control-sm w-100",type:"number",autocomplete:"off",placeholder:"required mapsets...",onChange:s[11]||(s[11]=s=>t.updateRequiredMapsets(s))},null,544),[[h,t.requiredMapsetsInput,void 0,{number:!0}]])])):(i(),p("p",st,d(t.quest.requiredMapsets),1)),l("div",et,[at,l("a",{href:"#",onClick:s[12]||(s[12]=u((s=>t.showPriceInput=!t.showPriceInput),["prevent"]))},it)]),t.showPriceInput?(i(),p("p",ot,[m(l("input",{"onUpdate:modelValue":s[13]||(s[13]=s=>t.priceInput=s),class:"form-control form-control-sm w-100",type:"number",autocomplete:"off",placeholder:"price per party member...",onChange:s[14]||(s[14]=s=>t.updatePrice(s))},null,544),[[h,t.priceInput,void 0,{number:!0}]])])):(i(),p("p",nt,d(t.quest.price)+" points per user ",1)),l("div",rt,[dt,l("a",{href:"#",onClick:s[15]||(s[15]=u((s=>t.showTimeframeInput=!t.showTimeframeInput),["prevent"]))},ct)]),t.showTimeframeInput?(i(),p("p",lt,[m(l("input",{"onUpdate:modelValue":s[16]||(s[16]=s=>t.timeframeInput=s),class:"form-control form-control-sm w-100",type:"number",autocomplete:"off",placeholder:"days...",onChange:s[17]||(s[17]=s=>t.updateTimeframe(s))},null,544),[[h,t.timeframeInput,void 0,{number:!0}]])])):(i(),p("p",ut,d(t.quest.timeframe/864e5)+" days ",1)),l("div",pt,[mt,l("a",{href:"#",onClick:s[18]||(s[18]=u((s=>t.showPartySizeInput=!t.showPartySizeInput),["prevent"]))},ht)]),t.showPartySizeInput?(i(),p("p",ft,[m(l("input",{"onUpdate:modelValue":s[19]||(s[19]=s=>t.minPartyInput=s),class:"form-control form-control-sm w-100",type:"number",autocomplete:"off",placeholder:"minimum",onChange:s[20]||(s[20]=s=>t.updateMinParty(s))},null,544),[[h,t.minPartyInput,void 0,{number:!0}]]),m(l("input",{"onUpdate:modelValue":s[21]||(s[21]=s=>t.maxPartyInput=s),class:"form-control form-control-sm w-100",type:"number",autocomplete:"off",placeholder:"maximum",onChange:s[22]||(s[22]=s=>t.updateMaxParty(s))},null,544),[[h,t.maxPartyInput,void 0,{number:!0}]])])):(i(),p("p",gt,d(t.quest.minParty)+"-"+d(t.quest.maxParty)+" members ",1)),yt,l("p",bt,d(t.quest.minRank)+" rank required ",1),It,l("p",At,d(t.quest.isMbc?"yes":"no"),1),qt,l("button",{type:"submit",class:"btn btn-outline-success w-100",onClick:s[23]||(s[23]=s=>t.acceptPendingQuest(s))}," Schedule quest "),l("button",{type:"submit",class:"btn btn-outline-danger w-100",onClick:s[24]||(s[24]=s=>t.rejectPendingQuest(s))}," Reject quest "),wt,l("div",vt,[c(I,null,{default:n((()=>[kt,$t,l("div",null,"Artist: "+d("https://osu.ppy.sh/beatmaps/artists/"+t.quest.art),1),l("div",null,"Name: "+d(t.quest.name),1),l("div",null,"Objective: "+d(t.quest.descriptionMain),1),l("div",null,"Required mapsets: "+d(t.quest.requiredMapsets),1),l("div",null,"Price: "+d(t.quest.price)+" points per user",1),l("div",null,"Timeframe: "+d(t.quest.timeframe/864e5)+" days",1),l("div",null,"Party size: "+d(t.quest.minParty)+"-"+d(t.quest.maxParty)+" members",1),Ct,Pt,xt,Mt,Qt])),_:1})])])])),_:1},8,["loaded"])},B.__scopeId="data-v-205013f9";var Bt=t({name:"ContestInfo",components:{ModalDialog:v},props:{contest:{type:Object,default:null}},methods:{async toggleIsApproved(t){const s=await this.$http.executePost(`/admin/contests/${this.contest.id}/toggleIsApproved`,{isApproved:!this.contest.isApproved},t);s&&(this.$store.dispatch("updateToastMessages",{message:`set isApproved to ${s.isApproved}`,type:"info"}),this.$store.commit("updateIsApproved",{contestId:this.contest.id,isApproved:s.isApproved}))},async toggleIsFeaturedArtistContest(t){const s=await this.$http.executePost(`/admin/contests/${this.contest.id}/toggleIsFeaturedArtistContest`,{isFeaturedArtistContest:!this.contest.isFeaturedArtistContest},t);s&&(this.$store.dispatch("updateToastMessages",{message:`set isFeaturedArtistContest to ${s.isFeaturedArtistContest}`,type:"info"}),this.$store.commit("updateIsFeaturedArtistContest",{contestId:this.contest.id,isFeaturedArtistContest:s.isFeaturedArtistContest}))},async toggleIsEligibleForPoints(t){const s=await this.$http.executePost(`/admin/contests/${this.contest.id}/toggleIsEligibleForPoints`,{isEligibleForPoints:!this.contest.isEligibleForPoints},t);s&&(this.$store.dispatch("updateToastMessages",{message:`set isEligibleForPoints to ${s.isEligibleForPoints}`,type:"info"}),this.$store.commit("updateIsEligibleForPoints",{contestId:this.contest.id,isEligibleForPoints:s.isEligibleForPoints}))}}});const Ut={class:"container"},Lt={class:"row"},Tt={class:"col-sm-6"},Et=r(" Featured Artist contest: "),Ft={class:"text-danger me-2"},St={class:"row"},jt={class:"col-sm-6"},Rt=r(" Eligible for points: "),Dt={class:"text-danger me-2"},Nt=l("hr",null,null,-1),_t={class:"row"},Ot={class:"col-sm-6"},Gt=r(" Publicly visible: "),zt={class:"text-danger me-2"};Bt.render=function(t,s,e,c,u,p){const m=a("modal-dialog");return i(),o(m,{id:"editContest",loaded:Boolean(t.contest)},{header:n((()=>[r(d(t.contest.name),1)])),default:n((()=>[l("div",Ut,[l("p",Lt,[l("span",Tt,[Et,l("span",Ft,d(t.contest.isFeaturedArtistContest?"true":"false"),1)]),l("button",{class:"btn btn-sm btn-outline-info ms-3 w-25",onClick:s[0]||(s[0]=s=>t.toggleIsFeaturedArtistContest(s))}," Toggle ")]),l("p",St,[l("span",jt,[Rt,l("span",Dt,d(t.contest.isEligibleForPoints?"true":"false"),1)]),l("button",{class:"btn btn-sm btn-outline-info ms-3 w-25",onClick:s[1]||(s[1]=s=>t.toggleIsEligibleForPoints(s))}," Toggle ")]),Nt,l("p",_t,[l("span",Ot,[Gt,l("span",zt,d(t.contest.isApproved?"true":"false"),1)]),l("button",{class:"btn btn-sm btn-outline-info ms-3 w-25",onClick:s[2]||(s[2]=s=>t.toggleIsApproved(s))}," Toggle ")])])])),_:1},8,["loaded"])};var Vt={state:{actionBeatmaps:[],actionBeatmapsLoading:!1,actionQuests:[],actionQuestsLoading:!1,actionUsers:[],actionUsersLoading:!1,actionContests:[],actionContestsLoading:!1,actionArtists:[],actionArtistsLoading:!1,selectedBeatmap:null,selectedQuest:null,selectedUser:null,selectedContest:null,selectedArtist:null},mutations:{setActionBeatmaps(t,s){t.actionBeatmaps=s},setActionBeatmapsLoading(t,s){t.actionBeatmapsLoading=s},setActionQuests(t,s){t.actionQuests=s},setActionQuestsLoading(t,s){t.actionQuestsLoading=s},setActionUsers(t,s){t.actionUsers=s},setActionUsersLoading(t,s){t.actionUsersLoading=s},setActionContests(t,s){t.actionContests=s},setActionContestsLoading(t,s){t.actionContestsLoading=s},setActionArtists(t,s){t.actionArtists=s},setActionArtistsLoading(t,s){t.actionArtistsLoading=s},setSelectedBeatmap(t,s){t.selectedBeatmap=s},setSelectedQuest(t,s){t.selectedQuest=s},setSelectedUser(t,s){t.selectedUser=s},setSelectedContest(t,s){t.selectedContest=s},setSelectedArtist(t,s){t.selectedArtist=s},updateBeatmapStatus(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));if(e&&(e.status=s.status,e.status==P.Ranked)){const e=t.actionBeatmaps.findIndex((t=>t.id===s.beatmapId));t.actionBeatmaps.splice(e,1)}},deleteTask(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));if(e){const t=e.tasks.findIndex((t=>t.id==s.taskId));-1!==t&&e.tasks.splice(t,1)}},deleteModder(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));if(e){const t=e.modders.findIndex((t=>t.id==s.modderId));-1!==t&&e.modders.splice(t,1)}},updateUrl(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));e&&(e.url=s.url)},updateStoryboardQuality(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));if(e){const t=e.tasks.findIndex((t=>t.id==s.taskId));-1!==t&&(e.tasks[t]=s.task)}},updatePackId(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));e&&(e.packId=s.packId)},updateIsShowcase(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));e&&(e.isShowcase=s.isShowcase)},updateQueuedForRank(t,s){const e=t.actionBeatmaps.find((t=>t.id==s.beatmapId));e&&(e.queuedForRank=s.queuedForRank)},updateArt(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.art=s.art)},renameQuest(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.name=s.name)},updateDescription(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.descriptionMain=s.description)},updateRequiredMapsets(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.requiredMapsets=s.requiredMapsets)},updatePrice(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.price=s.price)},updateTimeframe(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.timeframe=864e5*s.timeframe)},updateMinParty(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.minParty=s.minParty)},updateMaxParty(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.maxParty=s.maxParty)},updateStatus(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));if(e&&(e.status=s.status,"open"==e.status||"rejected"==e.status)){const e=t.actionQuests.findIndex((t=>t.id===s.questId));t.actionQuests.splice(e,1)}},updateQueuedForCompletion(t,s){const e=t.actionQuests.find((t=>t.id==s.questId));e&&(e.queuedForCompletion=s.queuedForCompletion)},updateGroup(t,s){const e=t.actionUsers.find((t=>t.id==s.userId));e&&(e.group=s.group)},updateBadge(t,s){const e=t.actionUsers.find((t=>t.id==s.userId));e&&(e.queuedBadge=s.badge)},updateDiscordId(t,s){const e=t.actionUsers.find((t=>t.id==s.userId));e&&(e.discordId=s.discordId)},updateIsApproved(t,s){const e=t.actionContests.find((t=>t.id==s.contestId));e&&(e.isApproved=s.isApproved)},updateIsFeaturedArtistContest(t,s){const e=t.actionContests.find((t=>t.id==s.contestId));e&&(e.isFeaturedArtistContest=s.isFeaturedArtistContest)},updateIsEligibleForPoints(t,s){const e=t.actionContests.find((t=>t.id==s.contestId));e&&(e.isFeaturedArtistContest=s.isFeaturedArtistContest)},updateNotes(t,s){const e=t.actionArtists.find((t=>t.id==s.featuredArtistId));e&&(e.notes=s.notes)},updateLastReviewed(t,s){const e=t.actionArtists.find((t=>t.id==s.featuredArtistId));e&&(e.lastReviewed=s.lastReviewed)},updatePermanentlyDismiss(t,s){const e=t.actionArtists.find((t=>t.id==s.featuredArtistId));e&&(e.permanentlyDismiss=s.permanentlyDismiss)},removeFromActionArtists(t,s){const e=t.actionArtists.findIndex((t=>t.id==s.featuredArtistId));-1!==e&&t.actionArtists.splice(e,1)}}},Kt=t({name:"AdminPage",components:{BeatmapInfoAdmin:q,QuestInfo:w,ReviewQuest:B,UserInfo:$,ContestInfo:Bt,ModesIcons:x,UserLinkList:M,ArtistSearch:Q,FeaturedArtistInfo:C},data:()=>({artistInput:""}),computed:f({actionBeatmaps:t=>t.admin.actionBeatmaps,actionBeatmapsLoading:t=>t.admin.actionBeatmapsLoading,actionQuests:t=>t.admin.actionQuests,actionQuestsLoading:t=>t.admin.actionQuestsLoading,actionUsers:t=>t.admin.actionUsers,actionUsersLoading:t=>t.admin.actionUsersLoading,actionContests:t=>t.admin.actionContests,actionContestsLoading:t=>t.admin.actionContestsLoading,actionArtists:t=>t.admin.actionArtists,actionArtistsLoading:t=>t.admin.actionArtistsLoading,selectedBeatmap:t=>t.admin.selectedBeatmap,selectedQuest:t=>t.admin.selectedQuest,selectedUser:t=>t.admin.selectedUser,selectedContest:t=>t.admin.selectedContest,selectedArtist:t=>t.admin.selectedArtist}),beforeCreate(){this.$store.hasModule("admin")||this.$store.registerModule("admin",Vt)},unmounted(){this.$store.hasModule("admin")&&this.$store.unregisterModule("admin")},methods:{generateMetadata(t){let s=t.artist+" - ";return t.title.length>40?s+=t.title.slice(0,40)+"...":s+=t.title,s},async loadActionBeatmaps(t){{this.$store.commit("setActionBeatmaps",[]),this.$store.commit("setActionBeatmapsLoading",!0);const s=await this.$http.executeGet("/admin/loadActionBeatmaps",t);this.$http.isError(s)||this.$store.commit("setActionBeatmaps",s),this.$store.commit("setActionBeatmapsLoading",!1)}},async loadActionQuests(t){this.$store.commit("setActionQuests",[]),this.$store.commit("setActionQuestsLoading",!0);const s=await this.$http.executeGet("/admin/loadActionQuests",t);this.$http.isError(s)||this.$store.commit("setActionQuests",s),this.$store.commit("setActionQuestsLoading",!1)},async loadActionUsers(t){this.$store.commit("setActionUsers",[]),this.$store.commit("setActionUsersLoading",!0);const s=await this.$http.executeGet("/admin/loadActionUsers",t);this.$http.isError(s)||this.$store.commit("setActionUsers",s),this.$store.commit("setActionUsersLoading",!1)},async loadActionContests(t){this.$store.commit("setActionContests",[]),this.$store.commit("setActionContestsLoading",!0);const s=await this.$http.executeGet("/admin/loadActionContests",t);this.$http.isError(s)||this.$store.commit("setActionContests",s),this.$store.commit("setActionContestsLoading",!1)},async loadActionArtists(t){this.$store.commit("setActionArtists",[]),this.$store.commit("setActionArtistsLoading",!0);const s=await this.$http.executeGet("/admin/loadActionArtists",t);this.$http.isError(s)||this.$store.commit("setActionArtists",s),this.$store.commit("setActionArtistsLoading",!1)},findArtistBeatmapSearchUrl:t=>`https://osu.ppy.sh/beatmapsets?q=artist%3D"${t}"&s=any&sort=plays_desc`,async dismissArtist(t,s){const e=await this.$http.executePost(`/admin/featuredArtists/${t}/updateLastReviewed`,{},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated last reviewed",type:"info"}),this.$store.commit("removeFromActionArtists",{featuredArtistId:t}))},async permanentlyDismissArtist(t,s){const e=await this.$http.executePost(`/admin/featuredArtists/${t}/togglePermanentlyDismiss`,{},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`updated permanenlty dismiss: ${e}`,type:"info"}),this.$store.commit("removeFromActionArtists",{featuredArtistId:t}))}}});const Ht={class:"container card card-body py-1 mb-4"},Jt={class:"row mx-3 mt-2"},Wt={class:"row"},Xt={class:"col"},Yt={class:"ms-4 mt-2"},Zt=l("a",{href:"#actionBeatmaps","data-bs-toggle":"collapse"},[r(" Beatmaps "),l("i",{class:"fas fa-angle-down"})],-1),ts={key:0,class:"ms-2 small text-secondary"},ss={id:"actionBeatmaps",class:"show"},es={key:0,class:"table table-sm"},as=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," METADATA "),l("th",{scope:"col"}," PACK ID "),l("th",{scope:"col"}," STATUS "),l("th",{scope:"col"}," EDIT ")])],-1),is={scope:"row"},os=["href"],ns={key:1,class:"ms-1"},rs={scope:"row"},ds={scope:"row"},cs={scope:"row"},ls=["onClick"],us={key:1,class:"text-secondary ms-5"},ps={class:"container card card-body py-1 mb-4"},ms={class:"row mx-3 mt-2"},hs={class:"row"},fs={class:"col"},gs={class:"ms-4 mt-2"},ys=l("a",{href:"#actionQuests","data-bs-toggle":"collapse"},[r(" Quests "),l("i",{class:"fas fa-angle-down"})],-1),bs={key:0,class:"ms-2 small text-secondary"},Is={id:"actionQuests",class:"show"},As={key:0,class:"table table-sm"},qs=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," NAME "),l("th",{scope:"col"}," CREATOR "),l("th",{scope:"col"}," MODES "),l("th",{scope:"col"}," STATUS "),l("th",{scope:"col"}," MAPSETS "),l("th",{scope:"col"}," EDIT ")])],-1),ws={scope:"row"},vs={scope:"row"},ks={scope:"row"},$s={scope:"row"},Cs={scope:"row"},Ps={scope:"row"},xs=["data-bs-target","onClick"],Ms={key:1,class:"text-secondary ms-5"},Qs={class:"container card card-body py-1 mb-4"},Bs={class:"row mx-3 mt-2"},Us={class:"row"},Ls={class:"col"},Ts={class:"ms-4 mt-2"},Es=l("a",{href:"#actionUsers","data-bs-toggle":"collapse"},[r(" Users "),l("i",{class:"fas fa-angle-down"})],-1),Fs={key:0,class:"ms-2 small text-secondary"},Ss={key:0,id:"actionUsers",class:"show"},js={key:0,class:"table table-sm"},Rs=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," USERNAME "),l("th",{scope:"col"}," RANK "),l("th",{scope:"col"}," QUEUED BADGE "),l("th",{scope:"col"}," BADGE "),l("th",{scope:"col"}," EDIT ")])],-1),Ds={scope:"row"},Ns={scope:"row"},_s={scope:"row"},Os=["onClick"],Gs={key:1,class:"text-secondary ms-5"},zs={class:"container card card-body py-1 mb-4"},Vs={class:"row mx-3 mt-2"},Ks={class:"row"},Hs={class:"col"},Js={class:"ms-4 mt-2"},Ws=l("a",{href:"#actionContests","data-bs-toggle":"collapse"},[r(" Contests "),l("i",{class:"fas fa-angle-down"})],-1),Xs={key:0,class:"ms-2 small text-secondary"},Ys={key:0,id:"actionContests",class:"show"},Zs={key:0,class:"table table-sm"},te=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," CONTEST "),l("th",{scope:"col"}," CREATOR "),l("th",{scope:"col"}," EDIT ")])],-1),se={scope:"row"},ee=["href"],ae={scope:"row"},ie={scope:"row"},oe=["onClick"],ne={key:1,class:"text-secondary ms-5"},re={class:"container card card-body py-1"},de={class:"row mx-3 mt-2"},ce={class:"row"},le={class:"col-sm-6"},ue={class:"ms-4 mt-2"},pe=l("a",{href:"#actionArtists","data-bs-toggle":"collapse"},[r(" Artists "),l("i",{class:"fas fa-angle-down"})],-1),me={key:0,class:"ms-2 small text-secondary"},he={key:0,id:"actionArtists",class:"show"},fe={key:0,class:"table table-sm"},ge=l("thead",null,[l("tr",null,[l("th",{scope:"col"}," ARTIST "),l("th",{scope:"col"}," COMMENT "),l("th",{scope:"col"}," EDIT ")])],-1),ye={scope:"row"},be=["href"],Ie=["onClick"],Ae=[l("i",{class:"fa fa-arrow-right"},null,-1)],qe=["onClick"],we=[l("i",{class:"fas fa-times"},null,-1)],ve=["onClick"],ke=[l("i",{class:"fas fa-times"},null,-1)],$e={scope:"row",class:"small"},Ce={key:0},Pe={scope:"row"},xe=["onClick"],Me={key:1,class:"text-secondary ms-5"},Qe=l("div",{class:"radial-divisor"},null,-1);Kt.render=function(t,s,e,n,r,h){const f=a("modes-icons"),q=a("user-link"),w=a("user-link-list"),v=a("artist-search"),k=a("beatmap-info-admin"),$=a("quest-info"),C=a("review-quest"),P=a("user-info"),x=a("contest-info"),M=a("featured-artist-info"),Q=g("bs-tooltip");return i(),p("div",null,[l("div",Ht,[l("div",Jt,[l("button",{class:"btn btn-sm btn-info w-100 mb-1",onClick:s[0]||(s[0]=s=>t.loadActionBeatmaps(s))}," Load beatmaps ")]),l("div",Wt,[l("div",Xt,[l("h5",Yt,[Zt,t.actionBeatmapsLoading?(i(),p("span",ts,"loading...")):y("",!0)]),l("div",ss,[t.actionBeatmaps.length?(i(),p("table",es,[as,l("tbody",null,[(i(!0),p(b,null,I(t.actionBeatmaps,(s=>(i(),p("tr",{key:s.id,class:"text-secondary"},[l("td",is,[c(f,{modes:[s.mode]},null,8,["modes"]),s.url?(i(),p("a",{key:0,href:s.url,class:"ms-1"},d(t.generateMetadata(s.song)),9,os)):(i(),p("span",ns,d(t.generateMetadata(s.song)),1))]),l("td",rs,d(s.packId),1),l("td",ds,d(s.status),1),l("td",cs,[l("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#editBeatmap",onClick:u((e=>t.$store.commit("setSelectedBeatmap",s)),["prevent"])}," edit ",8,ls)])])))),128))])])):t.actionBeatmapsLoading?y("",!0):(i(),p("span",us,"None..."))])])])]),l("div",ps,[l("div",ms,[l("button",{class:"btn btn-sm btn-info w-100 mb-1",onClick:s[1]||(s[1]=s=>t.loadActionQuests(s))}," Load quests ")]),l("div",hs,[l("div",fs,[l("h5",gs,[ys,t.actionQuestsLoading?(i(),p("span",bs,"loading...")):y("",!0)]),l("div",Is,[t.actionQuests.length?(i(),p("table",As,[qs,l("tbody",null,[(i(!0),p(b,null,I(t.actionQuests,(s=>(i(),p("tr",{key:s.id,class:"text-secondary"},[l("td",ws,d(s.name),1),l("td",vs,d(s.creator.username),1),l("td",ks,[c(f,{modes:s.modes},null,8,["modes"])]),l("td",$s,d(s.status),1),l("td",Cs,d(s.requiredMapsets),1),l("td",Ps,[l("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"pending"==s.status?"#reviewQuest":"#editQuest",onClick:u((e=>t.$store.commit("setSelectedQuest",s)),["prevent"])}," edit ",8,xs)])])))),128))])])):t.actionQuestsLoading?y("",!0):(i(),p("span",Ms,"None..."))])])])]),l("div",Qs,[l("div",Bs,[l("button",{class:"btn btn-sm btn-info w-100 mb-1",onClick:s[2]||(s[2]=s=>t.loadActionUsers(s))}," Load users ")]),l("div",Us,[l("div",Ls,[l("h5",Ts,[Es,t.actionUsersLoading?(i(),p("span",Fs,"loading...")):y("",!0)]),t.actionUsers?(i(),p("div",Ss,[t.actionUsers.length?(i(),p("table",js,[Rs,l("tbody",null,[(i(!0),p(b,null,I(t.actionUsers,(s=>(i(),p("tr",{key:s.id,class:"text-secondary"},[l("td",Ds,[c(q,{user:s},null,8,["user"])]),l("td",Ns,[s.rank?m((i(),p("i",{key:0,class:A(["fas fa-crown","text-rank-"+s.rank])},null,2)),[[Q,`rank ${s.rank} user`]]):y("",!0)]),l("td",{scope:"row",class:A({"bg-open":s.rank!=s.queuedBadge})},[s.queuedBadge?m((i(),p("i",{key:0,class:A(["fas fa-crown","text-rank-"+s.queuedBadge])},null,2)),[[Q,`rank ${s.queuedBadge} user`]]):y("",!0)],2),l("td",{scope:"row",class:A({"bg-open":s.rank!=s.badge})},[s.badge?m((i(),p("i",{key:0,class:A(["fas fa-crown","text-rank-"+s.badge])},null,2)),[[Q,`rank ${s.badge} user`]]):y("",!0)],2),l("td",_s,[l("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#editUser",onClick:u((e=>t.$store.commit("setSelectedUser",s)),["prevent"])}," edit ",8,Os)])])))),128))])])):t.actionUsersLoading?y("",!0):(i(),p("span",Gs,"None..."))])):y("",!0)])])]),l("div",zs,[l("div",Vs,[l("button",{class:"btn btn-sm btn-info w-100 mb-1",onClick:s[3]||(s[3]=s=>t.loadActionContests(s))}," Load contests ")]),l("div",Ks,[l("div",Hs,[l("h5",Js,[Ws,t.actionContestsLoading?(i(),p("span",Xs,"loading...")):y("",!0)]),t.actionContests?(i(),p("div",Ys,[t.actionContests.length?(i(),p("table",Zs,[te,l("tbody",null,[(i(!0),p(b,null,I(t.actionContests,(s=>(i(),p("tr",{key:s.id,class:"text-secondary"},[l("td",se,[l("a",{href:"/contests/listing?contest="+s.id},d(s.name),9,ee)]),l("td",ae,[c(w,{users:s.creators},null,8,["users"])]),l("td",ie,[l("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#editContest",onClick:u((e=>t.$store.commit("setSelectedContest",s)),["prevent"])}," edit ",8,oe)])])))),128))])])):t.actionContestsLoading?y("",!0):(i(),p("span",ne,"None... "))])):y("",!0)])])]),l("div",re,[l("div",de,[l("button",{class:"btn btn-sm btn-info w-100 mb-1",onClick:s[4]||(s[4]=s=>t.loadActionArtists(s))}," Load artists ")]),l("div",ce,[l("div",le,[l("h5",ue,[pe,t.actionArtistsLoading?(i(),p("span",me,"loading...")):y("",!0)]),t.actionArtists?(i(),p("div",he,[t.actionArtists.length?(i(),p("table",fe,[ge,l("tbody",null,[(i(!0),p(b,null,I(t.actionArtists,(s=>(i(),p("tr",{key:s.id,class:"text-secondary"},[l("td",ye,[l("a",{href:t.findArtistBeatmapSearchUrl(s.label),target:"_blank"},d(s.label),9,be),l("a",{class:"ms-2",href:"#",onClick:u((e=>t.artistInput=s.label),["prevent"])},Ae,8,Ie),l("a",{class:"ms-2",href:"#",onClick:u((e=>t.dismissArtist(s.id,e)),["prevent"])},we,8,qe),l("a",{class:"ms-2 text-danger",href:"#",onClick:u((e=>t.permanentlyDismissArtist(s.id,e)),["prevent"])},ke,8,ve)]),l("td",$e,[s.notes&&s.notes.length?(i(),p("div",Ce,d(s.notes),1)):y("",!0)]),l("td",Pe,[l("a",{href:"#","data-bs-toggle":"modal","data-bs-target":"#editFeaturedArtist",onClick:u((e=>t.$store.commit("setSelectedArtist",s)),["prevent"])}," edit ",8,xe)])])))),128))])])):t.actionArtistsLoading?y("",!0):(i(),p("span",Me,"None... "))])):y("",!0)]),c(v,{class:"mb-2 col-sm-6",input:t.artistInput},null,8,["input"])])]),Qe,t.selectedBeatmap?(i(),o(k,{key:0,beatmap:t.selectedBeatmap},null,8,["beatmap"])):y("",!0),t.selectedQuest?(i(),o($,{key:1,quest:t.selectedQuest},null,8,["quest"])):y("",!0),t.selectedQuest?(i(),o(C,{key:2,quest:t.selectedQuest},null,8,["quest"])):y("",!0),t.selectedUser?(i(),o(P,{key:3,user:t.selectedUser},null,8,["user"])):y("",!0),t.selectedContest?(i(),o(x,{key:4,contest:t.selectedContest},null,8,["contest"])):y("",!0),t.selectedArtist?(i(),o(M,{key:5,"featured-artist":t.selectedArtist},null,8,["featured-artist"])):y("",!0)])};export{Kt as default};
