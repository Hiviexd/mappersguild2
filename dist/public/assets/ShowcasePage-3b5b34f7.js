import{d as y,m as _,_ as S,o as t,e as a,j as c,t as h,i as u,k as p,n as g,y as f,p as w,a as o,F as M,r as b,s as A,u as I,X as U}from"./index-0d4d7327.js";import{U as v}from"./UserLinkList-b919451e.js";const D={namespaced:!0,state:{showcaseArtists:[]},mutations:{setShowcaseArtists(s,e){s.showcaseArtists=e},updateArtist(s,e){const d=s.showcaseArtists.findIndex(m=>m.id===e.id);d!==-1&&(s.showcaseArtists[d]=e)}}},T=D,C=y({name:"SongDetails",components:{UserLinkList:v},props:{song:{type:Object,default:null},isShowcaseMapper:{type:Boolean},artistId:{type:String,required:!0}},data(){return{processing:!1}},computed:{..._(["loggedInUser"]),isSongShowcaseMapper(){return this.song.songShowcaseMappers.map(e=>e.id).includes(this.loggedInUser.id)}},methods:{async addSongShowcaseMapper(s){this.processing=!0;const e=await this.$http.executePost(`/showcase/addSongShowcaseMapper/${this.artistId}/${this.song.id}`,{},s);e&&!this.$http.isError(e)&&(this.$store.commit("showcase/updateArtist",e),this.$store.dispatch("updateToastMessages",{message:"Added",type:"info"})),this.processing=!1},async removeSongShowcaseMapper(s){this.processing=!0;const e=await this.$http.executePost(`/showcase/removeSongShowcaseMapper/${this.artistId}/${this.song.id}`,{},s);e&&!this.$http.isError(e)&&(this.$store.commit("showcase/updateArtist",e),this.$store.dispatch("updateToastMessages",{message:"Removed",type:"info"})),this.processing=!1}}});const N={key:0,class:"text-info"},R={key:1,class:"text-info"};function j(s,e,d,m,k,$){const r=w("user-link-list");return t(),a("div",null,[c(h(s.song.artist)+" - "+h(s.song.title)+" ",1),s.song.songShowcaseMappers&&s.song.songShowcaseMappers.length?(t(),a("span",N,[c(" (mapped by "),u(r,{users:s.song.songShowcaseMappers},null,8,["users"]),c(") ")])):p("",!0),s.isShowcaseMapper?(t(),a("span",R,[s.song.songShowcaseMappers&&s.isSongShowcaseMapper?(t(),a("a",{key:0,href:"#",class:g(["text-danger small",s.processing?"fake-button-disable":""]),onClick:e[0]||(e[0]=f(i=>s.removeSongShowcaseMapper(i),["prevent"]))}," remove ",2)):(t(),a("a",{key:1,href:"#",class:g(["text-success small",s.processing?"fake-button-disable":""]),onClick:e[1]||(e[1]=f(i=>s.addSongShowcaseMapper(i),["prevent"]))}," add ",2))])):p("",!0)])}const P=S(C,[["render",j],["__scopeId","data-v-0cce4eea"]]),E=y({name:"ArtistDetails",components:{UserLinkList:v,SongDetails:P},props:{artist:{type:Object,default:null}},data(){return{processing:!1}},computed:{..._(["loggedInUser"]),isShowcaseMapper(){return this.artist.showcaseMappers.map(e=>e.id).includes(this.loggedInUser.id)},month(){return this.artist.projectedRelease?new Date(this.artist.projectedRelease).toLocaleString("default",{month:"long"}):null}},methods:{async addShowcaseMapper(s){this.processing=!0;const e=await this.$http.executePost("/showcase/addShowcaseMapper/"+this.artist.id,{},s);e&&!this.$http.isError(e)&&(this.$store.commit("showcase/updateArtist",e),this.$store.dispatch("updateToastMessages",{message:"Added",type:"info"})),this.processing=!1},async removeShowcaseMapper(s){this.processing=!0;const e=await this.$http.executePost("/showcase/removeShowcaseMapper/"+this.artist.id,{},s);e&&!this.$http.isError(e)&&(this.$store.commit("showcase/updateArtist",e),this.$store.dispatch("updateToastMessages",{message:"Removed",type:"info"})),this.processing=!1}}});const n=s=>(A("data-v-494accec"),s=s(),I(),s),F=["href"],L=n(()=>o("i",{class:"fas fa-angle-down"},null,-1)),V={class:"small"},Y=["id"],z={class:"small ms-2"},B={key:0},O=n(()=>o("b",null,"Listen: ",-1)),q=["href"],X=n(()=>o("b",null,".osz templates: ",-1)),G=["href"],H={key:1},J=n(()=>o("b",null,"Deadline: ",-1)),K={key:0},Q={key:1},W={key:2},Z=n(()=>o("b",null,"Songs: ",-1)),x={key:0},ss={key:1},es=n(()=>o("hr",null,null,-1)),ts={key:1,class:"small"},as=n(()=>o("b",null,"Offered to: ",-1));function os(s,e,d,m,k,$){const r=w("user-link-list"),i=w("song-details");return t(),a("div",null,[o("a",{href:"#"+s.artist.label.replace(/\s|[0-9]/g,"")+"Artist","data-bs-toggle":"collapse",class:g(s.artist.hasRankedMaps?"":"text-warning")},[c(h(s.artist.label)+" ",1),L],10,F),c(" â€” "),o("span",V,[u(r,{users:s.artist.showcaseMappers},null,8,["users"])]),s.artist.showcaseMappers&&s.isShowcaseMapper?(t(),a("a",{key:0,href:"#",class:g(["text-danger small",s.processing?"fake-button-disable":""]),onClick:e[0]||(e[0]=f(l=>s.removeShowcaseMapper(l),["prevent"]))}," remove ",2)):(t(),a("a",{key:1,href:"#",class:g(["text-success small",s.processing?"fake-button-disable":""]),onClick:e[1]||(e[1]=f(l=>s.addShowcaseMapper(l),["prevent"]))}," add ",2)),o("div",{id:s.artist.label.replace(/\s|[0-9]/g,"")+"Artist",class:"collapse"},[o("div",z,[s.artist.referenceUrl?(t(),a("li",B,[O,s.artist.referenceUrl?(t(),a("a",{key:0,href:s.artist.referenceUrl,target:"_blank"},h(s.artist.referenceUrl),9,q)):p("",!0)])):p("",!0),o("li",null,[X,s.artist.oszTemplatesUrl?(t(),a("a",{key:0,href:s.artist.oszTemplatesUrl,target:"_blank"},"download",8,G)):(t(),a("span",H,"Not added yet. Yell at pishifat please."))]),o("li",null,[J,s.artist.projectedRelease?(t(),a("span",K,h(s.month)+" (deadline estimate)",1)):s.artist.osuId?(t(),a("span",W,"Already released")):(t(),a("span",Q,"Deadline hasn't been set yet."))]),o("li",null,[Z,s.artist.songs.length?(t(),a("ul",ss,[(t(!0),a(M,null,b(s.artist.songs,l=>(t(),a("li",{key:l.id,class:"text-secondary"},[u(i,{song:l,"is-showcase-mapper":s.isShowcaseMapper,"artist-id":s.artist.id},null,8,["song","is-showcase-mapper","artist-id"])]))),128))])):(t(),a("span",x,"Not added yet. Yell at pishifat please."))]),es,s.artist.offeredUsers&&s.artist.offeredUsers.length&&s.loggedInUser.group=="admin"?(t(),a("li",ts,[as,u(r,{users:s.artist.offeredUsers},null,8,["users"])])):p("",!0)])],8,Y)])}const is=S(E,[["render",os],["__scopeId","data-v-494accec"]]),ns=y({name:"ShowcasePage",components:{ArtistDetails:is},computed:{..._("showcase",["showcaseArtists"])},beforeCreate(){this.$store.hasModule("showcase")||this.$store.registerModule("showcase",T)},async created(){const s=await this.$http.initialRequest("/showcase/relevantInfo");s&&this.$store.commit("showcase/setShowcaseArtists",s.artists)}}),rs={class:"container card card-body py-3 mb-3"},ls=U('<h5>readme.txt</h5><ol class="small text-secondary"><li> These are some of the Featured Artists planned to be announced in the next few months. This is not an exhaustive list of all upcoming Featured Artists, and some may not be announced until later. </li><li> As a *special showcase mapper person*, you&#39;re trusted to not leak anything on this page. So don&#39;t leak anything. </li><li> Clicking an artist will display their info + songs you can map. </li><li><span class="text-warning">Yellow</span> artists are desperate for new maps, and will likely feature your map in the announcement video (if you&#39;re the only mapper). </li><li> If you&#39;re interested mapping a song from an artist, mark it with <span class="text-success">add</span> (or <span class="text-danger">remove</span> if you change your mind). You can optionally mark a specific song too. pishifat will talk to you about the next steps once you&#39;ve expressed interest. </li><li> Deadlines are flexible. Talk to pishifat if you want to map an artist, but the deadline is holding you back. </li></ol><hr><h5>Upcoming Featured Artists</h5>',4),ps={key:0};function ds(s,e,d,m,k,$){const r=w("artist-details");return t(),a("div",null,[o("div",rs,[ls,o("ul",null,[(t(!0),a(M,null,b(s.showcaseArtists,i=>(t(),a("li",{key:i.id},[u(r,{artist:i},null,8,["artist"])]))),128)),!s.showcaseArtists||!s.showcaseArtists.length?(t(),a("li",ps," You're not supposed to be here. Or something went wrong. Talk to pishifat if you're expecting a list of artists. ")):p("",!0)])])])}const us=S(ns,[["render",ds]]);export{us as default};
