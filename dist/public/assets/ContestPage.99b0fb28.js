var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,s,n)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&r(t,s,e[s]);if(n)for(var s of n(e))i.call(e,s)&&r(t,s,e[s]);return t},l=(t,n)=>e(t,s(n));import{d,m as c,i as u,o as p,b as m,f as h,t as g,u as f,e as b,q as y,O as v,s as C,l as w,P as I,p as S,a as k,J as $,z as j,F as U,g as x,j as M,n as D,w as T,H as E,x as J}from"./vendor.8b5721c7.js";import{_ as A}from"./ContestCard.f4b3ec41.js";import{_ as V}from"./UserLinkList.b6d2284f.js";import{C as L}from"./CopyPaste.7cb4b414.js";import{_ as N}from"./ModalDialog.2c18b0dc.js";import"./ModesIcons.88090f43.js";var q=d({name:"ContestHeader",components:{UserLinkList:V},props:{contestId:{type:String,required:!0},name:{type:String,required:!0},url:{type:String,default:null},creators:{type:Array,required:!0}},data:()=>({showCreatorInput:!1,creatorInput:""}),computed:l(a({},c(["loggedInUser"])),{creatorIds(){return this.creators.map((t=>t.id))}}),watch:{creators(){this.generateUsernamesString()}},created(){this.generateUsernamesString()},methods:{generateUsernamesString(){const t=this.creators.map((t=>t.username)).join(", ");this.creatorInput=t},async updateCreators(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateCreators`,{creatorInput:this.creatorInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest creators",type:"info"}),this.$store.commit("updateCreators",{contestId:this.contestId,creators:e}),this.showCreatorInput=!1)}}});const R=["href"],O={key:1},P={class:"form-inline"},B={class:"form-group"},_=w(" hosted by "),z=[h("i",{class:"fas fa-edit"},null,-1)],F=h("hr",null,null,-1);q.render=function(t,e,s,n,o,i){const r=u("user-link-list");return p(),m("div",null,[h("h4",null,[t.url?(p(),m("a",{key:0,href:t.url,target:"_blank"},g(t.name),9,R)):(p(),m("span",O,g(t.name),1))]),h("div",P,[h("div",B,[_,t.showCreatorInput?b("",!0):(p(),f(r,{key:0,users:t.creators},null,8,["users"])),t.showCreatorInput?y((p(),m("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=e=>t.creatorInput=e),class:"ml-1 form-control w-50 d-inline form-control-sm",onChange:e[1]||(e[1]=e=>t.updateCreators(e))},null,544)),[[v,t.creatorInput]]):b("",!0),t.creatorIds.includes(t.loggedInUser.id)?(p(),m("a",{key:2,href:"#",class:"ms-1",onClick:e[2]||(e[2]=C((e=>t.showCreatorInput=!t.showCreatorInput),["prevent"]))},z)):b("",!0)])]),F])};var G=d({name:"ContestBanner",props:{bannerUrl:{type:String,required:!0}}});const H=["src"],K=h("hr",null,null,-1);G.render=function(t,e,s,n,o,i){return p(),m("div",null,[h("img",{class:"w-100",src:t.bannerUrl},null,8,H),K])};var Y=d({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null},contestEnd:{type:String,default:null}},data(){return{newContestStart:this.contestStart,newContestEnd:this.contestEnd}},watch:{contestId(){this.newContestStart=this.contestStart,this.newContestEnd=this.contestEnd}},methods:{async updateContestStart(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestStart`,{date:this.newContestStart},t);this.$http.isError(e)?this.newContestStart=this.contestStart:(this.$store.dispatch("updateToastMessages",{message:"Updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:e}))},async updateContestEnd(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestEnd`,{date:this.newContestEnd},t);this.$http.isError(e)?this.newContestEnd=this.contestEnd:(this.$store.dispatch("updateToastMessages",{message:"Updated contest end date",type:"info"}),this.$store.commit("updateContestEnd",{contestId:this.contestId,contestEnd:e}))}}});const Q={class:"row"},W={class:"col-sm-6"},X={class:"form-inline w-100"},Z=w(" Submissions open: "),tt={class:"input-group"},et={class:"input-group-append"},st={class:"col-sm-6"},nt={class:"form-inline w-100"},ot=w(" Submissions close: "),it={class:"input-group"},rt={class:"input-group-append"};Y.render=function(t,e,s,n,o,i){return p(),m("div",Q,[h("div",W,[h("div",X,[Z,h("div",tt,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newContestStart=e),class:"ml-1 form-control",type:"date",onKeyup:e[1]||(e[1]=I((e=>t.updateContestStart(e)),["enter"]))},null,544),[[v,t.newContestStart]]),h("div",et,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.updateContestStart(e))}," Save date ")])])])]),h("div",st,[h("div",nt,[ot,h("div",it,[y(h("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.newContestEnd=e),class:"ml-1 form-control",type:"date",onKeyup:e[4]||(e[4]=I((e=>t.updateContestEnd(e)),["enter"]))},null,544),[[v,t.newContestEnd]]),h("div",rt,[h("button",{class:"btn btn-primary",href:"#",onClick:e[5]||(e[5]=e=>t.updateContestEnd(e))}," Save date ")])])])])])};var at=d({name:"TitleEdit",props:{contestId:{type:String,required:!0},name:{type:String,default:null}},data(){return{newName:this.name}},watch:{contestId(){this.newName=this.name}},methods:{async updateName(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateName`,{name:this.newName},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest name",type:"info"}),this.$store.commit("updateName",{contestId:this.contestId,name:e}))}}});const lt={class:"form-inline w-100 mt-2"},dt=w(" Name: ");at.render=function(t,e,s,n,o,i){return p(),m("div",lt,[dt,y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newName=e),class:"ml-1 form-control d-inline w-75",onChange:e[1]||(e[1]=e=>t.updateName(e))},null,544),[[v,t.newName]])])};var ct=d({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null},isApproved:{type:Boolean,required:!0}},data(){return{newStatus:this.status}},watch:{contestId(){this.newStatus=this.status}},methods:{async updateStatus(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateStatus`,{status:this.newStatus},t);this.$http.isError(e)?this.newStatus=this.status:(this.$store.dispatch("updateToastMessages",{message:"Updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:e}))}}});S("data-v-4a3e98ae");const ut=w(" Status: "),pt=[j('<option value="" disabled data-v-4a3e98ae> Select a status </option><option value="hidden" data-v-4a3e98ae> Hidden </option><option value="beatmapping" data-v-4a3e98ae> Beatmapping </option><option value="screening" data-v-4a3e98ae> Screening </option><option value="judging" data-v-4a3e98ae> Judging </option><option value="complete" data-v-4a3e98ae> Complete </option>',6)],mt={key:0,class:"small text-danger mt-2"};k(),ct.render=function(t,e,s,n,o,i){return p(),m("div",null,[ut,y(h("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newStatus=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateStatus(e))},pt,544),[[$,t.newStatus]]),t.isApproved||"hidden"===t.status?b("",!0):(p(),m("div",mt,' Your contest has been queued for approval. Once approved, it will appear in "Active contests". '))])},ct.__scopeId="data-v-4a3e98ae";var ht=d({name:"ModeInfo",props:{contestId:{type:String,required:!0},mode:{type:String,default:""}},data(){return{newMode:this.mode}},watch:{contestId(){this.newMode=this.mode}},methods:{async updateMode(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateMode`,{mode:this.newMode},t);this.$http.isError(e)?this.newMode=this.mode:(this.$store.dispatch("updateToastMessages",{message:"Updated contest mode",type:"info"}),this.$store.commit("updateMode",{contestId:this.contestId,mode:e}))}}});S("data-v-5ffc0e64");const gt=w(" Mode: "),ft=[j('<option value="" selected disabled data-v-5ffc0e64> Select a mode </option><option value="osu" data-v-5ffc0e64> osu! </option><option value="taiko" data-v-5ffc0e64> osu!taiko </option><option value="catch" data-v-5ffc0e64> osu!catch </option><option value="mania" data-v-5ffc0e64> osu!mania </option>',5)];k(),ht.render=function(t,e,s,n,o,i){return p(),m("div",null,[gt,y(h("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newMode=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateMode(e))},ft,544),[[$,t.newMode]])])},ht.__scopeId="data-v-5ffc0e64";var bt=d({name:"AnonymizationGuide",props:{contestId:{type:String,required:!0}},data:()=>({csvOutput:null,errors:[]}),methods:{async applyCsvOutput(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/syncAnonymousNames`,{csv:this.csvOutput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated submission names",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e.submissions}),e.errors.length&&(this.errors=e.errors))}}});const yt={class:"mx-4"},vt=w(" Submissions must be anonymized locally, then transferred to Mappers' Guild. You have 3 options: "),Ct=h("ol",null,[h("li",null,[w("Follow instructions on the "),h("a",{href:"https://github.com/pishifat/contest-anonymization#readme",target:"_blank"},"contest anonymization GitHub repository"),w(".")]),h("li",null,[w("Ask "),h("a",{href:"https://osu.ppy.sh/users/3178418",target:"_blank"},"pishifat"),w(" to do option 1 for you.")]),h("li",null,"Manually anonymize entries (please don't waste your time with this).")],-1),wt=h("span",{class:"small text-secondary"},[w("If you succeed with step 1, paste your "),h("code",null,".csv"),w(" output here as raw text to replace anonymized names:")],-1),It={class:"row"},St={class:"col-sm-10"},kt={class:"col-sm-2"},$t={key:0,class:"small text-warning"},jt=w(" The following submissions could not be processed and will need to be renamed manually: ");bt.render=function(t,e,s,n,o,i){return p(),m("div",yt,[vt,Ct,h("div",null,[wt,h("div",It,[h("div",St,[y(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.csvOutput=e),class:"form-control form-inline",rows:"1"},null,512),[[v,t.csvOutput]])]),h("div",kt,[h("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:e[1]||(e[1]=e=>t.applyCsvOutput())}," Save ")])]),t.errors.length?(p(),m("div",$t,[jt,h("ul",null,[(p(!0),m(U,null,x(t.errors,(t=>(p(),m("li",{key:t},g(t),1)))),128))])])):b("",!0)])])};var Ut=d({name:"Urls",props:{contestId:{type:String,required:!0},url:{type:String,default:null},osuContestListingUrl:{type:String,default:null},resultsUrl:{type:String,default:null},bannerUrl:{type:String,default:null}},data(){return{newUrl:this.url,newOsuContestListingUrl:this.osuContestListingUrl,newResultsUrl:this.resultsUrl,newBannerUrl:this.bannerUrl}},watch:{contestId(){this.newUrl=this.url,this.newOsuContestListingUrl=this.osuContestListingUrl,this.newResultsUrl=this.resultsUrl,this.newBannerUrl=this.bannerUrl}},methods:{async updateUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateUrl`,{url:this.newUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest url",type:"info"}),this.$store.commit("updateUrl",{contestId:this.contestId,url:e}))},async updateOsuContestListingUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateOsuContestListingUrl`,{url:this.newOsuContestListingUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated osu! contest listing url",type:"info"}),this.$store.commit("updateOsuContestListingUrl",{contestId:this.contestId,osuContestListingUrl:e}))},async updateResultsUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateResultsUrl`,{url:this.newResultsUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated results url",type:"info"}),this.$store.commit("updateResultsUrl",{contestId:this.contestId,resultsUrl:e}))},async updateBannerUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateBannerUrl`,{url:this.newBannerUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated banner url",type:"info"}),this.$store.commit("updateBannerUrl",{contestId:this.contestId,bannerUrl:e}))}}});const xt={class:"row"},Mt={class:"col-sm-6"},Dt={class:"form-inline w-100"},Tt=w(" Contest details URL: "),Et={class:"col-sm-6"},Jt={class:"form-inline w-100"},At=w(" osu! contest listing URL: "),Vt={class:"col-sm-6"},Lt={class:"form-inline w-100"},Nt=w(" Results URL: "),qt={class:"col-sm-6"},Rt={class:"form-inline w-100"},Ot=w(" Banner URL: ");Ut.render=function(t,e,s,n,o,i){return p(),m("div",xt,[h("div",Mt,[h("div",Dt,[Tt,y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newUrl=e),class:"ml-1 form-control",onChange:e[1]||(e[1]=e=>t.updateUrl(e))},null,544),[[v,t.newUrl]])])]),h("div",Et,[h("div",Jt,[At,y(h("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.newOsuContestListingUrl=e),class:"ml-1 form-control",onChange:e[3]||(e[3]=e=>t.updateOsuContestListingUrl(e))},null,544),[[v,t.newOsuContestListingUrl]])])]),h("div",Vt,[h("div",Lt,[Nt,y(h("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.newResultsUrl=e),class:"ml-1 form-control",onChange:e[5]||(e[5]=e=>t.updateResultsUrl(e))},null,544),[[v,t.newResultsUrl]])])]),h("div",qt,[h("div",Rt,[Ot,y(h("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.newBannerUrl=e),class:"ml-1 form-control",onChange:e[7]||(e[7]=e=>t.updateBannerUrl(e))},null,544),[[v,t.newBannerUrl]])])])])};var Pt=d({name:"Description",props:{contestId:{type:String,required:!0},description:{type:String,default:null}},data(){return{newDescription:this.description}},watch:{contestId(){this.newDescription=this.description}},methods:{async updateDescription(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDescription`,{description:this.newDescription},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest description",type:"info"}),this.$store.commit("updateDescription",{contestId:this.contestId,description:e}))}}});const Bt={class:"form-inline w-100 mt-2"},_t=h("div",null,"Contest description",-1),zt=h("small",{class:"text-secondary"},[w("Click outside the text box to save. Also, this section supports "),h("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),w("!")],-1),Ft=h("div",{class:"mt-2"}," Preview description ",-1),Gt=["innerHTML"];Pt.render=function(t,e,s,n,o,i){return p(),m("div",Bt,[_t,y(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDescription=e),length:"4",class:"ml-1 form-control",placeholder:"click outside the box to save...",maxlength:"40000",rows:"6",onChange:e[1]||(e[1]=e=>t.updateDescription(e))},null,544),[[v,t.newDescription]]),zt,t.newDescription?(p(),m(U,{key:0},[Ft,h("div",null,[h("div",{class:"small bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.newDescription.trim())},null,8,Gt)])],64)):b("",!0)])};var Ht=d({name:"SubmissionsInfo",props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null,processingDelete:!1,manualAnonEdit:null,newAnonymousName:""}),watch:{manualAnonEdit(){this.findAnonymousSubmissionName()}},methods:{findAnonymousSubmissionName(){const t=this.submissions.find((t=>t.id==this.manualAnonEdit));t&&(this.newAnonymousName=t.name)},async updateAnonymousSubmissionName(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/updateAnonymousSubmissionName`,{name:this.newAnonymousName},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Updated anonymous submission name",type:"info"}),this.$store.commit("updateAnonymousSubmissionName",{contestId:this.contestId,submissionId:t,name:s}))},async deleteSubmission(t,e){this.processingDelete=!0;const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/delete`,{},e);this.processingDelete=!1,this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted submission",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:t}))}}});const Kt={key:0,class:"table table-sm table-responsive-lg"},Yt=h("thead",null,[h("tr",null,[h("th",null,"Creator"),h("th",null,"Anonymized name"),h("th",null,"Link"),h("th")])],-1),Qt=["onChange"],Wt={key:1,class:"me-1"},Xt=["onClick"],Zt=[h("i",{class:"fas fa-edit"},null,-1)],te=["href"],ee=["onClick"],se=["onClick"];Ht.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[t.submissions.length?(p(),m("table",Kt,[Yt,h("tbody",null,[(p(!0),m(U,null,x(t.submissions,(s=>(p(),m("tr",{key:s.id},[h("td",null,[M(r,{user:s.creator},null,8,["user"])]),h("td",{class:D(s.name?"":"text-danger")},[t.manualAnonEdit==s.id?y((p(),m("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=e=>t.newAnonymousName=e),class:"ml-1 form-control form-control-sm",onChange:e=>t.updateAnonymousSubmissionName(s.id,e)},null,40,Qt)),[[v,t.newAnonymousName]]):(p(),m("span",Wt,g(s.name||"TBD"),1)),h("a",{href:"#",onClick:C((e=>t.manualAnonEdit==s.id?t.manualAnonEdit=null:t.manualAnonEdit=s.id),["prevent"])},Zt,8,Xt)],2),h("td",null,[h("a",{href:s.url,target:"_blank"},g(s.url),9,te)]),h("td",null,[t.confirmDelete!=s.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((e=>t.confirmDelete=s.id),["prevent"])}," delete ",8,ee)):(p(),m("a",{key:1,class:D(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:C((e=>t.deleteSubmission(s.id,e)),["prevent"])}," confirm ",10,se))])])))),128))])])):b("",!0)])};var ne=d({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download}},watch:{contestId(){this.newDownload=this.download}},methods:{async updateDownload(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDownload`,{download:this.newDownload},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest submissions download link",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:e}))}}});S("data-v-3eff7a20");const oe={class:"row"},ie={class:"col-sm-6"},re=w(" Download: "),ae={key:0,class:"me-2 text-secondary"},le={class:"col-sm-6 small text-secondary"},de=w(" This link will appear at the top of judging/screening pages for users to download beatmaps. For contest integrity, user data should be removed as explained in the anonymization guide below. "),ce=["href"];k(),ne.render=function(t,e,s,n,o,i){return p(),m("div",oe,[h("div",ie,[re,t.download?b("",!0):(p(),m("span",ae,"No download")),y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDownload=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:e[1]||(e[1]=e=>t.updateDownload(e))},null,544),[[v,t.newDownload]])]),h("div",le,[de,t.download?(p(),m("a",{key:0,href:t.download,target:"_blank"},"Test the link here!",8,ce)):b("",!0)])])},ne.__scopeId="data-v-3eff7a20";var ue=d({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),watch:{contestId(){this.screenerInput=null,this.screenerInput=null}},methods:{async addScreener(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.screenerInput} to list (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:e}))},async removeScreener(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/remove`,{screenerId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:t}))}}});const pe={class:"input-group mb-2"},me={class:"input-group-append"},he=[h("i",{class:"fas fa-plus fa-xs"},null,-1)],ge={key:0},fe=["onClick"],be=["onClick"],ye={key:1,class:"text-white-50 m-4"};ue.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[h("div",pe,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.screenerInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:e[1]||(e[1]=I((e=>t.addScreener(e)),["enter"]))},null,544),[[v,t.screenerInput,void 0,{number:!0}]]),h("div",me,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.addScreener(e)),["prevent"]))},he)])]),t.screeners.length?(p(),m("ol",ge,[(p(!0),m(U,null,x(t.screeners,(e=>(p(),m("li",{key:e.id},[M(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,fe)):(p(),m("a",{key:1,class:"text-danger",href:"#",onClick:C((s=>t.removeScreener(e.id,s)),["prevent"])}," confirm ",8,be))])))),128))])):(p(),m("div",ye," None... "))])};var ve=d({name:"ScreeningStatus",props:{contest:{type:Object,required:!0}},methods:{findScreenerDetails(t){let e=0,s=[];for(const i of this.contest.submissions)for(const n of i.screenings)n.screener.id==t.id&&n.vote&&(e++,s.push(n.vote));const n=[],o=[];for(let i=0;i<this.contest.screeningVoteCount;i++)o.push(i+1);for(const i of o)s.includes(i)||n.push(i);return{count:e,unusedVotes:n}}}});const Ce={class:"table table-sm table-responsive-lg small"},we=h("thead",null,[h("tr",null,[h("th",null,"Screener"),h("th",null,"Count"),h("th",null,"Unused ratings")])],-1),Ie={class:"mx-1"};ve.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[h("table",Ce,[we,h("tbody",null,[(p(!0),m(U,null,x(t.contest.screeners,(e=>(p(),m("tr",{key:e.id},[h("td",null,[M(r,{user:e},null,8,["user"])]),h("td",{class:D(t.findScreenerDetails(e).count==t.contest.screeningVoteCount?"text-success":"text-danger")},g(t.findScreenerDetails(e).count)+"/"+g(t.contest.screeningVoteCount),3),h("td",null,[(p(!0),m(U,null,x(t.findScreenerDetails(e).unusedVotes,(t=>(p(),m("span",{key:t},[h("span",Ie,[(p(!0),m(U,null,x(t,(t=>(p(),m("i",{key:t,class:"fa-star fas text-warning small"})))),128)),w(" ("+g(t)+") ",1)])])))),128))])])))),128))])])])};var Se=d({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),watch:{contestId(){this.judgeInput=null,this.confirmDelete=null}},methods:{async addJudge(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.judgeInput} to list (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:e}))},async removeJudge(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/remove`,{judgeId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:t}))}}});const ke={class:"input-group mb-2"},$e={class:"input-group-append"},je=[h("i",{class:"fas fa-plus fa-xs"},null,-1)],Ue={key:0},xe=["onClick"],Me=["onClick"],De={key:1,class:"text-white-50 m-4"};Se.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[h("div",ke,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.judgeInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new judge username/osuId...",onKeyup:e[1]||(e[1]=I((e=>t.addJudge(e)),["enter"]))},null,544),[[v,t.judgeInput,void 0,{number:!0}]]),h("div",$e,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.addJudge(e)),["prevent"]))},je)])]),t.judges.length?(p(),m("ul",Ue,[(p(!0),m(U,null,x(t.judges,(e=>(p(),m("li",{key:e.id},[M(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,xe)):(p(),m("a",{key:1,class:"text-danger",href:"#",onClick:C((s=>t.removeJudge(e.id,s)),["prevent"])}," confirm ",8,Me))])))),128))])):(p(),m("div",De," None... "))])};var Te=d({name:"MarkdownUserList",components:{CopyPaste:L},props:{users:{type:Array,default:()=>[]}}});S("data-v-0f02c955");const Ee=w(" Comma separation: "),Je=h("br",null,null,-1),Ae=h("br",null,null,-1),Ve=h("br",null,null,-1),Le=w(" Newline separation: "),Ne=h("br",null,null,-1),qe=h("br",null,null,-1);k(),Te.render=function(t,e,s,n,o,i){const r=u("copy-paste");return p(),f(r,{class:"tiny"},{default:T((()=>[Ee,Je,(p(!0),m(U,null,x(t.users,((e,s)=>(p(),m("span",{key:e.id}," ["+g(e.username)+"](https://osu.ppy.sh/users/"+g(e.osuId)+")"+g(s===t.users.length-2?", and ":s===t.users.length-1?"":", "),1)))),128)),Ae,Ve,Le,Ne,(p(!0),m(U,null,x(t.users,(t=>(p(),m("span",{key:t.id},[w(" ["+g(t.username)+"](https://osu.ppy.sh/users/"+g(t.osuId)+")",1),qe])))),128))])),_:1})},Te.__scopeId="data-v-0f02c955";var Re=d({name:"ScreeningDetail",props:{screenings:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},methods:{findComment(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.comment:"No comment"},findVote(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.vote:0}}});const Oe={class:"ms-4 small"},Pe={class:"ms-4 small text-secondary"};Re.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",Oe,[(p(!0),m(U,null,x(t.screeners,(e=>(p(),m("div",{key:e.id},[M(r,{user:e},null,8,["user"]),(p(!0),m(U,null,x(t.findVote(e.id),(t=>(p(),m("i",{key:t,class:"fa-star fas mx-1 text-warning small"})))),128)),h("div",Pe,g(t.findComment(e.id)),1)])))),128))])};var Be=d({name:"ScreeningResults",components:{ScreeningDetail:Re},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const t=JSON.parse(JSON.stringify(this.submissions));for(let e=0;e<t.length;e++){const s=t[e].screenings.reduce(((t,e)=>e.vote?t+e.vote:t),0);t[e].total=s}return t.sort(((t,e)=>t.total>e.total?-1:e.total>t.total?1:0)),t}}});S("data-v-0aa6204d");const _e={class:"d-flex justify-content-between"},ze=["href"],Fe=h("i",{class:"fa-star fas small"},null,-1),Ge=w(") "),He=h("i",{class:"fas fa-angle-down"},null,-1),Ke=["id"];k(),Be.render=function(t,e,s,n,o,i){const r=u("screening-detail");return p(),m("div",null,[h("ul",null,[(p(!0),m(U,null,x(t.sortedSubmissions,(e=>(p(),m("li",{key:e.id},[h("div",_e,[h("a",{class:D(e.total>=t.judgingThreshold?"pass-threshold":""),"data-bs-toggle":"collapse",href:`#collapse-${e.id}`},[w(g(e.creator.username)+" ("+g(e.total)+" ",1),Fe,Ge,He],10,ze)]),h("div",{id:`collapse-${e.id}`,class:"collapse"},[h("div",null,[M(r,{screenings:e.screenings,screeners:t.screeners},null,8,["screenings","screeners"])])],8,Ke)])))),128))])])},Be.__scopeId="data-v-0aa6204d";var Ye=d({name:"JudgingThreshold",props:{contestId:{type:String,required:!0},judgingThreshold:{type:Number,default:0}},data(){return{newJudgingThreshold:this.judgingThreshold}},watch:{contestId(){this.newJudgingThreshold=this.judgingThreshold}},methods:{async updateJudgingThreshold(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated judging threshold to ${e}`,type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:e}))}}});const Qe={class:"row"},We={class:"input-group col-sm-4"},Xe={class:"input-group-append"},Ze=[w(" save "),h("i",{class:"fa-star fas small"},null,-1)];Ye.render=function(t,e,s,n,o,i){return p(),m("div",Qe,[h("div",We,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newJudgingThreshold=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"judging threshold",onKeyup:e[1]||(e[1]=I((e=>t.updateJudgingThreshold(e)),["enter"]))},null,544),[[v,t.newJudgingThreshold,void 0,{number:!0}]]),h("div",Xe,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.updateJudgingThreshold(e)),["prevent"]))},Ze)])])])};var ts=d({name:"ScreeningVoteCount",props:{contestId:{type:String,required:!0},screeningVoteCount:{type:Number,default:0}},data(){return{newScreeningVoteCount:this.screeningVoteCount}},watch:{contestId(){this.newScreeningVoteCount=this.screeningVoteCount}},methods:{async updateScreeningVoteCount(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateScreeningVoteCount`,{screeningVoteCount:this.newScreeningVoteCount},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated screening vote count to ${e}`,type:"info"}),this.$store.commit("updateScreeningVoteCount",{contestId:this.contestId,screeningVoteCount:e}))}}});const es={class:"row"},ss={class:"input-group col-sm-4"},ns={class:"input-group-append"};ts.render=function(t,e,s,n,o,i){return p(),m("div",es,[h("div",ss,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newScreeningVoteCount=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"screening vote count",onKeyup:e[1]||(e[1]=I((e=>t.updateScreeningVoteCount(e)),["enter"]))},null,544),[[v,t.newScreeningVoteCount,void 0,{number:!0}]]),h("div",ns,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.updateScreeningVoteCount(e)),["prevent"]))}," save ")])])])};var os=d({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({nameInput:null,maxScoreInput:null,processingDelete:!1,confirmDelete:null}),computed:{scoredCriteria(){return this.criterias.filter((t=>"comments"!==t.name))},commentsEnabled(){return this.criterias.some((t=>"comments"==t.name))}},watch:{contestId(){this.nameInput=null,this.maxScoreInput=null,this.confirmDelete=null}},methods:{async addCriteria(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/addCriteria`,{name:this.nameInput,maxScore:this.maxScoreInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:e}))},async deleteCriteria(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/deleteCriteria`,{criteriaId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:s}))},async toggleComments(){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleComments`,{});this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Toggled comments",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))}}});const is={class:"input-group w-75 mb-2"},rs={class:"input-group-append"},as=[w(" Add criteria "),h("i",{class:"fas fa-plus fa-xs"},null,-1)],ls={class:"ms-2 mb-2"},ds=[w(" See judging criteria "),h("i",{class:"fas fa-angle-down"},null,-1)],cs={id:"judgingCriteria",class:"collapse mx-2"},us={key:0,class:"table table-sm table-responsive-lg"},ps=h("thead",null,[h("tr",null,[h("th",null,"Criteria"),h("th",null,"Max score"),h("th",null,"Delete")])],-1),ms={class:"text-capitalize"},hs=["onClick"],gs=["onClick"],fs={key:1};os.render=function(t,e,s,n,o,i){return p(),m("div",null,[h("div",is,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.nameInput=e),type:"text",class:"form-control",placeholder:"criteria name..."},null,512),[[v,t.nameInput]]),y(h("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.maxScoreInput=e),type:"number",class:"form-control",placeholder:"total points..."},null,512),[[v,t.maxScoreInput]]),h("div",rs,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.addCriteria(e))},as)])]),h("div",ls,[h("a",{href:"#judgingCriteria","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=C((()=>{}),["prevent"]))},ds),h("div",cs,[t.criterias.length?(p(),m("table",us,[ps,h("tbody",null,[(p(!0),m(U,null,x(t.scoredCriteria,(e=>(p(),m("tr",{key:e.id},[h("td",ms,g(e.name),1),h("td",null,g(e.maxScore),1),h("td",null,[t.confirmDelete!=e.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,hs)):(p(),m("a",{key:1,class:D(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:C((s=>t.deleteCriteria(e.id,s)),["prevent"])}," confirm ",10,gs))])])))),128)),h("tr",null,[h("td",{class:D(t.commentsEnabled?"":"text-secondary")}," Comments "+g(t.commentsEnabled?"":"(disabled)"),3),h("td",{class:D(t.commentsEnabled?"":"text-secondary")}," N/A ",2),h("td",null,[h("a",{href:"#",class:"text-danger",onClick:e[4]||(e[4]=C((e=>t.toggleComments()),["prevent"]))},g(t.commentsEnabled?"disable":"enable"),1)])])])])):(p(),m("div",fs," No criteria yet... "))])])])};var bs=d({name:"JudgingLeaderboard",props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data:()=>({selectedScore:null,displayMode:"criterias",sortDesc:!1}),computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((t=>{var e;return t.creator.id==(null==(e=this.selectedScore)?void 0:e.creator.id)}))},scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))},judges(){return this.contest.judges}},methods:{getCriteriaScore(t,e){var s;return(null==(s=t.criteriaSum.find((t=>t.criteriaId===e)))?void 0:s.sum)||0},getJudgeScore(t,e,s=!1){const n=t.judgingSum.find((t=>t.judgeId===e)),o=(null==n?void 0:n.standardized)||0;return s?`${(null==n?void 0:n.sum)||0} (${o.toFixed(3)})`:(null==n?void 0:n.sum)||0},getJudgeAvg(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.rawAvg.toFixed(4))||0},getJudgeSd(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.sd.toFixed(4))||0},getJudgeCorrel(t){var e;return((null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.correl)||0).toFixed(4)},getFinalScore:t=>isNaN(t)?"0":t.toFixed(4),sortByCriteria(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:t,sortDesc:this.sortDesc})},sortByJudge(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:t,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});const ys={class:"row"},vs={class:"col-sm"},Cs=w(" Score display: "),ws=w(" | "),Is=w(" | "),Ss={class:"row"},ks={class:"col-sm"},$s={class:"table table-sm small table-responsive-lg"},js=h("th",null,"#",-1),Us=h("th",null,"User",-1),xs=["onClick"],Ms={class:"cursor-default"},Ds=h("td",null,null,-1),Ts=h("td",null,"AVG",-1),Es=h("td",null,null,-1),Js=h("td",null,null,-1),As={class:"cursor-default"},Vs=h("td",null,null,-1),Ls=h("td",null,"SD",-1),Ns=h("td",null,null,-1),qs=h("td",null,null,-1),Rs={class:"cursor-default"},Os=h("td",null,null,-1),Ps=h("td",null,"COR",-1),Bs=h("td",null,null,-1),_s=h("td",null,null,-1);bs.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[h("div",ys,[h("div",vs,[Cs,h("a",{href:"#",class:D("criterias"===t.displayMode?"border-bottom border-secondary":""),onClick:e[0]||(e[0]=C((e=>t.displayMode="criterias"),["prevent"]))}," Criteria ",2),ws,h("a",{href:"#",class:D("judges"===t.displayMode?"border-bottom border-secondary":""),onClick:e[1]||(e[1]=C((e=>t.displayMode="judges"),["prevent"]))}," Judge ",2),Is,h("a",{href:"#",class:D("detail"===t.displayMode?"border-bottom border-secondary":""),onClick:e[2]||(e[2]=C((e=>t.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),h("div",Ss,[h("div",ks,[h("table",$s,[h("thead",null,[h("tr",null,[js,Us,"criterias"===t.displayMode?(p(!0),m(U,{key:0},x(t.scoredCriteria,(t=>(p(),m("th",{key:t.id},g(t.name),1)))),128)):(p(!0),m(U,{key:1},x(t.judges,(t=>(p(),m("th",{key:t.id},g(t.username),1)))),128)),h("th",null,[h("a",{href:"#",onClick:e[3]||(e[3]=C(((...e)=>t.sortByRawScore&&t.sortByRawScore(...e)),["prevent"]))}," Final Score (raw) ")]),h("th",null,[h("a",{href:"#",onClick:e[4]||(e[4]=C(((...e)=>t.sortByStdScore&&t.sortByStdScore(...e)),["prevent"]))}," Final Score (standardized) ")])])]),h("tbody",null,[(p(!0),m(U,null,x(t.usersScores,((e,s)=>(p(),m("tr",{key:s,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:s=>t.selectedScore=e},[h("td",null,g(s+1),1),h("td",null,[M(r,{user:e.creator},null,8,["user"])]),"criterias"===t.displayMode?(p(!0),m(U,{key:0},x(t.scoredCriteria,(s=>(p(),m("td",{key:s.id},g(t.getCriteriaScore(e,s.id)),1)))),128)):(p(!0),m(U,{key:1},x(t.judges,(s=>(p(),m("td",{key:s.id},g(t.getJudgeScore(e,s.id,"detail"===t.displayMode)),1)))),128)),h("td",null,g(e.rawFinalScore),1),h("td",null,g(t.getFinalScore(e.standardizedFinalScore)),1)],8,xs)))),128)),"detail"===t.displayMode?(p(),m(U,{key:0},[h("tr",Ms,[Ds,Ts,(p(!0),m(U,null,x(t.judges,(e=>(p(),m("td",{key:e.id},g(t.getJudgeAvg(e.id)),1)))),128)),Es,Js]),h("tr",As,[Vs,Ls,(p(!0),m(U,null,x(t.judges,(e=>(p(),m("td",{key:e.id},g(t.getJudgeSd(e.id)),1)))),128)),Ns,qs]),h("tr",Rs,[Os,Ps,(p(!0),m(U,null,x(t.judges,(e=>(p(),m("td",{key:e.id},g(t.getJudgeCorrel(e.id)),1)))),128)),Bs,_s])],64)):b("",!0)])])])])])};var zs=d({name:"JudgingDetail",components:{ModalDialog:N},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(t){const e=this.commentsExpanded.findIndex((e=>e===t));-1!==e?this.commentsExpanded.splice(e,1):this.commentsExpanded.push(t)},getCollapseClass(t){return this.commentsExpanded.includes(t)?"fa-chevron-down":"fa-chevron-right"}}});const Fs={class:"container"},Gs=["href","onClick"],Hs={key:1,class:"small text-capitalize ms-3"},Ks=["id"],Ys={class:"small text-white-50",style:{"white-space":"pre-line"}},Qs={key:0};zs.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("modal-dialog");return p(),f(a,{id:"detailModal",loaded:Boolean(t.submission)},{header:T((()=>[w(g(t.submission.creator.username)+" ("+g(t.submission.name)+") ",1)])),default:T((()=>[h("div",Fs,[(p(!0),m(U,null,x(t.submission.judgings,((e,s)=>(p(),m("div",{key:e.id},[M(r,{user:e.judge},null,8,["user"]),(p(!0),m(U,null,x(e.judgingScores,(e=>(p(),m("div",{key:e.id,class:"my-1"},["comments"==e.criteria.name?(p(),m("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${e.id}`,onClick:s=>t.showComment(e.id)},[h("i",{class:D(["small fas me-2",t.getCollapseClass(e.id)])},null,2),w(" "+g(e.criteria.name),1)],8,Gs)):(p(),m("span",Hs,g(e.criteria.name)+" ("+g(e.score)+") ",1)),h("p",{id:`judgingToCriteria${e.id}`,class:"text-light ms-4 collapse"},[h("span",Ys,g(e.comment),1)],8,Ks)])))),128)),s<t.submission.judgings.length-1?(p(),m("hr",Qs)):b("",!0)])))),128))])])),_:1},8,["loaded"])};var Ws=d({name:"JudgeStatuses",components:{JudgingDetail:zs},props:{contest:{type:Object,required:!0}},data:()=>({selected:null}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},methods:{getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getMissingJudges(t){const e=t.judgings.map((t=>t.judge.id)),s=[];for(const n of this.contest.judges)if(e.includes(n.id)){const e=t.judgings.find((t=>t.judge.id===n.id));e&&e.judgingScores.length!==this.contest.criterias.length&&s.push(n)}else s.push(n);return s.map((t=>t.username)).join(", ")},getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});S("data-v-a36d03c2");const Xs={class:"table table-sm table-responsive-lg small"},Zs=h("thead",null,[h("tr",null,[h("th",null,"Submission creator"),h("th",null,"Count"),h("th",null,"Incomplete judges")])],-1),tn=["onClick"];k(),Ws.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("judging-detail");return p(),m("div",null,[h("table",Xs,[Zs,h("tbody",null,[(p(!0),m(U,null,x(t.contest.submissions,(e=>(p(),m("tr",{key:e.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",class:"modalable",onClick:s=>t.selected=e},[h("td",null,[M(r,{user:e.creator},null,8,["user"])]),h("td",{class:D(t.getJudgesInvolvedCount(e)>=t.judgeCount?"text-success":"text-danger")},g(t.getJudgesInvolvedCount(e))+"/"+g(t.judgeCount),3),h("td",null,g(t.getMissingJudges(e)),1)],8,tn)))),128))])]),M(a,{id:"detailModalAdmin",submission:t.selected},null,8,["submission"])])},Ws.__scopeId="data-v-a36d03c2";var en=d({name:"MarkdownJudgingLeaderboard",components:{CopyPaste:L},props:{usersScores:{type:Array,required:!0},contest:{type:Object,required:!0},judgeCount:{type:Number,required:!0}},computed:{scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))}},methods:{getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id},getCriteriaSumbyName(t,e){const s=e.find((e=>e.name===t));return(null==s?void 0:s.sum)||NaN}}});S("data-v-4fcd74b7");const sn=h("div",null," | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | ",-1);k(),en.render=function(t,e,s,n,o,i){const r=u("copy-paste");return p(),f(r,{class:"tiny"},{default:T((()=>[h("div",null," | Rank | Beatmap | Judging | Musical representation ("+g(10*t.judgeCount)+") | Creativity ("+g(10*t.judgeCount)+") | Gameplay ("+g(10*t.judgeCount)+") | Limitation ("+g(5*t.judgeCount)+") | Total (standardized/raw) | ",1),sn,(p(!0),m(U,null,x(t.usersScores,((e,s)=>(p(),m("div",{key:s},[w(" | \\#"+g(s+1)+" | [TITLE](LINK) by ["+g(e.creator.username)+"](https://osu.ppy.sh/users/"+g(e.creator.osuId)+") | [details](https://mappersguild.com/contests/results?submission="+g(t.getSubmissionIdByCreatorId(e.creator.id))+") ",1),(p(!0),m(U,null,x(t.scoredCriteria,(s=>(p(),m("span",{key:s.id},"| "+g(t.getCriteriaSumbyName(s.name,e.criteriaSum)+" "),1)))),128)),w(" | **"+g(Math.round(100*e.standardizedFinalScore)/100)+"** ("+g(e.rawFinalScore)+") | ",1)])))),128))])),_:1})},en.__scopeId="data-v-4fcd74b7";var nn=d({name:"JudgingResults",components:{JudgingLeaderboard:bs,MarkdownJudgingLeaderboard:en,JudgeStatuses:Ws},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},watch:{async contestId(){await this.getJudgingResults()}},async created(){await this.getJudgingResults()},methods:{async getJudgingResults(){const t=await this.$http.executeGet(`/contests/listing/${this.contestId}/judgingResults`);this.$http.isError(t)||(this.contest=t.contest,this.usersScores=t.usersScores,this.judgesCorrel=t.judgesCorrel)},getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getJudgesInvolved:t=>t.judgings.map((t=>t.judge.username)).join(", "),getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});const on={key:0},rn={class:"ms-2 mb-2"},an=[w(" See judging status per submission "),h("i",{class:"fas fa-angle-down"},null,-1)],ln={class:"ms-2 mb-2"},dn=[w(" See judging leaderboard "),h("i",{class:"fas fa-angle-down"},null,-1)],cn={class:"ms-2 mb-2"},un=[w(" See markdown judging leaderboard "),h("i",{class:"fas fa-angle-down"},null,-1)];nn.render=function(t,e,s,n,o,i){const r=u("judge-statuses"),a=u("judging-leaderboard"),l=u("markdown-judging-leaderboard");return t.contest?(p(),m("div",on,[h("div",rn,[h("a",{href:"#judgeStatuses","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=C((()=>{}),["prevent"]))},an),M(r,{id:"judgeStatuses",class:"collapse mx-2",contest:t.contest},null,8,["contest"])]),h("div",ln,[h("a",{href:"#judgingLeaderboard","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=C((()=>{}),["prevent"]))},dn),M(a,{id:"judgingLeaderboard",class:"collapse mx-2","contest-id":t.contest.id,contest:t.contest,"users-scores":t.usersScores,"judges-correl":t.judgesCorrel},null,8,["contest-id","contest","users-scores","judges-correl"])]),h("div",cn,[h("a",{href:"#markdownJudgingLeaderboard","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=C((()=>{}),["prevent"]))},un),M(l,{id:"markdownJudgingLeaderboard",class:"collapse","users-scores":t.usersScores,contest:t.contest,"judge-count":t.judgeCount},null,8,["users-scores","contest","judge-count"])])])):b("",!0)};var pn=d({name:"ContestInfo",components:{ContestHeader:q,ContestBanner:G,DateInfo:Y,Name:at,AnonymizationGuide:bt,ModeInfo:ht,StatusInfo:ct,SubmissionsInfo:Ht,DownloadInfo:ne,Urls:Ut,Description:Pt,ScreenersInfo:ue,JudgesInfo:Se,MarkdownUserList:Te,ScreeningResults:Be,ScreeningStatus:ve,JudgingThreshold:Ye,ScreeningVoteCount:ts,CriteriaSelection:os,JudgingResults:nn},props:{contest:{type:Object,required:!0}},data:()=>({screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}),methods:{async deleteContest(t){if(confirm("Are you sure?")){const e=await this.$http.executePost(`/contests/listing/${this.contest.id}/delete`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Deleted contest",type:"info"}),this.$store.commit("deleteContest",this.contest.id))}}}});const mn=h("h5",null,"General",-1),hn=h("hr",null,null,-1),gn=h("h5",null," Submissions ",-1),fn={class:"ms-2 mb-2"},bn=h("i",{class:"fas fa-angle-down"},null,-1),yn={class:"ms-2 mb-2"},vn=[w(" See submission anonymization guide "),h("i",{class:"fas fa-angle-down"},null,-1)],Cn=h("hr",null,null,-1),wn=h("h4",{class:"mb-4"}," Screening ",-1),In=h("h5",null," Screeners ",-1),Sn={class:"ms-2 mb-2"},kn=h("i",{class:"fas fa-angle-down"},null,-1),$n={id:"screeners",class:"row collapse mb-2"},jn=h("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their screening progress. ",-1),Un=h("div",null,'To begin screening, send this link to the users above and ensure your contest\'s status is set to "Screening"!',-1),xn=h("hr",null,null,-1),Mn=h("h5",null," Screening Results ",-1),Dn={class:"row mb-2"},Tn=h("div",{class:"col-sm-8 small text-secondary"},' The amount of submissions each screener can give a vote to. The limit is set to "5" by default, meaning screeners can choose the top 5 maps. The limit is 10. ',-1),En={class:"ms-2 mb-2"},Jn=[w(" See screening status per screener "),h("i",{class:"fas fa-angle-down"},null,-1)],An={class:"row mb-2"},Vn=h("div",{class:"col-sm-8 small text-secondary"},[w(" Submissions with this "),h("i",{class:"fa-star fas text-warning small"}),w(' score or above in "screening results" will be available to judges. If your contest skips the screening process, set this to "0". ')],-1),Ln={class:"ms-2 mb-2"},Nn=[w(" See screening results "),h("i",{class:"fas fa-angle-down"},null,-1)],qn=h("hr",null,null,-1),Rn=h("h4",{class:"mb-4"}," Judging ",-1),On=h("h5",null," Judges ",-1),Pn={class:"ms-2 mb-2"},Bn=h("i",{class:"fas fa-angle-down"},null,-1),_n={id:"judges",class:"row collapse mb-2"},zn=h("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their judging progress. ",-1),Fn=h("div",null,'To begin judging, send this link to the users above and ensure your contest\'s status is set to "Judging"!',-1),Gn=h("hr",null,null,-1),Hn=h("h5",null," Judging Criteria ",-1),Kn=h("hr",null,null,-1),Yn=h("h5",null," Judging Results ",-1),Qn=h("hr",null,null,-1);pn.render=function(t,e,s,n,o,i){const r=u("contest-header"),a=u("contest-banner"),l=u("name"),d=u("status-info"),c=u("mode-info"),y=u("date-info"),v=u("urls"),I=u("description"),S=u("submissions-info"),k=u("download-info"),$=u("anonymization-guide"),j=u("screeners-info"),U=u("markdown-user-list"),x=u("screening-vote-count"),D=u("screening-status"),T=u("judging-threshold"),E=u("screening-results"),J=u("judges-info"),A=u("criteria-selection"),V=u("judging-results");return p(),m("div",null,[M(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(p(),f(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):b("",!0),mn,h("div",null,[M(l,{class:"mb-2","contest-id":t.contest.id,name:t.contest.name},null,8,["contest-id","name"]),M(d,{class:"mb-2","contest-id":t.contest.id,status:t.contest.status,"is-approved":t.contest.isApproved},null,8,["contest-id","status","is-approved"]),M(c,{class:"mb-2","contest-id":t.contest.id,mode:t.contest.mode},null,8,["contest-id","mode"]),M(y,{class:"mb-2","contest-id":t.contest.id,"contest-start":t.contest.contestStart?t.contest.contestStart.slice(0,10):null,"contest-end":t.contest.contestEnd?t.contest.contestEnd.slice(0,10):null},null,8,["contest-id","contest-start","contest-end"]),M(v,{"contest-id":t.contest.id,url:t.contest.url||null,"osu-contest-listing-url":t.contest.osuContestListingUrl||null,"results-url":t.contest.resultsUrl||null,"banner-url":t.contest.bannerUrl||null},null,8,["contest-id","url","osu-contest-listing-url","results-url","banner-url"]),M(I,{"contest-id":t.contest.id,description:t.contest.description},null,8,["contest-id","description"]),hn,h("div",null,[gn,h("div",fn,[h("a",{href:"#submissions","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=C((()=>{}),["prevent"]))},[w(" See all submissions ("+g(t.contest.submissions.length)+") ",1),bn])]),M(S,{id:"submissions",class:"collapse","contest-id":t.contest.id,submissions:t.contest.submissions},null,8,["contest-id","submissions"]),M(k,{"contest-id":t.contest.id,download:t.contest.download},null,8,["contest-id","download"]),h("div",yn,[h("a",{href:"#anonymizationGuide","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=C((()=>{}),["prevent"]))},vn)]),M($,{id:"anonymizationGuide",class:"collapse","contest-id":t.contest.id},null,8,["contest-id"]),Cn,wn,In,h("div",Sn,[h("a",{href:"#screeners","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=C((()=>{}),["prevent"]))},[w(" See all screeners ("+g(t.contest.screeners.length)+") ",1),kn])]),h("div",$n,[M(j,{class:"col-sm-4","contest-id":t.contest.id,screeners:t.contest.screeners},null,8,["contest-id","screeners"]),M(U,{class:"col-sm-7",users:t.contest.screeners},null,8,["users"]),jn]),Un,h("code",null,"https://mappersguild.com/contests/screening?contest="+g(t.contest.id),1),xn,Mn,h("div",Dn,[M(x,{class:"col-sm-4","contest-id":t.contest.id,"screening-vote-count":t.contest.screeningVoteCount},null,8,["contest-id","screening-vote-count"]),Tn]),h("div",En,[h("a",{href:"#screeningStatus","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=C((()=>{}),["prevent"]))},Jn)]),M(D,{id:"screeningStatus",class:"collapse mx-2",contest:t.contest},null,8,["contest"]),h("div",An,[M(T,{class:"col-sm-4","contest-id":t.contest.id,"judging-threshold":t.contest.judgingThreshold},null,8,["contest-id","judging-threshold"]),Vn]),h("div",Ln,[h("a",{href:"#screeningResults","data-bs-toggle":"collapse",onClick:e[4]||(e[4]=C((()=>{}),["prevent"]))},Nn)]),M(E,{id:"screeningResults",class:"collapse","contest-id":t.contest.id,"contest-name":t.contest.name,submissions:t.contest.submissions,"judging-threshold":t.contest.judgingThreshold,screeners:t.contest.screeners},null,8,["contest-id","contest-name","submissions","judging-threshold","screeners"]),qn,Rn,On,h("div",Pn,[h("a",{href:"#judges","data-bs-toggle":"collapse",onClick:e[5]||(e[5]=C((()=>{}),["prevent"]))},[w(" See all judges ("+g(t.contest.judges.length)+") ",1),Bn])]),h("div",_n,[M(J,{class:"col-sm-4","contest-id":t.contest.id,judges:t.contest.judges},null,8,["contest-id","judges"]),M(U,{class:"col-sm-7",users:t.contest.judges},null,8,["users"]),zn]),Fn,h("code",null,"https://mappersguild.com/contests/judging?contest="+g(t.contest.id),1),Gn,Hn,M(A,{"contest-id":t.contest.id,criterias:t.contest.criterias},null,8,["contest-id","criterias"]),Kn,Yn,M(V,{"contest-id":t.contest.id},null,8,["contest-id"]),Qn,"hidden"!=t.contest.status||t.contest.submissions.length?b("",!0):(p(),m("button",{key:0,class:"btn btn-sm btn-outline-danger w-100",onClick:e[6]||(e[6]=e=>t.deleteContest(e))}," Delete contest "))])])])};var Wn=d({name:"CurrentSubmission",computed:a({},E(["userSubmission"]))});const Xn=["href"],Zn={class:"small text-secondary ms-1"},to=w("(last updated "),eo=w(")");Wn.render=function(t,e,s,n,o,i){return p(),m("span",null,[h("a",{href:t.userSubmission.url,target:"_blank",class:"small"},g(t.userSubmission.url),9,Xn),h("span",Zn,[to,h("code",null,g(new Date(t.userSubmission.updatedAt).toString().slice(4,33)),1),eo])])};var so=d({name:"MapSubmissionForm",components:{CurrentSubmission:Wn},props:{contestId:{type:String,required:!0}},data(){return{newSubmissionUrl:this.ok}},computed:a(a({},c(["loggedInUser"])),E(["userSubmission"])),watch:{contestId(){this.newSubmissionUrl=this.userSubmission?this.userSubmission.url:""}},methods:{async createSubmission(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/createSubmission`,{submissionUrl:this.newSubmissionUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Submitted!",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e}))}}});S("data-v-5415dc65");const no={class:"row"},oo={class:"col-sm-12 mb-2"},io=w(" Current submission: "),ro={key:0,class:"me-2 text-secondary"},ao={class:"col-sm-8"},lo={class:"col-sm-4"},co=h("div",{class:"small text-secondary"}," Upload your beatmap to a file sharing service and provide a link here! For various reasons, this website does not host beatmap uploads. ",-1);k(),so.render=function(t,e,s,n,o,i){const r=u("current-submission");return p(),m("div",no,[h("div",oo,[io,t.userSubmission?t.userSubmission&&t.userSubmission.url?(p(),f(r,{key:1})):b("",!0):(p(),m("span",ro,"No submission yet!"))]),h("div",ao,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newSubmissionUrl=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link..."},null,512),[[v,t.newSubmissionUrl]])]),h("div",lo,[h("button",{class:"btn btn-sm btn-outline-info w-100",onClick:e[1]||(e[1]=e=>t.createSubmission(e))}," Submit ")]),co])},so.__scopeId="data-v-5415dc65";var uo=d({name:"LimitedContestInfo",components:{ContestHeader:q,ContestBanner:G,MapSubmissionForm:so},props:{contest:{type:Object,required:!0}}});const po=h("h5",null,"General",-1),mo={key:1},ho=["innerHTML"],go={key:2},fo=w(" This contest is currently in the "),bo=w(" phase. "),yo={key:3},vo=["href"],Co=h("hr",null,null,-1),wo={key:4},Io=h("h5",null,"Submission",-1),So={key:0},ko={key:0},$o={key:1},jo=h("div",null,"This contest is not yet opened for submissions.",-1),Uo=w("Maps can be submitted after "),xo={key:2},Mo=w(" Maps can be submitted until "),Do={key:1},To=w(" This contest is being hosted on "),Eo=h("a",{href:"https://osu.ppy.sh/community/contests",target:"_blank"},"osu!'s contest listing",-1),Jo=w(". Submit your beatmap on the "),Ao=["href"],Vo=w("! "),Lo={key:5},No=h("h5",null,"Results",-1),qo=["href"],Ro=["href"];uo.render=function(t,e,s,n,o,i){const r=u("contest-header"),a=u("contest-banner"),l=u("map-submission-form");return p(),m("div",null,[M(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(p(),f(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):b("",!0),po,t.contest.description?(p(),m("div",mo,[h("div",{class:"small mt-2 bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.contest.description.trim())},null,8,ho)])):b("",!0),"complete"!==t.contest.status?(p(),m("div",go,[fo,h("b",null,g(t.contest.status),1),bo])):b("",!0),t.contest.url?(p(),m("div",yo,[h("a",{href:t.contest.url,target:"_blank"},"Read more about the contest here!",8,vo)])):b("",!0),Co,"complete"!==t.contest.status?(p(),m("div",wo,[Io,t.contest.osuContestListingUrl?(p(),m("div",Do,[To,Eo,Jo,h("a",{href:t.contest.osuContestListingUrl,target:"_blank"},"official contest page",8,Ao),Vo])):(p(),m("div",So,[new Date(t.contest.contestEnd)<new Date?(p(),m("div",ko," This contest is no longer accepting new submissions. ")):new Date(t.contest.contestStart)>new Date?(p(),m("div",$o,[jo,h("div",null,[Uo,h("code",null,g(new Date(t.contest.contestStart)),1)])])):(p(),m("div",xo,[Mo,h("code",null,g(new Date(t.contest.contestEnd)),1),M(l,{class:"mt-2","contest-id":t.contest.id},null,8,["contest-id"])]))]))])):(p(),m("div",Lo,[No,h("div",null,[h("a",{href:t.contest.resultsUrl,target:"_blank"},"View contest results here!",8,qo)]),h("div",null,[h("a",{href:"/contests/results?contest="+t.contest.id,target:"_blank"},"View Mappers' Guild judging scores here!",8,Ro)])]))])};var Oo=d({name:"AddContest",data:()=>({contestName:"",userContests:[],templateContest:""}),async created(){const t=await this.$http.executeGet("/contests/listing/loadUserContests");this.userContests=t},methods:{async addContest(t){const e=await this.$http.executePost("/contests/listing/create",{name:this.contestName,templateId:this.templateContest},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",e),this.$router.replace(`/contests/listing?contest=${e.id}`))}}});const Po={class:"container card card-body py-3 mb-2"},Bo=h("option",{value:"",disabled:""}," Contest details template ",-1),_o=["value"],zo={key:0,value:"x",disabled:""};Oo.render=function(t,e,s,n,o,i){return p(),m("div",Po,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.contestName=e),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[v,t.contestName,void 0,{trim:!0}]]),y(h("select",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.templateContest=e),class:"form-select form-select-sm mb-2"},[Bo,(p(!0),m(U,null,x(t.userContests,(t=>(p(),m("option",{key:t.id,value:t.id},g(t.name),9,_o)))),128)),t.userContests.length?b("",!0):(p(),m("option",zo," No templates available "))],512),[[$,t.templateContest]]),h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[2]||(e[2]=e=>t.addContest(e))}," Add new contest ")])};var Fo={state:{contests:[],selectedContestId:null},mutations:{setContests(t,e){t.contests=e},addContest(t,e){t.contests.unshift(e),t.selectedContestId=e.id},deleteContest(t,e){t.selectedContestId=null;const s=t.contests.findIndex((t=>t.id==e));-1!==s&&t.contests.splice(s,1)},setSelectedContestId(t,e){t.selectedContestId=e},updateContestStart(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestStart=e.contestStart)},updateContestEnd(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestEnd=e.contestEnd)},updateUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.url=e.url)},updateOsuContestListingUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.osuContestListingUrl=e.osuContestListingUrl)},updateResultsUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.resultsUrl=e.resultsUrl)},updateBannerUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.bannerUrl=e.bannerUrl)},updateDownload(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.download=e.download)},updateCreators(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.creators=e.creators)},deleteSubmission(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&s.submissions.splice(t,1)}},addScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.screeners.push(e.screener)},deleteScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.screeners.findIndex((t=>t.id==e.screenerId));-1!==t&&s.screeners.splice(t,1)}},addJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.judges.push(e.judge)},deleteJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.judges.findIndex((t=>t.id==e.judgeId));-1!==t&&s.judges.splice(t,1)}},updateJudgingThreshold(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.judgingThreshold=e.judgingThreshold)},updateScreeningVoteCount(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.screeningVoteCount=e.screeningVoteCount)},updateStatus(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.status=e.status)},updateMode(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.mode=e.mode)},updateContestCriterias(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.criterias=e.criterias)},updateName(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.name=e.name)},updateDescription(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.description=e.description)},updateSubmissions(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.submissions=e.submissions)},updateAnonymousSubmissionName(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&(s.submissions[t].name=e.name)}}},getters:{selectedContest:t=>t.contests.find((e=>e.id===t.selectedContestId)),userSubmission:t=>{const e=t.contests.find((e=>e.id===t.selectedContestId));return e&&e.submissions&&e.submissions.length?e.submissions[0]:null}}},Go=d({name:"ContestPage",components:{ContestCard:A,AddContest:Oo,ContestInfo:pn,LimitedContestInfo:uo},data:()=>({displayMode:"activeContests",filterMode:"",filterValue:"",firstLoadComplete:!1,loadedSpecificContest:!1,limit:200,skip:0,total:0,moreContestsAvailable:!0,loadingCategory:!1}),computed:l(a(a(a({},c(["loggedInUser"])),c({contests:t=>t.contests.contests,selectedContestId:t=>t.contests.selectedContestId})),E(["selectedContest"])),{filteredContests(){if(this.contests){let t=[...this.contests];if(this.filterMode.length&&(t=t.filter((t=>t.mode==this.filterMode))),this.filterValue.length){const e=this.filterValue.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)))}return t}return[]},creatorIds(){return this.selectedContest.creators.map((t=>t.id))}}),watch:{async displayMode(){this.moreContestsAvailable=!0,this.skip=0,this.firstLoadComplete&&(this.loadingCategory=!0,this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null),this.$router.replace("/contests/listing"),await this.loadContests(),this.loadingCategory=!1)}},beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",Fo)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},async created(){await this.loadContests(),this.firstLoadComplete=!0},methods:{async loadContests(){const t=this.$route.query.contest;if(t&&!this.firstLoadComplete){const e=await this.$http.initialRequest(`/contests/listing/searchContest/${t}`);if(this.$http.isError(e))this.$router.replace("/contests/listing"),this.firstLoadComplete=!0,await this.loadContests();else{e.creators.map((t=>t.id)).includes(this.loggedInUser.id)?this.displayMode="myContests":"complete"==e.status?this.displayMode="completedContests":this.displayMode,this.$store.commit("setContests",[e]),this.$store.commit("setSelectedContestId",t),this.loadedSpecificContest=!0}}else{let t;t=this.firstLoadComplete?await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`):await this.$http.initialRequest(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`),this.$http.isError(t)||(this.skip+=this.limit,this.$store.commit("setContests",t),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1,t.length<this.limit&&(this.moreContestsAvailable=!1))}},async loadMore(t){this.total=this.contests.length;const e=await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`,t);this.$http.isError(e)||(0==this.skip?this.$store.commit("setContests",e):this.$store.commit("setContests",[...this.contests||[],...e]),this.skip+=this.limit,this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1),this.total==this.contests.length&&(this.moreContestsAvailable=!1,this.$store.dispatch("updateToastMessages",{message:"No more contests to load!",type:"info"}))}}});const Ho={class:"row"},Ko={class:"col-sm-3"},Yo={class:"container card card-body py-3 mb-2"},Qo={class:"input-group"},Wo=h("button",{class:"btn btn-primary",href:"#"},[h("i",{class:"fas fa-search"})],-1),Xo=h("hr",null,null,-1),Zo=h("div",null," Contest category ",-1),ti={class:"small ms-2"},ei=h("hr",null,null,-1),si=h("div",null," Contest mode ",-1),ni={class:"small mx-2"},oi=h("hr",null,null,-1),ii={key:1,class:"container card card-body py-3 mb-2 text-secondary"},ri={key:2,class:"container card card-body py-3 mb-2 text-secondary"},ai={key:3},li={key:4},di={class:"col-sm-9 container card card-body"},ci={key:0},ui=h("div",{class:"radial-divisor"},null,-1);Go.render=function(t,e,s,n,o,i){const r=u("add-contest"),a=u("contest-card"),l=u("limited-contest-info"),d=u("contest-info");return p(),m("div",null,[h("div",Ho,[h("div",Ko,[h("div",Yo,[h("div",Qo,[Wo,y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.filterValue=e),class:"form-control form-control-sm",type:"text",placeholder:"search",maxlength:"200",autocomplete:"off"},null,512),[[v,t.filterValue]])]),Xo,Zo,h("div",ti,[h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[1]||(e[1]=C((e=>t.displayMode="activeContests"),["prevent"]))},[h("span",{class:D("activeContests"===t.displayMode?"border-bottom border-secondary":"")}," Active ",2)],2)]),h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[2]||(e[2]=C((e=>t.displayMode="completedContests"),["prevent"]))},[h("span",{class:D("completedContests"===t.displayMode?"border-bottom border-secondary":"")}," Completed ",2)],2)]),h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[3]||(e[3]=C((e=>t.displayMode="myContests"),["prevent"]))},[h("span",{class:D("myContests"===t.displayMode?"border-bottom border-secondary":"")}," My contests ",2)],2)])]),ei,si,h("div",ni,[h("div",null,[h("a",{href:"#",onClick:e[4]||(e[4]=C((e=>t.filterMode=""),["prevent"]))},[h("span",{class:D(""===t.filterMode?"border-bottom border-secondary":"")}," Any ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[5]||(e[5]=C((e=>t.filterMode="osu"),["prevent"]))},[h("span",{class:D("osu"===t.filterMode?"border-bottom border-secondary":"")}," osu! ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[6]||(e[6]=C((e=>t.filterMode="taiko"),["prevent"]))},[h("span",{class:D("taiko"===t.filterMode?"border-bottom border-secondary":"")}," osu!taiko ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[7]||(e[7]=C((e=>t.filterMode="catch"),["prevent"]))},[h("span",{class:D("catch"===t.filterMode?"border-bottom border-secondary":"")}," osu!catch ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[8]||(e[8]=C((e=>t.filterMode="mania"),["prevent"]))},[h("span",{class:D("mania"===t.filterMode?"border-bottom border-secondary":"")}," osu!mania ",2)])])])]),oi,"myContests"==t.displayMode&&t.contests&&!t.loadedSpecificContest?(p(),f(r,{key:0})):b("",!0),M(J,{name:"list",tag:"div",class:"row"},{default:T((()=>[(p(!0),m(U,null,x(t.filteredContests,(t=>(p(),f(a,{key:t.id,class:"col-sm-12 my-2",contest:t,route:"listing"},null,8,["contest"])))),128))])),_:1}),t.contests?b("",!0):(p(),m("div",ii," Loading... ")),t.contests&&!t.filteredContests.length?(p(),m("div",ri," No contests available. Try other filters! ")):b("",!0),t.loadedSpecificContest?(p(),m("div",ai,[h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[9]||(e[9]=e=>t.loadMore(e))}," Load other contests ")])):t.moreContestsAvailable&&t.contests&&t.contests.length>=t.limit?(p(),m("div",li,[h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[10]||(e[10]=e=>t.loadMore(e))}," Load more contests ")])):b("",!0)]),h("div",di,[t.selectedContestId?"myContests"!==t.displayMode?(p(),f(l,{key:1,contest:t.selectedContest},null,8,["contest"])):t.creatorIds.includes(t.loggedInUser.id)||3178418==t.loggedInUser.osuId?(p(),f(d,{key:2,contest:t.selectedContest},null,8,["contest"])):b("",!0):(p(),m("div",ci," No contest selected! Choose one on the left. "))])]),ui])};export{Go as default};
