import{U as B}from"./UserInfo-ba604045.js";import{D as O}from"./DataTable-6568d2ff.js";import{d as y,m as H,_ as I,o as t,e as r,a as i,j as U,t as b,y as E,i as a,w as m,b as k,n as v,k as p,p as h,q as G,F as g,r as _,s as R,u as V,f as S,g as D}from"./index-3c72ace1.js";import{C}from"./CopyPaste-9377074d.js";import{A as P}from"./AddRestrictedUser-4e3f7283.js";import"./ModalDialog-c8757ced.js";const N=y({components:{DataTable:O,UserInfo:B},props:{groupedUsers:{type:Array,default:()=>[]},group:{type:String,required:!0}},data(){return{selectedUserId:""}},computed:{...H({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)}}}),T=["href"],F=i("i",{class:"fas fa-angle-down"},null,-1);function K(s,e,o,d,f,w){const u=h("user-link"),n=h("data-table"),l=h("user-info"),A=G("bs-tooltip");return t(),r("div",null,[i("a",{href:`#${s.group}`,"data-bs-toggle":"collapse",class:"ms-1",onClick:e[0]||(e[0]=E(()=>{},["prevent"]))},[i("h6",null,[U(b(s.group)+" ",1),F])],8,T),a(n,{id:s.group,class:v(s.groupedUsers.length>30?"collapse":"show"),data:s.groupedUsers,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":`#editUser${s.group}`,"onUpdate:selectedId":e[1]||(e[1]=c=>s.selectedUserId=c)},{default:m(({obj:c})=>[i("td",null,[a(u,{user:c},null,8,["user"])]),i("td",null,[c.rank?k((t(),r("i",{key:0,class:v(["fas fa-crown","text-rank-"+c.rank])},null,2)),[[A,`rank ${c.rank} user`]]):p("",!0)]),i("td",{class:v({"bg-open":c.rank!=c.queuedBadge})},[c.queuedBadge?k((t(),r("i",{key:0,class:v(["fas fa-crown","text-rank-"+c.queuedBadge])},null,2)),[[A,`rank ${c.queuedBadge} user`]]):p("",!0)],2),i("td",{class:v({"bg-open":c.rank!=c.badge})},[c.badge?k((t(),r("i",{key:0,class:v(["fas fa-crown","text-rank-"+c.badge])},null,2)),[[A,`rank ${c.badge} user`]]):p("",!0)],2)]),_:1},8,["id","class","data","custom-data-target"]),a(l,{user:s.selectedUser,"current-group":s.group},null,8,["user","current-group"])])}const W=I(N,[["render",K]]),j=y({name:"ShowcaseUserList",components:{CopyPaste:C},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const o of s)e.find(f=>f.osuId==o.osuId)||e.push(o);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://osu.ppy.sh/home/news/2022-07-25-mappers-guild-updates#how-to-participate`),s.push("if you'd like to map an upcoming featured artist song for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("i'll link some upcoming artists in return"),s.push("thank you!! -pishifat"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const z=s=>(R("data-v-902d16a2"),s=s(),V(),s),J={class:"container card card-body py-1"},Q=z(()=>i("h5",{class:"mt-2"}," FA showcase users by mode ",-1)),X={key:0,class:"row"},Y={key:0,class:"col-sm-3"},Z={key:1,class:"col-sm-3"},x={key:2,class:"col-sm-3"},ss={key:3,class:"col-sm-3"};function es(s,e,o,d,f,w){const u=h("user-link"),n=h("copy-paste");return t(),r("div",J,[Q,i("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=l=>s.findShowcaseUsers(l))}," Load users "),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(t(),r("div",X,[s.osuUsers.length?(t(),r("div",Y,[U(" osu! "),a(n,{distinct:"osu"},{default:m(()=>[(t(!0),r(g,null,_(s.osuUsers,l=>(t(),r("div",{key:l.id},[a(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.taikoUsers.length?(t(),r("div",Z,[U(" osu!taiko "),a(n,{distinct:"taiko"},{default:m(()=>[(t(!0),r(g,null,_(s.taikoUsers,l=>(t(),r("div",{key:l.id},[a(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.catchUsers.length?(t(),r("div",x,[U(" osu!catch "),a(n,{distinct:"catch"},{default:m(()=>[(t(!0),r(g,null,_(s.catchUsers,l=>(t(),r("div",{key:l.id},[a(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.maniaUsers.length?(t(),r("div",ss,[U(" osu!mania "),a(n,{distinct:"mania"},{default:m(()=>[(t(!0),r(g,null,_(s.maniaUsers,l=>(t(),r("div",{key:l.id},[a(u,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0)])):p("",!0)])}const ts=I(j,[["render",es],["__scopeId","data-v-902d16a2"]]),rs=y({name:"ShowcaseUserList",components:{CopyPaste:C},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const o of s)e.find(f=>f.osuId==o.osuId)||e.push(o);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png`),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findContestHelperUsers(s){const e=await this.$http.executeGet("/admin/users/findContestHelperUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}}),os={class:"container card card-body py-1"},ns=i("h5",{class:"mt-2"}," Contest helper users by mode ",-1),is={key:0,class:"row"},as={key:0,class:"col-sm-3"},us={key:1,class:"col-sm-3"},ds={key:2,class:"col-sm-3"},cs={key:3,class:"col-sm-3"};function ls(s,e,o,d,f,w){const u=h("copy-paste");return t(),r("div",os,[ns,i("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=n=>s.findContestHelperUsers(n))}," Load users "),s.osuUsers&&s.taikoUsers&&s.catchUsers&&s.maniaUsers?(t(),r("div",is,[s.osuUsers.length?(t(),r("div",as,[U(" osu! "),a(u,{distinct:"osu"},{default:m(()=>[(t(!0),r(g,null,_(s.osuUsers,n=>(t(),r("div",{key:n.id},b(n.username),1))),128))]),_:1})])):p("",!0),s.taikoUsers.length?(t(),r("div",us,[U(" osu!taiko "),a(u,{distinct:"taiko"},{default:m(()=>[(t(!0),r(g,null,_(s.taikoUsers,n=>(t(),r("div",{key:n.id},b(n.username),1))),128))]),_:1})])):p("",!0),s.catchUsers.length?(t(),r("div",ds,[U(" osu!catch "),a(u,{distinct:"catch"},{default:m(()=>[(t(!0),r(g,null,_(s.catchUsers,n=>(t(),r("div",{key:n.id},b(n.username),1))),128))]),_:1})])):p("",!0),s.maniaUsers.length?(t(),r("div",cs,[U(" osu!mania "),a(u,{distinct:"mania"},{default:m(()=>[(t(!0),r(g,null,_(s.maniaUsers,n=>(t(),r("div",{key:n.id},b(n.username),1))),128))]),_:1})])):p("",!0)])):p("",!0)])}const ps=I(rs,[["render",ls]]),hs=y({name:"ResetHasMerchAccess",data(){return{osuIdInput:""}},methods:{async resetHasMerchAccess(s){const e=await this.$http.executePost("/admin/users/resetHasMerchAccess",{osuIdInput:this.osuIdInput},s);e&&!e.error&&this.$store.dispatch("updateToastMessages",{message:"reset successfully",type:"success"})},async resetHasSpecificMerchOrder(s){const e=await this.$http.executePost("/admin/users/resetHasSpecificMerchOrder",{osuIdInput:this.osuIdInput},s);e&&!e.error&&this.$store.dispatch("updateToastMessages",{message:"reset successfully",type:"success"})}}}),ms={class:"container card card-body py-1"},fs=i("h5",{class:"mt-2"}," Reset Merch ",-1);function Us(s,e,o,d,f,w){return t(),r("div",ms,[fs,k(i("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>s.osuIdInput=u),class:"form-control form-control-sm mb-2",autocomplete:"off",placeholder:"osuIds comma separated..."},null,512),[[S,s.osuIdInput]]),i("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[1]||(e[1]=u=>s.resetHasMerchAccess(u))}," Reset hasMerchAccess for all users, excluding the osuIds above "),i("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[2]||(e[2]=u=>s.resetHasSpecificMerchOrder(u))}," Reset hasSpecificMerchOrder for all users, excluding the osuIds above ")])}const gs=I(hs,[["render",Us]]),_s=y({name:"DiscordHighlightGenerator",components:{CopyPaste:C},data(){return{inputUsers:"",users:[]}},computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}}),$s={class:"container card card-body py-1"},bs=i("h5",{class:"mt-2"}," Generate Discord highlights ",-1),ks={key:0};function ys(s,e,o,d,f,w){const u=h("copy-paste");return t(),r("div",$s,[bs,k(i("textarea",{"onUpdate:modelValue":e[0]||(e[0]=n=>s.inputUsers=n),class:"form-control form-control-sm mx-2 mb-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[S,s.inputUsers]]),i("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[1]||(e[1]=n=>s.generateDiscordHighlights(n))}," Generate Discord highlights "),s.users.length?(t(),r("div",ks,[a(u,null,{default:m(()=>[U(b(s.discordHighlights),1)]),_:1})])):p("",!0)])}const Is=I(_s,[["render",ys]]),ws=y({name:"DiscordHighlightGenerator",components:{CopyPaste:C},data(){return{osuId:null,output:null}},methods:{async searchUser(s){const e=await this.$http.executePost("/admin/users/searchUser",{osuId:this.osuId},s);e&&!e.error&&(this.output=e)}}}),vs={class:"container card card-body py-1"},As=i("h5",{class:"mt-2"}," Search user in osu! API ",-1),Ms={key:0};function Ss(s,e,o,d,f,w){const u=h("copy-paste");return t(),r("div",vs,[As,k(i("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>s.osuId=n),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=D(n=>s.searchUser(n),["enter"]))},null,544),[[S,s.osuId]]),i("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[2]||(e[2]=n=>s.searchUser(n))}," Load user "),s.output?(t(),r("div",Ms,[a(u,null,{default:m(()=>[i("pre",null,b(s.output),1)]),_:1})])):p("",!0)])}const Cs=I(ws,[["render",Ss]]);var M=(s=>(s.User="user",s.Admin="admin",s.Secret="secret",s))(M||{});const Hs={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const o=s.users.find(d=>d.id==e.userId);o&&(o.queuedBadge=e.badge)},updateDiscordId(s,e){const o=s.users.find(d=>d.id==e.userId);o&&(o.discordId=e.discordId)},updateIsShowcaseMapper(s,e){const o=s.users.find(d=>d.id==e.userId);o&&(o.isShowcaseMapper=e.isShowcaseMapper)},updateIsMentorshipAdmin(s,e){const o=s.users.find(d=>d.id==e.userId);o&&(o.isMentorshipAdmin=e.isMentorshipAdmin)},updateIsWorldCupHelper(s,e){const o=s.users.find(d=>d.id==e.userId);o&&(o.isWorldCupHelper=e.isWorldCupHelper)},updateHasMerchAccess(s,e){const o=s.users.find(d=>d.id==e.userId);o&&(o.hasMerchAccess=e.hasMerchAccess)},updateHasSpecificMerchOrder(s,e){const o=s.users.find(d=>d.id==e.userId);o&&(o.hasSpecificMerchOrder=e.hasSpecificMerchOrder)}}},Ds=Hs,Ls=y({components:{AdminUserTable:W,ShowcaseUserList:ts,ContestHelperUserList:ps,ResetMerch:gs,DiscordHighlightGenerator:Is,OsuApiUserSearch:Cs,AddRestrictedUser:P},data(){return{selectedUserId:"",userInput:""}},computed:{...H({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)},normalUsers(){return this.users.filter(s=>s.group==M.User)},showcaseUsers(){return this.users.filter(s=>s.group==M.Secret)},admins(){return this.users.filter(s=>s.group==M.Admin)}},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",Ds)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},methods:{async loadAllUsers(s){const e=await this.$http.executeGet("/admin/users/load",s);this.$http.isError(e)||this.$store.commit("setUsers",e)},async searchUser(s){const e=await this.$http.executeGet(`/admin/users/searchUser/${this.userInput}`,s);this.$http.isError(e)||this.$store.commit("setUsers",[e])}}}),qs={class:"container card card-body"},Bs=i("h4",null," Load users ",-1),Os=i("h5",{class:"mt-2"}," Single user ",-1),Es=i("h5",{class:"mt-2"}," All users ",-1),Gs={key:0},Rs=i("hr",null,null,-1),Vs=i("hr",null,null,-1);function Ps(s,e,o,d,f,w){const u=h("admin-user-table"),n=h("osu-api-user-search"),l=h("add-restricted-user"),A=h("showcase-user-list"),c=h("contest-helper-user-list"),L=h("reset-merch"),q=h("discord-highlight-generator");return t(),r("div",null,[i("div",qs,[Bs,Os,k(i("input",{"onUpdate:modelValue":e[0]||(e[0]=$=>s.userInput=$),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=D($=>s.searchUser($),["enter"]))},null,544),[[S,s.userInput]]),i("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[2]||(e[2]=$=>s.searchUser($))}," Load user "),Es,i("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[3]||(e[3]=$=>s.loadAllUsers($))}," Load all users "),s.users.length?(t(),r("div",Gs,[a(u,{"grouped-users":s.admins,group:"admin"},null,8,["grouped-users"]),a(u,{"grouped-users":s.showcaseUsers,group:"secret"},null,8,["grouped-users"]),a(u,{"grouped-users":s.normalUsers,group:"user"},null,8,["grouped-users"])])):p("",!0)]),Rs,a(n,{class:"mb-2"}),a(l,{class:"mb-2"}),Vs,a(A,{class:"mb-2"}),a(c,{class:"mb-2"}),a(L,{class:"mb-2"}),a(q,{class:"mb-2"})])}const zs=I(Ls,[["render",Ps]]);export{zs as default};
