var s=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;import{_ as i}from"./UserInfo.76a821f9.js";import{_ as u}from"./DataTable.63fe7b68.js";import{C as d}from"./CopyPaste.7cb4b414.js";import{o as c,b as l,f as m,F as h,g as p,t as g,e as U,d as f,i as y,u as k,j as b,w as v,l as w,q as I,O as C,m as $,k as A,n as D}from"./vendor.8b5721c7.js";import"./ModalDialog.2c18b0dc.js";const q={name:"BotChatMessage",props:{messages:{type:Array,default:()=>[],required:!0},messageType:{type:String,required:!0},mongoId:{type:String,required:!0},users:{type:Array,default:()=>[]}},methods:{async sendMessages(s){if(confirm("Are you sure?")){let e="";switch(this.messageType){case"contest":e=`/admin/contests/${this.mongoId}/sendMessages`;break;case"showcase":e="/admin/users/sendMessages";break;default:return""}await this.$http.executePost(e,{users:this.users,messages:this.messages},s)}}}},j={class:"card card-body message-text small mb-2"};q.render=function(s,e,t,a,r,n){return c(),l("div",null,[m("div",j,[(c(!0),l(h,null,p(t.messages,((s,e)=>(c(),l("span",{key:e},g(s),1)))),128))]),t.users.length?(c(),l("a",{key:0,class:"btn btn-sm w-100 btn-success mb-2",onClick:e[0]||(e[0]=s=>n.sendMessages(s))}," Send messages ")):U("",!0)])};var x=f({name:"ShowcaseUserList",components:{CopyPaste:d,BotChatMessage:q},data:()=>({osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}),computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const t of s){e.find((s=>s.osuId==t.osuId))||e.push(t)}return e},messages(){const s=[];return s.push('hello! you\'re receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png'),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const M={class:"container card card-body py-1 my-2"},O={key:1,class:"row"},_={key:0,class:"col-sm-3"},B=w(" osu! "),L={key:1,class:"col-sm-3"},P=w(" osu!taiko "),S={key:2,class:"col-sm-3"},H=w(" osu!catch "),E={key:3,class:"col-sm-3"},G=w(" osu!mania ");x.render=function(s,e,t,a,r,n){const o=y("bot-chat-message"),i=y("copy-paste");return c(),l("div",M,[m("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=e=>s.findShowcaseUsers(e))}," Load FA showcase users "),s.uniqueUsers.length?(c(),k(o,{key:0,messages:s.messages,"message-type":"showcase","mongo-id":"",users:s.uniqueUsers},null,8,["messages","users"])):U("",!0),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(c(),l("div",O,[s.osuUsers.length?(c(),l("div",_,[B,b(i,{distinct:"osu"},{default:v((()=>[(c(!0),l(h,null,p(s.osuUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.taikoUsers.length?(c(),l("div",L,[P,b(i,{distinct:"taiko"},{default:v((()=>[(c(!0),l(h,null,p(s.taikoUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.catchUsers.length?(c(),l("div",S,[H,b(i,{distinct:"catch"},{default:v((()=>[(c(!0),l(h,null,p(s.catchUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.maniaUsers.length?(c(),l("div",E,[G,b(i,{distinct:"mania"},{default:v((()=>[(c(!0),l(h,null,p(s.maniaUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0)])):U("",!0)])};var F=f({name:"ShowcaseUserList",components:{CopyPaste:d},data:()=>({osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}),computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const t of s){e.find((s=>s.osuId==t.osuId))||e.push(t)}return e},messages(){const s=[];return s.push('hello! you\'re receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png'),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findContestHelperUsers(s){const e=await this.$http.executeGet("/admin/users/findContestHelperUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const T={class:"container card card-body py-1 my-2"},R={key:0,class:"row"},J={key:0,class:"col-sm-3"},N=w(" osu! "),K={key:1,class:"col-sm-3"},Q=w(" osu!taiko "),V={key:2,class:"col-sm-3"},z=w(" osu!catch "),W={key:3,class:"col-sm-3"},X=w(" osu!mania ");F.render=function(s,e,t,a,r,n){const o=y("copy-paste");return c(),l("div",T,[m("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=e=>s.findContestHelperUsers(e))}," Load contest helper users "),s.osuUsers&&s.taikoUsers&&s.catchUsers&&s.maniaUsers?(c(),l("div",R,[s.osuUsers.length?(c(),l("div",J,[N,b(o,{distinct:"osu"},{default:v((()=>[(c(!0),l(h,null,p(s.osuUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.taikoUsers.length?(c(),l("div",K,[Q,b(o,{distinct:"taiko"},{default:v((()=>[(c(!0),l(h,null,p(s.taikoUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.catchUsers.length?(c(),l("div",V,[z,b(o,{distinct:"catch"},{default:v((()=>[(c(!0),l(h,null,p(s.catchUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.maniaUsers.length?(c(),l("div",W,[X,b(o,{distinct:"mania"},{default:v((()=>[(c(!0),l(h,null,p(s.maniaUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0)])):U("",!0)])};var Y=f({name:"DiscordHighlightGenerator",components:{CopyPaste:d},data:()=>({inputUsers:"",users:[]}),computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}});const Z={class:"container card card-body py-1 mb-4"},ss={key:0};Y.render=function(s,e,t,a,r,n){const o=y("copy-paste");return c(),l("div",Z,[I(m("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>s.inputUsers=e),class:"form-control form-control-sm mx-2 mt-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[C,s.inputUsers]]),m("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[1]||(e[1]=e=>s.generateDiscordHighlights(e))}," Generate Discord highlights "),s.users.length?(c(),l("div",ss,[b(o,null,{default:v((()=>[w(g(s.discordHighlights),1)])),_:1})])):U("",!0)])};var es,ts,as={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.queuedBadge=e.badge)},updateDiscordId(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.discordId=e.discordId)},updateBypassLogin(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.bypassLogin=e.bypassLogin)}}},rs=f({components:{DataTable:u,UserInfo:i,ShowcaseUserList:x,ContestHelperUserList:F,DiscordHighlightGenerator:Y},data:()=>({selectedUserId:""}),computed:(es=((s,e)=>{for(var t in e||(e={}))r.call(e,t)&&o(s,t,e[t]);if(a)for(var t of a(e))n.call(e,t)&&o(s,t,e[t]);return s})({},$({users:s=>s.usersAdmin.users})),ts={selectedUser(){return this.users.find((s=>s.id===this.selectedUserId))}},e(es,t(ts))),beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",as)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},async created(){const s=await this.$http.initialRequest("/admin/users/load");this.$http.isError(s)||this.$store.commit("setUsers",s)},methods:{updateUser(s){const e=this.users.findIndex((e=>e.id==s.id));-1!==e&&(this.users[e]=s)}}});const ns={class:"container card card-body py-1"},os={class:"row"},is={class:"col-sm"};rs.render=function(s,e,t,a,r,n){const o=y("user-link"),i=y("data-table"),u=y("user-info"),d=y("showcase-user-list"),h=y("contest-helper-user-list"),p=y("discord-highlight-generator"),g=A("bs-tooltip");return c(),l("div",null,[m("div",ns,[m("div",os,[m("div",is,[b(i,{data:s.users,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":"#editUser","onUpdate:selectedId":e[0]||(e[0]=e=>s.selectedUserId=e)},{default:v((({obj:s})=>[m("td",null,[b(o,{user:s},null,8,["user"])]),m("td",null,[s.rank?I((c(),l("i",{key:0,class:D(["fas fa-crown","text-rank-"+s.rank])},null,2)),[[g,`rank ${s.rank} user`]]):U("",!0)]),m("td",{class:D({"bg-open":s.rank!=s.queuedBadge})},[s.queuedBadge?I((c(),l("i",{key:0,class:D(["fas fa-crown","text-rank-"+s.queuedBadge])},null,2)),[[g,`rank ${s.queuedBadge} user`]]):U("",!0)],2),m("td",{class:D({"bg-open":s.rank!=s.badge})},[s.badge?I((c(),l("i",{key:0,class:D(["fas fa-crown","text-rank-"+s.badge])},null,2)),[[g,`rank ${s.badge} user`]]):U("",!0)],2)])),_:1},8,["data"])])])]),b(u,{user:s.selectedUser,onUpdateUser:e[1]||(e[1]=e=>s.updateUser(e))},null,8,["user"]),b(d),b(h),b(p)])};export{rs as default};
