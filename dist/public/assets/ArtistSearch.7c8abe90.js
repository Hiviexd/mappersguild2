import{d as t,o as a,b as e,f as s,q as l,l as n,H as r,I as o,t as p,n as i,F as u,g as d,e as c}from"./vendor.b9ef672a.js";var h=t({name:"ArtistSearch",props:{input:{type:String,default:""}},data(){return{beatmapsets:[],searchText:this.input,searchedOnce:!1,isLoading:!1}},computed:{totalRankedPlays(){let t=0;for(const a of this.beatmapsets)a.ranked>0&&(t+=a.play_count);return t},totalUnrankedPlays(){let t=0;for(const a of this.beatmapsets)a.ranked<=0&&(t+=a.play_count);return t},totalPlays(){return this.totalRankedPlays+this.totalUnrankedPlays},totalRankedBeatmapsets(){let t=0;for(const a of this.beatmapsets)a.ranked>0&&t++;return t},totalUnrankedBeatmapsets(){let t=0;for(const a of this.beatmapsets)a.ranked<=0&&t++;return t},rankedMappers(){let t=[];for(const a of this.beatmapsets)a.ranked>0&&!t.includes(a.creator)&&t.push(a.creator);return t.length},unrankedMappers(){let t=[];for(const a of this.beatmapsets)a.ranked<=0&&!t.includes(a.creator)&&t.push(a.creator);return t.length},uniqueMappers(){let t=[];for(const a of this.beatmapsets)t.includes(a.creator)||t.push(a.creator);return t.length},sortedBeatmapsets(){return[...this.beatmapsets].sort(((t,a)=>a.play_count-t.play_count))}},watch:{input(){this.searchText=this.input,this.searchArtist(null)}},methods:{async searchArtist(t){this.isLoading=!0,this.beatmapsets=[];const a=await this.$http.executeGet(`/admin/artistSearch/${this.searchText}`,t);this.isLoading=!1,this.searchedOnce=!0,this.beatmapsets=a.beatmapsets}}});const m={class:"container py-1"},b={class:"row my-2"},y={class:"col"},g={class:"input-group"},k=[s("i",{class:"fas fa-search"},null,-1)],f={key:0},v=["href"],w=["href"],P={class:"row"},_={class:"col-sm"},B={class:"table table-sm"},L=s("thead",null,[s("tr",null,[s("th",null,"status"),s("th",null,"plays"),s("th",null,"maps"),s("th",null,"mappers")])],-1),q=s("td",null,"ranked",-1),x=s("td",null,"unranked",-1),R=s("td",null,"top 50 maps",-1),M={class:"row"},U={class:"col-sm"},S={class:"table table-sm"},$=s("thead",null,[s("tr",null,[s("th",null,"metadata"),s("th",null,"plays")])],-1),A=["href"],T={key:1},N={key:2};h.render=function(t,h,O,D,j,C){return a(),e("div",m,[s("div",b,[s("div",y,[s("div",g,[s("button",{class:"btn btn-primary",href:"#",onClick:h[0]||(h[0]=l((a=>t.searchArtist(a)),["prevent"]))},k),n(s("input",{"onUpdate:modelValue":h[1]||(h[1]=a=>t.searchText=a),class:"form-control",type:"text",maxlength:"100",placeholder:"artist name...",autocomplete:"off",onKeyup:h[2]||(h[2]=o((a=>t.searchArtist(a)),["enter"]))},null,544),[[r,t.searchText]])])])]),t.beatmapsets&&t.beatmapsets.length?(a(),e("div",f,[s("div",null,[s("a",{href:`https://osu.ppy.sh/beatmapsets?q=artist%3D%22${t.input}%22`,target:"_blank"},p(`https://osu.ppy.sh/beatmapsets?q=artist%3D%22${t.input}%22`),9,v)]),s("div",null,[s("a",{href:`https://www.google.com/search?q=%22${t.input}%22`,target:"_blank"},p(`https://www.google.com/search?q=%22${t.input}%22`),9,w)]),s("div",P,[s("div",_,[s("table",B,[L,s("tbody",null,[s("tr",null,[q,s("td",null,p(Number(t.totalRankedPlays).toLocaleString()),1),s("td",{class:i(t.totalRankedBeatmapsets>2?"bg-info":t.totalRankedBeatmapsets>0?"bg-primary":"")},p(t.totalRankedBeatmapsets),3),s("td",null,p(t.rankedMappers),1)]),s("tr",null,[x,s("td",null,p(Number(t.totalUnrankedPlays).toLocaleString()),1),s("td",null,p(t.totalUnrankedBeatmapsets),1),s("td",null,p(t.unrankedMappers),1)]),s("tr",null,[R,s("td",{class:i(t.totalPlays>1e5?"bg-info":t.totalPlays>1e4?"bg-primary":"")},p(Number(t.totalRankedPlays+t.totalUnrankedPlays).toLocaleString()),3),s("td",{class:i(t.beatmapsets.length>49?"bg-info":t.beatmapsets.length>20?"bg-primary":"")},p(t.totalRankedBeatmapsets+t.totalUnrankedBeatmapsets),3),s("td",{class:i(t.uniqueMappers>40?"bg-info":t.uniqueMappers>20?"bg-primary":"")},p(t.uniqueMappers),3)])])])])]),s("div",M,[s("div",U,[s("table",S,[$,s("tbody",null,[(a(!0),e(u,null,d(t.sortedBeatmapsets,(t=>(a(),e("tr",{key:t.id,class:i(t.ranked>0?"bg-dark":"")},[s("td",null,[s("a",{href:`https://osu.ppy.sh/beatmapsets/${t.id}`,target:"_blank"},p(t.artist)+" - "+p(t.title),9,A)]),s("td",{class:i(t.play_count>1e4?"bg-info":t.play_count>1e3?"bg-primary":"")},p(Number(t.play_count).toLocaleString()),3)],2)))),128))])])])])])):t.searchedOnce&&!t.isLoading?(a(),e("div",T," no results ")):c("",!0),t.isLoading?(a(),e("div",N," Loading... ")):c("",!0)])};export{h as _};
