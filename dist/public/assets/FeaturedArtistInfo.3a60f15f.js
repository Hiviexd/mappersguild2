import{_ as t}from"./ModalDialog.4a9168b4.js";import{_ as e}from"./UserLinkList.9aab0eb3.js";import{d as s,h as a,o as r,s as i,w as o,b as d,t as n,k as l,f as u,l as p,H as m,I as c,v as f,j as h,e as g,g as A,F as b}from"./vendor.b9ef672a.js";var w=s({name:"FeaturedArtistInfo",components:{ModalDialog:t,UserLinkList:e},props:{featuredArtist:{type:Object,default:null}},data:()=>({osuId:0,name:"",status:"",referenceUrl:"",oszTemplatesUrl:"",offeredUsers:"",selectedSong:null,artist:"",title:"",notes:""}),computed:{alphabeticalSongs(){return[...this.featuredArtist.songs].sort(((t,e)=>t.title.toLowerCase()>e.title.toLowerCase()?1:e.title.toLowerCase()>t.title.toLowerCase()?-1:0))}},watch:{featuredArtist(){this.osuId=this.featuredArtist.osuId,this.name=this.featuredArtist.label,this.status=this.featuredArtist.status,this.referenceUrl=this.featuredArtist.referenceUrl,this.oszTemplatesUrl=this.featuredArtist.oszTemplatesUrl,this.offeredUsers=this.generateUserListText(this.featuredArtist.offeredUsers),this.title="",this.notes=this.featuredArtist.notes},selectedSong(){this.selectedSong&&(this.artist=this.selectedSong.artist,this.title=this.selectedSong.title)}},methods:{generateUserListText(t){if(t&&t.length){return t.map((t=>t.username)).join(", ")}return""},async updateOsuId(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOsuId`,{osuId:this.osuId},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated osu id",type:"info"}),this.$store.commit("updateOsuId",{featuredArtistId:this.featuredArtist.id,osuId:e})),await this.$http.executePost("/artists/toggleIsUpToDate/"+this.featuredArtist.id,{value:!0})},async updateName(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateName`,{name:this.name},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated name",type:"info"}),this.$store.commit("updateName",{featuredArtistId:this.featuredArtist.id,name:e}))},async updateStatus(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateStatus`,{status:this.status},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated status",type:"info"}),this.$store.commit("updateStatus",{featuredArtistId:this.featuredArtist.id,status:e}))},async updateReferenceUrl(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateReferenceUrl`,{referenceUrl:this.referenceUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated reference URL",type:"info"}),this.$store.commit("updateReferenceUrl",{featuredArtistId:this.featuredArtist.id,referenceUrl:e}))},async updateOszTemplatesUrl(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOszTemplatesUrl`,{oszTemplatesUrl:this.oszTemplatesUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated osz templates URL",type:"info"}),this.$store.commit("updateOszTemplatesUrl",{featuredArtistId:this.featuredArtist.id,oszTemplatesUrl:e}))},async updateOfferedUsers(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateOfferedUsers`,{offeredUsers:this.offeredUsers},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated offered users",type:"info"}),this.$store.commit("updateOfferedUsers",{featuredArtistId:this.featuredArtist.id,offeredUsers:e}))},async addSong(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/create`,{artist:this.artist,title:this.title},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"added song",type:"info"}),this.$store.commit("addSong",{featuredArtistId:this.featuredArtist.id,song:e}))},async editSong(t){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song"});const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/update`,{artist:this.artist,title:this.title},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated song",type:"info"}),this.$store.commit("updateSong",{featuredArtistId:this.featuredArtist.id,song:e}))},async deleteSong(t){if(!this.selectedSong)return void this.$store.dispatch("updateToastMessages",{message:"Select a song"});const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/songs/${this.selectedSong.id}/delete`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"deleted song",type:"info"}),this.$store.commit("deleteSong",{featuredArtistId:this.featuredArtist.id,songId:this.selectedSong.id}))},async updateNotes(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateNotes`,{notes:this.notes},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated review comment",type:"info"}),this.$store.commit("updateNotes",{featuredArtistId:this.featuredArtist.id,notes:e}))},async updateLastReviewed(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/updateLastReviewed`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"updated last reviewed",type:"info"}),this.$store.commit("updateLastReviewed",{featuredArtistId:this.featuredArtist.id,lastReviewed:e}))},async updatePermanentlyDismiss(t){const e=await this.$http.executePost(`/admin/featuredArtists/${this.featuredArtist.id}/togglePermanentlyDismiss`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`updated permanenlty dismiss: ${e}`,type:"info"}),this.$store.commit("updatePermanentlyDismiss",{featuredArtistId:this.featuredArtist.id,permanentlyDismiss:e}))}}});const $=["href"],U={key:1},y={class:"container"},x=u("h5",null,"General",-1),v={class:"row mb-2 mx-1"},S={class:"row mb-2 mx-1"},I={class:"row mb-2 mx-1"},T=[u("option",{value:"public"}," Public ",-1),u("option",{value:"private"}," Private ",-1),u("option",{value:"showcase"}," Showcase ",-1),u("option",{value:"playlist"}," Playlist ",-1)],k=u("hr",null,null,-1),P=u("h5",null,"Showcase info",-1),L={class:"row mb-2 mx-1"},M={class:"row mb-2 mx-1"},z={class:"row mb-2 mx-1"},C={key:0,class:"small mx-4"},O=l(" offered: "),R={key:1,class:"small mx-4"},E=l(" showcase mappers: "),D=u("hr",null,null,-1),N=u("h5",null,"Songs",-1),V={class:"row mb-2 mx-2 w-50"},j=["value"],K={class:"row mb-2 mx-2"},_={class:"row mb-2 mx-2"},F={class:"mx-1"},B=u("hr",null,null,-1),G=u("h5",null,"Notes",-1),H={class:"row mb-2 mx-1"},q={class:"row mb-2"},J={class:"col-sm-6"},Q=l(" Last reviewed: "),W={class:"text-secondary"},X={class:"row mb-2"},Y={class:"col-sm-6"},Z=l(" Permanently dismissed: "),tt={class:"text-danger me-2"};w.render=function(t,e,s,w,et,st){const at=a("user-link-list"),rt=a("modal-dialog");return r(),i(rt,{id:"editFeaturedArtist",loaded:Boolean(t.featuredArtist)},{header:o((()=>[t.featuredArtist.osuId?(r(),d("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+t.featuredArtist.osuId,target:"_blank"},n(t.featuredArtist.label),9,$)):(r(),d("span",U,n(t.featuredArtist.label),1)),l(" ("+n(t.featuredArtist.songs.length)+") ",1)])),default:o((()=>[u("div",y,[x,u("div",v,[p(u("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.osuId=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"osu id...",onKeyup:e[1]||(e[1]=c((e=>t.updateOsuId(e)),["enter"]))},null,544),[[m,t.osuId]]),u("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[2]||(e[2]=e=>t.updateOsuId(e))}," Save osu! ID ")]),u("div",S,[p(u("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.name=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"artist name...",onKeyup:e[4]||(e[4]=c((e=>t.updateName(e)),["enter"]))},null,544),[[m,t.name]]),u("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[5]||(e[5]=e=>t.updateName(e))}," Save name ")]),u("div",I,[p(u("select",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.status=e),class:"form-select form-select-sm w-50 mx-2"},T,512),[[f,t.status]]),u("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[7]||(e[7]=e=>t.updateStatus(e))}," Save status ")]),k,P,u("div",L,[p(u("input",{"onUpdate:modelValue":e[8]||(e[8]=e=>t.referenceUrl=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"artist reference url...",onKeyup:e[9]||(e[9]=c((e=>t.updateReferenceUrl(e)),["enter"]))},null,544),[[m,t.referenceUrl]]),u("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[10]||(e[10]=e=>t.updateReferenceUrl(e))}," Save reference URL ")]),u("div",M,[p(u("input",{"onUpdate:modelValue":e[11]||(e[11]=e=>t.oszTemplatesUrl=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"osz templates url...",onKeyup:e[12]||(e[12]=c((e=>t.updateOszTemplatesUrl(e)),["enter"]))},null,544),[[m,t.oszTemplatesUrl]]),u("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[13]||(e[13]=e=>t.updateOszTemplatesUrl(e))}," Save .osz templates URL ")]),u("div",z,[p(u("input",{"onUpdate:modelValue":e[14]||(e[14]=e=>t.offeredUsers=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"offered user usernames...",onKeyup:e[15]||(e[15]=c((e=>t.updateOfferedUsers(e)),["enter"]))},null,544),[[m,t.offeredUsers]]),u("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[16]||(e[16]=e=>t.updateOfferedUsers(e))}," Save offered users ")]),t.featuredArtist.offeredUsers&&t.featuredArtist.offeredUsers.length?(r(),d("div",C,[O,h(at,{users:t.featuredArtist.offeredUsers},null,8,["users"])])):g("",!0),t.featuredArtist.showcaseMappers&&t.featuredArtist.showcaseMappers.length?(r(),d("div",R,[E,h(at,{users:t.featuredArtist.showcaseMappers},null,8,["users"])])):g("",!0),D,N,u("div",V,[p(u("select",{id:"editSongSelection","onUpdate:modelValue":e[17]||(e[17]=e=>t.selectedSong=e),class:"form-select form-select-sm"},[(r(!0),d(b,null,A(t.alphabeticalSongs,(t=>(r(),d("option",{key:t.id,value:t},n(t.title)+" --- ("+n(t.artist)+") ",9,j)))),128))],512),[[f,t.selectedSong]])]),u("div",K,[p(u("input",{"onUpdate:modelValue":e[18]||(e[18]=e=>t.artist=e),class:"form-control form-control-sm w-75",type:"text",autocomplete:"off",placeholder:"artist..."},null,512),[[m,t.artist]])]),u("div",_,[p(u("input",{"onUpdate:modelValue":e[19]||(e[19]=e=>t.title=e),class:"form-control form-control-sm w-75",type:"text",autocomplete:"off",placeholder:"title..."},null,512),[[m,t.title]])]),u("div",F,[u("button",{class:"btn btn-sm btn-outline-info mx-1",onClick:e[20]||(e[20]=e=>t.addSong(e))}," Add song "),u("button",{class:"btn btn-sm btn-outline-info mx-1",onClick:e[21]||(e[21]=e=>t.editSong(e))}," Edit song "),u("button",{class:"btn btn-sm btn-outline-danger mx-1",onClick:e[22]||(e[22]=e=>t.deleteSong(e))}," Delete song ")]),B,G,u("div",H,[p(u("input",{"onUpdate:modelValue":e[23]||(e[23]=e=>t.notes=e),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off",placeholder:"notes...",onKeyup:e[24]||(e[24]=c((e=>t.updateNotes(e)),["enter"]))},null,544),[[m,t.notes]]),u("button",{class:"btn btn-sm btn-outline-info w-25",onClick:e[25]||(e[25]=e=>t.updateNotes(e))}," Update notes ")]),u("div",q,[u("span",J,[Q,u("span",W,n(new Date(t.featuredArtist.lastReviewed)||"Never"),1)]),u("button",{class:"btn btn-sm btn-outline-info ms-3 w-25",onClick:e[26]||(e[26]=e=>t.updateLastReviewed(e))}," Set as today ")]),u("div",X,[u("span",Y,[Z,u("span",tt,n(t.featuredArtist.permanentlyDismiss?"true":"false"),1)]),u("button",{class:"btn btn-sm btn-outline-info ms-3 w-25",onClick:e[27]||(e[27]=e=>t.updatePermanentlyDismiss(e))}," Toggle ")])])])),_:1},8,["loaded"])};export{w as _};
