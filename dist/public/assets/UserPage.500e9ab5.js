var s=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;import{_ as i}from"./UserInfo.3df809de.js";import{_ as u}from"./DataTable.88222fe0.js";import{C as d}from"./CopyPaste.90b16e87.js";import{o as c,b as l,f as h,F as m,g as p,t as g,e as U,d as f,p as y,a as b,i as k,k as w,u as v,j as I,w as M,q as C,l as A,O as $,m as D,n as q}from"./vendor.df51a6ea.js";import"./ModalDialog.472e77e7.js";const x={name:"BotChatMessage",props:{messages:{type:Array,default:()=>[],required:!0},messageType:{type:String,required:!0},mongoId:{type:String,required:!0},users:{type:Array,default:()=>[]}},methods:{async sendMessages(s){if(confirm("Are you sure?")){let e="";switch(this.messageType){case"contest":e=`/admin/contests/${this.mongoId}/sendMessages`;break;case"showcase":e="/admin/users/sendMessages";break;default:return""}await this.$http.executePost(e,{users:this.users,messages:this.messages},s)}}}},S={class:"card card-body message-text small mb-2"};x.render=function(s,e,t,a,r,n){return c(),l("div",null,[h("div",S,[(c(!0),l(m,null,p(t.messages,((s,e)=>(c(),l("span",{key:e},g(s),1)))),128))]),t.users.length?(c(),l("a",{key:0,class:"btn btn-sm w-100 btn-success mb-2",onClick:e[0]||(e[0]=s=>n.sendMessages(s))}," Send messages ")):U("",!0)])};var _=f({name:"ShowcaseUserList",components:{CopyPaste:d,BotChatMessage:x},data:()=>({osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}),computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const t of s){e.find((s=>s.osuId==t.osuId))||e.push(t)}return e},messages(){const s=[];return s.push('hello! you\'re receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://osu.ppy.sh/home/news/2022-07-25-mappers-guild-updates#how-to-participate'),s.push("if you'd like to map an upcoming featured artist song for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("i'll link some upcoming artists in return"),s.push("thank you!! -pishifat"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)},async sendMessages(s,e){if(confirm("Are you sure you want to send messages to the user?")){const t=await this.$http.executePost("/admin/users/sendMessages",{users:[s],messages:this.messages},e);this.$http.isError(t)||this.$store.dispatch("updateToastMessages",{message:"sent",type:"info"})}}}});y("data-v-3a2c2678");const j={class:"container card card-body py-1 my-2"},O={key:1,class:"row"},P={key:0,class:"col-sm-3"},B=A(" osu! "),H=["onClick"],L={key:1,class:"col-sm-3"},E=A(" osu!taiko "),G=["onClick"],T={key:2,class:"col-sm-3"},F=A(" osu!catch "),R=["onClick"],N={key:3,class:"col-sm-3"},J=A(" osu!mania "),K=["onClick"];b(),_.render=function(s,e,t,a,r,n){const o=k("bot-chat-message"),i=k("user-link"),u=k("copy-paste"),d=w("bs-tooltip");return c(),l("div",j,[h("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=e=>s.findShowcaseUsers(e))}," Load FA showcase users "),s.uniqueUsers.length?(c(),v(o,{key:0,messages:s.messages,"message-type":"showcase","mongo-id":"",users:s.uniqueUsers},null,8,["messages","users"])):U("",!0),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(c(),l("div",O,[s.osuUsers.length?(c(),l("div",P,[B,I(u,{distinct:"osu"},{default:M((()=>[(c(!0),l(m,null,p(s.osuUsers,(e=>(c(),l("div",{key:e.id},[I(i,{user:e},null,8,["user"]),C(h("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:t=>s.sendMessages(e,t)},null,8,H),[[d,"send messages"]])])))),128))])),_:1})])):U("",!0),s.taikoUsers.length?(c(),l("div",L,[E,I(u,{distinct:"taiko"},{default:M((()=>[(c(!0),l(m,null,p(s.taikoUsers,(e=>(c(),l("div",{key:e.id},[I(i,{user:e},null,8,["user"]),C(h("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:t=>s.sendMessages(e,t)},null,8,G),[[d,"send messages"]])])))),128))])),_:1})])):U("",!0),s.catchUsers.length?(c(),l("div",T,[F,I(u,{distinct:"catch"},{default:M((()=>[(c(!0),l(m,null,p(s.catchUsers,(e=>(c(),l("div",{key:e.id},[I(i,{user:e},null,8,["user"]),C(h("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:t=>s.sendMessages(e,t)},null,8,R),[[d,"send messages"]])])))),128))])),_:1})])):U("",!0),s.maniaUsers.length?(c(),l("div",N,[J,I(u,{distinct:"mania"},{default:M((()=>[(c(!0),l(m,null,p(s.maniaUsers,(e=>(c(),l("div",{key:e.id},[I(i,{user:e},null,8,["user"]),C(h("button",{class:"btn tiny-button btn-outline-info ms-1",onClick:t=>s.sendMessages(e,t)},null,8,K),[[d,"send messages"]])])))),128))])),_:1})])):U("",!0)])):U("",!0)])},_.__scopeId="data-v-3a2c2678";var Q=f({name:"ShowcaseUserList",components:{CopyPaste:d},data:()=>({osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}),computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const t of s){e.find((s=>s.osuId==t.osuId))||e.push(t)}return e},messages(){const s=[];return s.push('hello! you\'re receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png'),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findContestHelperUsers(s){const e=await this.$http.executeGet("/admin/users/findContestHelperUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const V={class:"container card card-body py-1 my-2"},z={key:0,class:"row"},W={key:0,class:"col-sm-3"},X=A(" osu! "),Y={key:1,class:"col-sm-3"},Z=A(" osu!taiko "),ss={key:2,class:"col-sm-3"},es=A(" osu!catch "),ts={key:3,class:"col-sm-3"},as=A(" osu!mania ");Q.render=function(s,e,t,a,r,n){const o=k("copy-paste");return c(),l("div",V,[h("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=e=>s.findContestHelperUsers(e))}," Load contest helper users "),s.osuUsers&&s.taikoUsers&&s.catchUsers&&s.maniaUsers?(c(),l("div",z,[s.osuUsers.length?(c(),l("div",W,[X,I(o,{distinct:"osu"},{default:M((()=>[(c(!0),l(m,null,p(s.osuUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.taikoUsers.length?(c(),l("div",Y,[Z,I(o,{distinct:"taiko"},{default:M((()=>[(c(!0),l(m,null,p(s.taikoUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.catchUsers.length?(c(),l("div",ss,[es,I(o,{distinct:"catch"},{default:M((()=>[(c(!0),l(m,null,p(s.catchUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0),s.maniaUsers.length?(c(),l("div",ts,[as,I(o,{distinct:"mania"},{default:M((()=>[(c(!0),l(m,null,p(s.maniaUsers,(s=>(c(),l("div",{key:s.id},g(s.username),1)))),128))])),_:1})])):U("",!0)])):U("",!0)])};var rs=f({name:"DiscordHighlightGenerator",components:{CopyPaste:d},data:()=>({inputUsers:"",users:[]}),computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}});const ns={class:"container card card-body py-1 mb-4"},os={key:0};rs.render=function(s,e,t,a,r,n){const o=k("copy-paste");return c(),l("div",ns,[C(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>s.inputUsers=e),class:"form-control form-control-sm mx-2 mt-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[$,s.inputUsers]]),h("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[1]||(e[1]=e=>s.generateDiscordHighlights(e))}," Generate Discord highlights "),s.users.length?(c(),l("div",os,[I(o,null,{default:M((()=>[A(g(s.discordHighlights),1)])),_:1})])):U("",!0)])};var is,us,ds={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.queuedBadge=e.badge)},updateDiscordId(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.discordId=e.discordId)},updateBypassLogin(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.bypassLogin=e.bypassLogin)},updateIsShowcaseMapper(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.isShowcaseMapper=e.isShowcaseMapper)},updateIsMentorshipAdmin(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.isMentorshipAdmin=e.isMentorshipAdmin)}}},cs=f({components:{DataTable:u,UserInfo:i,ShowcaseUserList:_,ContestHelperUserList:Q,DiscordHighlightGenerator:rs},data:()=>({selectedUserId:""}),computed:(is=((s,e)=>{for(var t in e||(e={}))r.call(e,t)&&o(s,t,e[t]);if(a)for(var t of a(e))n.call(e,t)&&o(s,t,e[t]);return s})({},D({users:s=>s.usersAdmin.users})),us={selectedUser(){return this.users.find((s=>s.id===this.selectedUserId))}},e(is,t(us))),beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",ds)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},async created(){const s=await this.$http.initialRequest("/admin/users/load");this.$http.isError(s)||this.$store.commit("setUsers",s)},methods:{updateUser(s){const e=this.users.findIndex((e=>e.id==s.id));-1!==e&&(this.users[e]=s)}}});const ls={class:"container card card-body py-1"},hs={class:"row"},ms={class:"col-sm"};cs.render=function(s,e,t,a,r,n){const o=k("user-link"),i=k("data-table"),u=k("user-info"),d=k("showcase-user-list"),m=k("contest-helper-user-list"),p=k("discord-highlight-generator"),g=w("bs-tooltip");return c(),l("div",null,[h("div",ls,[h("div",hs,[h("div",ms,[I(i,{data:s.users,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":"#editUser","onUpdate:selectedId":e[0]||(e[0]=e=>s.selectedUserId=e)},{default:M((({obj:s})=>[h("td",null,[I(o,{user:s},null,8,["user"])]),h("td",null,[s.rank?C((c(),l("i",{key:0,class:q(["fas fa-crown","text-rank-"+s.rank])},null,2)),[[g,`rank ${s.rank} user`]]):U("",!0)]),h("td",{class:q({"bg-open":s.rank!=s.queuedBadge})},[s.queuedBadge?C((c(),l("i",{key:0,class:q(["fas fa-crown","text-rank-"+s.queuedBadge])},null,2)),[[g,`rank ${s.queuedBadge} user`]]):U("",!0)],2),h("td",{class:q({"bg-open":s.rank!=s.badge})},[s.badge?C((c(),l("i",{key:0,class:q(["fas fa-crown","text-rank-"+s.badge])},null,2)),[[g,`rank ${s.badge} user`]]):U("",!0)],2)])),_:1},8,["data"])])])]),I(u,{user:s.selectedUser,onUpdateUser:e[1]||(e[1]=e=>s.updateUser(e))},null,8,["user"]),I(d),I(m),I(p)])};export{cs as default};
