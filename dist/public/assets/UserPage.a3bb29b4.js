var s=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;import{_ as i}from"./UserInfo.51759e9c.js";import{_ as d}from"./DataTable.26a71e50.js";import{C as u}from"./CopyPaste.55439f96.js";import{B as c}from"./BotChatMessage.558a1b5d.js";import{d as l,i as h,o as m,b as p,f as g,q as U,e as f,j as b,w as y,F as k,g as w,t as v,k as I,G as P,N as j,m as $,L as D,n as x}from"./vendor.cb33bf1d.js";import"./ModalDialog.0d82a3c5.js";var B=l({name:"ShowcaseUserList",components:{CopyPaste:u,BotChatMessage:c},data:()=>({osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}),computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const t of s){e.find((s=>s.osuId==t.osuId))||e.push(t)}return e},messages(){const s=[];return s.push("hello"),s.push("test"),s.push("goodbye"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const A={class:"container card card-body py-1 mb-4"},q={key:1,class:"row"},C={key:0,class:"col-sm-3"},O=I(" osu! "),E={key:1,class:"col-sm-3"},M=I(" osu!taiko "),_={key:2,class:"col-sm-3"},G=I(" osu!catch "),L={key:3,class:"col-sm-3"},S=I(" osu!mania ");B.render=function(s,e,t,a,r,n){const o=h("bot-chat-message"),i=h("copy-paste");return m(),p("div",A,[g("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=e=>s.findShowcaseUsers(e))}," Load FA showcase users "),s.uniqueUsers.length?(m(),U(o,{key:0,messages:s.messages,"message-type":"showcase","mongo-id":"",users:s.uniqueUsers},null,8,["messages","users"])):f("",!0),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(m(),p("div",q,[s.osuUsers.length?(m(),p("div",C,[O,b(i,{distinct:"osu"},{default:y((()=>[(m(!0),p(k,null,w(s.osuUsers,(s=>(m(),p("div",{key:s.id},v(s.username),1)))),128))])),_:1})])):f("",!0),s.taikoUsers.length?(m(),p("div",E,[M,b(i,{distinct:"taiko"},{default:y((()=>[(m(!0),p(k,null,w(s.taikoUsers,(s=>(m(),p("div",{key:s.id},v(s.username),1)))),128))])),_:1})])):f("",!0),s.catchUsers.length?(m(),p("div",_,[G,b(i,{distinct:"catch"},{default:y((()=>[(m(!0),p(k,null,w(s.catchUsers,(s=>(m(),p("div",{key:s.id},v(s.username),1)))),128))])),_:1})])):f("",!0),s.maniaUsers.length?(m(),p("div",L,[S,b(i,{distinct:"mania"},{default:y((()=>[(m(!0),p(k,null,w(s.maniaUsers,(s=>(m(),p("div",{key:s.id},v(s.username),1)))),128))])),_:1})])):f("",!0)])):f("",!0)])};var H=l({name:"DiscordHighlightGenerator",components:{CopyPaste:u},data:()=>({inputUsers:"",users:[]}),computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}});const N={class:"container card card-body py-1 mb-4"},R={key:0};H.render=function(s,e,t,a,r,n){const o=h("copy-paste");return m(),p("div",N,[P(g("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>s.inputUsers=e),class:"form-control form-control-sm mx-2 mt-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[j,s.inputUsers]]),g("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[1]||(e[1]=e=>s.generateDiscordHighlights(e))}," Generate Discord highlights "),s.users.length?(m(),p("div",R,[b(o,null,{default:y((()=>[I(v(s.discordHighlights),1)])),_:1})])):f("",!0)])};var F,T,K={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.queuedBadge=e.badge)},updateDiscordId(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.discordId=e.discordId)},updateBypassLogin(s,e){const t=s.users.find((s=>s.id==e.userId));t&&(t.bypassLogin=e.bypassLogin)}}},Q=l({components:{DataTable:d,UserInfo:i,ShowcaseUserList:B,DiscordHighlightGenerator:H},data:()=>({selectedUserId:"",calculatingPoints:!1}),computed:(F=((s,e)=>{for(var t in e||(e={}))r.call(e,t)&&o(s,t,e[t]);if(a)for(var t of a(e))n.call(e,t)&&o(s,t,e[t]);return s})({},$({users:s=>s.usersAdmin.users})),T={selectedUser(){return this.users.find((s=>s.id===this.selectedUserId))}},e(F,t(T))),beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",K)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},async created(){const s=await this.$http.initialRequest("/admin/users/load");this.$http.isError(s)||this.$store.commit("setUsers",s)},methods:{updateUser(s){const e=this.users.findIndex((e=>e.id==s.id));-1!==e&&(this.users[e]=s)},async updateUserPoints(s){this.calculatingPoints=!0;await this.$http.executePost("/admin/users/updateAllUserPoints",{},s)&&(this.calculatingPoints=!1)}}});const V={class:"container card card-body py-1"},z={class:"row"},J={class:"col-sm"},W={key:0,class:"ms-2 small text-white-50"};Q.render=function(s,e,t,a,r,n){const o=h("user-link"),i=h("data-table"),d=h("user-info"),u=h("showcase-user-list"),c=h("discord-highlight-generator"),l=D("bs-tooltip");return m(),p("div",null,[g("div",V,[g("div",z,[g("div",J,[g("button",{class:"btn btn-sm btn-info w-100",onClick:e[0]||(e[0]=e=>s.updateUserPoints(e))}," Update user points "),s.calculatingPoints?(m(),p("span",W,"calculating points...")):f("",!0),b(i,{data:s.users,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":"#editUser","onUpdate:selectedId":e[1]||(e[1]=e=>s.selectedUserId=e)},{default:y((({obj:s})=>[g("td",null,[b(o,{user:s},null,8,["user"])]),g("td",null,[s.rank?P((m(),p("i",{key:0,class:x(["fas fa-crown","text-rank-"+s.rank])},null,2)),[[l,`rank ${s.rank} user`]]):f("",!0)]),g("td",{class:x({"bg-open":s.rank!=s.queuedBadge})},[s.queuedBadge?P((m(),p("i",{key:0,class:x(["fas fa-crown","text-rank-"+s.queuedBadge])},null,2)),[[l,`rank ${s.queuedBadge} user`]]):f("",!0)],2),g("td",{class:x({"bg-open":s.rank!=s.badge})},[s.badge?P((m(),p("i",{key:0,class:x(["fas fa-crown","text-rank-"+s.badge])},null,2)),[[l,`rank ${s.badge} user`]]):f("",!0)],2)])),_:1},8,["data"])])])]),b(d,{user:s.selectedUser,onUpdateUser:e[2]||(e[2]=e=>s.updateUser(e))},null,8,["user"]),b(u),b(c)])};export{Q as default};
