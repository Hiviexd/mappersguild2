import{U as S}from"./UserInfo-db3d1b19.js";import{D as M}from"./DataTable-63b3355d.js";import{d as b,m as D,_ as v,o as t,e as r,a as p,k as m,t as k,y as q,l as c,j as i,w as U,r as h,b as I,n as $,q as B,F as f,f as _,g as H}from"./index-94db5566.js";import{C}from"./CopyPaste-64d85793.js";import"./ModalDialog-08a8a569.js";const L=b({components:{DataTable:M,UserInfo:S},props:{groupedUsers:{type:Array,default:()=>[]},group:{type:String,required:!0}},data(){return{selectedUserId:""}},computed:{...D({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)}}}),E=["href"],G=p("i",{class:"fas fa-angle-down"},null,-1),N={key:0};function F(s,e,n,l,g,w){const a=h("user-link"),o=h("data-table"),u=h("user-info"),y=B("bs-tooltip");return t(),r("div",null,[p("a",{href:`#${s.group}`,"data-bs-toggle":"collapse",class:"ms-1",onClick:e[0]||(e[0]=q(()=>{},["prevent"]))},[p("h5",null,[m(k(s.group)+" ",1),G])],8,E),s.groupedUsers.length?c("",!0):(t(),r("div",N," (still loading) ")),i(o,{id:s.group,class:"collapse",data:s.groupedUsers,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":`#editUser${s.group}`,"onUpdate:selectedId":e[1]||(e[1]=d=>s.selectedUserId=d)},{default:U(({obj:d})=>[p("td",null,[i(a,{user:d},null,8,["user"])]),p("td",null,[d.rank?I((t(),r("i",{key:0,class:$(["fas fa-crown","text-rank-"+d.rank])},null,2)),[[y,`rank ${d.rank} user`]]):c("",!0)]),p("td",{class:$({"bg-open":d.rank!=d.queuedBadge})},[d.queuedBadge?I((t(),r("i",{key:0,class:$(["fas fa-crown","text-rank-"+d.queuedBadge])},null,2)),[[y,`rank ${d.queuedBadge} user`]]):c("",!0)],2),p("td",{class:$({"bg-open":d.rank!=d.badge})},[d.badge?I((t(),r("i",{key:0,class:$(["fas fa-crown","text-rank-"+d.badge])},null,2)),[[y,`rank ${d.badge} user`]]):c("",!0)],2)]),_:1},8,["id","data","custom-data-target"]),i(u,{user:s.selectedUser,"current-group":s.group},null,8,["user","current-group"])])}const V=v(L,[["render",F]]),T=b({name:"ShowcaseUserList",components:{CopyPaste:C},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const n of s)e.find(g=>g.osuId==n.osuId)||e.push(n);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://osu.ppy.sh/home/news/2022-07-25-mappers-guild-updates#how-to-participate`),s.push("if you'd like to map an upcoming featured artist song for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("i'll link some upcoming artists in return"),s.push("thank you!! -pishifat"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const P={class:"container card card-body py-1 my-2"},R={key:0,class:"row"},j={key:0,class:"col-sm-3"},O={key:1,class:"col-sm-3"},z={key:2,class:"col-sm-3"},J={key:3,class:"col-sm-3"};function K(s,e,n,l,g,w){const a=h("user-link"),o=h("copy-paste");return t(),r("div",P,[p("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=u=>s.findShowcaseUsers(u))}," Load FA showcase users "),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(t(),r("div",R,[s.osuUsers.length?(t(),r("div",j,[m(" osu! "),i(o,{distinct:"osu"},{default:U(()=>[(t(!0),r(f,null,_(s.osuUsers,u=>(t(),r("div",{key:u.id},[i(a,{user:u},null,8,["user"])]))),128))]),_:1})])):c("",!0),s.taikoUsers.length?(t(),r("div",O,[m(" osu!taiko "),i(o,{distinct:"taiko"},{default:U(()=>[(t(!0),r(f,null,_(s.taikoUsers,u=>(t(),r("div",{key:u.id},[i(a,{user:u},null,8,["user"])]))),128))]),_:1})])):c("",!0),s.catchUsers.length?(t(),r("div",z,[m(" osu!catch "),i(o,{distinct:"catch"},{default:U(()=>[(t(!0),r(f,null,_(s.catchUsers,u=>(t(),r("div",{key:u.id},[i(a,{user:u},null,8,["user"])]))),128))]),_:1})])):c("",!0),s.maniaUsers.length?(t(),r("div",J,[m(" osu!mania "),i(o,{distinct:"mania"},{default:U(()=>[(t(!0),r(f,null,_(s.maniaUsers,u=>(t(),r("div",{key:u.id},[i(a,{user:u},null,8,["user"])]))),128))]),_:1})])):c("",!0)])):c("",!0)])}const Q=v(T,[["render",K],["__scopeId","data-v-4d971cb3"]]),W=b({name:"ShowcaseUserList",components:{CopyPaste:C},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const n of s)e.find(g=>g.osuId==n.osuId)||e.push(n);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png`),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findContestHelperUsers(s){const e=await this.$http.executeGet("/admin/users/findContestHelperUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}}),X={class:"container card card-body py-1 my-2"},Y={key:0,class:"row"},Z={key:0,class:"col-sm-3"},x={key:1,class:"col-sm-3"},ss={key:2,class:"col-sm-3"},es={key:3,class:"col-sm-3"};function ts(s,e,n,l,g,w){const a=h("copy-paste");return t(),r("div",X,[p("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=o=>s.findContestHelperUsers(o))}," Load contest helper users "),s.osuUsers&&s.taikoUsers&&s.catchUsers&&s.maniaUsers?(t(),r("div",Y,[s.osuUsers.length?(t(),r("div",Z,[m(" osu! "),i(a,{distinct:"osu"},{default:U(()=>[(t(!0),r(f,null,_(s.osuUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):c("",!0),s.taikoUsers.length?(t(),r("div",x,[m(" osu!taiko "),i(a,{distinct:"taiko"},{default:U(()=>[(t(!0),r(f,null,_(s.taikoUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):c("",!0),s.catchUsers.length?(t(),r("div",ss,[m(" osu!catch "),i(a,{distinct:"catch"},{default:U(()=>[(t(!0),r(f,null,_(s.catchUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):c("",!0),s.maniaUsers.length?(t(),r("div",es,[m(" osu!mania "),i(a,{distinct:"mania"},{default:U(()=>[(t(!0),r(f,null,_(s.maniaUsers,o=>(t(),r("div",{key:o.id},k(o.username),1))),128))]),_:1})])):c("",!0)])):c("",!0)])}const rs=v(W,[["render",ts]]),os=b({name:"DiscordHighlightGenerator",components:{CopyPaste:C},data(){return{inputUsers:"",users:[]}},computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}}),ns={class:"container card card-body py-1 mb-4"},is={key:0};function as(s,e,n,l,g,w){const a=h("copy-paste");return t(),r("div",ns,[I(p("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.inputUsers=o),class:"form-control form-control-sm mx-2 mt-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[H,s.inputUsers]]),p("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[1]||(e[1]=o=>s.generateDiscordHighlights(o))}," Generate Discord highlights "),s.users.length?(t(),r("div",is,[i(a,null,{default:U(()=>[m(k(s.discordHighlights),1)]),_:1})])):c("",!0)])}const us=v(os,[["render",as]]);var A=(s=>(s.User="user",s.Admin="admin",s.Secret="secret",s))(A||{});const ds={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const n=s.users.find(l=>l.id==e.userId);n&&(n.queuedBadge=e.badge)},updateDiscordId(s,e){const n=s.users.find(l=>l.id==e.userId);n&&(n.discordId=e.discordId)},updateIsShowcaseMapper(s,e){const n=s.users.find(l=>l.id==e.userId);n&&(n.isShowcaseMapper=e.isShowcaseMapper)},updateIsMentorshipAdmin(s,e){const n=s.users.find(l=>l.id==e.userId);n&&(n.isMentorshipAdmin=e.isMentorshipAdmin)}}},cs=ds,ls=b({components:{AdminUserTable:V,ShowcaseUserList:Q,ContestHelperUserList:rs,DiscordHighlightGenerator:us},data(){return{selectedUserId:""}},computed:{...D({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)},normalUsers(){return this.users.filter(s=>s.group==A.User)},showcaseUsers(){return this.users.filter(s=>s.group==A.Secret)},admins(){return this.users.filter(s=>s.group==A.Admin)}},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",cs)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},async created(){const s=await this.$http.initialRequest("/admin/users/load");this.$http.isError(s)||this.$store.commit("setUsers",s)}}),ps={class:"container card card-body"},hs=p("h4",{class:"mt-2"}," Groups ",-1);function ms(s,e,n,l,g,w){const a=h("admin-user-table"),o=h("showcase-user-list"),u=h("contest-helper-user-list"),y=h("discord-highlight-generator");return t(),r("div",null,[p("div",ps,[hs,i(a,{"grouped-users":s.admins,group:"admin"},null,8,["grouped-users"]),i(a,{"grouped-users":s.showcaseUsers,group:"secret"},null,8,["grouped-users"]),i(a,{"grouped-users":s.normalUsers,group:"user"},null,8,["grouped-users"])]),i(o),i(u),i(y)])}const ys=v(ls,[["render",ms]]);export{ys as default};
