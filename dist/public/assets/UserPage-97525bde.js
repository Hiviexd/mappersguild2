import{U as q}from"./UserInfo-36e429ba.js";import{D as E}from"./DataTable-43ea3d0e.js";import{d as k,m as H,_ as w,o as r,e as o,a as n,j as U,t as $,y as G,i as a,w as m,b,n as I,k as p,p as h,q as V,F as g,r as _,s as O,u as P,v as N,f as S,c as R,g as D}from"./index-19549f80.js";import{C as A}from"./CopyPaste-eb90c2ea.js";import{A as T}from"./AddUserManually-b5fe5e54.js";import"./ModalDialog-834f1064.js";const F=k({components:{DataTable:E,UserInfo:q},props:{groupedUsers:{type:Array,default:()=>[]},group:{type:String,required:!0}},data(){return{selectedUserId:""}},computed:{...H({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)}}}),W=["href"],K=n("i",{class:"fas fa-angle-down"},null,-1);function j(s,e,i,u,f,v){const d=h("user-link"),t=h("data-table"),l=h("user-info"),M=V("bs-tooltip");return r(),o("div",null,[n("a",{href:`#${s.group}`,"data-bs-toggle":"collapse",class:"ms-1",onClick:e[0]||(e[0]=G(()=>{},["prevent"]))},[n("h6",null,[U($(s.group)+" ",1),K])],8,W),a(t,{id:s.group,class:I(s.groupedUsers.length>30?"collapse":"show"),data:s.groupedUsers,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":`#editUser${s.group}`,"onUpdate:selectedId":e[1]||(e[1]=c=>s.selectedUserId=c)},{default:m(({obj:c})=>[n("td",null,[a(d,{user:c},null,8,["user"])]),n("td",null,[c.rank?b((r(),o("i",{key:0,class:I(["fas fa-crown","text-rank-"+c.rank])},null,2)),[[M,`rank ${c.rank} user`]]):p("",!0)]),n("td",{class:I({"bg-open":c.rank!=c.queuedBadge})},[c.queuedBadge?b((r(),o("i",{key:0,class:I(["fas fa-crown","text-rank-"+c.queuedBadge])},null,2)),[[M,`rank ${c.queuedBadge} user`]]):p("",!0)],2),n("td",{class:I({"bg-open":c.rank!=c.badge})},[c.badge?b((r(),o("i",{key:0,class:I(["fas fa-crown","text-rank-"+c.badge])},null,2)),[[M,`rank ${c.badge} user`]]):p("",!0)],2)]),_:1},8,["id","class","data","custom-data-target"]),a(l,{user:s.selectedUser,"current-group":s.group},null,8,["user","current-group"])])}const z=w(F,[["render",j]]),J=k({name:"ShowcaseUserList",components:{CopyPaste:A},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const i of s)e.find(f=>f.osuId==i.osuId)||e.push(i);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://osu.ppy.sh/home/news/2022-07-25-mappers-guild-updates#how-to-participate`),s.push("if you'd like to map an upcoming featured artist song for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("i'll link some upcoming artists in return"),s.push("thank you!! -pishifat"),s}},methods:{async findShowcaseUsers(s){const e=await this.$http.executeGet("/admin/users/findShowcaseUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}});const Q=s=>(O("data-v-902d16a2"),s=s(),P(),s),X={class:"container card card-body py-1"},Y=Q(()=>n("h5",{class:"mt-2"}," FA showcase users by mode ",-1)),Z={key:0,class:"row"},x={key:0,class:"col-sm-3"},ss={key:1,class:"col-sm-3"},es={key:2,class:"col-sm-3"},ts={key:3,class:"col-sm-3"};function rs(s,e,i,u,f,v){const d=h("user-link"),t=h("copy-paste");return r(),o("div",X,[Y,n("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=l=>s.findShowcaseUsers(l))}," Load users "),s.osuUsers.length&&s.taikoUsers.length&&s.catchUsers.length&&s.maniaUsers.length?(r(),o("div",Z,[s.osuUsers.length?(r(),o("div",x,[U(" osu! "),a(t,{distinct:"osu"},{default:m(()=>[(r(!0),o(g,null,_(s.osuUsers,l=>(r(),o("div",{key:l.id},[a(d,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.taikoUsers.length?(r(),o("div",ss,[U(" osu!taiko "),a(t,{distinct:"taiko"},{default:m(()=>[(r(!0),o(g,null,_(s.taikoUsers,l=>(r(),o("div",{key:l.id},[a(d,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.catchUsers.length?(r(),o("div",es,[U(" osu!catch "),a(t,{distinct:"catch"},{default:m(()=>[(r(!0),o(g,null,_(s.catchUsers,l=>(r(),o("div",{key:l.id},[a(d,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0),s.maniaUsers.length?(r(),o("div",ts,[U(" osu!mania "),a(t,{distinct:"mania"},{default:m(()=>[(r(!0),o(g,null,_(s.maniaUsers,l=>(r(),o("div",{key:l.id},[a(d,{user:l},null,8,["user"])]))),128))]),_:1})])):p("",!0)])):p("",!0)])}const os=w(J,[["render",rs],["__scopeId","data-v-902d16a2"]]),ns=k({name:"ShowcaseUserList",components:{CopyPaste:A},data(){return{osuUsers:[],taikoUsers:[],catchUsers:[],maniaUsers:[]}},computed:{uniqueUsers(){const s=this.osuUsers.concat(this.taikoUsers,this.catchUsers,this.maniaUsers),e=[];for(const i of s)e.find(f=>f.osuId==i.osuId)||e.push(i);return e},messages(){const s=[];return s.push(`hello! you're receiving this message because you marked yourself as a "FA showcase mapper" in the mappers guild https://i.imgur.com/aJt9uL1.png`),s.push("if you'd like to map an upcoming featured artist for an announcement in October-December, send me some of the genres you'd like to map!"),s.push("thank you!! -pishifat"),s}},methods:{async findContestHelperUsers(s){const e=await this.$http.executeGet("/admin/users/findContestHelperUsers",s);e&&!e.error&&(this.osuUsers=e.osuUsers,this.taikoUsers=e.taikoUsers,this.catchUsers=e.catchUsers,this.maniaUsers=e.maniaUsers)}}}),is={class:"container card card-body py-1"},as=n("h5",{class:"mt-2"}," Contest helper users by mode ",-1),us={key:0,class:"row"},ds={key:0,class:"col-sm-3"},cs={key:1,class:"col-sm-3"},ls={key:2,class:"col-sm-3"},ps={key:3,class:"col-sm-3"};function hs(s,e,i,u,f,v){const d=h("copy-paste");return r(),o("div",is,[as,n("button",{class:"btn btn-sm w-100 btn-outline-info mb-3",onClick:e[0]||(e[0]=t=>s.findContestHelperUsers(t))}," Load users "),s.osuUsers&&s.taikoUsers&&s.catchUsers&&s.maniaUsers?(r(),o("div",us,[s.osuUsers.length?(r(),o("div",ds,[U(" osu! "),a(d,{distinct:"osu"},{default:m(()=>[(r(!0),o(g,null,_(s.osuUsers,t=>(r(),o("div",{key:t.id},$(t.username),1))),128))]),_:1})])):p("",!0),s.taikoUsers.length?(r(),o("div",cs,[U(" osu!taiko "),a(d,{distinct:"taiko"},{default:m(()=>[(r(!0),o(g,null,_(s.taikoUsers,t=>(r(),o("div",{key:t.id},$(t.username),1))),128))]),_:1})])):p("",!0),s.catchUsers.length?(r(),o("div",ls,[U(" osu!catch "),a(d,{distinct:"catch"},{default:m(()=>[(r(!0),o(g,null,_(s.catchUsers,t=>(r(),o("div",{key:t.id},$(t.username),1))),128))]),_:1})])):p("",!0),s.maniaUsers.length?(r(),o("div",ps,[U(" osu!mania "),a(d,{distinct:"mania"},{default:m(()=>[(r(!0),o(g,null,_(s.maniaUsers,t=>(r(),o("div",{key:t.id},$(t.username),1))),128))]),_:1})])):p("",!0)])):p("",!0)])}const ms=w(ns,[["render",hs]]),fs=k({name:"ResetHasMerchAccess",components:{CopyPaste:A},data(){return{osuIdInput:"",field:"",users:[]}},methods:{async reset(s){if(confirm("Are you sure?")){const i=await this.$http.executePost("/admin/users/resetMerchUsers",{osuIdInput:this.osuIdInput,field:this.field},s);i&&!i.error&&this.$store.dispatch("updateToastMessages",{message:`reset ${i} users`,type:"success"}),this.users=[]}},async loadUsers(s){const e=await this.$http.executePost("/admin/users/loadMerchUsers",{field:this.field},s);e&&!e.error&&(this.users=e,this.$store.dispatch("updateToastMessages",{message:`loaded ${e.length} users`,type:"success"}))}}}),Us={class:"container card card-body py-1"},gs=n("h5",{class:"mt-2"}," Reset Merch ",-1),_s={class:"mb-2"},$s={class:"row"},bs={class:"col-sm-6"},ys=n("option",{disabled:"",value:""}," Select a field ",-1),ks=n("option",{value:"HasMerchAccess"}," hasMerchAccess ",-1),ws=n("option",{value:"HasSpecificMerchOrder"}," hasSpecificMerchOrder ",-1),vs=n("option",{value:"WorldCupMerch"}," worldCupMerch ",-1),Is=[ys,ks,ws,vs],Ms={class:"col-sm-6"},As=["disabled"],Cs=["disabled"];function Ss(s,e,i,u,f,v){const d=h("copy-paste");return r(),o("div",Us,[gs,n("div",_s,[n("div",$s,[n("div",bs,[b(n("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.field=t),class:"form-select form-select-sm mb-2"},Is,512),[[N,s.field]])]),n("div",Ms,[b(n("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.osuIdInput=t),class:"form-control form-control-sm mb-2",autocomplete:"off",placeholder:"exclude osuIds (comma separated) from reset..."},null,512),[[S,s.osuIdInput]])])]),n("button",{disabled:!s.field.length,class:"btn btn-sm btn-outline-info w-25 me-2",onClick:e[2]||(e[2]=t=>s.loadUsers(t))}," Load users ",8,As),n("button",{disabled:!s.field.length,class:"btn btn-sm btn-outline-danger w-25",onClick:e[3]||(e[3]=t=>s.reset(t))}," Reset ",8,Cs),s.users.length?(r(),R(d,{key:0,class:"col-sm-6"},{default:m(()=>[n("ol",null,[(r(!0),o(g,null,_(s.users,t=>(r(),o("li",{key:t.id},$(t.username),1))),128))])]),_:1})):p("",!0)])])}const Hs=w(fs,[["render",Ss]]),Ds=k({name:"DiscordHighlightGenerator",components:{CopyPaste:A},data(){return{inputUsers:"",users:[]}},computed:{discordHighlights(){let s="";for(const e of this.users)s+=`<@${e.discordId}> `;return s}},methods:{async generateDiscordHighlights(s){const e=await this.$http.executePost("/admin/users/findInputUsers",{inputUsers:this.inputUsers},s);e&&!e.error&&(this.users=e.users)}}}),Ls={class:"container card card-body py-1"},Bs=n("h5",{class:"mt-2"}," Generate Discord highlights ",-1),qs={key:0};function Es(s,e,i,u,f,v){const d=h("copy-paste");return r(),o("div",Ls,[Bs,b(n("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.inputUsers=t),class:"form-control form-control-sm mx-2 mb-2 w-100",type:"text",autocomplete:"off",placeholder:"usernames separated by newlines..."},null,512),[[S,s.inputUsers]]),n("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[1]||(e[1]=t=>s.generateDiscordHighlights(t))}," Generate Discord highlights "),s.users.length?(r(),o("div",qs,[a(d,null,{default:m(()=>[U($(s.discordHighlights),1)]),_:1})])):p("",!0)])}const Gs=w(Ds,[["render",Es]]),Vs=k({name:"DiscordHighlightGenerator",components:{CopyPaste:A},data(){return{osuId:null,output:null}},methods:{async searchUser(s){const e=await this.$http.executePost("/admin/users/searchUser",{osuId:this.osuId},s);e&&!e.error&&(this.output=e)}}}),Os={class:"container card card-body py-1"},Ps=n("h5",{class:"mt-2"}," Search user in osu! API ",-1),Ns={key:0};function Rs(s,e,i,u,f,v){const d=h("copy-paste");return r(),o("div",Os,[Ps,b(n("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.osuId=t),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=D(t=>s.searchUser(t),["enter"]))},null,544),[[S,s.osuId]]),n("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[2]||(e[2]=t=>s.searchUser(t))}," Load user "),s.output?(r(),o("div",Ns,[a(d,null,{default:m(()=>[n("pre",null,$(s.output),1)]),_:1})])):p("",!0)])}const Ts=w(Vs,[["render",Rs]]);var C=(s=>(s.User="user",s.Admin="admin",s.Secret="secret",s))(C||{});const Fs={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.queuedBadge=e.badge)},updateDiscordId(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.discordId=e.discordId)},updateIsShowcaseMapper(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.isShowcaseMapper=e.isShowcaseMapper)},updateIsMentorshipAdmin(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.isMentorshipAdmin=e.isMentorshipAdmin)},updateIsWorldCupHelper(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.isWorldCupHelper=e.isWorldCupHelper)},updateHasMerchAccess(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.hasMerchAccess=e.hasMerchAccess)},updateHasSpecificMerchOrder(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.hasSpecificMerchOrder=e.hasSpecificMerchOrder)},updateWorldCupMerch(s,e){const i=s.users.find(u=>u.id==e.userId);i&&(i.worldCupMerch=e.worldCupMerch)}}},Ws=Fs,Ks=k({components:{AdminUserTable:z,ShowcaseUserList:os,ContestHelperUserList:ms,ResetMerch:Hs,DiscordHighlightGenerator:Gs,OsuApiUserSearch:Ts,AddUserManually:T},data(){return{selectedUserId:"",userInput:""}},computed:{...H({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)},normalUsers(){return this.users.filter(s=>s.group==C.User)},showcaseUsers(){return this.users.filter(s=>s.group==C.Secret)},admins(){return this.users.filter(s=>s.group==C.Admin)}},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",Ws)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},methods:{async loadAllUsers(s){const e=await this.$http.executeGet("/admin/users/load",s);this.$http.isError(e)||this.$store.commit("setUsers",e)},async searchUser(s){const e=await this.$http.executeGet(`/admin/users/searchUser/${this.userInput}`,s);this.$http.isError(e)||this.$store.commit("setUsers",[e])}}}),js={class:"container card card-body"},zs=n("h4",null," Load users ",-1),Js=n("h5",{class:"mt-2"}," Single user ",-1),Qs=n("h5",{class:"mt-2"}," All users ",-1),Xs={key:0},Ys=n("hr",null,null,-1),Zs=n("hr",null,null,-1);function xs(s,e,i,u,f,v){const d=h("admin-user-table"),t=h("osu-api-user-search"),l=h("add-user-manually"),M=h("reset-merch"),c=h("showcase-user-list"),L=h("contest-helper-user-list"),B=h("discord-highlight-generator");return r(),o("div",null,[n("div",js,[zs,Js,b(n("input",{"onUpdate:modelValue":e[0]||(e[0]=y=>s.userInput=y),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=D(y=>s.searchUser(y),["enter"]))},null,544),[[S,s.userInput]]),n("button",{class:"btn btn-sm w-100 btn-outline-info mb-2",onClick:e[2]||(e[2]=y=>s.searchUser(y))}," Load user "),Qs,n("button",{class:"btn btn-sm w-100 btn-outline-info",onClick:e[3]||(e[3]=y=>s.loadAllUsers(y))}," Load all users "),s.users.length?(r(),o("div",Xs,[a(d,{"grouped-users":s.admins,group:"admin"},null,8,["grouped-users"]),a(d,{"grouped-users":s.showcaseUsers,group:"secret"},null,8,["grouped-users"]),a(d,{"grouped-users":s.normalUsers,group:"user"},null,8,["grouped-users"])])):p("",!0)]),Ys,a(t,{class:"mb-2"}),a(l,{class:"mb-2"}),Zs,a(M,{class:"mb-2"}),a(c,{class:"mb-2"}),a(L,{class:"mb-2"}),a(B,{class:"mb-2"})])}const ie=w(Ks,[["render",xs]]);export{ie as default};
