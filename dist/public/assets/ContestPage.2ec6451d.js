var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,s,n)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&r(t,s,e[s]);if(n)for(var s of n(e))i.call(e,s)&&r(t,s,e[s]);return t},l=(t,n)=>e(t,s(n));import{d,m as c,h as u,o as p,b as m,f as h,t as g,s as f,e as y,l as b,H as v,q as C,k as I,I as w,p as S,a as k,v as $,x,F as j,g as U,j as M,n as D,w as A,O as T,y as E}from"./vendor.b9ef672a.js";import{_ as V}from"./ContestCard.c9068864.js";import{_ as J}from"./UserLinkList.9aab0eb3.js";import{_ as N}from"./CopyPaste.4b23b3fb.js";import{_ as L}from"./ModalDialog.4a9168b4.js";import"./index.59af7da6.js";var F=d({name:"ContestHeader",components:{UserLinkList:J},props:{contestId:{type:String,required:!0},name:{type:String,required:!0},url:{type:String,default:null},creators:{type:Array,required:!0}},data:()=>({showCreatorInput:!1,creatorInput:""}),computed:l(a({},c(["loggedInUser"])),{creatorIds(){return this.creators.map((t=>t.id))}}),watch:{creators(){this.generateUsernamesString()}},created(){this.generateUsernamesString()},methods:{generateUsernamesString(){const t=this.creators.map((t=>t.username)).join(", ");this.creatorInput=t},async updateCreators(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateCreators`,{creatorInput:this.creatorInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest creators",type:"info"}),this.$store.commit("updateCreators",{contestId:this.contestId,creators:e}),this.showCreatorInput=!1)}}});const q=["href"],R={key:1},P={class:"form-inline"},_={class:"form-group"},O=I(" hosted by "),B=[h("i",{class:"fas fa-edit"},null,-1)],z=h("hr",null,null,-1);F.render=function(t,e,s,n,o,i){const r=u("user-link-list");return p(),m("div",null,[h("h4",null,[t.url?(p(),m("a",{key:0,href:t.url,target:"_blank"},g(t.name),9,q)):(p(),m("span",R,g(t.name),1))]),h("div",P,[h("div",_,[O,t.showCreatorInput?y("",!0):(p(),f(r,{key:0,users:t.creators},null,8,["users"])),t.showCreatorInput?b((p(),m("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=e=>t.creatorInput=e),class:"ml-1 form-control w-50 d-inline form-control-sm",onChange:e[1]||(e[1]=e=>t.updateCreators(e))},null,544)),[[v,t.creatorInput]]):y("",!0),t.creatorIds.includes(t.loggedInUser.id)?(p(),m("a",{key:2,href:"#",class:"ms-1",onClick:e[2]||(e[2]=C((e=>t.showCreatorInput=!t.showCreatorInput),["prevent"]))},B)):y("",!0)])]),z])};var G=d({name:"ContestBanner",props:{bannerUrl:{type:String,required:!0}}});const H=["src"],K=h("hr",null,null,-1);G.render=function(t,e,s,n,o,i){return p(),m("div",null,[h("img",{class:"w-100",src:t.bannerUrl},null,8,H),K])};var Y=d({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null},contestEnd:{type:String,default:null}},data(){return{newContestStart:this.contestStart,newContestEnd:this.contestEnd}},watch:{contestId(){this.newContestStart=this.contestStart,this.newContestEnd=this.contestEnd}},methods:{async updateContestStart(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestStart`,{date:this.newContestStart},t);this.$http.isError(e)?this.newContestStart=this.contestStart:(this.$store.dispatch("updateToastMessages",{message:"Updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:e}))},async updateContestEnd(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestEnd`,{date:this.newContestEnd},t);this.$http.isError(e)?this.newContestEnd=this.contestEnd:(this.$store.dispatch("updateToastMessages",{message:"Updated contest end date",type:"info"}),this.$store.commit("updateContestEnd",{contestId:this.contestId,contestEnd:e}))}}});const Q={class:"row"},W={class:"col-sm-6"},X={class:"form-inline w-100"},Z=I(" Submissions open: "),tt={class:"input-group"},et={class:"input-group-append"},st={class:"col-sm-6"},nt={class:"form-inline w-100"},ot=I(" Submissions close: "),it={class:"input-group"},rt={class:"input-group-append"};Y.render=function(t,e,s,n,o,i){return p(),m("div",Q,[h("div",W,[h("div",X,[Z,h("div",tt,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newContestStart=e),class:"ml-1 form-control",type:"date",onKeyup:e[1]||(e[1]=w((e=>t.updateContestStart(e)),["enter"]))},null,544),[[v,t.newContestStart]]),h("div",et,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.updateContestStart(e))}," Save date ")])])])]),h("div",st,[h("div",nt,[ot,h("div",it,[b(h("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.newContestEnd=e),class:"ml-1 form-control",type:"date",onKeyup:e[4]||(e[4]=w((e=>t.updateContestEnd(e)),["enter"]))},null,544),[[v,t.newContestEnd]]),h("div",rt,[h("button",{class:"btn btn-primary",href:"#",onClick:e[5]||(e[5]=e=>t.updateContestEnd(e))}," Save date ")])])])])])};var at=d({name:"TitleEdit",props:{contestId:{type:String,required:!0},name:{type:String,default:null}},data(){return{newName:this.name}},watch:{contestId(){this.newName=this.name}},methods:{async updateName(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateName`,{name:this.newName},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest name",type:"info"}),this.$store.commit("updateName",{contestId:this.contestId,name:e}))}}});const lt={class:"form-inline w-100 mt-2"},dt=I(" Name: ");at.render=function(t,e,s,n,o,i){return p(),m("div",lt,[dt,b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newName=e),class:"ml-1 form-control d-inline w-75",onChange:e[1]||(e[1]=e=>t.updateName(e))},null,544),[[v,t.newName]])])};var ct=d({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null},isApproved:{type:Boolean,required:!0}},data(){return{newStatus:this.status}},watch:{contestId(){this.newStatus=this.status}},methods:{async updateStatus(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateStatus`,{status:this.newStatus},t);this.$http.isError(e)?this.newStatus=this.status:(this.$store.dispatch("updateToastMessages",{message:"Updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:e}))}}});S("data-v-675a9cd3");const ut=I(" Status: "),pt=[x('<option value="" disabled data-v-675a9cd3> Select a status </option><option value="hidden" data-v-675a9cd3> Hidden </option><option value="beatmapping" data-v-675a9cd3> Beatmapping </option><option value="screening" data-v-675a9cd3> Screening </option><option value="judging" data-v-675a9cd3> Judging </option><option value="locked" data-v-675a9cd3> Locked (prevents editing while you publish results) </option><option value="complete" data-v-675a9cd3> Complete </option>',7)],mt={key:0,class:"small text-danger mt-2"};k(),ct.render=function(t,e,s,n,o,i){return p(),m("div",null,[ut,b(h("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newStatus=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateStatus(e))},pt,544),[[$,t.newStatus]]),t.isApproved||"hidden"===t.status?y("",!0):(p(),m("div",mt,' Your contest has been queued for approval. Once approved, it will appear in "Active contests". '))])},ct.__scopeId="data-v-675a9cd3";var ht=d({name:"ModeInfo",props:{contestId:{type:String,required:!0},mode:{type:String,default:""}},data(){return{newMode:this.mode}},watch:{contestId(){this.newMode=this.mode}},methods:{async updateMode(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateMode`,{mode:this.newMode},t);this.$http.isError(e)?this.newMode=this.mode:(this.$store.dispatch("updateToastMessages",{message:"Updated contest mode",type:"info"}),this.$store.commit("updateMode",{contestId:this.contestId,mode:e}))}}});S("data-v-5ffc0e64");const gt=I(" Mode: "),ft=[x('<option value="" selected disabled data-v-5ffc0e64> Select a mode </option><option value="osu" data-v-5ffc0e64> osu! </option><option value="taiko" data-v-5ffc0e64> osu!taiko </option><option value="catch" data-v-5ffc0e64> osu!catch </option><option value="mania" data-v-5ffc0e64> osu!mania </option>',5)];k(),ht.render=function(t,e,s,n,o,i){return p(),m("div",null,[gt,b(h("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newMode=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateMode(e))},ft,544),[[$,t.newMode]])])},ht.__scopeId="data-v-5ffc0e64";var yt=d({name:"AnonymizationGuide",props:{contestId:{type:String,required:!0}},data:()=>({csvOutput:"",errors:[]}),methods:{async applyCsvOutput(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/syncAnonymousNames`,{csv:this.csvOutput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated submission names",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e.submissions}),e.errors.length&&(this.errors=e.errors))}}});const bt={class:"mx-4"},vt=I(" Submissions must be anonymized locally, then transferred to Mappers' Guild. You have 3 options: "),Ct=h("ol",null,[h("li",null,[I("Follow instructions on the "),h("a",{href:"https://github.com/pishifat/contest-anonymization#readme",target:"_blank"},"contest anonymization GitHub repository"),I(".")]),h("li",null,[I("Ask "),h("a",{href:"https://osu.ppy.sh/users/3178418",target:"_blank"},"pishifat"),I(" to do option 1 for you.")]),h("li",null,"Manually anonymize entries (please don't waste your time with this).")],-1),It=h("span",{class:"small text-secondary"},[I("If you succeed with step 1, paste your "),h("code",null,".csv"),I(" output here as raw text to replace anonymized names:")],-1),wt={class:"row"},St={class:"col-sm-10"},kt={class:"col-sm-2"},$t={key:0,class:"small text-warning"},xt=I(" The following submissions could not be processed and will need to be renamed manually: ");yt.render=function(t,e,s,n,o,i){return p(),m("div",bt,[vt,Ct,h("div",null,[It,h("div",wt,[h("div",St,[b(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.csvOutput=e),class:"form-control form-inline",rows:"1"},null,512),[[v,t.csvOutput]])]),h("div",kt,[h("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:e[1]||(e[1]=e=>t.applyCsvOutput(e))}," Save ")])]),t.errors.length?(p(),m("div",$t,[xt,h("ul",null,[(p(!0),m(j,null,U(t.errors,(t=>(p(),m("li",{key:t},g(t),1)))),128))])])):y("",!0)])])};var jt=d({name:"Urls",props:{contestId:{type:String,required:!0},url:{type:String,default:null},osuContestListingUrl:{type:String,default:null},resultsUrl:{type:String,default:null},bannerUrl:{type:String,default:null}},data(){return{newUrl:this.url,newOsuContestListingUrl:this.osuContestListingUrl,newResultsUrl:this.resultsUrl,newBannerUrl:this.bannerUrl}},watch:{contestId(){this.newUrl=this.url,this.newOsuContestListingUrl=this.osuContestListingUrl,this.newResultsUrl=this.resultsUrl,this.newBannerUrl=this.bannerUrl}},methods:{async updateUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateUrl`,{url:this.newUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest url",type:"info"}),this.$store.commit("updateUrl",{contestId:this.contestId,url:e}))},async updateOsuContestListingUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateOsuContestListingUrl`,{url:this.newOsuContestListingUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated osu! contest listing url",type:"info"}),this.$store.commit("updateOsuContestListingUrl",{contestId:this.contestId,osuContestListingUrl:e}))},async updateResultsUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateResultsUrl`,{url:this.newResultsUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated results url",type:"info"}),this.$store.commit("updateResultsUrl",{contestId:this.contestId,resultsUrl:e}))},async updateBannerUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateBannerUrl`,{url:this.newBannerUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated banner url",type:"info"}),this.$store.commit("updateBannerUrl",{contestId:this.contestId,bannerUrl:e}))}}});const Ut={class:"row"},Mt={class:"col-sm-6"},Dt={class:"form-inline w-100"},At=I(" Contest details URL: "),Tt={class:"col-sm-6"},Et={class:"form-inline w-100"},Vt=I(" osu! contest listing URL: "),Jt={class:"col-sm-6"},Nt={class:"form-inline w-100"},Lt=I(" Results URL: "),Ft={class:"col-sm-6"},qt={class:"form-inline w-100"},Rt=I(" Banner URL: ");jt.render=function(t,e,s,n,o,i){return p(),m("div",Ut,[h("div",Mt,[h("div",Dt,[At,b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newUrl=e),class:"ml-1 form-control",onChange:e[1]||(e[1]=e=>t.updateUrl(e))},null,544),[[v,t.newUrl]])])]),h("div",Tt,[h("div",Et,[Vt,b(h("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.newOsuContestListingUrl=e),class:"ml-1 form-control",onChange:e[3]||(e[3]=e=>t.updateOsuContestListingUrl(e))},null,544),[[v,t.newOsuContestListingUrl]])])]),h("div",Jt,[h("div",Nt,[Lt,b(h("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.newResultsUrl=e),class:"ml-1 form-control",onChange:e[5]||(e[5]=e=>t.updateResultsUrl(e))},null,544),[[v,t.newResultsUrl]])])]),h("div",Ft,[h("div",qt,[Rt,b(h("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.newBannerUrl=e),class:"ml-1 form-control",onChange:e[7]||(e[7]=e=>t.updateBannerUrl(e))},null,544),[[v,t.newBannerUrl]])])])])};var Pt=d({name:"Description",props:{contestId:{type:String,required:!0},description:{type:String,default:null}},data(){return{newDescription:this.description}},watch:{contestId(){this.newDescription=this.description}},methods:{async updateDescription(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDescription`,{description:this.newDescription},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest description",type:"info"}),this.$store.commit("updateDescription",{contestId:this.contestId,description:e}))}}});const _t={class:"form-inline w-100 mt-2"},Ot=h("div",null,"Contest description",-1),Bt=h("small",{class:"text-secondary"},[I("Click outside the text box to save. Also, this section supports "),h("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),I("!")],-1),zt=h("div",{class:"mt-2"}," Preview description ",-1),Gt=["innerHTML"];Pt.render=function(t,e,s,n,o,i){return p(),m("div",_t,[Ot,b(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDescription=e),length:"4",class:"ml-1 form-control",placeholder:"click outside the box to save...",maxlength:"40000",rows:"6",onChange:e[1]||(e[1]=e=>t.updateDescription(e))},null,544),[[v,t.newDescription]]),Bt,t.newDescription?(p(),m(j,{key:0},[zt,h("div",null,[h("div",{class:"small bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.newDescription.trim())},null,8,Gt)])],64)):y("",!0)])};var Ht=d({name:"ManualSubmission",props:{contestId:{type:String,required:!0}},data:()=>({usernameInput:null,anonymizedNameInput:null,urlInput:null}),methods:{async addSubmission(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/manuallyAddSubmission`,{username:this.usernameInput,anonymizedName:this.anonymizedNameInput,url:this.urlInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added submission",type:"info"}),this.$store.commit("addSubmission",{contestId:this.contestId,submission:e}))}}});const Kt={class:"input-group"},Yt={class:"input-group-append"},Qt=[I(" Add submission "),h("i",{class:"fas fa-plus fa-xs"},null,-1)],Wt=h("small",{class:"text-secondary"},"If you receive a late submission, you can manually add it to the list with this small form.",-1),Xt=h("hr",null,null,-1);Ht.render=function(t,e,s,n,o,i){return p(),m("div",null,[h("div",Kt,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.usernameInput=e),type:"text",class:"form-control",placeholder:"username..."},null,512),[[v,t.usernameInput]]),b(h("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.anonymizedNameInput=e),type:"text",class:"form-control",placeholder:"anonymized name..."},null,512),[[v,t.anonymizedNameInput]]),b(h("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.urlInput=e),type:"text",class:"form-control",placeholder:"url...",onKeyup:e[3]||(e[3]=w((e=>t.addSubmission(e)),["enter"]))},null,544),[[v,t.urlInput]]),h("div",Yt,[h("button",{class:"btn btn-primary",href:"#",onClick:e[4]||(e[4]=e=>t.addSubmission(e))},Qt)])]),Wt,Xt])};var Zt=d({name:"SubmissionsInfo",components:{ManualSubmission:Ht},props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0},osuContestListingUrl:{type:String,default:""}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null,processingDelete:!1,manualAnonEdit:null,newAnonymousName:"",csvInput:""}),watch:{manualAnonEdit(){this.findAnonymousSubmissionName()}},methods:{async addSubmissionsFromCsv(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/addSubmissionsFromCsv`,{csv:this.csvInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added entries from .csv data",type:"info"}),this.$store.commit("addSubmissionsFromCsv",{contestId:this.contestId,submissions:e}))},findAnonymousSubmissionName(){const t=this.submissions.find((t=>t.id==this.manualAnonEdit));t&&(this.newAnonymousName=t.name)},async updateAnonymousSubmissionName(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/updateAnonymousSubmissionName`,{name:this.newAnonymousName},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Updated anonymous submission name",type:"info"}),this.$store.commit("updateAnonymousSubmissionName",{contestId:this.contestId,submissionId:t,name:s}))},async deleteSubmission(t,e){this.processingDelete=!0;const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/delete`,{},e);this.processingDelete=!1,this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted submission",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:t}))}}});const te={key:0},ee=h("span",{class:"small text-secondary"},[I("If your contest uses the osu! contest listing, follow the anonymization guide below and paste your "),h("code",null,".csv"),I(" output here as raw text to add submissions:")],-1),se={class:"row"},ne={class:"col-sm-10"},oe={class:"col-sm-2"},ie={key:1,class:"table table-sm table-responsive-lg"},re=h("thead",null,[h("tr",null,[h("th",null,"Creator"),h("th",null,"Anonymized name"),h("th",null,"Link"),h("th")])],-1),ae=["onChange"],le={key:1,class:"me-1"},de=["onClick"],ce=[h("i",{class:"fas fa-edit"},null,-1)],ue=["href"],pe=["onClick"],me=["onClick"];Zt.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("manual-submission");return p(),m("div",null,[!t.submissions.length&&t.osuContestListingUrl?(p(),m("div",te,[ee,h("div",se,[h("div",ne,[b(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.csvInput=e),class:"form-control form-inline",rows:"1"},null,512),[[v,t.csvInput]])]),h("div",oe,[h("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:e[1]||(e[1]=e=>t.addSubmissionsFromCsv(e))}," Save ")])])])):y("",!0),t.submissions.length?(p(),m("table",ie,[re,h("tbody",null,[(p(!0),m(j,null,U(t.submissions,(s=>(p(),m("tr",{key:s.id},[h("td",null,[M(r,{user:s.creator},null,8,["user"])]),h("td",{class:D(s.name?"":"text-danger")},[t.manualAnonEdit==s.id?b((p(),m("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=e=>t.newAnonymousName=e),class:"ml-1 form-control form-control-sm",onChange:e=>t.updateAnonymousSubmissionName(s.id,e)},null,40,ae)),[[v,t.newAnonymousName]]):(p(),m("span",le,g(s.name||"TBD"),1)),h("a",{href:"#",onClick:C((e=>t.manualAnonEdit==s.id?t.manualAnonEdit=null:t.manualAnonEdit=s.id),["prevent"])},ce,8,de)],2),h("td",null,[h("a",{href:s.url,target:"_blank"},g(s.url),9,ue)]),h("td",null,[t.confirmDelete!=s.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((e=>t.confirmDelete=s.id),["prevent"])}," delete ",8,pe)):(p(),m("a",{key:1,class:D(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:C((e=>t.deleteSubmission(s.id,e)),["prevent"])}," confirm ",10,me))])])))),128))])])):y("",!0),t.submissions.length?(p(),f(a,{key:2,"contest-id":t.contestId},null,8,["contest-id"])):y("",!0)])};var he=d({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download}},watch:{contestId(){this.newDownload=this.download}},methods:{async updateDownload(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDownload`,{download:this.newDownload},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest submissions download link",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:e}))}}});S("data-v-3eff7a20");const ge={class:"row"},fe={class:"col-sm-6"},ye=I(" Download: "),be={key:0,class:"me-2 text-secondary"},ve={class:"col-sm-6 small text-secondary"},Ce=I(" This link will appear at the top of judging/screening pages for users to download beatmaps. For contest integrity, user data should be removed as explained in the anonymization guide below. "),Ie=["href"];k(),he.render=function(t,e,s,n,o,i){return p(),m("div",ge,[h("div",fe,[ye,t.download?y("",!0):(p(),m("span",be,"No download")),b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDownload=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:e[1]||(e[1]=e=>t.updateDownload(e))},null,544),[[v,t.newDownload]])]),h("div",ve,[Ce,t.download?(p(),m("a",{key:0,href:t.download,target:"_blank"},"Test the link here!",8,Ie)):y("",!0)])])},he.__scopeId="data-v-3eff7a20";var we=d({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),watch:{contestId(){this.screenerInput=null,this.screenerInput=null}},methods:{async addScreener(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.screenerInput} to list (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:e}))},async removeScreener(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/remove`,{screenerId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:t}))}}});const Se={class:"input-group mb-2"},ke={class:"input-group-append"},$e=[h("i",{class:"fas fa-plus fa-xs"},null,-1)],xe={key:0},je=["onClick"],Ue=["onClick"],Me={key:1,class:"text-secondary m-4"};we.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[h("div",Se,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.screenerInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:e[1]||(e[1]=w((e=>t.addScreener(e)),["enter"]))},null,544),[[v,t.screenerInput,void 0,{number:!0}]]),h("div",ke,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.addScreener(e)),["prevent"]))},$e)])]),t.screeners.length?(p(),m("ol",xe,[(p(!0),m(j,null,U(t.screeners,(e=>(p(),m("li",{key:e.id},[M(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,je)):(p(),m("a",{key:1,class:"text-danger",href:"#",onClick:C((s=>t.removeScreener(e.id,s)),["prevent"])}," confirm ",8,Ue))])))),128))])):(p(),m("div",Me," None... "))])};var De=d({name:"ScreeningStatus",props:{contest:{type:Object,required:!0}},methods:{findScreenerDetails(t){let e=0,s=[];for(const i of this.contest.submissions)for(const n of i.screenings)n.screener.id==t.id&&n.vote&&(e++,s.push(n.vote));const n=[],o=[];for(let i=0;i<this.contest.screeningVoteCount;i++)o.push(i+1);for(const i of o)s.includes(i)||n.push(i);return{count:e,unusedVotes:n}}}});const Ae={class:"table table-sm table-responsive-lg small"},Te=h("thead",null,[h("tr",null,[h("th",null,"Screener"),h("th",null,"Count"),h("th",null,"Unused ratings")])],-1),Ee={class:"mx-1"};De.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[h("table",Ae,[Te,h("tbody",null,[(p(!0),m(j,null,U(t.contest.screeners,(e=>(p(),m("tr",{key:e.id},[h("td",null,[M(r,{user:e},null,8,["user"])]),h("td",{class:D(t.findScreenerDetails(e).count==t.contest.screeningVoteCount?"text-success":"text-danger")},g(t.findScreenerDetails(e).count)+"/"+g(t.contest.screeningVoteCount),3),h("td",null,[(p(!0),m(j,null,U(t.findScreenerDetails(e).unusedVotes,(t=>(p(),m("span",{key:t},[h("span",Ee,[(p(!0),m(j,null,U(t,(t=>(p(),m("i",{key:t,class:"fa-star fas text-warning small"})))),128)),I(" ("+g(t)+") ",1)])])))),128))])])))),128))])])])};var Ve=d({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),watch:{contestId(){this.judgeInput=null,this.confirmDelete=null}},methods:{async addJudge(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.judgeInput} to list (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:e}))},async removeJudge(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/remove`,{judgeId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:t}))}}});const Je={class:"input-group mb-2"},Ne={class:"input-group-append"},Le=[h("i",{class:"fas fa-plus fa-xs"},null,-1)],Fe={key:0},qe=["onClick"],Re=["onClick"],Pe={key:1,class:"text-secondary m-4"};Ve.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",null,[h("div",Je,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.judgeInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new judge username/osuId...",onKeyup:e[1]||(e[1]=w((e=>t.addJudge(e)),["enter"]))},null,544),[[v,t.judgeInput,void 0,{number:!0}]]),h("div",Ne,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.addJudge(e)),["prevent"]))},Le)])]),t.judges.length?(p(),m("ul",Fe,[(p(!0),m(j,null,U(t.judges,(e=>(p(),m("li",{key:e.id},[M(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,qe)):(p(),m("a",{key:1,class:"text-danger",href:"#",onClick:C((s=>t.removeJudge(e.id,s)),["prevent"])}," confirm ",8,Re))])))),128))])):(p(),m("div",Pe," None... "))])};var _e=d({name:"MarkdownUserList",components:{CopyPaste:N},props:{users:{type:Array,default:()=>[]}}});S("data-v-0f02c955");const Oe=I(" Comma separation: "),Be=h("br",null,null,-1),ze=h("br",null,null,-1),Ge=h("br",null,null,-1),He=I(" Newline separation: "),Ke=h("br",null,null,-1),Ye=h("br",null,null,-1);k(),_e.render=function(t,e,s,n,o,i){const r=u("copy-paste");return p(),f(r,{class:"tiny"},{default:A((()=>[Oe,Be,(p(!0),m(j,null,U(t.users,((e,s)=>(p(),m("span",{key:e.id}," ["+g(e.username)+"](https://osu.ppy.sh/users/"+g(e.osuId)+")"+g(s===t.users.length-2?", and ":s===t.users.length-1?"":", "),1)))),128)),ze,Ge,He,Ke,(p(!0),m(j,null,U(t.users,(t=>(p(),m("span",{key:t.id},[I(" ["+g(t.username)+"](https://osu.ppy.sh/users/"+g(t.osuId)+")",1),Ye])))),128))])),_:1})},_e.__scopeId="data-v-0f02c955";var Qe=d({name:"ScreeningDetail",props:{screenings:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},methods:{findComment(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.comment:"No comment"},findVote(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.vote:0}}});const We={class:"ms-4 small"},Xe={class:"ms-4 small text-secondary"};Qe.render=function(t,e,s,n,o,i){const r=u("user-link");return p(),m("div",We,[(p(!0),m(j,null,U(t.screeners,(e=>(p(),m("div",{key:e.id},[M(r,{user:e},null,8,["user"]),(p(!0),m(j,null,U(t.findVote(e.id),(t=>(p(),m("i",{key:t,class:"fa-star fas mx-1 text-warning small"})))),128)),h("div",Xe,g(t.findComment(e.id)),1)])))),128))])};var Ze=d({name:"ScreeningResults",components:{ScreeningDetail:Qe},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const t=JSON.parse(JSON.stringify(this.submissions));for(let e=0;e<t.length;e++){const s=t[e].screenings.reduce(((t,e)=>e.vote?t+e.vote:t),0);t[e].total=s}return t.sort(((t,e)=>t.total>e.total?-1:e.total>t.total?1:0)),t}}});S("data-v-0aa6204d");const ts={class:"d-flex justify-content-between"},es=["href"],ss=h("i",{class:"fa-star fas small"},null,-1),ns=I(") "),os=h("i",{class:"fas fa-angle-down"},null,-1),is=["id"];k(),Ze.render=function(t,e,s,n,o,i){const r=u("screening-detail");return p(),m("div",null,[h("ul",null,[(p(!0),m(j,null,U(t.sortedSubmissions,(e=>(p(),m("li",{key:e.id},[h("div",ts,[h("a",{class:D(e.total>=t.judgingThreshold?"pass-threshold":""),"data-bs-toggle":"collapse",href:`#collapse-${e.id}`},[I(g(e.creator.username)+" ("+g(e.total)+" ",1),ss,ns,os],10,es)]),h("div",{id:`collapse-${e.id}`,class:"collapse"},[h("div",null,[M(r,{screenings:e.screenings,screeners:t.screeners},null,8,["screenings","screeners"])])],8,is)])))),128))])])},Ze.__scopeId="data-v-0aa6204d";var rs=d({name:"JudgingThreshold",props:{contestId:{type:String,required:!0},judgingThreshold:{type:Number,default:0}},data(){return{newJudgingThreshold:this.judgingThreshold}},watch:{contestId(){this.newJudgingThreshold=this.judgingThreshold}},methods:{async updateJudgingThreshold(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated judging threshold to ${e}`,type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:e}))}}});const as={class:"row"},ls={class:"input-group col-sm-4"},ds={class:"input-group-append"},cs=[I(" save "),h("i",{class:"fa-star fas small"},null,-1)];rs.render=function(t,e,s,n,o,i){return p(),m("div",as,[h("div",ls,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newJudgingThreshold=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"judging threshold",onKeyup:e[1]||(e[1]=w((e=>t.updateJudgingThreshold(e)),["enter"]))},null,544),[[v,t.newJudgingThreshold,void 0,{number:!0}]]),h("div",ds,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.updateJudgingThreshold(e)),["prevent"]))},cs)])])])};var us=d({name:"ScreeningVoteCount",props:{contestId:{type:String,required:!0},screeningVoteCount:{type:Number,default:0}},data(){return{newScreeningVoteCount:this.screeningVoteCount}},watch:{contestId(){this.newScreeningVoteCount=this.screeningVoteCount}},methods:{async updateScreeningVoteCount(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateScreeningVoteCount`,{screeningVoteCount:this.newScreeningVoteCount},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated screening vote count to ${e}`,type:"info"}),this.$store.commit("updateScreeningVoteCount",{contestId:this.contestId,screeningVoteCount:e}))}}});const ps={class:"row"},ms={class:"input-group col-sm-4"},hs={class:"input-group-append"};us.render=function(t,e,s,n,o,i){return p(),m("div",ps,[h("div",ms,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newScreeningVoteCount=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"screening vote count",onKeyup:e[1]||(e[1]=w((e=>t.updateScreeningVoteCount(e)),["enter"]))},null,544),[[v,t.newScreeningVoteCount,void 0,{number:!0}]]),h("div",hs,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.updateScreeningVoteCount(e)),["prevent"]))}," save ")])])])};var gs=d({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({nameInput:null,maxScoreInput:null,processingDelete:!1,confirmDelete:null}),computed:{scoredCriteria(){return this.criterias.filter((t=>"comments"!==t.name))},commentsEnabled(){return this.criterias.some((t=>"comments"==t.name))}},watch:{contestId(){this.nameInput=null,this.maxScoreInput=null,this.confirmDelete=null}},methods:{async addCriteria(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/addCriteria`,{name:this.nameInput,maxScore:this.maxScoreInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:e}))},async deleteCriteria(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/deleteCriteria`,{criteriaId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:s}))},async toggleComments(){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleComments`,{});this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Toggled comments",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))}}});const fs={class:"input-group w-75 mb-2"},ys={class:"input-group-append"},bs=[I(" Add criteria "),h("i",{class:"fas fa-plus fa-xs"},null,-1)],vs={class:"ms-2 mb-2"},Cs=[I(" See judging criteria "),h("i",{class:"fas fa-angle-down"},null,-1)],Is={id:"judgingCriteria",class:"collapse mx-2"},ws={key:0,class:"table table-sm table-responsive-lg"},Ss=h("thead",null,[h("tr",null,[h("th",null,"Criteria"),h("th",null,"Max score"),h("th",null,"Delete")])],-1),ks={class:"text-capitalize"},$s=["onClick"],xs=["onClick"],js={key:1};gs.render=function(t,e,s,n,o,i){return p(),m("div",null,[h("div",fs,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.nameInput=e),type:"text",class:"form-control",placeholder:"criteria name..."},null,512),[[v,t.nameInput]]),b(h("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.maxScoreInput=e),type:"number",class:"form-control",placeholder:"total points..."},null,512),[[v,t.maxScoreInput]]),h("div",ys,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.addCriteria(e))},bs)])]),h("div",vs,[h("a",{href:"#judgingCriteria","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=C((()=>{}),["prevent"]))},Cs),h("div",Is,[t.criterias.length?(p(),m("table",ws,[Ss,h("tbody",null,[(p(!0),m(j,null,U(t.scoredCriteria,(e=>(p(),m("tr",{key:e.id},[h("td",ks,g(e.name),1),h("td",null,g(e.maxScore),1),h("td",null,[t.confirmDelete!=e.id?(p(),m("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,$s)):(p(),m("a",{key:1,class:D(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:C((s=>t.deleteCriteria(e.id,s)),["prevent"])}," confirm ",10,xs))])])))),128)),h("tr",null,[h("td",{class:D(t.commentsEnabled?"":"text-secondary")}," Comments "+g(t.commentsEnabled?"":"(disabled)"),3),h("td",{class:D(t.commentsEnabled?"":"text-secondary")}," N/A ",2),h("td",null,[h("a",{href:"#",class:"text-danger",onClick:e[4]||(e[4]=C((e=>t.toggleComments()),["prevent"]))},g(t.commentsEnabled?"disable":"enable"),1)])])])])):(p(),m("div",js," No criteria yet... "))])])])};var Us=d({name:"JudgingLeaderboard",components:{CopyPaste:N},props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data:()=>({selectedScore:null,displayMode:"criterias",sortDesc:!1}),computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((t=>{var e;return t.creator.id==(null==(e=this.selectedScore)?void 0:e.creator.id)}))},scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))},judges(){return this.contest.judges}},methods:{getCriteriaScore(t,e){var s;return(null==(s=t.criteriaSum.find((t=>t.criteriaId===e)))?void 0:s.sum)||0},getJudgeScore(t,e,s=!1){const n=t.judgingSum.find((t=>t.judgeId===e)),o=(null==n?void 0:n.standardized)||0;return s?`${(null==n?void 0:n.sum)||0} (${o.toFixed(3)})`:(null==n?void 0:n.sum)||0},getJudgeAvg(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.rawAvg.toFixed(4))||0},getJudgeSd(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.sd.toFixed(4))||0},getJudgeCorrel(t){var e;return((null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.correl)||0).toFixed(4)},getFinalScore:t=>isNaN(t)?"0":t.toFixed(4),sortByCriteria(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:t,sortDesc:this.sortDesc})},sortByJudge(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:t,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});const Ms={class:"row"},Ds={class:"col-sm"},As=I(" Score display: "),Ts=I(" | "),Es=I(" | "),Vs={class:"row"},Js={class:"col-sm"},Ns={class:"table table-sm small table-responsive-lg"},Ls=h("th",null,"#",-1),Fs=h("th",null,"User",-1),qs=["onClick"],Rs={class:"cursor-default"},Ps=h("td",null,null,-1),_s=h("td",null,"AVG",-1),Os=h("td",null,null,-1),Bs=h("td",null,null,-1),zs={class:"cursor-default"},Gs=h("td",null,null,-1),Hs=h("td",null,"SD",-1),Ks=h("td",null,null,-1),Ys=h("td",null,null,-1),Qs={class:"cursor-default"},Ws=h("td",null,null,-1),Xs=h("td",null,"COR",-1),Zs=h("td",null,null,-1),tn=h("td",null,null,-1),en=h("div",null,"Spreadsheet",-1),sn=h("div",{class:"small text-secondary"},[h("ol",null,[h("li",null," Copy/paste the text below into a text editor "),h("li",null,[I(" Save the file with a "),h("code",null,".csv"),I(" extension ")]),h("li",null," Import the file to Google Drive or Excel for an automatically formatted spreadsheet ")])],-1),nn=I(" #,User,"),on={key:0},rn={key:1},an=I("Final Score (raw),Final Score (standardized), "),ln={key:0},dn={key:1},cn=h("div",null,"Markdown",-1),un=h("div",{class:"small text-secondary"},[I(" Copy/paste this into any "),h("code",null,".md"),I(" file ")],-1),pn=I(" | Rank | User "),mn={key:0},hn={key:1},gn=I(" | Final Score (raw) | Final Score (standardized) | "),fn=I(" | :-- | :-- "),yn={key:0},bn={key:1},vn=I(" | :-- | :-- | "),Cn={key:0},In={key:1};Us.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("copy-paste");return p(),m("div",null,[h("div",Ms,[h("div",Ds,[As,h("a",{href:"#",class:D("criterias"===t.displayMode?"border-bottom border-secondary":""),onClick:e[0]||(e[0]=C((e=>t.displayMode="criterias"),["prevent"]))}," Criteria ",2),Ts,h("a",{href:"#",class:D("judges"===t.displayMode?"border-bottom border-secondary":""),onClick:e[1]||(e[1]=C((e=>t.displayMode="judges"),["prevent"]))}," Judge ",2),Es,h("a",{href:"#",class:D("detail"===t.displayMode?"border-bottom border-secondary":""),onClick:e[2]||(e[2]=C((e=>t.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),h("div",Vs,[h("div",Js,[h("table",Ns,[h("thead",null,[h("tr",null,[Ls,Fs,"criterias"===t.displayMode?(p(!0),m(j,{key:0},U(t.scoredCriteria,(t=>(p(),m("th",{key:t.id},g(t.name),1)))),128)):(p(!0),m(j,{key:1},U(t.judges,(t=>(p(),m("th",{key:t.id},g(t.username),1)))),128)),h("th",null,[h("a",{href:"#",onClick:e[3]||(e[3]=C(((...e)=>t.sortByRawScore&&t.sortByRawScore(...e)),["prevent"]))}," Final Score (raw) ")]),h("th",null,[h("a",{href:"#",onClick:e[4]||(e[4]=C(((...e)=>t.sortByStdScore&&t.sortByStdScore(...e)),["prevent"]))}," Final Score (standardized) ")])])]),h("tbody",null,[(p(!0),m(j,null,U(t.usersScores,((e,s)=>(p(),m("tr",{key:s,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:s=>t.selectedScore=e},[h("td",null,g(s+1),1),h("td",null,[M(r,{user:e.creator},null,8,["user"])]),"criterias"===t.displayMode?(p(!0),m(j,{key:0},U(t.scoredCriteria,(s=>(p(),m("td",{key:s.id},g(t.getCriteriaScore(e,s.id)),1)))),128)):(p(!0),m(j,{key:1},U(t.judges,(s=>(p(),m("td",{key:s.id},g(t.getJudgeScore(e,s.id,"detail"===t.displayMode)),1)))),128)),h("td",null,g(e.rawFinalScore),1),h("td",null,g(t.getFinalScore(e.standardizedFinalScore)),1)],8,qs)))),128)),"detail"===t.displayMode?(p(),m(j,{key:0},[h("tr",Rs,[Ps,_s,(p(!0),m(j,null,U(t.judges,(e=>(p(),m("td",{key:e.id},g(t.getJudgeAvg(e.id)),1)))),128)),Os,Bs]),h("tr",zs,[Gs,Hs,(p(!0),m(j,null,U(t.judges,(e=>(p(),m("td",{key:e.id},g(t.getJudgeSd(e.id)),1)))),128)),Ks,Ys]),h("tr",Qs,[Ws,Xs,(p(!0),m(j,null,U(t.judges,(e=>(p(),m("td",{key:e.id},g(t.getJudgeCorrel(e.id)),1)))),128)),Zs,tn])],64)):y("",!0)])])])]),en,sn,M(a,null,{default:A((()=>[h("div",null,[nn,"criterias"===t.displayMode?(p(),m("span",on,[(p(!0),m(j,null,U(t.scoredCriteria,(t=>(p(),m("span",{key:t.id},g(t.name+","),1)))),128))])):(p(),m("span",rn,[(p(!0),m(j,null,U(t.judges,(t=>(p(),m("span",{key:t.id},g(t.username+","),1)))),128))])),an]),(p(!0),m(j,null,U(t.usersScores,((e,s)=>(p(),m("div",{key:s},[I(g(s+1)+","+g(e.creator.username)+",",1),"criterias"===t.displayMode?(p(),m("span",ln,[(p(!0),m(j,null,U(t.scoredCriteria,(s=>(p(),m("span",{key:s.id},g(t.getCriteriaScore(e,s.id)+","),1)))),128))])):(p(),m("span",dn,[(p(!0),m(j,null,U(t.judges,(s=>(p(),m("span",{key:s.id},g(t.getJudgeScore(e,s.id,"detail"===t.displayMode)+","),1)))),128))])),I(g(e.rawFinalScore)+","+g(t.getFinalScore(e.standardizedFinalScore))+", ",1)])))),128))])),_:1}),cn,un,M(a,null,{default:A((()=>[h("div",null,[pn,"criterias"===t.displayMode?(p(),m("span",mn,[(p(!0),m(j,null,U(t.scoredCriteria,(t=>(p(),m("span",{key:t.id}," | "+g(t.name),1)))),128))])):(p(),m("span",hn,[(p(!0),m(j,null,U(t.judges,(t=>(p(),m("span",{key:t.id}," | "+g(t.username),1)))),128))])),gn]),h("div",null,[fn,"criterias"===t.displayMode?(p(),m("span",yn,[(p(!0),m(j,null,U(t.scoredCriteria,(t=>(p(),m("span",{key:t.id}," | :-- ")))),128))])):(p(),m("span",bn,[(p(!0),m(j,null,U(t.judges,(t=>(p(),m("span",{key:t.id}," | :-- ")))),128))])),vn]),(p(!0),m(j,null,U(t.usersScores,((e,s)=>(p(),m("div",{key:s},[I(" | "+g(s+1)+" | "+g("["+e.creator.username+"]("+e.creator.osuId+")")+" ",1),"criterias"===t.displayMode?(p(),m("span",Cn,[(p(!0),m(j,null,U(t.scoredCriteria,(s=>(p(),m("span",{key:s.id}," | "+g(t.getCriteriaScore(e,s.id)),1)))),128))])):(p(),m("span",In,[(p(!0),m(j,null,U(t.judges,(s=>(p(),m("span",{key:s.id}," | "+g(t.getJudgeScore(e,s.id,"detail"===t.displayMode)),1)))),128))])),I(" | "+g(e.rawFinalScore)+" | "+g(t.getFinalScore(e.standardizedFinalScore))+" | ",1)])))),128))])),_:1})])};var wn=d({name:"JudgingDetail",components:{ModalDialog:L},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(t){const e=this.commentsExpanded.findIndex((e=>e===t));-1!==e?this.commentsExpanded.splice(e,1):this.commentsExpanded.push(t)},getCollapseClass(t){return this.commentsExpanded.includes(t)?"fa-chevron-down":"fa-chevron-right"}}});const Sn={class:"container"},kn=["href","onClick"],$n={key:1,class:"small text-capitalize ms-3"},xn=["id"],jn={class:"small text-secondary",style:{"white-space":"pre-line"}},Un={key:0};wn.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("modal-dialog");return p(),f(a,{id:"detailModal",loaded:Boolean(t.submission)},{header:A((()=>[I(g(t.submission.creator.username)+" ("+g(t.submission.name)+") ",1)])),default:A((()=>[h("div",Sn,[(p(!0),m(j,null,U(t.submission.judgings,((e,s)=>(p(),m("div",{key:e.id},[M(r,{user:e.judge},null,8,["user"]),(p(!0),m(j,null,U(e.judgingScores,(e=>(p(),m("div",{key:e.id,class:"my-1"},["comments"==e.criteria.name?(p(),m("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${e.id}`,onClick:s=>t.showComment(e.id)},[h("i",{class:D(["small fas me-2",t.getCollapseClass(e.id)])},null,2),I(" "+g(e.criteria.name),1)],8,kn)):(p(),m("span",$n,g(e.criteria.name)+" ("+g(e.score)+") ",1)),h("p",{id:`judgingToCriteria${e.id}`,class:"text-light ms-4 collapse"},[h("span",jn,g(e.comment),1)],8,xn)])))),128)),s<t.submission.judgings.length-1?(p(),m("hr",Un)):y("",!0)])))),128))])])),_:1},8,["loaded"])};var Mn=d({name:"JudgeStatuses",components:{JudgingDetail:wn},props:{contest:{type:Object,required:!0}},data:()=>({selected:null}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},methods:{getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getMissingJudges(t){const e=t.judgings.map((t=>t.judge.id)),s=[];for(const n of this.contest.judges)if(e.includes(n.id)){const e=t.judgings.find((t=>t.judge.id===n.id));e&&e.judgingScores.length!==this.contest.criterias.length&&s.push(n)}else s.push(n);return s.map((t=>t.username)).join(", ")},getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});S("data-v-a36d03c2");const Dn={class:"table table-sm table-responsive-lg small"},An=h("thead",null,[h("tr",null,[h("th",null,"Submission creator"),h("th",null,"Count"),h("th",null,"Incomplete judges")])],-1),Tn=["onClick"];k(),Mn.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("judging-detail");return p(),m("div",null,[h("table",Dn,[An,h("tbody",null,[(p(!0),m(j,null,U(t.contest.submissions,(e=>(p(),m("tr",{key:e.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",class:"modalable",onClick:s=>t.selected=e},[h("td",null,[M(r,{user:e.creator},null,8,["user"])]),h("td",{class:D(t.getJudgesInvolvedCount(e)>=t.judgeCount?"text-success":"text-danger")},g(t.getJudgesInvolvedCount(e))+"/"+g(t.judgeCount),3),h("td",null,g(t.getMissingJudges(e)),1)],8,Tn)))),128))])]),M(a,{id:"detailModalAdmin",submission:t.selected},null,8,["submission"])])},Mn.__scopeId="data-v-a36d03c2";var En=d({name:"JudgingResults",components:{JudgingLeaderboard:Us,JudgeStatuses:Mn},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},watch:{async contestId(){await this.getJudgingResults()}},async created(){await this.getJudgingResults()},methods:{async getJudgingResults(){const t=await this.$http.executeGet(`/contests/listing/${this.contestId}/judgingResults`);this.$http.isError(t)||(this.contest=t.contest,this.usersScores=t.usersScores,this.judgesCorrel=t.judgesCorrel)},getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getJudgesInvolved:t=>t.judgings.map((t=>t.judge.username)).join(", "),getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});const Vn={key:0},Jn={class:"ms-2 mb-2"},Nn=[I(" See judging status per submission "),h("i",{class:"fas fa-angle-down"},null,-1)],Ln={class:"ms-2 mb-2"},Fn=[I(" See judging leaderboards "),h("i",{class:"fas fa-angle-down"},null,-1)];En.render=function(t,e,s,n,o,i){const r=u("judge-statuses"),a=u("judging-leaderboard");return t.contest?(p(),m("div",Vn,[h("div",Jn,[h("a",{href:"#judgeStatuses","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=C((()=>{}),["prevent"]))},Nn),M(r,{id:"judgeStatuses",class:"collapse mx-2",contest:t.contest},null,8,["contest"])]),h("div",Ln,[h("a",{href:"#judgingLeaderboard","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=C((()=>{}),["prevent"]))},Fn),M(a,{id:"judgingLeaderboard",class:"collapse mx-2","contest-id":t.contest.id,contest:t.contest,"users-scores":t.usersScores,"judges-correl":t.judgesCorrel},null,8,["contest-id","contest","users-scores","judges-correl"])])])):y("",!0)};var qn=d({name:"FeaturedArtistContestToggle",props:{contestId:{type:String,required:!0},isFeaturedArtistContest:{type:Boolean,required:!0}},methods:{async toggleIsFeaturedArtistContest(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleIsFeaturedArtistContest`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest Featured Artist status",type:"info"}),this.$store.commit("updateIsFeaturedArtistContest",{contestId:this.contestId,isFeaturedArtistContest:e}))}}});S("data-v-3105a5d3");const Rn={class:"form-check mt-2"},Pn=["checked"],_n=h("label",{class:"form-check-label",for:"isContacted"}," Featured Artist Contest ",-1),On=h("div",{class:"small text-secondary"},[I(" Contests using exclusively Featured Artist songs are eligible for "),h("a",{href:"/faq#rewards",target:"_blank"},"Mappers' Guild points"),I(": "),h("ul",null,[h("li",null," Contest organizer: 5 points "),h("li",null," Contest participant: 3 points "),h("li",null," Contest screener/judge: 1 point ")])],-1);k(),qn.render=function(t,e,s,n,o,i){return p(),m("div",Rn,[h("input",{id:"isContacted",checked:t.isFeaturedArtistContest,class:"form-check-input",type:"checkbox",onChange:e[0]||(e[0]=e=>t.toggleIsFeaturedArtistContest(e))},null,40,Pn),_n,On])},qn.__scopeId="data-v-3105a5d3";var Bn=d({name:"ContestInfo",components:{ContestHeader:F,ContestBanner:G,DateInfo:Y,Name:at,AnonymizationGuide:yt,ModeInfo:ht,StatusInfo:ct,SubmissionsInfo:Zt,DownloadInfo:he,Urls:jt,Description:Pt,ScreenersInfo:we,JudgesInfo:Ve,MarkdownUserList:_e,ScreeningResults:Ze,ScreeningStatus:De,JudgingThreshold:rs,ScreeningVoteCount:us,CriteriaSelection:gs,JudgingResults:En,FeaturedArtistContestToggle:qn},props:{contest:{type:Object,required:!0}},data:()=>({screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}),methods:{async deleteContest(t){if(confirm("Are you sure?")){const e=await this.$http.executePost(`/contests/listing/${this.contest.id}/delete`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Deleted contest",type:"info"}),this.$store.commit("deleteContest",this.contest.id))}}}});const zn=h("h5",null,"General",-1),Gn=h("hr",null,null,-1),Hn=h("h5",null," Submissions ",-1),Kn={class:"ms-2 mb-2"},Yn=h("i",{class:"fas fa-angle-down"},null,-1),Qn={class:"ms-2 mb-2"},Wn=[I(" See submission anonymization guide "),h("i",{class:"fas fa-angle-down"},null,-1)],Xn=h("hr",null,null,-1),Zn=h("h4",{class:"mb-4"}," Screening ",-1),to=h("h5",null," Screeners ",-1),eo={class:"ms-2 mb-2"},so=h("i",{class:"fas fa-angle-down"},null,-1),no={id:"screeners",class:"row collapse mb-2"},oo=h("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their screening progress. ",-1),io=h("div",null,'To begin screening, send this link to the users above and ensure your contest\'s status is set to "Screening"!',-1),ro=h("hr",null,null,-1),ao=h("h5",null," Screening Results ",-1),lo={class:"row mb-2"},co=h("div",{class:"col-sm-8 small text-secondary"},' The amount of submissions each screener can give a vote to. The limit is set to "5" by default, meaning screeners can choose the top 5 maps. The limit is 10. ',-1),uo={class:"ms-2 mb-2"},po=[I(" See screening status per screener "),h("i",{class:"fas fa-angle-down"},null,-1)],mo={class:"row mb-2"},ho=h("div",{class:"col-sm-8 small text-secondary"},[I(" Submissions with this "),h("i",{class:"fa-star fas text-warning small"}),I(' score or above in "screening results" will be available to judges. If your contest skips the screening process, set this to "0". ')],-1),go={class:"ms-2 mb-2"},fo=[I(" See screening results "),h("i",{class:"fas fa-angle-down"},null,-1)],yo=h("hr",null,null,-1),bo=h("h4",{class:"mb-4"}," Judging ",-1),vo=h("h5",null," Judges ",-1),Co={class:"ms-2 mb-2"},Io=h("i",{class:"fas fa-angle-down"},null,-1),wo={id:"judges",class:"row collapse mb-2"},So=h("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their judging progress. ",-1),ko=h("div",null,'To begin judging, send this link to the users above and ensure your contest\'s status is set to "Judging"!',-1),$o=h("hr",null,null,-1),xo=h("h5",null," Judging Criteria ",-1),jo=h("hr",null,null,-1),Uo=h("h5",null," Judging Results ",-1),Mo=h("hr",null,null,-1);Bn.render=function(t,e,s,n,o,i){const r=u("contest-header"),a=u("contest-banner"),l=u("name"),d=u("status-info"),c=u("mode-info"),b=u("featured-artist-contest-toggle"),v=u("date-info"),w=u("urls"),S=u("description"),k=u("submissions-info"),$=u("download-info"),x=u("anonymization-guide"),j=u("screeners-info"),U=u("markdown-user-list"),D=u("screening-vote-count"),A=u("screening-status"),T=u("judging-threshold"),E=u("screening-results"),V=u("judges-info"),J=u("criteria-selection"),N=u("judging-results");return p(),m("div",null,[M(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(p(),f(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):y("",!0),zn,h("div",null,[M(l,{class:"mb-2","contest-id":t.contest.id,name:t.contest.name},null,8,["contest-id","name"]),M(d,{class:"mb-2","contest-id":t.contest.id,status:t.contest.status,"is-approved":t.contest.isApproved},null,8,["contest-id","status","is-approved"]),M(c,{class:"mb-2","contest-id":t.contest.id,mode:t.contest.mode},null,8,["contest-id","mode"]),M(b,{class:"mb-2","contest-id":t.contest.id,"is-featured-artist-contest":t.contest.isFeaturedArtistContest},null,8,["contest-id","is-featured-artist-contest"]),M(v,{class:"mb-2","contest-id":t.contest.id,"contest-start":t.contest.contestStart?t.contest.contestStart.slice(0,10):null,"contest-end":t.contest.contestEnd?t.contest.contestEnd.slice(0,10):null},null,8,["contest-id","contest-start","contest-end"]),M(w,{"contest-id":t.contest.id,url:t.contest.url||void 0,"osu-contest-listing-url":t.contest.osuContestListingUrl||void 0,"results-url":t.contest.resultsUrl||void 0,"banner-url":t.contest.bannerUrl||void 0},null,8,["contest-id","url","osu-contest-listing-url","results-url","banner-url"]),M(S,{"contest-id":t.contest.id,description:t.contest.description},null,8,["contest-id","description"]),Gn,h("div",null,[Hn,h("div",Kn,[h("a",{href:"#submissions","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=C((()=>{}),["prevent"]))},[I(" See all submissions ("+g(t.contest.submissions.length)+") ",1),Yn])]),M(k,{id:"submissions",class:"collapse","contest-id":t.contest.id,submissions:t.contest.submissions,"osu-contest-listing-url":t.contest.osuContestListingUrl},null,8,["contest-id","submissions","osu-contest-listing-url"]),M($,{"contest-id":t.contest.id,download:t.contest.download},null,8,["contest-id","download"]),h("div",Qn,[h("a",{href:"#anonymizationGuide","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=C((()=>{}),["prevent"]))},Wn)]),M(x,{id:"anonymizationGuide",class:"collapse","contest-id":t.contest.id},null,8,["contest-id"]),Xn,Zn,to,h("div",eo,[h("a",{href:"#screeners","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=C((()=>{}),["prevent"]))},[I(" See all screeners ("+g(t.contest.screeners.length)+") ",1),so])]),h("div",no,[M(j,{class:"col-sm-4","contest-id":t.contest.id,screeners:t.contest.screeners},null,8,["contest-id","screeners"]),M(U,{class:"col-sm-7",users:t.contest.screeners},null,8,["users"]),oo]),io,h("code",null,"https://mappersguild.com/contests/screening?contest="+g(t.contest.id),1),ro,ao,h("div",lo,[M(D,{class:"col-sm-4","contest-id":t.contest.id,"screening-vote-count":t.contest.screeningVoteCount},null,8,["contest-id","screening-vote-count"]),co]),h("div",uo,[h("a",{href:"#screeningStatus","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=C((()=>{}),["prevent"]))},po)]),M(A,{id:"screeningStatus",class:"collapse mx-2",contest:t.contest},null,8,["contest"]),h("div",mo,[M(T,{class:"col-sm-4","contest-id":t.contest.id,"judging-threshold":t.contest.judgingThreshold},null,8,["contest-id","judging-threshold"]),ho]),h("div",go,[h("a",{href:"#screeningResults","data-bs-toggle":"collapse",onClick:e[4]||(e[4]=C((()=>{}),["prevent"]))},fo)]),M(E,{id:"screeningResults",class:"collapse","contest-id":t.contest.id,"contest-name":t.contest.name,submissions:t.contest.submissions,"judging-threshold":t.contest.judgingThreshold,screeners:t.contest.screeners},null,8,["contest-id","contest-name","submissions","judging-threshold","screeners"]),yo,bo,vo,h("div",Co,[h("a",{href:"#judges","data-bs-toggle":"collapse",onClick:e[5]||(e[5]=C((()=>{}),["prevent"]))},[I(" See all judges ("+g(t.contest.judges.length)+") ",1),Io])]),h("div",wo,[M(V,{class:"col-sm-4","contest-id":t.contest.id,judges:t.contest.judges},null,8,["contest-id","judges"]),M(U,{class:"col-sm-7",users:t.contest.judges},null,8,["users"]),So]),ko,h("code",null,"https://mappersguild.com/contests/judging?contest="+g(t.contest.id),1),$o,xo,M(J,{"contest-id":t.contest.id,criterias:t.contest.criterias},null,8,["contest-id","criterias"]),jo,Uo,M(N,{"contest-id":t.contest.id},null,8,["contest-id"]),Mo,"hidden"!=t.contest.status||t.contest.submissions.length?y("",!0):(p(),m("button",{key:0,class:"btn btn-sm btn-outline-danger w-100",onClick:e[6]||(e[6]=e=>t.deleteContest(e))}," Delete contest "))])])])};var Do=d({name:"CurrentSubmission",computed:a({},T(["userSubmission"]))});const Ao=["href"],To={class:"small text-secondary ms-1"},Eo=I("(last updated "),Vo=I(")");Do.render=function(t,e,s,n,o,i){return p(),m("span",null,[h("a",{href:t.userSubmission.url,target:"_blank",class:"small"},g(t.userSubmission.url),9,Ao),h("span",To,[Eo,h("code",null,g(new Date(t.userSubmission.updatedAt).toString().slice(4,33)),1),Vo])])};var Jo=d({name:"MapSubmissionForm",components:{CurrentSubmission:Do},props:{contestId:{type:String,required:!0}},data:()=>({newSubmissionUrl:""}),computed:a(a({},c(["loggedInUser"])),T(["userSubmission"])),watch:{contestId(){this.newSubmissionUrl=this.userSubmission?this.userSubmission.url:""}},methods:{async createSubmission(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/createSubmission`,{url:this.newSubmissionUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Submitted!",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e}))}}});S("data-v-581b58f5");const No={class:"row"},Lo={class:"col-sm-12 mb-2"},Fo=I(" Current submission: "),qo={key:0,class:"me-2 text-secondary"},Ro={class:"col-sm-8"},Po={class:"col-sm-4"},_o=h("div",{class:"small text-secondary"}," Upload your beatmap to a file sharing service and provide a link here! For various reasons, this website does not host beatmap uploads. ",-1);k(),Jo.render=function(t,e,s,n,o,i){const r=u("current-submission");return p(),m("div",No,[h("div",Lo,[Fo,t.userSubmission?t.userSubmission&&t.userSubmission.url?(p(),f(r,{key:1})):y("",!0):(p(),m("span",qo,"No submission yet!"))]),h("div",Ro,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newSubmissionUrl=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link..."},null,512),[[v,t.newSubmissionUrl]])]),h("div",Po,[h("button",{class:"btn btn-sm btn-outline-info w-100",onClick:e[1]||(e[1]=e=>t.createSubmission(e))}," Submit ")]),_o])},Jo.__scopeId="data-v-581b58f5";var Oo=d({name:"LimitedContestInfo",components:{ContestHeader:F,ContestBanner:G,MapSubmissionForm:Jo},props:{contest:{type:Object,required:!0}}});const Bo=h("h5",null,"General",-1),zo={key:1},Go=["innerHTML"],Ho={key:2},Ko=I(" This contest is currently in the "),Yo=I(" phase. "),Qo={key:3},Wo=[I(" You can earn "),h("a",{href:"/faq#rewards",target:"_blank"},"Mappers' Guild points",-1),I(" by participating in this contest because it only uses Featured Artist songs. ")],Xo={key:4,class:"mt-2"},Zo=["href"],ti=h("hr",null,null,-1),ei={key:5},si=h("h5",null,"Submission",-1),ni={key:0},oi={key:0},ii={key:1},ri=h("div",null,"This contest is not yet opened for submissions.",-1),ai=I("Maps can be submitted after "),li={key:2},di=I(" Maps can be submitted until "),ci={key:1},ui=I(" This contest is being hosted on "),pi=h("a",{href:"https://osu.ppy.sh/community/contests",target:"_blank"},"osu!'s contest listing",-1),mi=I(". Submit your beatmap on the "),hi=["href"],gi=I("! "),fi={key:6},yi=h("h5",null,"Results",-1),bi=["href"],vi=["href"];Oo.render=function(t,e,s,n,o,i){const r=u("contest-header"),a=u("contest-banner"),l=u("map-submission-form");return p(),m("div",null,[M(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(p(),f(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):y("",!0),Bo,t.contest.description?(p(),m("div",zo,[h("div",{class:"small mt-2 bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.contest.description.trim())},null,8,Go)])):y("",!0),"complete"!==t.contest.status?(p(),m("div",Ho,[Ko,h("b",null,g(t.contest.status),1),Yo])):y("",!0),t.contest.isFeaturedArtistContest?(p(),m("div",Qo,Wo)):y("",!0),t.contest.url?(p(),m("div",Xo,[h("a",{href:t.contest.url,target:"_blank"},"Read more about the contest here!",8,Zo)])):y("",!0),ti,"complete"!==t.contest.status?(p(),m("div",ei,[si,t.contest.osuContestListingUrl?(p(),m("div",ci,[ui,pi,mi,h("a",{href:t.contest.osuContestListingUrl,target:"_blank"},"official contest page",8,hi),gi])):(p(),m("div",ni,[new Date(t.contest.contestEnd)<new Date?(p(),m("div",oi," This contest is no longer accepting new submissions. ")):new Date(t.contest.contestStart)>new Date?(p(),m("div",ii,[ri,h("div",null,[ai,h("code",null,g(new Date(t.contest.contestStart)),1)])])):(p(),m("div",li,[di,h("code",null,g(new Date(t.contest.contestEnd)),1),M(l,{class:"mt-2","contest-id":t.contest.id},null,8,["contest-id"])]))]))])):(p(),m("div",fi,[yi,h("div",null,[h("a",{href:t.contest.resultsUrl,target:"_blank"},"View contest results here!",8,bi)]),h("div",null,[h("a",{href:"/contests/results?contest="+t.contest.id,target:"_blank"},"View Mappers' Guild judging scores here!",8,vi)])]))])};var Ci=d({name:"AddContest",data:()=>({contestName:"",userContests:[],templateContest:""}),async created(){const t=await this.$http.executeGet("/contests/listing/loadUserContests");this.userContests=t},methods:{async addContest(t){const e=await this.$http.executePost("/contests/listing/create",{name:this.contestName,templateId:this.templateContest},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",e),this.$router.replace(`/contests/listing?contest=${e.id}`))}}});const Ii={class:"container card card-body py-3 mb-2"},wi=h("option",{value:"",disabled:""}," Contest details template ",-1),Si=["value"],ki={key:0,value:"x",disabled:""};Ci.render=function(t,e,s,n,o,i){return p(),m("div",Ii,[b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.contestName=e),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[v,t.contestName,void 0,{trim:!0}]]),b(h("select",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.templateContest=e),class:"form-select form-select-sm mb-2"},[wi,(p(!0),m(j,null,U(t.userContests,(t=>(p(),m("option",{key:t.id,value:t.id},g(t.name),9,Si)))),128)),t.userContests.length?y("",!0):(p(),m("option",ki," No templates available "))],512),[[$,t.templateContest]]),h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[2]||(e[2]=e=>t.addContest(e))}," Add new contest ")])};var $i={state:{contests:[],selectedContestId:null},mutations:{setContests(t,e){t.contests=e},addContest(t,e){t.contests.unshift(e),t.selectedContestId=e.id},addSubmission(t,e){const s=t.contests.findIndex((t=>t.id==e.contestId));-1!==s&&t.contests[s].submissions.push(e.submission)},deleteContest(t,e){t.selectedContestId=null;const s=t.contests.findIndex((t=>t.id==e));-1!==s&&t.contests.splice(s,1)},setSelectedContestId(t,e){t.selectedContestId=e},updateContestStart(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestStart=e.contestStart)},updateContestEnd(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestEnd=e.contestEnd)},updateIsFeaturedArtistContest(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.isFeaturedArtistContest=e.isFeaturedArtistContest)},updateUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.url=e.url)},updateOsuContestListingUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.osuContestListingUrl=e.osuContestListingUrl)},updateResultsUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.resultsUrl=e.resultsUrl)},updateBannerUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.bannerUrl=e.bannerUrl)},updateDownload(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.download=e.download)},updateCreators(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.creators=e.creators)},deleteSubmission(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&s.submissions.splice(t,1)}},addScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.screeners.push(e.screener)},deleteScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.screeners.findIndex((t=>t.id==e.screenerId));-1!==t&&s.screeners.splice(t,1)}},addJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.judges.push(e.judge)},deleteJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.judges.findIndex((t=>t.id==e.judgeId));-1!==t&&s.judges.splice(t,1)}},updateJudgingThreshold(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.judgingThreshold=e.judgingThreshold)},updateScreeningVoteCount(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.screeningVoteCount=e.screeningVoteCount)},updateStatus(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.status=e.status)},updateMode(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.mode=e.mode)},updateContestCriterias(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.criterias=e.criterias)},updateName(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.name=e.name)},updateDescription(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.description=e.description)},updateSubmissions(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.submissions=e.submissions)},updateAnonymousSubmissionName(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&(s.submissions[t].name=e.name)}},addSubmissionsFromCsv(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.submissions=e.submissions)}},getters:{selectedContest:t=>t.contests.find((e=>e.id===t.selectedContestId)),userSubmission:t=>{const e=t.contests.find((e=>e.id===t.selectedContestId));return e&&e.submissions&&e.submissions.length?e.submissions[0]:null}}},xi=d({name:"ContestPage",components:{ContestCard:V,AddContest:Ci,ContestInfo:Bn,LimitedContestInfo:Oo},data:()=>({displayMode:"activeContests",filterMode:"",filterValue:"",firstLoadComplete:!1,loadedSpecificContest:!1,limit:200,skip:0,total:0,moreContestsAvailable:!0,loadingCategory:!1}),computed:l(a(a(a({},c(["loggedInUser"])),c({contests:t=>t.contests.contests,selectedContestId:t=>t.contests.selectedContestId})),T(["selectedContest"])),{filteredContests(){if(this.contests){let t=[...this.contests];if(this.filterMode.length&&(t=t.filter((t=>t.mode==this.filterMode))),this.filterValue.length){const e=this.filterValue.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)))}return t}return[]},creatorIds(){return this.selectedContest.creators.map((t=>t.id))}}),watch:{async displayMode(){this.moreContestsAvailable=!0,this.skip=0,this.firstLoadComplete&&(this.loadingCategory=!0,this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null),this.$router.replace("/contests/listing"),await this.loadContests(),this.loadingCategory=!1)}},beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",$i)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},async created(){await this.loadContests(),this.firstLoadComplete=!0},methods:{async loadContests(){const t=this.$route.query.contest;if(t&&!this.firstLoadComplete){const e=await this.$http.initialRequest(`/contests/listing/searchContest/${t}`);if(this.$http.isError(e))this.$router.replace("/contests/listing"),this.firstLoadComplete=!0,await this.loadContests();else{e.creators.map((t=>t.id)).includes(this.loggedInUser.id)?this.displayMode="myContests":"complete"==e.status?this.displayMode="completedContests":this.displayMode,this.$store.commit("setContests",[e]),this.$store.commit("setSelectedContestId",t),this.loadedSpecificContest=!0}}else{let t;t=this.firstLoadComplete?await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`):await this.$http.initialRequest(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`),this.$http.isError(t)||(this.skip+=this.limit,this.$store.commit("setContests",t),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1,t.length<this.limit&&(this.moreContestsAvailable=!1))}},async loadMore(t){this.total=this.contests.length;const e=await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`,t);this.$http.isError(e)||(0==this.skip?this.$store.commit("setContests",e):this.$store.commit("setContests",[...this.contests||[],...e]),this.skip+=this.limit,this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1),this.total==this.contests.length&&(this.moreContestsAvailable=!1,this.$store.dispatch("updateToastMessages",{message:"No more contests to load!",type:"info"}))}}});const ji={class:"row"},Ui={class:"col-sm-3"},Mi={class:"container card card-body py-3 mb-2"},Di={class:"input-group"},Ai=h("button",{class:"btn btn-primary",href:"#"},[h("i",{class:"fas fa-search"})],-1),Ti=h("hr",null,null,-1),Ei=h("div",null," Contest category ",-1),Vi={class:"small ms-2"},Ji=h("hr",null,null,-1),Ni=h("div",null," Contest mode ",-1),Li={class:"small mx-2"},Fi=h("hr",null,null,-1),qi={key:1,class:"container card card-body py-3 mb-2 text-secondary"},Ri={key:2,class:"container card card-body py-3 mb-2 text-secondary"},Pi={key:3},_i={key:4},Oi={class:"col-sm-9 container card card-body"},Bi={key:0},zi=h("div",{class:"radial-divisor"},null,-1);xi.render=function(t,e,s,n,o,i){const r=u("add-contest"),a=u("contest-card"),l=u("limited-contest-info"),d=u("contest-info");return p(),m("div",null,[h("div",ji,[h("div",Ui,[h("div",Mi,[h("div",Di,[Ai,b(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.filterValue=e),class:"form-control form-control-sm",type:"text",placeholder:"search",maxlength:"200",autocomplete:"off"},null,512),[[v,t.filterValue]])]),Ti,Ei,h("div",Vi,[h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[1]||(e[1]=C((e=>t.displayMode="activeContests"),["prevent"]))},[h("span",{class:D("activeContests"===t.displayMode?"border-bottom border-secondary":"")}," Active ",2)],2)]),h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[2]||(e[2]=C((e=>t.displayMode="completedContests"),["prevent"]))},[h("span",{class:D("completedContests"===t.displayMode?"border-bottom border-secondary":"")}," Completed ",2)],2)]),h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[3]||(e[3]=C((e=>t.displayMode="myContests"),["prevent"]))},[h("span",{class:D("myContests"===t.displayMode?"border-bottom border-secondary":"")}," My contests ",2)],2)])]),Ji,Ni,h("div",Li,[h("div",null,[h("a",{href:"#",onClick:e[4]||(e[4]=C((e=>t.filterMode=""),["prevent"]))},[h("span",{class:D(""===t.filterMode?"border-bottom border-secondary":"")}," Any ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[5]||(e[5]=C((e=>t.filterMode="osu"),["prevent"]))},[h("span",{class:D("osu"===t.filterMode?"border-bottom border-secondary":"")}," osu! ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[6]||(e[6]=C((e=>t.filterMode="taiko"),["prevent"]))},[h("span",{class:D("taiko"===t.filterMode?"border-bottom border-secondary":"")}," osu!taiko ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[7]||(e[7]=C((e=>t.filterMode="catch"),["prevent"]))},[h("span",{class:D("catch"===t.filterMode?"border-bottom border-secondary":"")}," osu!catch ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[8]||(e[8]=C((e=>t.filterMode="mania"),["prevent"]))},[h("span",{class:D("mania"===t.filterMode?"border-bottom border-secondary":"")}," osu!mania ",2)])])])]),Fi,"myContests"==t.displayMode&&t.contests&&!t.loadedSpecificContest?(p(),f(r,{key:0})):y("",!0),M(E,{name:"list",tag:"div",class:"row"},{default:A((()=>[(p(!0),m(j,null,U(t.filteredContests,(t=>(p(),f(a,{key:t.id,class:"col-sm-12 my-2",contest:t,route:"listing"},null,8,["contest"])))),128))])),_:1}),t.contests?y("",!0):(p(),m("div",qi," Loading... ")),t.contests&&!t.filteredContests.length?(p(),m("div",Ri," No contests available. Try other filters! ")):y("",!0),t.loadedSpecificContest?(p(),m("div",Pi,[h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[9]||(e[9]=e=>t.loadMore(e))}," Load other contests ")])):t.moreContestsAvailable&&t.contests&&t.contests.length>=t.limit?(p(),m("div",_i,[h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[10]||(e[10]=e=>t.loadMore(e))}," Load more contests ")])):y("",!0)]),h("div",Oi,[t.selectedContestId?"myContests"!==t.displayMode?(p(),f(l,{key:1,contest:t.selectedContest},null,8,["contest"])):t.creatorIds.includes(t.loggedInUser.id)||3178418==t.loggedInUser.osuId?(p(),f(d,{key:2,contest:t.selectedContest},null,8,["contest"])):y("",!0):(p(),m("div",Bi," No contest selected! Choose one on the left. "))])]),zi])};export{xi as default};
