var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,i=(e,i)=>{for(var r in i||(i={}))s.call(i,r)&&o(e,r,i[r]);if(t)for(var r of t(i))n.call(i,r)&&o(e,r,i[r]);return e};import{d as r,i as a,o as l,b as d,f as c,t as u,j as m,w as p,l as h,q as g,O as f,p as y,a as b,J as v,e as C,z as w,F as S,g as I,n as k,s as j,P as $,u as x,m as U,H as M,x as D}from"./vendor.8b5721c7.js";import{_ as J}from"./ContestCard.f4b3ec41.js";import{C as E}from"./CopyPaste.7cb4b414.js";import{_ as T}from"./ModalDialog.2c18b0dc.js";import"./ModesIcons.88090f43.js";var A=r({name:"ContestHeader",props:{name:{type:String,required:!0},url:{type:String,default:null},creator:{type:Object,required:!0}}});const L=["href"],N={key:1},q=h(" hosted by "),R=c("hr",null,null,-1);A.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("h4",null,[e.url?(l(),d("a",{key:0,href:e.url,target:"_blank"},u(e.name),9,L)):(l(),d("span",N,u(e.name),1))]),q,m(r,{user:e.creator},{default:p((()=>[h(u(e.creator.username),1)])),_:1},8,["user"]),R])};var O=r({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null},contestEnd:{type:String,default:null}},data(){return{newContestStart:this.contestStart,newContestEnd:this.contestEnd}},watch:{contestId(){this.newContestStart=this.contestStart,this.newContestEnd=this.contestEnd}},methods:{async updateContestStart(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestStart`,{date:this.newContestStart},e);this.$http.isError(t)?this.newContestStart=this.contestStart:(this.$store.dispatch("updateToastMessages",{message:"Updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:t}))},async updateContestEnd(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestEnd`,{date:this.newContestEnd},e);this.$http.isError(t)?this.newContestEnd=this.contestEnd:(this.$store.dispatch("updateToastMessages",{message:"Updated contest end date",type:"info"}),this.$store.commit("updateContestEnd",{contestId:this.contestId,contestEnd:t}))}}});const _={class:"row"},P={class:"col-sm-6"},V={class:"form-inline w-100"},z=h(" Submissions open: "),B={class:"col-sm-6"},F={class:"form-inline w-100"},G=h(" Submissions close: ");O.render=function(e,t,s,n,o,i){return l(),d("div",_,[c("div",P,[c("div",V,[z,g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newContestStart=t),class:"ml-1 form-control",type:"date",onChange:t[1]||(t[1]=t=>e.updateContestStart(t))},null,544),[[f,e.newContestStart]])])]),c("div",B,[c("div",F,[G,g(c("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.newContestEnd=t),class:"ml-1 form-control",type:"date",onChange:t[3]||(t[3]=t=>e.updateContestEnd(t))},null,544),[[f,e.newContestEnd]])])])])};var H=r({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null},isApproved:{type:Boolean,required:!0}},data(){return{newStatus:this.status}},watch:{contestId(){this.newStatus=this.status}},methods:{async updateStatus(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateStatus`,{status:this.newStatus},e);this.$http.isError(t)?this.newStatus=this.status:(this.$store.dispatch("updateToastMessages",{message:"Updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:t}))}}});y("data-v-6407d32b");const K=h(" Status: "),Y=[w('<option value="" disabled data-v-6407d32b> Select a status </option><option value="hidden" data-v-6407d32b> Hidden </option><option value="beatmapping" data-v-6407d32b> Beatmapping </option><option value="screening" data-v-6407d32b> Screening </option><option value="judging" data-v-6407d32b> Judging </option><option value="complete" data-v-6407d32b> Complete </option>',6)],Q={key:0,class:"small text-danger mt-2"};b(),H.render=function(e,t,s,n,o,i){return l(),d("div",null,[K,g(c("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newStatus=t),class:"form-select form-select w-50 d-inline",onChange:t[1]||(t[1]=t=>e.updateStatus(t))},Y,544),[[v,e.newStatus]]),e.isApproved?C("",!0):(l(),d("div",Q,' Your contest has been queued for approval. Once approved, it will appear in "Active contests". '))])},H.__scopeId="data-v-6407d32b";var W=r({name:"ModeInfo",props:{contestId:{type:String,required:!0},mode:{type:String,default:""}},data(){return{newMode:this.mode}},watch:{contestId(){this.newMode=this.mode}},methods:{async updateMode(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateMode`,{mode:this.newMode},e);this.$http.isError(t)?this.newMode=this.mode:(this.$store.dispatch("updateToastMessages",{message:"Updated contest mode",type:"info"}),this.$store.commit("updateMode",{contestId:this.contestId,mode:t}))}}});y("data-v-5ffc0e64");const X=h(" Mode: "),Z=[w('<option value="" selected disabled data-v-5ffc0e64> Select a mode </option><option value="osu" data-v-5ffc0e64> osu! </option><option value="taiko" data-v-5ffc0e64> osu!taiko </option><option value="catch" data-v-5ffc0e64> osu!catch </option><option value="mania" data-v-5ffc0e64> osu!mania </option>',5)];b(),W.render=function(e,t,s,n,o,i){return l(),d("div",null,[X,g(c("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newMode=t),class:"form-select form-select w-50 d-inline",onChange:t[1]||(t[1]=t=>e.updateMode(t))},Z,544),[[v,e.newMode]])])},W.__scopeId="data-v-5ffc0e64";var ee=r({name:"AnonymizationGuide",props:{contestId:{type:String,required:!0}},data:()=>({csvOutput:null,errors:[]}),methods:{async applyCsvOutput(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/syncAnonymousNames`,{csv:this.csvOutput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated submission names",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:t.submissions}),t.errors.length&&(this.errors=t.errors))}}});const te={class:"mx-4"},se=h(" Submissions must be anonymized locally, then transferred to Mappers' Guild. You have 3 options: "),ne=c("ol",null,[c("li",null,[h("Follow instructions on the "),c("a",{href:"https://github.com/pishifat/contest-anonymization#readme",target:"_blank"},"contest anonymization GitHub repository"),h(".")]),c("li",null,[h("Ask "),c("a",{href:"https://osu.ppy.sh/users/3178418",target:"_blank"},"pishifat"),h(" to do option 1 for you.")]),c("li",null,"Manually anonymize entries (please don't waste your time with this).")],-1),oe=c("span",{class:"small text-secondary"},[h("If you succeed with step 1, paste your "),c("code",null,".csv"),h(" output here as raw text to replace anonymized names:")],-1),ie={class:"row"},re={class:"col-sm-10"},ae={class:"col-sm-2"},le={key:0,class:"small text-warning"},de=h(" The following submissions could not be processed and will need to be renamed manually: ");ee.render=function(e,t,s,n,o,i){return l(),d("div",te,[se,ne,c("div",null,[oe,c("div",ie,[c("div",re,[g(c("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.csvOutput=t),class:"form-control form-inline",rows:"1"},null,512),[[f,e.csvOutput]])]),c("div",ae,[c("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:t[1]||(t[1]=t=>e.applyCsvOutput())}," Save ")])]),e.errors.length?(l(),d("div",le,[de,c("ul",null,[(l(!0),d(S,null,I(e.errors,(e=>(l(),d("li",{key:e},u(e),1)))),128))])])):C("",!0)])])};var ce=r({name:"Urls",props:{contestId:{type:String,required:!0},url:{type:String,default:null},osuContestListingUrl:{type:String,default:null},resultsUrl:{type:String,default:null}},data(){return{newUrl:this.url,newOsuContestListingUrl:this.osuContestListingUrl,newResultsUrl:this.resultsUrl}},watch:{contestId(){this.newUrl=this.url,this.newOsuContestListingUrl=this.osuContestListingUrl,this.newResultsUrl=this.resultsUrl}},methods:{async updateUrl(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateUrl`,{url:this.newUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest url",type:"info"}),this.$store.commit("updateUrl",{contestId:this.contestId,url:t}))},async updateOsuContestListingUrl(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateOsuContestListingUrl`,{url:this.newOsuContestListingUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated osu! contest listing url",type:"info"}),this.$store.commit("updateOsuContestListingUrl",{contestId:this.contestId,osuContestListingUrl:t}))},async updateResultsUrl(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateResultsUrl`,{url:this.newResultsUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated results url",type:"info"}),this.$store.commit("updateResultsUrl",{contestId:this.contestId,resultsUrl:t}))}}});const ue={class:"row"},me={class:"col-sm-6"},pe={class:"form-inline w-100"},he=h(" Contest details URL: "),ge={class:"col-sm-6"},fe={class:"form-inline w-100"},ye=h(" osu! contest listing URL: "),be={class:"col-sm-6"},ve={class:"form-inline w-100"},Ce=h(" Results URL: ");ce.render=function(e,t,s,n,o,i){return l(),d("div",ue,[c("div",me,[c("div",pe,[he,g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newUrl=t),class:"ml-1 form-control",onChange:t[1]||(t[1]=t=>e.updateUrl(t))},null,544),[[f,e.newUrl]])])]),c("div",ge,[c("div",fe,[ye,g(c("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.newOsuContestListingUrl=t),class:"ml-1 form-control",onChange:t[3]||(t[3]=t=>e.updateOsuContestListingUrl(t))},null,544),[[f,e.newOsuContestListingUrl]])])]),c("div",be,[c("div",ve,[Ce,g(c("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.newResultsUrl=t),class:"ml-1 form-control",onChange:t[5]||(t[5]=t=>e.updateResultsUrl(t))},null,544),[[f,e.newResultsUrl]])])])])};var we=r({name:"Description",props:{contestId:{type:String,required:!0},description:{type:String,default:null}},data(){return{newDescription:this.description}},watch:{contestId(){this.newDescription=this.description}},methods:{async updateDescription(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDescription`,{description:this.newDescription},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest description",type:"info"}),this.$store.commit("updateDescription",{contestId:this.contestId,description:t}))}}});const Se={class:"form-inline w-100 mt-2"},Ie=h(" Contest description: "),ke=c("small",{class:"text-secondary"},[h("Click outside the text box to save. Also, this section supports "),c("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),h("!")],-1);we.render=function(e,t,s,n,o,i){return l(),d("div",Se,[Ie,g(c("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newDescription=t),length:"4",class:"ml-1 form-control",placeholder:"click outside the box to save...",maxlength:"40000",rows:"6",onChange:t[1]||(t[1]=t=>e.updateDescription(t))},null,544),[[f,e.newDescription]]),ke])};var je=r({name:"SubmissionsInfo",props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null,processingDelete:!1,manualAnonEdit:null,newAnonymousName:""}),watch:{manualAnonEdit(){this.findAnonymousSubmissionName()}},methods:{findAnonymousSubmissionName(){const e=this.submissions.find((e=>e.id==this.manualAnonEdit));e&&(this.newAnonymousName=e.name)},async updateAnonymousSubmissionName(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${e}/updateAnonymousSubmissionName`,{name:this.newAnonymousName},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Updated anonymous submission name",type:"info"}),this.$store.commit("updateAnonymousSubmissionName",{contestId:this.contestId,submissionId:e,name:s}))},async deleteSubmission(e,t){this.processingDelete=!0;const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${e}/delete`,{},t);this.processingDelete=!1,this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted submission",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:e}))}}});const $e={key:0,class:"table table-sm table-responsive-lg"},xe=c("thead",null,[c("tr",null,[c("th",null,"Creator"),c("th",null,"Anonymized name"),c("th",null,"Link"),c("th")])],-1),Ue=["onChange"],Me={key:1,class:"me-1"},De=["onClick"],Je=[c("i",{class:"fas fa-edit"},null,-1)],Ee=["href"],Te=["onClick"],Ae=["onClick"];je.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[e.submissions.length?(l(),d("table",$e,[xe,c("tbody",null,[(l(!0),d(S,null,I(e.submissions,(s=>(l(),d("tr",{key:s.id},[c("td",null,[m(r,{user:s.creator},null,8,["user"])]),c("td",{class:k(s.name?"":"text-danger")},[e.manualAnonEdit==s.id?g((l(),d("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=t=>e.newAnonymousName=t),class:"ml-1 form-control form-control-sm",onChange:t=>e.updateAnonymousSubmissionName(s.id,t)},null,40,Ue)),[[f,e.newAnonymousName]]):(l(),d("span",Me,u(s.name||"TBD"),1)),c("a",{href:"#",onClick:j((t=>e.manualAnonEdit==s.id?e.manualAnonEdit=null:e.manualAnonEdit=s.id),["prevent"])},Je,8,De)],2),c("td",null,[c("a",{href:s.url,target:"_blank"},u(s.url),9,Ee)]),c("td",null,[e.confirmDelete!=s.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((t=>e.confirmDelete=s.id),["prevent"])}," delete ",8,Te)):(l(),d("a",{key:1,class:k(e.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:j((t=>e.deleteSubmission(s.id,t)),["prevent"])}," confirm ",10,Ae))])])))),128))])])):C("",!0)])};var Le=r({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download}},watch:{contestId(){this.newDownload=this.download}},methods:{async updateDownload(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDownload`,{download:this.newDownload},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest submissions download link",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:t}))}}});y("data-v-3eff7a20");const Ne={class:"row"},qe={class:"col-sm-6"},Re=h(" Download: "),Oe={key:0,class:"me-2 text-secondary"},_e={class:"col-sm-6 small text-secondary"},Pe=h(" This link will appear at the top of judging/screening pages for users to download beatmaps. For contest integrity, user data should be removed as explained in the anonymization guide below. "),Ve=["href"];b(),Le.render=function(e,t,s,n,o,i){return l(),d("div",Ne,[c("div",qe,[Re,e.download?C("",!0):(l(),d("span",Oe,"No download")),g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newDownload=t),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:t[1]||(t[1]=t=>e.updateDownload(t))},null,544),[[f,e.newDownload]])]),c("div",_e,[Pe,e.download?(l(),d("a",{key:0,href:e.download,target:"_blank"},"Test the link here!",8,Ve)):C("",!0)])])},Le.__scopeId="data-v-3eff7a20";var ze=r({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),watch:{contestId(){this.screenerInput=null,this.screenerInput=null}},methods:{async addScreener(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.screenerInput} to list (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:t}))},async removeScreener(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/remove`,{screenerId:e},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:e}))}}});const Be={class:"input-group mb-2"},Fe={class:"input-group-append"},Ge=[c("i",{class:"fas fa-plus fa-xs"},null,-1)],He={key:0},Ke=["onClick"],Ye=["onClick"],Qe={key:1,class:"text-white-50 m-4"};ze.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("div",Be,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.screenerInput=t),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:t[1]||(t[1]=$((t=>e.addScreener(t)),["enter"]))},null,544),[[f,e.screenerInput,void 0,{number:!0}]]),c("div",Fe,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=j((t=>e.addScreener(t)),["prevent"]))},Ge)])]),e.screeners.length?(l(),d("ol",He,[(l(!0),d(S,null,I(e.screeners,(t=>(l(),d("li",{key:t.id},[m(r,{user:t},null,8,["user"]),e.confirmDelete!=t.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>e.confirmDelete=t.id),["prevent"])}," delete ",8,Ke)):(l(),d("a",{key:1,class:"text-danger",href:"#",onClick:j((s=>e.removeScreener(t.id,s)),["prevent"])}," confirm ",8,Ye))])))),128))])):(l(),d("div",Qe," None... "))])};var We=r({name:"ScreeningStatus",props:{contest:{type:Object,required:!0}},methods:{findScreenerDetails(e){let t=0,s=[];for(const i of this.contest.submissions)for(const n of i.screenings)n.screener.id==e.id&&n.vote&&(t++,s.push(n.vote));const n=[1,2,3,4,5],o=[];for(const i of n)s.includes(i)||o.push(i);return{count:t,unusedVotes:o}}}});const Xe={class:"table table-sm table-responsive-lg small"},Ze=c("thead",null,[c("tr",null,[c("th",null,"Screener"),c("th",null,"Count"),c("th",null,"Unused ratings")])],-1),et={class:"mx-1"};We.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("table",Xe,[Ze,c("tbody",null,[(l(!0),d(S,null,I(e.contest.screeners,(t=>(l(),d("tr",{key:t.id},[c("td",null,[m(r,{user:t},null,8,["user"])]),c("td",{class:k(e.findScreenerDetails(t).count>=5?"text-success":"text-danger")},u(e.findScreenerDetails(t).count)+"/5 ",3),c("td",null,[(l(!0),d(S,null,I(e.findScreenerDetails(t).unusedVotes,(e=>(l(),d("span",{key:e},[c("span",et,[(l(!0),d(S,null,I(e,(e=>(l(),d("i",{key:e,class:"fa-star fas text-warning small"})))),128)),h(" ("+u(e)+") ",1)])])))),128))])])))),128))])])])};var tt=r({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),watch:{contestId(){this.judgeInput=null,this.confirmDelete=null}},methods:{async addJudge(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.judgeInput} to list (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:t}))},async removeJudge(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/remove`,{judgeId:e},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:e}))}}});const st={class:"input-group mb-2"},nt={class:"input-group-append"},ot=[c("i",{class:"fas fa-plus fa-xs"},null,-1)],it={key:0},rt=["onClick"],at=["onClick"],lt={key:1,class:"text-white-50 m-4"};tt.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("div",st,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.judgeInput=t),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new judge username/osuId...",onKeyup:t[1]||(t[1]=$((t=>e.addJudge(t)),["enter"]))},null,544),[[f,e.judgeInput,void 0,{number:!0}]]),c("div",nt,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=j((t=>e.addJudge(t)),["prevent"]))},ot)])]),e.judges.length?(l(),d("ul",it,[(l(!0),d(S,null,I(e.judges,(t=>(l(),d("li",{key:t.id},[m(r,{user:t},null,8,["user"]),e.confirmDelete!=t.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>e.confirmDelete=t.id),["prevent"])}," delete ",8,rt)):(l(),d("a",{key:1,class:"text-danger",href:"#",onClick:j((s=>e.removeJudge(t.id,s)),["prevent"])}," confirm ",8,at))])))),128))])):(l(),d("div",lt," None... "))])};var dt=r({name:"MarkdownUserList",components:{CopyPaste:E},props:{users:{type:Array,default:()=>[]}}});y("data-v-0f02c955");const ct=h(" Comma separation: "),ut=c("br",null,null,-1),mt=c("br",null,null,-1),pt=c("br",null,null,-1),ht=h(" Newline separation: "),gt=c("br",null,null,-1),ft=c("br",null,null,-1);b(),dt.render=function(e,t,s,n,o,i){const r=a("copy-paste");return l(),x(r,{class:"tiny"},{default:p((()=>[ct,ut,(l(!0),d(S,null,I(e.users,((t,s)=>(l(),d("span",{key:t.id}," ["+u(t.username)+"](https://osu.ppy.sh/users/"+u(t.osuId)+")"+u(s===e.users.length-2?", and ":s===e.users.length-1?"":", "),1)))),128)),mt,pt,ht,gt,(l(!0),d(S,null,I(e.users,(e=>(l(),d("span",{key:e.id},[h(" ["+u(e.username)+"](https://osu.ppy.sh/users/"+u(e.osuId)+")",1),ft])))),128))])),_:1})},dt.__scopeId="data-v-0f02c955";var yt=r({name:"ScreeningDetail",props:{screenings:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},methods:{findComment(e){const t=this.screenings.find((t=>t.screener.id==e));return t?t.comment:"No comment"},findVote(e){const t=this.screenings.find((t=>t.screener.id==e));return t?t.vote:0}}});const bt={class:"ms-4 small"},vt={class:"ms-4 small text-secondary"};yt.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",bt,[(l(!0),d(S,null,I(e.screeners,(t=>(l(),d("div",{key:t.id},[m(r,{user:t},null,8,["user"]),(l(!0),d(S,null,I(e.findVote(t.id),(e=>(l(),d("i",{key:e,class:"fa-star fas mx-1 text-warning small"})))),128)),c("div",vt,u(e.findComment(t.id)),1)])))),128))])};var Ct=r({name:"ScreeningResults",components:{ScreeningDetail:yt},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const e=JSON.parse(JSON.stringify(this.submissions));for(let t=0;t<e.length;t++){const s=e[t].screenings.reduce(((e,t)=>t.vote?e+t.vote:e),0);e[t].total=s}return e.sort(((e,t)=>e.total>t.total?-1:t.total>e.total?1:0)),e}}});y("data-v-0aa6204d");const wt={class:"d-flex justify-content-between"},St=["href"],It=c("i",{class:"fa-star fas small"},null,-1),kt=h(") "),jt=c("i",{class:"fas fa-angle-down"},null,-1),$t=["id"];b(),Ct.render=function(e,t,s,n,o,i){const r=a("screening-detail");return l(),d("div",null,[c("ul",null,[(l(!0),d(S,null,I(e.sortedSubmissions,(t=>(l(),d("li",{key:t.id},[c("div",wt,[c("a",{class:k(t.total>=e.judgingThreshold?"pass-threshold":""),"data-bs-toggle":"collapse",href:`#collapse-${t.id}`},[h(u(t.creator.username)+" ("+u(t.total)+" ",1),It,kt,jt],10,St)]),c("div",{id:`collapse-${t.id}`,class:"collapse"},[c("div",null,[m(r,{screenings:t.screenings,screeners:e.screeners},null,8,["screenings","screeners"])])],8,$t)])))),128))])])},Ct.__scopeId="data-v-0aa6204d";var xt=r({name:"JudgingThreshold",props:{contestId:{type:String,required:!0},judgingThreshold:{type:Number,default:0}},data(){return{newJudgingThreshold:this.judgingThreshold}},watch:{contestId(){this.newJudgingThreshold=this.judgingThreshold}},methods:{async updateJudgingThreshold(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`Updated judging threshold to ${t}`,type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:t}))}}});const Ut={class:"row"},Mt={class:"input-group col-sm-4"},Dt={class:"input-group-append"},Jt=[h(" save "),c("i",{class:"fa-star fas small"},null,-1)];xt.render=function(e,t,s,n,o,i){return l(),d("div",Ut,[c("div",Mt,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newJudgingThreshold=t),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"judging threshold",onKeyup:t[1]||(t[1]=$((t=>e.updateJudgingThreshold(t)),["enter"]))},null,544),[[f,e.newJudgingThreshold,void 0,{number:!0}]]),c("div",Dt,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=j((t=>e.updateJudgingThreshold(t)),["prevent"]))},Jt)])])])};var Et=r({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({nameInput:null,maxScoreInput:null,processingDelete:!1,confirmDelete:null}),computed:{scoredCriteria(){return this.criterias.filter((e=>"comments"!==e.name))},commentsEnabled(){return this.criterias.some((e=>"comments"==e.name))}},watch:{contestId(){this.nameInput=null,this.maxScoreInput=null,this.confirmDelete=null}},methods:{async addCriteria(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/addCriteria`,{name:this.nameInput,maxScore:this.maxScoreInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Added criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))},async deleteCriteria(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/deleteCriteria`,{criteriaId:e},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:s}))},async toggleComments(){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleComments`,{});this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Toggled comments",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:e}))}}});const Tt={class:"input-group w-75 mb-2"},At={class:"input-group-append"},Lt=[h(" Add criteria "),c("i",{class:"fas fa-plus fa-xs"},null,-1)],Nt={class:"ms-2 mb-2"},qt=[h(" See judging criteria "),c("i",{class:"fas fa-angle-down"},null,-1)],Rt={id:"judgingCriteria",class:"collapse mx-2"},Ot={key:0,class:"table table-sm table-responsive-lg"},_t=c("thead",null,[c("tr",null,[c("th",null,"Criteria"),c("th",null,"Max score"),c("th",null,"Delete")])],-1),Pt={class:"text-capitalize"},Vt=["onClick"],zt=["onClick"],Bt={key:1};Et.render=function(e,t,s,n,o,i){return l(),d("div",null,[c("div",Tt,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.nameInput=t),type:"text",class:"form-control",placeholder:"criteria name..."},null,512),[[f,e.nameInput]]),g(c("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.maxScoreInput=t),type:"number",class:"form-control",placeholder:"total points..."},null,512),[[f,e.maxScoreInput]]),c("div",At,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=t=>e.addCriteria(t))},Lt)])]),c("div",Nt,[c("a",{href:"#judgingCriteria","data-bs-toggle":"collapse",onClick:t[3]||(t[3]=j((()=>{}),["prevent"]))},qt),c("div",Rt,[e.criterias.length?(l(),d("table",Ot,[_t,c("tbody",null,[(l(!0),d(S,null,I(e.scoredCriteria,(t=>(l(),d("tr",{key:t.id},[c("td",Pt,u(t.name),1),c("td",null,u(t.maxScore),1),c("td",null,[e.confirmDelete!=t.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>e.confirmDelete=t.id),["prevent"])}," delete ",8,Vt)):(l(),d("a",{key:1,class:k(e.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:j((s=>e.deleteCriteria(t.id,s)),["prevent"])}," confirm ",10,zt))])])))),128)),c("tr",null,[c("td",{class:k(e.commentsEnabled?"":"text-secondary")}," Comments "+u(e.commentsEnabled?"":"(disabled)"),3),c("td",{class:k(e.commentsEnabled?"":"text-secondary")}," N/A ",2),c("td",null,[c("a",{href:"#",class:"text-danger",onClick:t[4]||(t[4]=j((t=>e.toggleComments()),["prevent"]))},u(e.commentsEnabled?"disable":"enable"),1)])])])])):(l(),d("div",Bt," No criteria yet... "))])])])};var Ft=r({name:"JudgingLeaderboard",props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data:()=>({selectedScore:null,displayMode:"criterias",sortDesc:!1}),computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((e=>{var t;return e.creator.id==(null==(t=this.selectedScore)?void 0:t.creator.id)}))},scoredCriteria(){return this.contest.criterias.filter((e=>"comments"!==e.name))},judges(){return this.contest.judges}},methods:{getCriteriaScore(e,t){var s;return(null==(s=e.criteriaSum.find((e=>e.criteriaId===t)))?void 0:s.sum)||0},getJudgeScore(e,t,s=!1){const n=e.judgingSum.find((e=>e.judgeId===t)),o=(null==n?void 0:n.standardized)||0;return s?`${(null==n?void 0:n.sum)||0} (${o.toFixed(3)})`:(null==n?void 0:n.sum)||0},getJudgeAvg(e){var t;return(null==(t=this.judgesCorrel.find((t=>t.id===e)))?void 0:t.rawAvg.toFixed(4))||0},getJudgeSd(e){var t;return(null==(t=this.judgesCorrel.find((t=>t.id===e)))?void 0:t.sd.toFixed(4))||0},getJudgeCorrel(e){var t;return((null==(t=this.judgesCorrel.find((t=>t.id===e)))?void 0:t.correl)||0).toFixed(4)},getFinalScore:e=>isNaN(e)?"0":e.toFixed(4),sortByCriteria(e){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:e,sortDesc:this.sortDesc})},sortByJudge(e){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:e,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});const Gt={class:"row"},Ht={class:"col-sm"},Kt=h(" Score display: "),Yt=h(" | "),Qt=h(" | "),Wt={class:"row"},Xt={class:"col-sm"},Zt={class:"table table-sm small table-responsive-lg"},es=c("th",null,"#",-1),ts=c("th",null,"User",-1),ss=["onClick"],ns={class:"cursor-default"},os=c("td",null,null,-1),is=c("td",null,"AVG",-1),rs=c("td",null,null,-1),as=c("td",null,null,-1),ls={class:"cursor-default"},ds=c("td",null,null,-1),cs=c("td",null,"SD",-1),us=c("td",null,null,-1),ms=c("td",null,null,-1),ps={class:"cursor-default"},hs=c("td",null,null,-1),gs=c("td",null,"COR",-1),fs=c("td",null,null,-1),ys=c("td",null,null,-1);Ft.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("div",Gt,[c("div",Ht,[Kt,c("a",{href:"#",class:k("criterias"===e.displayMode?"border-bottom border-secondary":""),onClick:t[0]||(t[0]=j((t=>e.displayMode="criterias"),["prevent"]))}," Criteria ",2),Yt,c("a",{href:"#",class:k("judges"===e.displayMode?"border-bottom border-secondary":""),onClick:t[1]||(t[1]=j((t=>e.displayMode="judges"),["prevent"]))}," Judge ",2),Qt,c("a",{href:"#",class:k("detail"===e.displayMode?"border-bottom border-secondary":""),onClick:t[2]||(t[2]=j((t=>e.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),c("div",Wt,[c("div",Xt,[c("table",Zt,[c("thead",null,[c("tr",null,[es,ts,"criterias"===e.displayMode?(l(!0),d(S,{key:0},I(e.scoredCriteria,(e=>(l(),d("th",{key:e.id},u(e.name),1)))),128)):(l(!0),d(S,{key:1},I(e.judges,(e=>(l(),d("th",{key:e.id},u(e.username),1)))),128)),c("th",null,[c("a",{href:"#",onClick:t[3]||(t[3]=j(((...t)=>e.sortByRawScore&&e.sortByRawScore(...t)),["prevent"]))}," Final Score (raw) ")]),c("th",null,[c("a",{href:"#",onClick:t[4]||(t[4]=j(((...t)=>e.sortByStdScore&&e.sortByStdScore(...t)),["prevent"]))}," Final Score (standardized) ")])])]),c("tbody",null,[(l(!0),d(S,null,I(e.usersScores,((t,s)=>(l(),d("tr",{key:s,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:s=>e.selectedScore=t},[c("td",null,u(s+1),1),c("td",null,[m(r,{user:t.creator},null,8,["user"])]),"criterias"===e.displayMode?(l(!0),d(S,{key:0},I(e.scoredCriteria,(s=>(l(),d("td",{key:s.id},u(e.getCriteriaScore(t,s.id)),1)))),128)):(l(!0),d(S,{key:1},I(e.judges,(s=>(l(),d("td",{key:s.id},u(e.getJudgeScore(t,s.id,"detail"===e.displayMode)),1)))),128)),c("td",null,u(t.rawFinalScore),1),c("td",null,u(e.getFinalScore(t.standardizedFinalScore)),1)],8,ss)))),128)),"detail"===e.displayMode?(l(),d(S,{key:0},[c("tr",ns,[os,is,(l(!0),d(S,null,I(e.judges,(t=>(l(),d("td",{key:t.id},u(e.getJudgeAvg(t.id)),1)))),128)),rs,as]),c("tr",ls,[ds,cs,(l(!0),d(S,null,I(e.judges,(t=>(l(),d("td",{key:t.id},u(e.getJudgeSd(t.id)),1)))),128)),us,ms]),c("tr",ps,[hs,gs,(l(!0),d(S,null,I(e.judges,(t=>(l(),d("td",{key:t.id},u(e.getJudgeCorrel(t.id)),1)))),128)),fs,ys])],64)):C("",!0)])])])])])};var bs=r({name:"JudgingDetail",components:{ModalDialog:T},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(e){const t=this.commentsExpanded.findIndex((t=>t===e));-1!==t?this.commentsExpanded.splice(t,1):this.commentsExpanded.push(e)},getCollapseClass(e){return this.commentsExpanded.includes(e)?"fa-chevron-down":"fa-chevron-right"}}});const vs={class:"container"},Cs=["href","onClick"],ws={key:1,class:"small text-capitalize ms-3"},Ss=["id"],Is={class:"small text-white-50",style:{"white-space":"pre-line"}},ks={key:0};bs.render=function(e,t,s,n,o,i){const r=a("user-link"),g=a("modal-dialog");return l(),x(g,{id:"detailModal",loaded:Boolean(e.submission)},{header:p((()=>[h(u(e.submission.creator.username)+" ("+u(e.submission.name)+") ",1)])),default:p((()=>[c("div",vs,[(l(!0),d(S,null,I(e.submission.judgings,((t,s)=>(l(),d("div",{key:t.id},[m(r,{user:t.judge},null,8,["user"]),(l(!0),d(S,null,I(t.judgingScores,(t=>(l(),d("div",{key:t.id,class:"my-1"},["comments"==t.criteria.name?(l(),d("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${t.id}`,onClick:s=>e.showComment(t.id)},[c("i",{class:k(["small fas me-2",e.getCollapseClass(t.id)])},null,2),h(" "+u(t.criteria.name),1)],8,Cs)):(l(),d("span",ws,u(t.criteria.name)+" ("+u(t.score)+") ",1)),c("p",{id:`judgingToCriteria${t.id}`,class:"text-light ms-4 collapse"},[c("span",Is,u(t.comment),1)],8,Ss)])))),128)),s<e.submission.judgings.length-1?(l(),d("hr",ks)):C("",!0)])))),128))])])),_:1},8,["loaded"])};var js=r({name:"JudgeStatuses",components:{JudgingDetail:bs},props:{contest:{type:Object,required:!0}},data:()=>({selected:null}),computed:{judgeCount(){var e;return(null==(e=this.contest)?void 0:e.judges.length)||0}},methods:{getJudgesInvolvedCount:e=>e.judgings.map((e=>e.judge)).length,getMissingJudges(e){const t=e.judgings.map((e=>e.judge.id)),s=[];for(const n of this.contest.judges)if(t.includes(n.id)){const t=e.judgings.find((e=>e.judge.id===n.id));t&&t.judgingScores.length!==this.contest.criterias.length&&s.push(n)}else s.push(n);return s.map((e=>e.username)).join(", ")},getSubmissionIdByCreatorId(e){var t;return(null==(t=this.contest)?void 0:t.submissions.find((t=>t.creator.id===e))).id}}});y("data-v-a36d03c2");const $s={class:"table table-sm table-responsive-lg small"},xs=c("thead",null,[c("tr",null,[c("th",null,"Submission creator"),c("th",null,"Count"),c("th",null,"Incomplete judges")])],-1),Us=["onClick"];b(),js.render=function(e,t,s,n,o,i){const r=a("user-link"),p=a("judging-detail");return l(),d("div",null,[c("table",$s,[xs,c("tbody",null,[(l(!0),d(S,null,I(e.contest.submissions,(t=>(l(),d("tr",{key:t.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",class:"modalable",onClick:s=>e.selected=t},[c("td",null,[m(r,{user:t.creator},null,8,["user"])]),c("td",{class:k(e.getJudgesInvolvedCount(t)>=e.judgeCount?"text-success":"text-danger")},u(e.getJudgesInvolvedCount(t))+"/"+u(e.judgeCount),3),c("td",null,u(e.getMissingJudges(t)),1)],8,Us)))),128))])]),m(p,{id:"detailModalAdmin",submission:e.selected},null,8,["submission"])])},js.__scopeId="data-v-a36d03c2";var Ms=r({name:"MarkdownJudgingLeaderboard",components:{CopyPaste:E},props:{usersScores:{type:Array,required:!0},contest:{type:Object,required:!0},judgeCount:{type:Number,required:!0}},computed:{scoredCriteria(){return this.contest.criterias.filter((e=>"comments"!==e.name))}},methods:{getSubmissionIdByCreatorId(e){var t;return(null==(t=this.contest)?void 0:t.submissions.find((t=>t.creator.id===e))).id},getCriteriaSumbyName(e,t){const s=t.find((t=>t.name===e));return(null==s?void 0:s.sum)||NaN}}});y("data-v-4fcd74b7");const Ds=c("div",null," | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | ",-1);b(),Ms.render=function(e,t,s,n,o,i){const r=a("copy-paste");return l(),x(r,{class:"tiny"},{default:p((()=>[c("div",null," | Rank | Beatmap | Judging | Musical representation ("+u(10*e.judgeCount)+") | Creativity ("+u(10*e.judgeCount)+") | Gameplay ("+u(10*e.judgeCount)+") | Limitation ("+u(5*e.judgeCount)+") | Total (standardized/raw) | ",1),Ds,(l(!0),d(S,null,I(e.usersScores,((t,s)=>(l(),d("div",{key:s},[h(" | \\#"+u(s+1)+" | [TITLE](LINK) by ["+u(t.creator.username)+"](https://osu.ppy.sh/users/"+u(t.creator.osuId)+") | [details](https://mappersguild.com/contests/results?submission="+u(e.getSubmissionIdByCreatorId(t.creator.id))+") ",1),(l(!0),d(S,null,I(e.scoredCriteria,(s=>(l(),d("span",{key:s.id},"| "+u(e.getCriteriaSumbyName(s.name,t.criteriaSum)+" "),1)))),128)),h(" | **"+u(Math.round(100*t.standardizedFinalScore)/100)+"** ("+u(t.rawFinalScore)+") | ",1)])))),128))])),_:1})},Ms.__scopeId="data-v-4fcd74b7";var Js=r({name:"JudgingResults",components:{JudgingLeaderboard:Ft,MarkdownJudgingLeaderboard:Ms,JudgeStatuses:js},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var e;return(null==(e=this.contest)?void 0:e.judges.length)||0}},watch:{async contestId(){await this.getJudgingResults()}},async created(){await this.getJudgingResults()},methods:{async getJudgingResults(){const e=await this.$http.executeGet(`/contests/listing/${this.contestId}/judgingResults`);this.$http.isError(e)||(this.contest=e.contest,this.usersScores=e.usersScores,this.judgesCorrel=e.judgesCorrel)},getJudgesInvolvedCount:e=>e.judgings.map((e=>e.judge)).length,getJudgesInvolved:e=>e.judgings.map((e=>e.judge.username)).join(", "),getSubmissionIdByCreatorId(e){var t;return(null==(t=this.contest)?void 0:t.submissions.find((t=>t.creator.id===e))).id}}});const Es={key:0},Ts={class:"ms-2 mb-2"},As=[h(" See judging status per submission "),c("i",{class:"fas fa-angle-down"},null,-1)],Ls={class:"ms-2 mb-2"},Ns=[h(" See judging leaderboard "),c("i",{class:"fas fa-angle-down"},null,-1)],qs={class:"ms-2 mb-2"},Rs=[h(" See markdown judging leaderboard "),c("i",{class:"fas fa-angle-down"},null,-1)];Js.render=function(e,t,s,n,o,i){const r=a("judge-statuses"),u=a("judging-leaderboard"),p=a("markdown-judging-leaderboard");return e.contest?(l(),d("div",Es,[c("div",Ts,[c("a",{href:"#judgeStatuses","data-bs-toggle":"collapse",onClick:t[0]||(t[0]=j((()=>{}),["prevent"]))},As),m(r,{id:"judgeStatuses",class:"collapse mx-2",contest:e.contest},null,8,["contest"])]),c("div",Ls,[c("a",{href:"#judgingLeaderboard","data-bs-toggle":"collapse",onClick:t[1]||(t[1]=j((()=>{}),["prevent"]))},Ns),m(u,{id:"judgingLeaderboard",class:"collapse mx-2","contest-id":e.contest.id,contest:e.contest,"users-scores":e.usersScores,"judges-correl":e.judgesCorrel},null,8,["contest-id","contest","users-scores","judges-correl"])]),c("div",qs,[c("a",{href:"#markdownJudgingLeaderboard","data-bs-toggle":"collapse",onClick:t[2]||(t[2]=j((()=>{}),["prevent"]))},Rs),m(p,{id:"markdownJudgingLeaderboard",class:"collapse","users-scores":e.usersScores,contest:e.contest,"judge-count":e.judgeCount},null,8,["users-scores","contest","judge-count"])])])):C("",!0)};var Os=r({name:"ContestInfo",components:{ContestHeader:A,DateInfo:O,AnonymizationGuide:ee,ModeInfo:W,StatusInfo:H,SubmissionsInfo:je,DownloadInfo:Le,Urls:ce,Description:we,ScreenersInfo:ze,JudgesInfo:tt,MarkdownUserList:dt,ScreeningResults:Ct,ScreeningStatus:We,JudgingThreshold:xt,CriteriaSelection:Et,JudgingResults:Js},props:{contest:{type:Object,required:!0}},data(){return{newContestStart:this.contest.contestStart,showContestStartDateInput:!1,screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}}});const _s=c("h5",null,"General",-1),Ps=c("hr",null,null,-1),Vs=c("h5",null," Submissions ",-1),zs={class:"ms-2 mb-2"},Bs=c("i",{class:"fas fa-angle-down"},null,-1),Fs={class:"ms-2 mb-2"},Gs=[h(" See submission anonymization guide "),c("i",{class:"fas fa-angle-down"},null,-1)],Hs=c("hr",null,null,-1),Ks=c("h4",{class:"mb-4"}," Screening ",-1),Ys=c("h5",null," Screeners ",-1),Qs={class:"ms-2 mb-2"},Ws=c("i",{class:"fas fa-angle-down"},null,-1),Xs={id:"screeners",class:"row collapse mb-2"},Zs=c("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their screening progress. ",-1),en=c("div",null,'To begin screening, send this link to the users above and ensure your contest\'s status is set to "Screening"!',-1),tn=c("hr",null,null,-1),sn=c("h5",null," Screening Results ",-1),nn={class:"ms-2 mb-2"},on=[h(" See screening status per screener "),c("i",{class:"fas fa-angle-down"},null,-1)],rn={class:"row mb-2"},an=c("div",{class:"col-sm-8 small text-secondary"},[h(" Submissions with this "),c("i",{class:"fa-star fas text-warning small"}),h(' score or above in "screening results" will be available to judges. If your contest skips the screening process, set this to "0". ')],-1),ln={class:"ms-2 mb-2"},dn=[h(" See screening results "),c("i",{class:"fas fa-angle-down"},null,-1)],cn=c("hr",null,null,-1),un=c("h4",{class:"mb-4"}," Judging ",-1),mn=c("h5",null," Judges ",-1),pn={class:"ms-2 mb-2"},hn=c("i",{class:"fas fa-angle-down"},null,-1),gn={id:"judges",class:"row collapse mb-2"},fn=c("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their judging progress. ",-1),yn=c("div",null,'To begin judging, send this link to the users above and ensure your contest\'s status is set to "Judging"!',-1),bn=c("hr",null,null,-1),vn=c("h5",null," Judging Criteria ",-1),Cn=c("hr",null,null,-1),wn=c("h5",null," Judging Results ",-1);Os.render=function(e,t,s,n,o,i){const r=a("contest-header"),p=a("status-info"),g=a("mode-info"),f=a("date-info"),y=a("urls"),b=a("description"),v=a("submissions-info"),C=a("download-info"),w=a("anonymization-guide"),S=a("screeners-info"),I=a("markdown-user-list"),k=a("screening-status"),$=a("judging-threshold"),x=a("screening-results"),U=a("judges-info"),M=a("criteria-selection"),D=a("judging-results");return l(),d("div",null,[m(r,{name:e.contest.name,url:e.contest.url,creator:e.contest.creator},null,8,["name","url","creator"]),_s,c("div",null,[m(p,{class:"mb-2","contest-id":e.contest.id,status:e.contest.status,"is-approved":e.contest.isApproved},null,8,["contest-id","status","is-approved"]),m(g,{class:"mb-2","contest-id":e.contest.id,mode:e.contest.mode},null,8,["contest-id","mode"]),m(f,{class:"mb-2","contest-id":e.contest.id,"contest-start":e.contest.contestStart?e.contest.contestStart.slice(0,10):null,"contest-end":e.contest.contestEnd?e.contest.contestEnd.slice(0,10):null},null,8,["contest-id","contest-start","contest-end"]),m(y,{"contest-id":e.contest.id,url:e.contest.url||null,"osu-contest-listing-url":e.contest.osuContestListingUrl||null,"results-url":e.contest.resultsUrl||null},null,8,["contest-id","url","osu-contest-listing-url","results-url"]),m(b,{"contest-id":e.contest.id,description:e.contest.description},null,8,["contest-id","description"]),Ps,c("div",null,[Vs,c("div",zs,[c("a",{href:"#submissions","data-bs-toggle":"collapse",onClick:t[0]||(t[0]=j((()=>{}),["prevent"]))},[h(" See all submissions ("+u(e.contest.submissions.length)+") ",1),Bs])]),m(v,{id:"submissions",class:"collapse","contest-id":e.contest.id,submissions:e.contest.submissions},null,8,["contest-id","submissions"]),m(C,{"contest-id":e.contest.id,download:e.contest.download},null,8,["contest-id","download"]),c("div",Fs,[c("a",{href:"#anonymizationGuide","data-bs-toggle":"collapse",onClick:t[1]||(t[1]=j((()=>{}),["prevent"]))},Gs)]),m(w,{id:"anonymizationGuide",class:"collapse","contest-id":e.contest.id},null,8,["contest-id"]),Hs,Ks,Ys,c("div",Qs,[c("a",{href:"#screeners","data-bs-toggle":"collapse",onClick:t[2]||(t[2]=j((()=>{}),["prevent"]))},[h(" See all screeners ("+u(e.contest.screeners.length)+") ",1),Ws])]),c("div",Xs,[m(S,{class:"col-sm-4","contest-id":e.contest.id,screeners:e.contest.screeners},null,8,["contest-id","screeners"]),m(I,{class:"col-sm-7",users:e.contest.screeners},null,8,["users"]),Zs]),en,c("code",null,"https://mappersguild.com/contests/screening?contest="+u(e.contest.id),1),tn,sn,c("div",nn,[c("a",{href:"#screeningStatus","data-bs-toggle":"collapse",onClick:t[3]||(t[3]=j((()=>{}),["prevent"]))},on)]),m(k,{id:"screeningStatus",class:"collapse mx-2",contest:e.contest},null,8,["contest"]),c("div",rn,[m($,{class:"col-sm-4","contest-id":e.contest.id,"judging-threshold":e.contest.judgingThreshold},null,8,["contest-id","judging-threshold"]),an]),c("div",ln,[c("a",{href:"#screeningResults","data-bs-toggle":"collapse",onClick:t[4]||(t[4]=j((()=>{}),["prevent"]))},dn)]),m(x,{id:"screeningResults",class:"collapse","contest-id":e.contest.id,"contest-name":e.contest.name,submissions:e.contest.submissions,"judging-threshold":e.contest.judgingThreshold,screeners:e.contest.screeners},null,8,["contest-id","contest-name","submissions","judging-threshold","screeners"]),cn,un,mn,c("div",pn,[c("a",{href:"#judges","data-bs-toggle":"collapse",onClick:t[5]||(t[5]=j((()=>{}),["prevent"]))},[h(" See all judges ("+u(e.contest.judges.length)+") ",1),hn])]),c("div",gn,[m(U,{class:"col-sm-4","contest-id":e.contest.id,judges:e.contest.judges},null,8,["contest-id","judges"]),m(I,{class:"col-sm-7",users:e.contest.judges},null,8,["users"]),fn]),yn,c("code",null,"https://mappersguild.com/contests/judging?contest="+u(e.contest.id),1),bn,vn,m(M,{"contest-id":e.contest.id,criterias:e.contest.criterias},null,8,["contest-id","criterias"]),Cn,wn,m(D,{"contest-id":e.contest.id},null,8,["contest-id"])])])])};var Sn=r({name:"MapSubmissionForm",props:{contestId:{type:String,required:!0}},data(){return{newSubmissionUrl:this.ok}},computed:i(i({},U(["loggedInUser"])),M(["userSubmission"])),watch:{contestId(){this.newSubmissionUrl=this.userSubmission?this.userSubmission.url:""}},methods:{async createSubmission(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/createSubmission`,{submissionUrl:this.newSubmissionUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Submitted!",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:t}))}}});y("data-v-f0e10694");const In={class:"row"},kn={class:"col-sm-12 mb-2"},jn=h(" Current submission: "),$n={key:0,class:"me-2 text-secondary"},xn={key:1},Un=["href"],Mn={class:"small text-secondary ms-1"},Dn=h("(last updated "),Jn=h(")"),En={class:"col-sm-8"},Tn={class:"col-sm-4"},An=c("div",{class:"small text-secondary"}," Upload your beatmap to a file sharing service and provide a link here! For various reasons, this website does not host beatmap uploads. ",-1);b(),Sn.render=function(e,t,s,n,o,i){return l(),d("div",In,[c("div",kn,[jn,e.userSubmission?e.userSubmission&&e.userSubmission.url?(l(),d("span",xn,[c("a",{href:e.userSubmission.url,target:"_blank",class:"small"},u(e.userSubmission.url),9,Un),c("span",Mn,[Dn,c("code",null,u(new Date(e.userSubmission.updatedAt).toString().slice(4,33)),1),Jn])])):C("",!0):(l(),d("span",$n,"No submission yet!"))]),c("div",En,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newSubmissionUrl=t),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link..."},null,512),[[f,e.newSubmissionUrl]])]),c("div",Tn,[c("button",{class:"btn btn-sm btn-outline-info w-100",onClick:t[1]||(t[1]=t=>e.createSubmission(t))}," Submit ")]),An])},Sn.__scopeId="data-v-f0e10694";var Ln=r({name:"LimitedContestInfo",components:{ContestHeader:A,MapSubmissionForm:Sn},props:{contest:{type:Object,required:!0}}});const Nn=c("h5",null,"General",-1),qn={key:0},Rn=["innerHTML"],On={key:1},_n=h(" This contest is currently in the "),Pn=h(" phase. "),Vn={key:2},zn=["href"],Bn=c("hr",null,null,-1),Fn={key:3},Gn=c("h5",null,"Submission",-1),Hn={key:0},Kn={key:0},Yn={key:1},Qn=h(" Maps can be submitted until "),Wn={key:1},Xn=h(" This contest is being hosted on "),Zn=c("a",{href:"https://osu.ppy.sh/community/contests",target:"_blank"},"osu!'s contest listing",-1),eo=h(". Submit your beatmap on the "),to=["href"],so=h("! "),no={key:4},oo=c("h5",null,"Results",-1),io=["href"],ro=["href"];Ln.render=function(e,t,s,n,o,i){const r=a("contest-header"),p=a("map-submission-form");return l(),d("div",null,[m(r,{name:e.contest.name,url:e.contest.url,creator:e.contest.creator},null,8,["name","url","creator"]),Nn,e.contest.description?(l(),d("div",qn,[c("div",{class:"small mt-2 bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:e.$md.render(e.contest.description.trim())},null,8,Rn)])):C("",!0),"complete"!==e.contest.status?(l(),d("div",On,[_n,c("b",null,u(e.contest.status),1),Pn])):C("",!0),e.contest.url?(l(),d("div",Vn,[c("a",{href:e.contest.url,target:"_blank"},"Read more about the contest here!",8,zn)])):C("",!0),Bn,"complete"!==e.contest.status?(l(),d("div",Fn,[Gn,e.contest.osuContestListingUrl?(l(),d("div",Wn,[Xn,Zn,eo,c("a",{href:e.contest.osuContestListingUrl,target:"_blank"},"official contest page",8,to),so])):(l(),d("div",Hn,[new Date(e.contest.contestEnd)<new Date?(l(),d("div",Kn," This contest is no longer accepting new submissions. ")):(l(),d("div",Yn,[Qn,c("code",null,u(new Date(e.contest.contestEnd)),1),m(p,{class:"mt-2","contest-id":e.contest.id},null,8,["contest-id"])]))]))])):(l(),d("div",no,[oo,c("div",null,[c("a",{href:e.contest.resultsUrl,target:"_blank"},"View contest results here!",8,io)]),c("div",null,[c("a",{href:"/contests/results?contest="+e.contest.id,target:"_blank"},"View Mappers' Guild judging scores here!",8,ro)])]))])};var ao=r({name:"AddContest",data:()=>({contestName:""}),methods:{async addContest(e){const t=await this.$http.executePost("/contests/listing/create",{name:this.contestName},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",t))}}});const lo={class:"container card card-body py-3 mb-2"};ao.render=function(e,t,s,n,o,i){return l(),d("div",lo,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.contestName=t),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[f,e.contestName,void 0,{trim:!0}]]),c("button",{class:"btn w-100 btn-info",type:"button",onClick:t[1]||(t[1]=t=>e.addContest(t))}," Add new contest ")])};var co={state:{contests:[],selectedContestId:null},mutations:{setContests(e,t){e.contests=t},addContest(e,t){e.contests.unshift(t),e.selectedContestId=t.id},setSelectedContestId(e,t){e.selectedContestId=t},updateContestStart(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.contestStart=t.contestStart)},updateContestEnd(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.contestEnd=t.contestEnd)},updateUrl(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.url=t.url)},updateOsuContestListingUrl(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.osuContestListingUrl=t.osuContestListingUrl)},updateResultsUrl(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.resultsUrl=t.resultsUrl)},updateDownload(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.download=t.download)},deleteSubmission(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.submissions.findIndex((e=>e.id==t.submissionId));-1!==e&&s.submissions.splice(e,1)}},addScreener(e,t){const s=e.contests.find((e=>e.id==t.contestId));null==s||s.screeners.push(t.screener)},deleteScreener(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.screeners.findIndex((e=>e.id==t.screenerId));-1!==e&&s.screeners.splice(e,1)}},addJudge(e,t){const s=e.contests.find((e=>e.id==t.contestId));null==s||s.judges.push(t.judge)},deleteJudge(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.judges.findIndex((e=>e.id==t.judgeId));-1!==e&&s.judges.splice(e,1)}},updateJudgingThreshold(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.judgingThreshold=t.judgingThreshold)},updateStatus(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.status=t.status)},updateMode(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.mode=t.mode)},updateContestCriterias(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.criterias=t.criterias)},updateDescription(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.description=t.description)},updateSubmissions(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.submissions=t.submissions)},updateAnonymousSubmissionName(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.submissions.findIndex((e=>e.id==t.submissionId));-1!==e&&(s.submissions[e].name=t.name)}}},getters:{selectedContest:e=>e.contests.find((t=>t.id===e.selectedContestId)),userSubmission:e=>{const t=e.contests.find((t=>t.id===e.selectedContestId));return t&&t.submissions&&t.submissions.length?t.submissions[0]:null}}},uo=r({name:"ContestPage",components:{ContestCard:J,AddContest:ao,ContestInfo:Os,LimitedContestInfo:Ln},data:()=>({displayMode:"activeContests",firstLoadComplete:!1,loadedSpecificContest:!1}),computed:i(i(i({},U(["loggedInUser"])),U({contests:e=>e.contests.contests,selectedContestId:e=>e.contests.selectedContestId})),M(["selectedContest"])),watch:{async displayMode(){this.firstLoadComplete&&(this.$router.replace("/contests/listing"),await this.loadContests())}},beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",co)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},async created(){await this.loadContests(),this.firstLoadComplete=!0},methods:{async loadContests(){const e=this.$route.query.contest;if(e&&!this.contests.length){this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null);const t=await this.$http.initialRequest(`/contests/listing/searchContest/${e}`);this.$http.isError(t)||(t.creator.id==this.loggedInUser.id?this.displayMode="myContests":"complete"==t.status&&(this.displayMode="completedContests"),this.$store.commit("setContests",[t]),this.$store.commit("setSelectedContestId",e),this.loadedSpecificContest=!0)}else{this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null);const e=await this.$http.executeGet(`/contests/listing/relevantInfo/${this.displayMode}`);this.$http.isError(e)||(this.$store.commit("setContests",e),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1)}},async loadMore(){await this.loadContests()}}});const mo={class:"row"},po={class:"col-sm-3"},ho={class:"container card card-body py-3 mb-2"},go=c("hr",null,null,-1),fo={key:1,class:"container card card-body py-3 mb-2 text-secondary"},yo={key:2},bo={class:"col-sm-9 container card card-body"},vo={key:0},Co=c("div",{class:"radial-divisor"},null,-1);uo.render=function(e,t,s,n,o,i){const r=a("add-contest"),u=a("contest-card"),h=a("limited-contest-info"),g=a("contest-info");return l(),d("div",null,[c("div",mo,[c("div",po,[c("div",ho,[c("a",{href:"#",onClick:t[0]||(t[0]=j((t=>e.displayMode="activeContests"),["prevent"]))},[c("span",{class:k("activeContests"===e.displayMode?"border-bottom border-secondary":"")}," Active contests ",2)]),c("a",{href:"#",onClick:t[1]||(t[1]=j((t=>e.displayMode="completedContests"),["prevent"]))},[c("span",{class:k("completedContests"===e.displayMode?"border-bottom border-secondary":"")},"Completed contests",2)]),c("a",{href:"#",onClick:t[2]||(t[2]=j((t=>e.displayMode="myContests"),["prevent"]))},[c("span",{class:k("myContests"===e.displayMode?"border-bottom border-secondary":"")},"My contests",2)])]),go,"myContests"==e.displayMode&&e.contests&&!e.loadedSpecificContest?(l(),x(r,{key:0})):C("",!0),m(D,{name:"list",tag:"div",class:"row"},{default:p((()=>[(l(!0),d(S,null,I(e.contests,(e=>(l(),x(u,{key:e.id,class:"col-sm-12 my-2",contest:e,route:"listing"},null,8,["contest"])))),128))])),_:1}),e.contests?C("",!0):(l(),d("div",fo," Loading... ")),e.loadedSpecificContest?(l(),d("div",yo,[c("button",{class:"btn w-100 btn-info",type:"button",onClick:t[3]||(t[3]=t=>e.loadMore())}," Load other contests ")])):C("",!0)]),c("div",bo,[e.selectedContestId?"myContests"!==e.displayMode?(l(),x(h,{key:1,contest:e.selectedContest},null,8,["contest"])):e.selectedContest.creator.id==e.loggedInUser.id?(l(),x(g,{key:2,contest:e.selectedContest},null,8,["contest"])):C("",!0):(l(),d("div",vo," No contest selected! Choose one on the left. "))])]),Co])};export{uo as default};
