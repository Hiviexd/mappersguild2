import{d as p,_ as u,o,e as r,a as e,l as h,b as c,A as m,B as b,t as n,n as l,F as f,r as y,q as d}from"./index-b3102b9b.js";const k=p({name:"ArtistSearch",props:{input:{type:String,default:""}},data(){return{beatmapsets:[],searchText:this.input,searchedOnce:!1,isLoading:!1}},computed:{totalRankedPlays(){let t=0;for(const s of this.beatmapsets)s.ranked>0&&(t+=s.play_count);return t},totalUnrankedPlays(){let t=0;for(const s of this.beatmapsets)s.ranked<=0&&(t+=s.play_count);return t},totalPlays(){return this.totalRankedPlays+this.totalUnrankedPlays},totalRankedBeatmapsets(){let t=0;for(const s of this.beatmapsets)s.ranked>0&&t++;return t},totalUnrankedBeatmapsets(){let t=0;for(const s of this.beatmapsets)s.ranked<=0&&t++;return t},rankedMappers(){let t=[];for(const s of this.beatmapsets)s.ranked>0&&!t.includes(s.creator)&&t.push(s.creator);return t.length},unrankedMappers(){let t=[];for(const s of this.beatmapsets)s.ranked<=0&&!t.includes(s.creator)&&t.push(s.creator);return t.length},uniqueMappers(){let t=[];for(const s of this.beatmapsets)t.includes(s.creator)||t.push(s.creator);return t.length},sortedBeatmapsets(){return[...this.beatmapsets].sort((s,i)=>i.play_count-s.play_count)}},watch:{input(){this.searchText=this.input,this.searchArtist(null)}},methods:{async searchArtist(t){this.isLoading=!0,this.beatmapsets=[];const s=await this.$http.executeGet(`/admin/artistSearch/${this.searchText}`,t);this.isLoading=!1,this.searchedOnce=!0,this.beatmapsets=s.beatmapsets}}}),g={class:"container py-1"},_={class:"row my-2"},B={class:"col"},v={class:"input-group"},L=e("i",{class:"fas fa-search"},null,-1),P=[L],w={key:0},M={class:"row"},R={class:"col-sm"},S={class:"table table-sm"},A=e("thead",null,[e("tr",null,[e("th",null,"status"),e("th",null,"plays"),e("th",null,"maps"),e("th",null,"mappers")])],-1),U=e("td",null,"ranked",-1),$=e("td",null,"unranked",-1),N=e("td",null,"top 50 maps",-1),T={class:"row"},q={class:"col-sm"},C={class:"table table-sm"},O=e("thead",null,[e("tr",null,[e("th",null,"metadata"),e("th",null,"plays")])],-1),V=["href"],D={key:1},F={key:2};function K(t,s,i,z,E,G){return o(),r("div",g,[e("div",_,[e("div",B,[e("div",v,[e("button",{class:"btn btn-primary",href:"#",onClick:s[0]||(s[0]=h(a=>t.searchArtist(a),["prevent"]))},P),c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.searchText=a),class:"form-control",type:"text",maxlength:"100",placeholder:"artist name...",autocomplete:"off",onKeyup:s[2]||(s[2]=b(a=>t.searchArtist(a),["enter"]))},null,544),[[m,t.searchText]])])])]),t.beatmapsets&&t.beatmapsets.length?(o(),r("div",w,[e("div",M,[e("div",R,[e("table",S,[A,e("tbody",null,[e("tr",null,[U,e("td",null,n(Number(t.totalRankedPlays).toLocaleString()),1),e("td",{class:l(t.totalRankedBeatmapsets>2?"bg-info":t.totalRankedBeatmapsets>0?"bg-primary":"")},n(t.totalRankedBeatmapsets),3),e("td",null,n(t.rankedMappers),1)]),e("tr",null,[$,e("td",null,n(Number(t.totalUnrankedPlays).toLocaleString()),1),e("td",null,n(t.totalUnrankedBeatmapsets),1),e("td",null,n(t.unrankedMappers),1)]),e("tr",null,[N,e("td",{class:l(t.totalPlays>1e5?"bg-info":t.totalPlays>1e4?"bg-primary":"")},n(Number(t.totalRankedPlays+t.totalUnrankedPlays).toLocaleString()),3),e("td",{class:l(t.beatmapsets.length>49?"bg-info":t.beatmapsets.length>20?"bg-primary":"")},n(t.totalRankedBeatmapsets+t.totalUnrankedBeatmapsets),3),e("td",{class:l(t.uniqueMappers>40?"bg-info":t.uniqueMappers>20?"bg-primary":"")},n(t.uniqueMappers),3)])])])])]),e("div",T,[e("div",q,[e("table",C,[O,e("tbody",null,[(o(!0),r(f,null,y(t.sortedBeatmapsets,a=>(o(),r("tr",{key:a.id,class:l(a.ranked>0?"bg-dark":"")},[e("td",null,[e("a",{href:`https://osu.ppy.sh/beatmapsets/${a.id}`,target:"_blank"},n(a.artist)+" - "+n(a.title),9,V)]),e("td",{class:l(a.play_count>1e4?"bg-info":a.play_count>1e3?"bg-primary":"")},n(Number(a.play_count).toLocaleString()),3)],2))),128))])])])])])):t.searchedOnce&&!t.isLoading?(o(),r("div",D," no results ")):d("",!0),t.isLoading?(o(),r("div",F," Loading... ")):d("",!0)])}const H=u(k,[["render",K]]);export{H as A};
