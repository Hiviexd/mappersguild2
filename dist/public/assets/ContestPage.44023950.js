var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(e,s,n)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&r(t,s,e[s]);if(n)for(var s of n(e))i.call(e,s)&&r(t,s,e[s]);return t},l=(t,n)=>e(t,s(n));import{d,m as c,i as u,o as m,b as p,f as h,t as g,u as f,e as b,q as y,O as v,s as C,l as w,P as I,p as S,a as k,J as $,z as j,F as U,g as x,j as M,n as D,w as T,H as E,x as J}from"./vendor.8b5721c7.js";import{_ as A}from"./ContestCard.f4b3ec41.js";import{_ as V}from"./UserLinkList.b6d2284f.js";import{C as L}from"./CopyPaste.7cb4b414.js";import{_ as N}from"./ModalDialog.2c18b0dc.js";import"./ModesIcons.88090f43.js";var q=d({name:"ContestHeader",components:{UserLinkList:V},props:{contestId:{type:String,required:!0},name:{type:String,required:!0},url:{type:String,default:null},creators:{type:Array,required:!0}},data:()=>({showCreatorInput:!1,creatorInput:""}),computed:l(a({},c(["loggedInUser"])),{creatorIds(){return this.creators.map((t=>t.id))}}),watch:{creators(){this.generateUsernamesString()}},created(){this.generateUsernamesString()},methods:{generateUsernamesString(){const t=this.creators.map((t=>t.username)).join(", ");this.creatorInput=t},async updateCreators(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateCreators`,{creatorInput:this.creatorInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest creators",type:"info"}),this.$store.commit("updateCreators",{contestId:this.contestId,creators:e}),this.showCreatorInput=!1)}}});const R=["href"],P={key:1},O={class:"form-inline"},B={class:"form-group"},_=w(" hosted by "),F=[h("i",{class:"fas fa-edit"},null,-1)],z=h("hr",null,null,-1);q.render=function(t,e,s,n,o,i){const r=u("user-link-list");return m(),p("div",null,[h("h4",null,[t.url?(m(),p("a",{key:0,href:t.url,target:"_blank"},g(t.name),9,R)):(m(),p("span",P,g(t.name),1))]),h("div",O,[h("div",B,[_,t.showCreatorInput?b("",!0):(m(),f(r,{key:0,users:t.creators},null,8,["users"])),t.showCreatorInput?y((m(),p("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=e=>t.creatorInput=e),class:"ml-1 form-control w-50 d-inline form-control-sm",onChange:e[1]||(e[1]=e=>t.updateCreators(e))},null,544)),[[v,t.creatorInput]]):b("",!0),t.creatorIds.includes(t.loggedInUser.id)?(m(),p("a",{key:2,href:"#",class:"ms-1",onClick:e[2]||(e[2]=C((e=>t.showCreatorInput=!t.showCreatorInput),["prevent"]))},F)):b("",!0)])]),z])};var G=d({name:"ContestBanner",props:{bannerUrl:{type:String,required:!0}}});const H=["src"],K=h("hr",null,null,-1);G.render=function(t,e,s,n,o,i){return m(),p("div",null,[h("img",{class:"w-100",src:t.bannerUrl},null,8,H),K])};var Y=d({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null},contestEnd:{type:String,default:null}},data(){return{newContestStart:this.contestStart,newContestEnd:this.contestEnd}},watch:{contestId(){this.newContestStart=this.contestStart,this.newContestEnd=this.contestEnd}},methods:{async updateContestStart(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestStart`,{date:this.newContestStart},t);this.$http.isError(e)?this.newContestStart=this.contestStart:(this.$store.dispatch("updateToastMessages",{message:"Updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:e}))},async updateContestEnd(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestEnd`,{date:this.newContestEnd},t);this.$http.isError(e)?this.newContestEnd=this.contestEnd:(this.$store.dispatch("updateToastMessages",{message:"Updated contest end date",type:"info"}),this.$store.commit("updateContestEnd",{contestId:this.contestId,contestEnd:e}))}}});const Q={class:"row"},W={class:"col-sm-6"},X={class:"form-inline w-100"},Z=w(" Submissions open: "),tt={class:"input-group"},et={class:"input-group-append"},st={class:"col-sm-6"},nt={class:"form-inline w-100"},ot=w(" Submissions close: "),it={class:"input-group"},rt={class:"input-group-append"};Y.render=function(t,e,s,n,o,i){return m(),p("div",Q,[h("div",W,[h("div",X,[Z,h("div",tt,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newContestStart=e),class:"ml-1 form-control",type:"date",onKeyup:e[1]||(e[1]=I((e=>t.updateContestStart(e)),["enter"]))},null,544),[[v,t.newContestStart]]),h("div",et,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.updateContestStart(e))}," Save date ")])])])]),h("div",st,[h("div",nt,[ot,h("div",it,[y(h("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.newContestEnd=e),class:"ml-1 form-control",type:"date",onKeyup:e[4]||(e[4]=I((e=>t.updateContestEnd(e)),["enter"]))},null,544),[[v,t.newContestEnd]]),h("div",rt,[h("button",{class:"btn btn-primary",href:"#",onClick:e[5]||(e[5]=e=>t.updateContestEnd(e))}," Save date ")])])])])])};var at=d({name:"TitleEdit",props:{contestId:{type:String,required:!0},name:{type:String,default:null}},data(){return{newName:this.name}},watch:{contestId(){this.newName=this.name}},methods:{async updateName(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateName`,{name:this.newName},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest name",type:"info"}),this.$store.commit("updateName",{contestId:this.contestId,name:e}))}}});const lt={class:"form-inline w-100 mt-2"},dt=w(" Name: ");at.render=function(t,e,s,n,o,i){return m(),p("div",lt,[dt,y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newName=e),class:"ml-1 form-control d-inline w-75",onChange:e[1]||(e[1]=e=>t.updateName(e))},null,544),[[v,t.newName]])])};var ct=d({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null},isApproved:{type:Boolean,required:!0}},data(){return{newStatus:this.status}},watch:{contestId(){this.newStatus=this.status}},methods:{async updateStatus(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateStatus`,{status:this.newStatus},t);this.$http.isError(e)?this.newStatus=this.status:(this.$store.dispatch("updateToastMessages",{message:"Updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:e}))}}});S("data-v-4a3e98ae");const ut=w(" Status: "),mt=[j('<option value="" disabled data-v-4a3e98ae> Select a status </option><option value="hidden" data-v-4a3e98ae> Hidden </option><option value="beatmapping" data-v-4a3e98ae> Beatmapping </option><option value="screening" data-v-4a3e98ae> Screening </option><option value="judging" data-v-4a3e98ae> Judging </option><option value="complete" data-v-4a3e98ae> Complete </option>',6)],pt={key:0,class:"small text-danger mt-2"};k(),ct.render=function(t,e,s,n,o,i){return m(),p("div",null,[ut,y(h("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newStatus=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateStatus(e))},mt,544),[[$,t.newStatus]]),t.isApproved||"hidden"===t.status?b("",!0):(m(),p("div",pt,' Your contest has been queued for approval. Once approved, it will appear in "Active contests". '))])},ct.__scopeId="data-v-4a3e98ae";var ht=d({name:"ModeInfo",props:{contestId:{type:String,required:!0},mode:{type:String,default:""}},data(){return{newMode:this.mode}},watch:{contestId(){this.newMode=this.mode}},methods:{async updateMode(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateMode`,{mode:this.newMode},t);this.$http.isError(e)?this.newMode=this.mode:(this.$store.dispatch("updateToastMessages",{message:"Updated contest mode",type:"info"}),this.$store.commit("updateMode",{contestId:this.contestId,mode:e}))}}});S("data-v-5ffc0e64");const gt=w(" Mode: "),ft=[j('<option value="" selected disabled data-v-5ffc0e64> Select a mode </option><option value="osu" data-v-5ffc0e64> osu! </option><option value="taiko" data-v-5ffc0e64> osu!taiko </option><option value="catch" data-v-5ffc0e64> osu!catch </option><option value="mania" data-v-5ffc0e64> osu!mania </option>',5)];k(),ht.render=function(t,e,s,n,o,i){return m(),p("div",null,[gt,y(h("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newMode=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateMode(e))},ft,544),[[$,t.newMode]])])},ht.__scopeId="data-v-5ffc0e64";var bt=d({name:"AnonymizationGuide",props:{contestId:{type:String,required:!0}},data:()=>({csvOutput:"",errors:[]}),methods:{async applyCsvOutput(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/syncAnonymousNames`,{csv:this.csvOutput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated submission names",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e.submissions}),e.errors.length&&(this.errors=e.errors))}}});const yt={class:"mx-4"},vt=w(" Submissions must be anonymized locally, then transferred to Mappers' Guild. You have 3 options: "),Ct=h("ol",null,[h("li",null,[w("Follow instructions on the "),h("a",{href:"https://github.com/pishifat/contest-anonymization#readme",target:"_blank"},"contest anonymization GitHub repository"),w(".")]),h("li",null,[w("Ask "),h("a",{href:"https://osu.ppy.sh/users/3178418",target:"_blank"},"pishifat"),w(" to do option 1 for you.")]),h("li",null,"Manually anonymize entries (please don't waste your time with this).")],-1),wt=h("span",{class:"small text-secondary"},[w("If you succeed with step 1, paste your "),h("code",null,".csv"),w(" output here as raw text to replace anonymized names:")],-1),It={class:"row"},St={class:"col-sm-10"},kt={class:"col-sm-2"},$t={key:0,class:"small text-warning"},jt=w(" The following submissions could not be processed and will need to be renamed manually: ");bt.render=function(t,e,s,n,o,i){return m(),p("div",yt,[vt,Ct,h("div",null,[wt,h("div",It,[h("div",St,[y(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.csvOutput=e),class:"form-control form-inline",rows:"1"},null,512),[[v,t.csvOutput]])]),h("div",kt,[h("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:e[1]||(e[1]=e=>t.applyCsvOutput(e))}," Save ")])]),t.errors.length?(m(),p("div",$t,[jt,h("ul",null,[(m(!0),p(U,null,x(t.errors,(t=>(m(),p("li",{key:t},g(t),1)))),128))])])):b("",!0)])])};var Ut=d({name:"Urls",props:{contestId:{type:String,required:!0},url:{type:String,default:null},osuContestListingUrl:{type:String,default:null},resultsUrl:{type:String,default:null},bannerUrl:{type:String,default:null}},data(){return{newUrl:this.url,newOsuContestListingUrl:this.osuContestListingUrl,newResultsUrl:this.resultsUrl,newBannerUrl:this.bannerUrl}},watch:{contestId(){this.newUrl=this.url,this.newOsuContestListingUrl=this.osuContestListingUrl,this.newResultsUrl=this.resultsUrl,this.newBannerUrl=this.bannerUrl}},methods:{async updateUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateUrl`,{url:this.newUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest url",type:"info"}),this.$store.commit("updateUrl",{contestId:this.contestId,url:e}))},async updateOsuContestListingUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateOsuContestListingUrl`,{url:this.newOsuContestListingUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated osu! contest listing url",type:"info"}),this.$store.commit("updateOsuContestListingUrl",{contestId:this.contestId,osuContestListingUrl:e}))},async updateResultsUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateResultsUrl`,{url:this.newResultsUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated results url",type:"info"}),this.$store.commit("updateResultsUrl",{contestId:this.contestId,resultsUrl:e}))},async updateBannerUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateBannerUrl`,{url:this.newBannerUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated banner url",type:"info"}),this.$store.commit("updateBannerUrl",{contestId:this.contestId,bannerUrl:e}))}}});const xt={class:"row"},Mt={class:"col-sm-6"},Dt={class:"form-inline w-100"},Tt=w(" Contest details URL: "),Et={class:"col-sm-6"},Jt={class:"form-inline w-100"},At=w(" osu! contest listing URL: "),Vt={class:"col-sm-6"},Lt={class:"form-inline w-100"},Nt=w(" Results URL: "),qt={class:"col-sm-6"},Rt={class:"form-inline w-100"},Pt=w(" Banner URL: ");Ut.render=function(t,e,s,n,o,i){return m(),p("div",xt,[h("div",Mt,[h("div",Dt,[Tt,y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newUrl=e),class:"ml-1 form-control",onChange:e[1]||(e[1]=e=>t.updateUrl(e))},null,544),[[v,t.newUrl]])])]),h("div",Et,[h("div",Jt,[At,y(h("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.newOsuContestListingUrl=e),class:"ml-1 form-control",onChange:e[3]||(e[3]=e=>t.updateOsuContestListingUrl(e))},null,544),[[v,t.newOsuContestListingUrl]])])]),h("div",Vt,[h("div",Lt,[Nt,y(h("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.newResultsUrl=e),class:"ml-1 form-control",onChange:e[5]||(e[5]=e=>t.updateResultsUrl(e))},null,544),[[v,t.newResultsUrl]])])]),h("div",qt,[h("div",Rt,[Pt,y(h("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.newBannerUrl=e),class:"ml-1 form-control",onChange:e[7]||(e[7]=e=>t.updateBannerUrl(e))},null,544),[[v,t.newBannerUrl]])])])])};var Ot=d({name:"Description",props:{contestId:{type:String,required:!0},description:{type:String,default:null}},data(){return{newDescription:this.description}},watch:{contestId(){this.newDescription=this.description}},methods:{async updateDescription(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDescription`,{description:this.newDescription},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest description",type:"info"}),this.$store.commit("updateDescription",{contestId:this.contestId,description:e}))}}});const Bt={class:"form-inline w-100 mt-2"},_t=h("div",null,"Contest description",-1),Ft=h("small",{class:"text-secondary"},[w("Click outside the text box to save. Also, this section supports "),h("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),w("!")],-1),zt=h("div",{class:"mt-2"}," Preview description ",-1),Gt=["innerHTML"];Ot.render=function(t,e,s,n,o,i){return m(),p("div",Bt,[_t,y(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDescription=e),length:"4",class:"ml-1 form-control",placeholder:"click outside the box to save...",maxlength:"40000",rows:"6",onChange:e[1]||(e[1]=e=>t.updateDescription(e))},null,544),[[v,t.newDescription]]),Ft,t.newDescription?(m(),p(U,{key:0},[zt,h("div",null,[h("div",{class:"small bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.newDescription.trim())},null,8,Gt)])],64)):b("",!0)])};var Ht=d({name:"SubmissionsInfo",props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0},osuContestListingUrl:{type:String,default:""}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null,processingDelete:!1,manualAnonEdit:null,newAnonymousName:"",csvInput:""}),watch:{manualAnonEdit(){this.findAnonymousSubmissionName()}},methods:{async addSubmissionsFromCsv(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/addSubmissionsFromCsv`,{csv:this.csvInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added entries from .csv data",type:"info"}),this.$store.commit("addSubmissionsFromCsv",{contestId:this.contestId,submissions:e}))},findAnonymousSubmissionName(){const t=this.submissions.find((t=>t.id==this.manualAnonEdit));t&&(this.newAnonymousName=t.name)},async updateAnonymousSubmissionName(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/updateAnonymousSubmissionName`,{name:this.newAnonymousName},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Updated anonymous submission name",type:"info"}),this.$store.commit("updateAnonymousSubmissionName",{contestId:this.contestId,submissionId:t,name:s}))},async deleteSubmission(t,e){this.processingDelete=!0;const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/delete`,{},e);this.processingDelete=!1,this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted submission",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:t}))}}});const Kt={key:0},Yt=h("span",{class:"small text-secondary"},[w("If your contest uses the osu! contest listing, follow the anonymization guide below and paste your "),h("code",null,".csv"),w(" output here as raw text to add submissions:")],-1),Qt={class:"row"},Wt={class:"col-sm-10"},Xt={class:"col-sm-2"},Zt={key:1,class:"table table-sm table-responsive-lg"},te=h("thead",null,[h("tr",null,[h("th",null,"Creator"),h("th",null,"Anonymized name"),h("th",null,"Link"),h("th")])],-1),ee=["onChange"],se={key:1,class:"me-1"},ne=["onClick"],oe=[h("i",{class:"fas fa-edit"},null,-1)],ie=["href"],re=["onClick"],ae=["onClick"];Ht.render=function(t,e,s,n,o,i){const r=u("user-link");return m(),p("div",null,[!t.submissions.length&&t.osuContestListingUrl?(m(),p("div",Kt,[Yt,h("div",Qt,[h("div",Wt,[y(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.csvInput=e),class:"form-control form-inline",rows:"1"},null,512),[[v,t.csvInput]])]),h("div",Xt,[h("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:e[1]||(e[1]=e=>t.addSubmissionsFromCsv(e))}," Save ")])])])):b("",!0),t.submissions.length?(m(),p("table",Zt,[te,h("tbody",null,[(m(!0),p(U,null,x(t.submissions,(s=>(m(),p("tr",{key:s.id},[h("td",null,[M(r,{user:s.creator},null,8,["user"])]),h("td",{class:D(s.name?"":"text-danger")},[t.manualAnonEdit==s.id?y((m(),p("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=e=>t.newAnonymousName=e),class:"ml-1 form-control form-control-sm",onChange:e=>t.updateAnonymousSubmissionName(s.id,e)},null,40,ee)),[[v,t.newAnonymousName]]):(m(),p("span",se,g(s.name||"TBD"),1)),h("a",{href:"#",onClick:C((e=>t.manualAnonEdit==s.id?t.manualAnonEdit=null:t.manualAnonEdit=s.id),["prevent"])},oe,8,ne)],2),h("td",null,[h("a",{href:s.url,target:"_blank"},g(s.url),9,ie)]),h("td",null,[t.confirmDelete!=s.id?(m(),p("a",{key:0,href:"#",class:"text-danger",onClick:C((e=>t.confirmDelete=s.id),["prevent"])}," delete ",8,re)):(m(),p("a",{key:1,class:D(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:C((e=>t.deleteSubmission(s.id,e)),["prevent"])}," confirm ",10,ae))])])))),128))])])):b("",!0)])};var le=d({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download}},watch:{contestId(){this.newDownload=this.download}},methods:{async updateDownload(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDownload`,{download:this.newDownload},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest submissions download link",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:e}))}}});S("data-v-3eff7a20");const de={class:"row"},ce={class:"col-sm-6"},ue=w(" Download: "),me={key:0,class:"me-2 text-secondary"},pe={class:"col-sm-6 small text-secondary"},he=w(" This link will appear at the top of judging/screening pages for users to download beatmaps. For contest integrity, user data should be removed as explained in the anonymization guide below. "),ge=["href"];k(),le.render=function(t,e,s,n,o,i){return m(),p("div",de,[h("div",ce,[ue,t.download?b("",!0):(m(),p("span",me,"No download")),y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDownload=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:e[1]||(e[1]=e=>t.updateDownload(e))},null,544),[[v,t.newDownload]])]),h("div",pe,[he,t.download?(m(),p("a",{key:0,href:t.download,target:"_blank"},"Test the link here!",8,ge)):b("",!0)])])},le.__scopeId="data-v-3eff7a20";var fe=d({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),watch:{contestId(){this.screenerInput=null,this.screenerInput=null}},methods:{async addScreener(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.screenerInput} to list (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:e}))},async removeScreener(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/remove`,{screenerId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:t}))}}});const be={class:"input-group mb-2"},ye={class:"input-group-append"},ve=[h("i",{class:"fas fa-plus fa-xs"},null,-1)],Ce={key:0},we=["onClick"],Ie=["onClick"],Se={key:1,class:"text-white-50 m-4"};fe.render=function(t,e,s,n,o,i){const r=u("user-link");return m(),p("div",null,[h("div",be,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.screenerInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:e[1]||(e[1]=I((e=>t.addScreener(e)),["enter"]))},null,544),[[v,t.screenerInput,void 0,{number:!0}]]),h("div",ye,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.addScreener(e)),["prevent"]))},ve)])]),t.screeners.length?(m(),p("ol",Ce,[(m(!0),p(U,null,x(t.screeners,(e=>(m(),p("li",{key:e.id},[M(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(m(),p("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,we)):(m(),p("a",{key:1,class:"text-danger",href:"#",onClick:C((s=>t.removeScreener(e.id,s)),["prevent"])}," confirm ",8,Ie))])))),128))])):(m(),p("div",Se," None... "))])};var ke=d({name:"ScreeningStatus",props:{contest:{type:Object,required:!0}},methods:{findScreenerDetails(t){let e=0,s=[];for(const i of this.contest.submissions)for(const n of i.screenings)n.screener.id==t.id&&n.vote&&(e++,s.push(n.vote));const n=[],o=[];for(let i=0;i<this.contest.screeningVoteCount;i++)o.push(i+1);for(const i of o)s.includes(i)||n.push(i);return{count:e,unusedVotes:n}}}});const $e={class:"table table-sm table-responsive-lg small"},je=h("thead",null,[h("tr",null,[h("th",null,"Screener"),h("th",null,"Count"),h("th",null,"Unused ratings")])],-1),Ue={class:"mx-1"};ke.render=function(t,e,s,n,o,i){const r=u("user-link");return m(),p("div",null,[h("table",$e,[je,h("tbody",null,[(m(!0),p(U,null,x(t.contest.screeners,(e=>(m(),p("tr",{key:e.id},[h("td",null,[M(r,{user:e},null,8,["user"])]),h("td",{class:D(t.findScreenerDetails(e).count==t.contest.screeningVoteCount?"text-success":"text-danger")},g(t.findScreenerDetails(e).count)+"/"+g(t.contest.screeningVoteCount),3),h("td",null,[(m(!0),p(U,null,x(t.findScreenerDetails(e).unusedVotes,(t=>(m(),p("span",{key:t},[h("span",Ue,[(m(!0),p(U,null,x(t,(t=>(m(),p("i",{key:t,class:"fa-star fas text-warning small"})))),128)),w(" ("+g(t)+") ",1)])])))),128))])])))),128))])])])};var xe=d({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),watch:{contestId(){this.judgeInput=null,this.confirmDelete=null}},methods:{async addJudge(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.judgeInput} to list (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:e}))},async removeJudge(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/remove`,{judgeId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:t}))}}});const Me={class:"input-group mb-2"},De={class:"input-group-append"},Te=[h("i",{class:"fas fa-plus fa-xs"},null,-1)],Ee={key:0},Je=["onClick"],Ae=["onClick"],Ve={key:1,class:"text-white-50 m-4"};xe.render=function(t,e,s,n,o,i){const r=u("user-link");return m(),p("div",null,[h("div",Me,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.judgeInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new judge username/osuId...",onKeyup:e[1]||(e[1]=I((e=>t.addJudge(e)),["enter"]))},null,544),[[v,t.judgeInput,void 0,{number:!0}]]),h("div",De,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.addJudge(e)),["prevent"]))},Te)])]),t.judges.length?(m(),p("ul",Ee,[(m(!0),p(U,null,x(t.judges,(e=>(m(),p("li",{key:e.id},[M(r,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(m(),p("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,Je)):(m(),p("a",{key:1,class:"text-danger",href:"#",onClick:C((s=>t.removeJudge(e.id,s)),["prevent"])}," confirm ",8,Ae))])))),128))])):(m(),p("div",Ve," None... "))])};var Le=d({name:"MarkdownUserList",components:{CopyPaste:L},props:{users:{type:Array,default:()=>[]}}});S("data-v-0f02c955");const Ne=w(" Comma separation: "),qe=h("br",null,null,-1),Re=h("br",null,null,-1),Pe=h("br",null,null,-1),Oe=w(" Newline separation: "),Be=h("br",null,null,-1),_e=h("br",null,null,-1);k(),Le.render=function(t,e,s,n,o,i){const r=u("copy-paste");return m(),f(r,{class:"tiny"},{default:T((()=>[Ne,qe,(m(!0),p(U,null,x(t.users,((e,s)=>(m(),p("span",{key:e.id}," ["+g(e.username)+"](https://osu.ppy.sh/users/"+g(e.osuId)+")"+g(s===t.users.length-2?", and ":s===t.users.length-1?"":", "),1)))),128)),Re,Pe,Oe,Be,(m(!0),p(U,null,x(t.users,(t=>(m(),p("span",{key:t.id},[w(" ["+g(t.username)+"](https://osu.ppy.sh/users/"+g(t.osuId)+")",1),_e])))),128))])),_:1})},Le.__scopeId="data-v-0f02c955";var Fe=d({name:"ScreeningDetail",props:{screenings:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},methods:{findComment(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.comment:"No comment"},findVote(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.vote:0}}});const ze={class:"ms-4 small"},Ge={class:"ms-4 small text-secondary"};Fe.render=function(t,e,s,n,o,i){const r=u("user-link");return m(),p("div",ze,[(m(!0),p(U,null,x(t.screeners,(e=>(m(),p("div",{key:e.id},[M(r,{user:e},null,8,["user"]),(m(!0),p(U,null,x(t.findVote(e.id),(t=>(m(),p("i",{key:t,class:"fa-star fas mx-1 text-warning small"})))),128)),h("div",Ge,g(t.findComment(e.id)),1)])))),128))])};var He=d({name:"ScreeningResults",components:{ScreeningDetail:Fe},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const t=JSON.parse(JSON.stringify(this.submissions));for(let e=0;e<t.length;e++){const s=t[e].screenings.reduce(((t,e)=>e.vote?t+e.vote:t),0);t[e].total=s}return t.sort(((t,e)=>t.total>e.total?-1:e.total>t.total?1:0)),t}}});S("data-v-0aa6204d");const Ke={class:"d-flex justify-content-between"},Ye=["href"],Qe=h("i",{class:"fa-star fas small"},null,-1),We=w(") "),Xe=h("i",{class:"fas fa-angle-down"},null,-1),Ze=["id"];k(),He.render=function(t,e,s,n,o,i){const r=u("screening-detail");return m(),p("div",null,[h("ul",null,[(m(!0),p(U,null,x(t.sortedSubmissions,(e=>(m(),p("li",{key:e.id},[h("div",Ke,[h("a",{class:D(e.total>=t.judgingThreshold?"pass-threshold":""),"data-bs-toggle":"collapse",href:`#collapse-${e.id}`},[w(g(e.creator.username)+" ("+g(e.total)+" ",1),Qe,We,Xe],10,Ye)]),h("div",{id:`collapse-${e.id}`,class:"collapse"},[h("div",null,[M(r,{screenings:e.screenings,screeners:t.screeners},null,8,["screenings","screeners"])])],8,Ze)])))),128))])])},He.__scopeId="data-v-0aa6204d";var ts=d({name:"JudgingThreshold",props:{contestId:{type:String,required:!0},judgingThreshold:{type:Number,default:0}},data(){return{newJudgingThreshold:this.judgingThreshold}},watch:{contestId(){this.newJudgingThreshold=this.judgingThreshold}},methods:{async updateJudgingThreshold(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated judging threshold to ${e}`,type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:e}))}}});const es={class:"row"},ss={class:"input-group col-sm-4"},ns={class:"input-group-append"},os=[w(" save "),h("i",{class:"fa-star fas small"},null,-1)];ts.render=function(t,e,s,n,o,i){return m(),p("div",es,[h("div",ss,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newJudgingThreshold=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"judging threshold",onKeyup:e[1]||(e[1]=I((e=>t.updateJudgingThreshold(e)),["enter"]))},null,544),[[v,t.newJudgingThreshold,void 0,{number:!0}]]),h("div",ns,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.updateJudgingThreshold(e)),["prevent"]))},os)])])])};var is=d({name:"ScreeningVoteCount",props:{contestId:{type:String,required:!0},screeningVoteCount:{type:Number,default:0}},data(){return{newScreeningVoteCount:this.screeningVoteCount}},watch:{contestId(){this.newScreeningVoteCount=this.screeningVoteCount}},methods:{async updateScreeningVoteCount(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateScreeningVoteCount`,{screeningVoteCount:this.newScreeningVoteCount},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated screening vote count to ${e}`,type:"info"}),this.$store.commit("updateScreeningVoteCount",{contestId:this.contestId,screeningVoteCount:e}))}}});const rs={class:"row"},as={class:"input-group col-sm-4"},ls={class:"input-group-append"};is.render=function(t,e,s,n,o,i){return m(),p("div",rs,[h("div",as,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newScreeningVoteCount=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"screening vote count",onKeyup:e[1]||(e[1]=I((e=>t.updateScreeningVoteCount(e)),["enter"]))},null,544),[[v,t.newScreeningVoteCount,void 0,{number:!0}]]),h("div",ls,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=C((e=>t.updateScreeningVoteCount(e)),["prevent"]))}," save ")])])])};var ds=d({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({nameInput:null,maxScoreInput:null,processingDelete:!1,confirmDelete:null}),computed:{scoredCriteria(){return this.criterias.filter((t=>"comments"!==t.name))},commentsEnabled(){return this.criterias.some((t=>"comments"==t.name))}},watch:{contestId(){this.nameInput=null,this.maxScoreInput=null,this.confirmDelete=null}},methods:{async addCriteria(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/addCriteria`,{name:this.nameInput,maxScore:this.maxScoreInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:e}))},async deleteCriteria(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/deleteCriteria`,{criteriaId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:s}))},async toggleComments(){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleComments`,{});this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Toggled comments",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))}}});const cs={class:"input-group w-75 mb-2"},us={class:"input-group-append"},ms=[w(" Add criteria "),h("i",{class:"fas fa-plus fa-xs"},null,-1)],ps={class:"ms-2 mb-2"},hs=[w(" See judging criteria "),h("i",{class:"fas fa-angle-down"},null,-1)],gs={id:"judgingCriteria",class:"collapse mx-2"},fs={key:0,class:"table table-sm table-responsive-lg"},bs=h("thead",null,[h("tr",null,[h("th",null,"Criteria"),h("th",null,"Max score"),h("th",null,"Delete")])],-1),ys={class:"text-capitalize"},vs=["onClick"],Cs=["onClick"],ws={key:1};ds.render=function(t,e,s,n,o,i){return m(),p("div",null,[h("div",cs,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.nameInput=e),type:"text",class:"form-control",placeholder:"criteria name..."},null,512),[[v,t.nameInput]]),y(h("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.maxScoreInput=e),type:"number",class:"form-control",placeholder:"total points..."},null,512),[[v,t.maxScoreInput]]),h("div",us,[h("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.addCriteria(e))},ms)])]),h("div",ps,[h("a",{href:"#judgingCriteria","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=C((()=>{}),["prevent"]))},hs),h("div",gs,[t.criterias.length?(m(),p("table",fs,[bs,h("tbody",null,[(m(!0),p(U,null,x(t.scoredCriteria,(e=>(m(),p("tr",{key:e.id},[h("td",ys,g(e.name),1),h("td",null,g(e.maxScore),1),h("td",null,[t.confirmDelete!=e.id?(m(),p("a",{key:0,href:"#",class:"text-danger",onClick:C((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,vs)):(m(),p("a",{key:1,class:D(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:C((s=>t.deleteCriteria(e.id,s)),["prevent"])}," confirm ",10,Cs))])])))),128)),h("tr",null,[h("td",{class:D(t.commentsEnabled?"":"text-secondary")}," Comments "+g(t.commentsEnabled?"":"(disabled)"),3),h("td",{class:D(t.commentsEnabled?"":"text-secondary")}," N/A ",2),h("td",null,[h("a",{href:"#",class:"text-danger",onClick:e[4]||(e[4]=C((e=>t.toggleComments()),["prevent"]))},g(t.commentsEnabled?"disable":"enable"),1)])])])])):(m(),p("div",ws," No criteria yet... "))])])])};var Is=d({name:"JudgingLeaderboard",props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data:()=>({selectedScore:null,displayMode:"criterias",sortDesc:!1}),computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((t=>{var e;return t.creator.id==(null==(e=this.selectedScore)?void 0:e.creator.id)}))},scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))},judges(){return this.contest.judges}},methods:{getCriteriaScore(t,e){var s;return(null==(s=t.criteriaSum.find((t=>t.criteriaId===e)))?void 0:s.sum)||0},getJudgeScore(t,e,s=!1){const n=t.judgingSum.find((t=>t.judgeId===e)),o=(null==n?void 0:n.standardized)||0;return s?`${(null==n?void 0:n.sum)||0} (${o.toFixed(3)})`:(null==n?void 0:n.sum)||0},getJudgeAvg(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.rawAvg.toFixed(4))||0},getJudgeSd(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.sd.toFixed(4))||0},getJudgeCorrel(t){var e;return((null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.correl)||0).toFixed(4)},getFinalScore:t=>isNaN(t)?"0":t.toFixed(4),sortByCriteria(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:t,sortDesc:this.sortDesc})},sortByJudge(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:t,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});const Ss={class:"row"},ks={class:"col-sm"},$s=w(" Score display: "),js=w(" | "),Us=w(" | "),xs={class:"row"},Ms={class:"col-sm"},Ds={class:"table table-sm small table-responsive-lg"},Ts=h("th",null,"#",-1),Es=h("th",null,"User",-1),Js=["onClick"],As={class:"cursor-default"},Vs=h("td",null,null,-1),Ls=h("td",null,"AVG",-1),Ns=h("td",null,null,-1),qs=h("td",null,null,-1),Rs={class:"cursor-default"},Ps=h("td",null,null,-1),Os=h("td",null,"SD",-1),Bs=h("td",null,null,-1),_s=h("td",null,null,-1),Fs={class:"cursor-default"},zs=h("td",null,null,-1),Gs=h("td",null,"COR",-1),Hs=h("td",null,null,-1),Ks=h("td",null,null,-1);Is.render=function(t,e,s,n,o,i){const r=u("user-link");return m(),p("div",null,[h("div",Ss,[h("div",ks,[$s,h("a",{href:"#",class:D("criterias"===t.displayMode?"border-bottom border-secondary":""),onClick:e[0]||(e[0]=C((e=>t.displayMode="criterias"),["prevent"]))}," Criteria ",2),js,h("a",{href:"#",class:D("judges"===t.displayMode?"border-bottom border-secondary":""),onClick:e[1]||(e[1]=C((e=>t.displayMode="judges"),["prevent"]))}," Judge ",2),Us,h("a",{href:"#",class:D("detail"===t.displayMode?"border-bottom border-secondary":""),onClick:e[2]||(e[2]=C((e=>t.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),h("div",xs,[h("div",Ms,[h("table",Ds,[h("thead",null,[h("tr",null,[Ts,Es,"criterias"===t.displayMode?(m(!0),p(U,{key:0},x(t.scoredCriteria,(t=>(m(),p("th",{key:t.id},g(t.name),1)))),128)):(m(!0),p(U,{key:1},x(t.judges,(t=>(m(),p("th",{key:t.id},g(t.username),1)))),128)),h("th",null,[h("a",{href:"#",onClick:e[3]||(e[3]=C(((...e)=>t.sortByRawScore&&t.sortByRawScore(...e)),["prevent"]))}," Final Score (raw) ")]),h("th",null,[h("a",{href:"#",onClick:e[4]||(e[4]=C(((...e)=>t.sortByStdScore&&t.sortByStdScore(...e)),["prevent"]))}," Final Score (standardized) ")])])]),h("tbody",null,[(m(!0),p(U,null,x(t.usersScores,((e,s)=>(m(),p("tr",{key:s,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:s=>t.selectedScore=e},[h("td",null,g(s+1),1),h("td",null,[M(r,{user:e.creator},null,8,["user"])]),"criterias"===t.displayMode?(m(!0),p(U,{key:0},x(t.scoredCriteria,(s=>(m(),p("td",{key:s.id},g(t.getCriteriaScore(e,s.id)),1)))),128)):(m(!0),p(U,{key:1},x(t.judges,(s=>(m(),p("td",{key:s.id},g(t.getJudgeScore(e,s.id,"detail"===t.displayMode)),1)))),128)),h("td",null,g(e.rawFinalScore),1),h("td",null,g(t.getFinalScore(e.standardizedFinalScore)),1)],8,Js)))),128)),"detail"===t.displayMode?(m(),p(U,{key:0},[h("tr",As,[Vs,Ls,(m(!0),p(U,null,x(t.judges,(e=>(m(),p("td",{key:e.id},g(t.getJudgeAvg(e.id)),1)))),128)),Ns,qs]),h("tr",Rs,[Ps,Os,(m(!0),p(U,null,x(t.judges,(e=>(m(),p("td",{key:e.id},g(t.getJudgeSd(e.id)),1)))),128)),Bs,_s]),h("tr",Fs,[zs,Gs,(m(!0),p(U,null,x(t.judges,(e=>(m(),p("td",{key:e.id},g(t.getJudgeCorrel(e.id)),1)))),128)),Hs,Ks])],64)):b("",!0)])])])])])};var Ys=d({name:"JudgingDetail",components:{ModalDialog:N},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(t){const e=this.commentsExpanded.findIndex((e=>e===t));-1!==e?this.commentsExpanded.splice(e,1):this.commentsExpanded.push(t)},getCollapseClass(t){return this.commentsExpanded.includes(t)?"fa-chevron-down":"fa-chevron-right"}}});const Qs={class:"container"},Ws=["href","onClick"],Xs={key:1,class:"small text-capitalize ms-3"},Zs=["id"],tn={class:"small text-white-50",style:{"white-space":"pre-line"}},en={key:0};Ys.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("modal-dialog");return m(),f(a,{id:"detailModal",loaded:Boolean(t.submission)},{header:T((()=>[w(g(t.submission.creator.username)+" ("+g(t.submission.name)+") ",1)])),default:T((()=>[h("div",Qs,[(m(!0),p(U,null,x(t.submission.judgings,((e,s)=>(m(),p("div",{key:e.id},[M(r,{user:e.judge},null,8,["user"]),(m(!0),p(U,null,x(e.judgingScores,(e=>(m(),p("div",{key:e.id,class:"my-1"},["comments"==e.criteria.name?(m(),p("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${e.id}`,onClick:s=>t.showComment(e.id)},[h("i",{class:D(["small fas me-2",t.getCollapseClass(e.id)])},null,2),w(" "+g(e.criteria.name),1)],8,Ws)):(m(),p("span",Xs,g(e.criteria.name)+" ("+g(e.score)+") ",1)),h("p",{id:`judgingToCriteria${e.id}`,class:"text-light ms-4 collapse"},[h("span",tn,g(e.comment),1)],8,Zs)])))),128)),s<t.submission.judgings.length-1?(m(),p("hr",en)):b("",!0)])))),128))])])),_:1},8,["loaded"])};var sn=d({name:"JudgeStatuses",components:{JudgingDetail:Ys},props:{contest:{type:Object,required:!0}},data:()=>({selected:null}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},methods:{getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getMissingJudges(t){const e=t.judgings.map((t=>t.judge.id)),s=[];for(const n of this.contest.judges)if(e.includes(n.id)){const e=t.judgings.find((t=>t.judge.id===n.id));e&&e.judgingScores.length!==this.contest.criterias.length&&s.push(n)}else s.push(n);return s.map((t=>t.username)).join(", ")},getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});S("data-v-a36d03c2");const nn={class:"table table-sm table-responsive-lg small"},on=h("thead",null,[h("tr",null,[h("th",null,"Submission creator"),h("th",null,"Count"),h("th",null,"Incomplete judges")])],-1),rn=["onClick"];k(),sn.render=function(t,e,s,n,o,i){const r=u("user-link"),a=u("judging-detail");return m(),p("div",null,[h("table",nn,[on,h("tbody",null,[(m(!0),p(U,null,x(t.contest.submissions,(e=>(m(),p("tr",{key:e.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",class:"modalable",onClick:s=>t.selected=e},[h("td",null,[M(r,{user:e.creator},null,8,["user"])]),h("td",{class:D(t.getJudgesInvolvedCount(e)>=t.judgeCount?"text-success":"text-danger")},g(t.getJudgesInvolvedCount(e))+"/"+g(t.judgeCount),3),h("td",null,g(t.getMissingJudges(e)),1)],8,rn)))),128))])]),M(a,{id:"detailModalAdmin",submission:t.selected},null,8,["submission"])])},sn.__scopeId="data-v-a36d03c2";var an=d({name:"MarkdownJudgingLeaderboard",components:{CopyPaste:L},props:{usersScores:{type:Array,required:!0},contest:{type:Object,required:!0},judgeCount:{type:Number,required:!0}},computed:{scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))}},methods:{getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id},getCriteriaSumbyName(t,e){const s=e.find((e=>e.name===t));return(null==s?void 0:s.sum)||NaN}}});S("data-v-4fcd74b7");const ln=h("div",null," | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | ",-1);k(),an.render=function(t,e,s,n,o,i){const r=u("copy-paste");return m(),f(r,{class:"tiny"},{default:T((()=>[h("div",null," | Rank | Beatmap | Judging | Musical representation ("+g(10*t.judgeCount)+") | Creativity ("+g(10*t.judgeCount)+") | Gameplay ("+g(10*t.judgeCount)+") | Limitation ("+g(5*t.judgeCount)+") | Total (standardized/raw) | ",1),ln,(m(!0),p(U,null,x(t.usersScores,((e,s)=>(m(),p("div",{key:s},[w(" | \\#"+g(s+1)+" | [TITLE](LINK) by ["+g(e.creator.username)+"](https://osu.ppy.sh/users/"+g(e.creator.osuId)+") | [details](https://mappersguild.com/contests/results?submission="+g(t.getSubmissionIdByCreatorId(e.creator.id))+") ",1),(m(!0),p(U,null,x(t.scoredCriteria,(s=>(m(),p("span",{key:s.id},"| "+g(t.getCriteriaSumbyName(s.name,e.criteriaSum)+" "),1)))),128)),w(" | **"+g(Math.round(100*e.standardizedFinalScore)/100)+"** ("+g(e.rawFinalScore)+") | ",1)])))),128))])),_:1})},an.__scopeId="data-v-4fcd74b7";var dn=d({name:"JudgingResults",components:{JudgingLeaderboard:Is,MarkdownJudgingLeaderboard:an,JudgeStatuses:sn},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},watch:{async contestId(){await this.getJudgingResults()}},async created(){await this.getJudgingResults()},methods:{async getJudgingResults(){const t=await this.$http.executeGet(`/contests/listing/${this.contestId}/judgingResults`);this.$http.isError(t)||(this.contest=t.contest,this.usersScores=t.usersScores,this.judgesCorrel=t.judgesCorrel)},getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getJudgesInvolved:t=>t.judgings.map((t=>t.judge.username)).join(", "),getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});const cn={key:0},un={class:"ms-2 mb-2"},mn=[w(" See judging status per submission "),h("i",{class:"fas fa-angle-down"},null,-1)],pn={class:"ms-2 mb-2"},hn=[w(" See judging leaderboard "),h("i",{class:"fas fa-angle-down"},null,-1)],gn={class:"ms-2 mb-2"},fn=[w(" See markdown judging leaderboard "),h("i",{class:"fas fa-angle-down"},null,-1)];dn.render=function(t,e,s,n,o,i){const r=u("judge-statuses"),a=u("judging-leaderboard"),l=u("markdown-judging-leaderboard");return t.contest?(m(),p("div",cn,[h("div",un,[h("a",{href:"#judgeStatuses","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=C((()=>{}),["prevent"]))},mn),M(r,{id:"judgeStatuses",class:"collapse mx-2",contest:t.contest},null,8,["contest"])]),h("div",pn,[h("a",{href:"#judgingLeaderboard","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=C((()=>{}),["prevent"]))},hn),M(a,{id:"judgingLeaderboard",class:"collapse mx-2","contest-id":t.contest.id,contest:t.contest,"users-scores":t.usersScores,"judges-correl":t.judgesCorrel},null,8,["contest-id","contest","users-scores","judges-correl"])]),h("div",gn,[h("a",{href:"#markdownJudgingLeaderboard","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=C((()=>{}),["prevent"]))},fn),M(l,{id:"markdownJudgingLeaderboard",class:"collapse","users-scores":t.usersScores,contest:t.contest,"judge-count":t.judgeCount},null,8,["users-scores","contest","judge-count"])])])):b("",!0)};var bn=d({name:"ContestInfo",components:{ContestHeader:q,ContestBanner:G,DateInfo:Y,Name:at,AnonymizationGuide:bt,ModeInfo:ht,StatusInfo:ct,SubmissionsInfo:Ht,DownloadInfo:le,Urls:Ut,Description:Ot,ScreenersInfo:fe,JudgesInfo:xe,MarkdownUserList:Le,ScreeningResults:He,ScreeningStatus:ke,JudgingThreshold:ts,ScreeningVoteCount:is,CriteriaSelection:ds,JudgingResults:dn},props:{contest:{type:Object,required:!0}},data:()=>({screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}),methods:{async deleteContest(t){if(confirm("Are you sure?")){const e=await this.$http.executePost(`/contests/listing/${this.contest.id}/delete`,{},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Deleted contest",type:"info"}),this.$store.commit("deleteContest",this.contest.id))}}}});const yn=h("h5",null,"General",-1),vn=h("hr",null,null,-1),Cn=h("h5",null," Submissions ",-1),wn={class:"ms-2 mb-2"},In=h("i",{class:"fas fa-angle-down"},null,-1),Sn={class:"ms-2 mb-2"},kn=[w(" See submission anonymization guide "),h("i",{class:"fas fa-angle-down"},null,-1)],$n=h("hr",null,null,-1),jn=h("h4",{class:"mb-4"}," Screening ",-1),Un=h("h5",null," Screeners ",-1),xn={class:"ms-2 mb-2"},Mn=h("i",{class:"fas fa-angle-down"},null,-1),Dn={id:"screeners",class:"row collapse mb-2"},Tn=h("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their screening progress. ",-1),En=h("div",null,'To begin screening, send this link to the users above and ensure your contest\'s status is set to "Screening"!',-1),Jn=h("hr",null,null,-1),An=h("h5",null," Screening Results ",-1),Vn={class:"row mb-2"},Ln=h("div",{class:"col-sm-8 small text-secondary"},' The amount of submissions each screener can give a vote to. The limit is set to "5" by default, meaning screeners can choose the top 5 maps. The limit is 10. ',-1),Nn={class:"ms-2 mb-2"},qn=[w(" See screening status per screener "),h("i",{class:"fas fa-angle-down"},null,-1)],Rn={class:"row mb-2"},Pn=h("div",{class:"col-sm-8 small text-secondary"},[w(" Submissions with this "),h("i",{class:"fa-star fas text-warning small"}),w(' score or above in "screening results" will be available to judges. If your contest skips the screening process, set this to "0". ')],-1),On={class:"ms-2 mb-2"},Bn=[w(" See screening results "),h("i",{class:"fas fa-angle-down"},null,-1)],_n=h("hr",null,null,-1),Fn=h("h4",{class:"mb-4"}," Judging ",-1),zn=h("h5",null," Judges ",-1),Gn={class:"ms-2 mb-2"},Hn=h("i",{class:"fas fa-angle-down"},null,-1),Kn={id:"judges",class:"row collapse mb-2"},Yn=h("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their judging progress. ",-1),Qn=h("div",null,'To begin judging, send this link to the users above and ensure your contest\'s status is set to "Judging"!',-1),Wn=h("hr",null,null,-1),Xn=h("h5",null," Judging Criteria ",-1),Zn=h("hr",null,null,-1),to=h("h5",null," Judging Results ",-1),eo=h("hr",null,null,-1);bn.render=function(t,e,s,n,o,i){const r=u("contest-header"),a=u("contest-banner"),l=u("name"),d=u("status-info"),c=u("mode-info"),y=u("date-info"),v=u("urls"),I=u("description"),S=u("submissions-info"),k=u("download-info"),$=u("anonymization-guide"),j=u("screeners-info"),U=u("markdown-user-list"),x=u("screening-vote-count"),D=u("screening-status"),T=u("judging-threshold"),E=u("screening-results"),J=u("judges-info"),A=u("criteria-selection"),V=u("judging-results");return m(),p("div",null,[M(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(m(),f(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):b("",!0),yn,h("div",null,[M(l,{class:"mb-2","contest-id":t.contest.id,name:t.contest.name},null,8,["contest-id","name"]),M(d,{class:"mb-2","contest-id":t.contest.id,status:t.contest.status,"is-approved":t.contest.isApproved},null,8,["contest-id","status","is-approved"]),M(c,{class:"mb-2","contest-id":t.contest.id,mode:t.contest.mode},null,8,["contest-id","mode"]),M(y,{class:"mb-2","contest-id":t.contest.id,"contest-start":t.contest.contestStart?t.contest.contestStart.slice(0,10):null,"contest-end":t.contest.contestEnd?t.contest.contestEnd.slice(0,10):null},null,8,["contest-id","contest-start","contest-end"]),M(v,{"contest-id":t.contest.id,url:t.contest.url||null,"osu-contest-listing-url":t.contest.osuContestListingUrl||null,"results-url":t.contest.resultsUrl||null,"banner-url":t.contest.bannerUrl||null},null,8,["contest-id","url","osu-contest-listing-url","results-url","banner-url"]),M(I,{"contest-id":t.contest.id,description:t.contest.description},null,8,["contest-id","description"]),vn,h("div",null,[Cn,h("div",wn,[h("a",{href:"#submissions","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=C((()=>{}),["prevent"]))},[w(" See all submissions ("+g(t.contest.submissions.length)+") ",1),In])]),M(S,{id:"submissions",class:"collapse","contest-id":t.contest.id,submissions:t.contest.submissions,"osu-contest-listing-url":t.contest.osuContestListingUrl},null,8,["contest-id","submissions","osu-contest-listing-url"]),M(k,{"contest-id":t.contest.id,download:t.contest.download},null,8,["contest-id","download"]),h("div",Sn,[h("a",{href:"#anonymizationGuide","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=C((()=>{}),["prevent"]))},kn)]),M($,{id:"anonymizationGuide",class:"collapse","contest-id":t.contest.id},null,8,["contest-id"]),$n,jn,Un,h("div",xn,[h("a",{href:"#screeners","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=C((()=>{}),["prevent"]))},[w(" See all screeners ("+g(t.contest.screeners.length)+") ",1),Mn])]),h("div",Dn,[M(j,{class:"col-sm-4","contest-id":t.contest.id,screeners:t.contest.screeners},null,8,["contest-id","screeners"]),M(U,{class:"col-sm-7",users:t.contest.screeners},null,8,["users"]),Tn]),En,h("code",null,"https://mappersguild.com/contests/screening?contest="+g(t.contest.id),1),Jn,An,h("div",Vn,[M(x,{class:"col-sm-4","contest-id":t.contest.id,"screening-vote-count":t.contest.screeningVoteCount},null,8,["contest-id","screening-vote-count"]),Ln]),h("div",Nn,[h("a",{href:"#screeningStatus","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=C((()=>{}),["prevent"]))},qn)]),M(D,{id:"screeningStatus",class:"collapse mx-2",contest:t.contest},null,8,["contest"]),h("div",Rn,[M(T,{class:"col-sm-4","contest-id":t.contest.id,"judging-threshold":t.contest.judgingThreshold},null,8,["contest-id","judging-threshold"]),Pn]),h("div",On,[h("a",{href:"#screeningResults","data-bs-toggle":"collapse",onClick:e[4]||(e[4]=C((()=>{}),["prevent"]))},Bn)]),M(E,{id:"screeningResults",class:"collapse","contest-id":t.contest.id,"contest-name":t.contest.name,submissions:t.contest.submissions,"judging-threshold":t.contest.judgingThreshold,screeners:t.contest.screeners},null,8,["contest-id","contest-name","submissions","judging-threshold","screeners"]),_n,Fn,zn,h("div",Gn,[h("a",{href:"#judges","data-bs-toggle":"collapse",onClick:e[5]||(e[5]=C((()=>{}),["prevent"]))},[w(" See all judges ("+g(t.contest.judges.length)+") ",1),Hn])]),h("div",Kn,[M(J,{class:"col-sm-4","contest-id":t.contest.id,judges:t.contest.judges},null,8,["contest-id","judges"]),M(U,{class:"col-sm-7",users:t.contest.judges},null,8,["users"]),Yn]),Qn,h("code",null,"https://mappersguild.com/contests/judging?contest="+g(t.contest.id),1),Wn,Xn,M(A,{"contest-id":t.contest.id,criterias:t.contest.criterias},null,8,["contest-id","criterias"]),Zn,to,M(V,{"contest-id":t.contest.id},null,8,["contest-id"]),eo,"hidden"!=t.contest.status||t.contest.submissions.length?b("",!0):(m(),p("button",{key:0,class:"btn btn-sm btn-outline-danger w-100",onClick:e[6]||(e[6]=e=>t.deleteContest(e))}," Delete contest "))])])])};var so=d({name:"CurrentSubmission",computed:a({},E(["userSubmission"]))});const no=["href"],oo={class:"small text-secondary ms-1"},io=w("(last updated "),ro=w(")");so.render=function(t,e,s,n,o,i){return m(),p("span",null,[h("a",{href:t.userSubmission.url,target:"_blank",class:"small"},g(t.userSubmission.url),9,no),h("span",oo,[io,h("code",null,g(new Date(t.userSubmission.updatedAt).toString().slice(4,33)),1),ro])])};var ao=d({name:"MapSubmissionForm",components:{CurrentSubmission:so},props:{contestId:{type:String,required:!0}},data(){return{newSubmissionUrl:this.ok}},computed:a(a({},c(["loggedInUser"])),E(["userSubmission"])),watch:{contestId(){this.newSubmissionUrl=this.userSubmission?this.userSubmission.url:""}},methods:{async createSubmission(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/createSubmission`,{submissionUrl:this.newSubmissionUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Submitted!",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e}))}}});S("data-v-5415dc65");const lo={class:"row"},co={class:"col-sm-12 mb-2"},uo=w(" Current submission: "),mo={key:0,class:"me-2 text-secondary"},po={class:"col-sm-8"},ho={class:"col-sm-4"},go=h("div",{class:"small text-secondary"}," Upload your beatmap to a file sharing service and provide a link here! For various reasons, this website does not host beatmap uploads. ",-1);k(),ao.render=function(t,e,s,n,o,i){const r=u("current-submission");return m(),p("div",lo,[h("div",co,[uo,t.userSubmission?t.userSubmission&&t.userSubmission.url?(m(),f(r,{key:1})):b("",!0):(m(),p("span",mo,"No submission yet!"))]),h("div",po,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newSubmissionUrl=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link..."},null,512),[[v,t.newSubmissionUrl]])]),h("div",ho,[h("button",{class:"btn btn-sm btn-outline-info w-100",onClick:e[1]||(e[1]=e=>t.createSubmission(e))}," Submit ")]),go])},ao.__scopeId="data-v-5415dc65";var fo=d({name:"LimitedContestInfo",components:{ContestHeader:q,ContestBanner:G,MapSubmissionForm:ao},props:{contest:{type:Object,required:!0}}});const bo=h("h5",null,"General",-1),yo={key:1},vo=["innerHTML"],Co={key:2},wo=w(" This contest is currently in the "),Io=w(" phase. "),So={key:3},ko=["href"],$o=h("hr",null,null,-1),jo={key:4},Uo=h("h5",null,"Submission",-1),xo={key:0},Mo={key:0},Do={key:1},To=h("div",null,"This contest is not yet opened for submissions.",-1),Eo=w("Maps can be submitted after "),Jo={key:2},Ao=w(" Maps can be submitted until "),Vo={key:1},Lo=w(" This contest is being hosted on "),No=h("a",{href:"https://osu.ppy.sh/community/contests",target:"_blank"},"osu!'s contest listing",-1),qo=w(". Submit your beatmap on the "),Ro=["href"],Po=w("! "),Oo={key:5},Bo=h("h5",null,"Results",-1),_o=["href"],Fo=["href"];fo.render=function(t,e,s,n,o,i){const r=u("contest-header"),a=u("contest-banner"),l=u("map-submission-form");return m(),p("div",null,[M(r,{"contest-id":t.contest.id,name:t.contest.name,url:t.contest.url,creators:t.contest.creators},null,8,["contest-id","name","url","creators"]),t.contest.bannerUrl?(m(),f(a,{key:0,"banner-url":t.contest.bannerUrl},null,8,["banner-url"])):b("",!0),bo,t.contest.description?(m(),p("div",yo,[h("div",{class:"small mt-2 bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.contest.description.trim())},null,8,vo)])):b("",!0),"complete"!==t.contest.status?(m(),p("div",Co,[wo,h("b",null,g(t.contest.status),1),Io])):b("",!0),t.contest.url?(m(),p("div",So,[h("a",{href:t.contest.url,target:"_blank"},"Read more about the contest here!",8,ko)])):b("",!0),$o,"complete"!==t.contest.status?(m(),p("div",jo,[Uo,t.contest.osuContestListingUrl?(m(),p("div",Vo,[Lo,No,qo,h("a",{href:t.contest.osuContestListingUrl,target:"_blank"},"official contest page",8,Ro),Po])):(m(),p("div",xo,[new Date(t.contest.contestEnd)<new Date?(m(),p("div",Mo," This contest is no longer accepting new submissions. ")):new Date(t.contest.contestStart)>new Date?(m(),p("div",Do,[To,h("div",null,[Eo,h("code",null,g(new Date(t.contest.contestStart)),1)])])):(m(),p("div",Jo,[Ao,h("code",null,g(new Date(t.contest.contestEnd)),1),M(l,{class:"mt-2","contest-id":t.contest.id},null,8,["contest-id"])]))]))])):(m(),p("div",Oo,[Bo,h("div",null,[h("a",{href:t.contest.resultsUrl,target:"_blank"},"View contest results here!",8,_o)]),h("div",null,[h("a",{href:"/contests/results?contest="+t.contest.id,target:"_blank"},"View Mappers' Guild judging scores here!",8,Fo)])]))])};var zo=d({name:"AddContest",data:()=>({contestName:"",userContests:[],templateContest:""}),async created(){const t=await this.$http.executeGet("/contests/listing/loadUserContests");this.userContests=t},methods:{async addContest(t){const e=await this.$http.executePost("/contests/listing/create",{name:this.contestName,templateId:this.templateContest},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",e),this.$router.replace(`/contests/listing?contest=${e.id}`))}}});const Go={class:"container card card-body py-3 mb-2"},Ho=h("option",{value:"",disabled:""}," Contest details template ",-1),Ko=["value"],Yo={key:0,value:"x",disabled:""};zo.render=function(t,e,s,n,o,i){return m(),p("div",Go,[y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.contestName=e),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[v,t.contestName,void 0,{trim:!0}]]),y(h("select",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.templateContest=e),class:"form-select form-select-sm mb-2"},[Ho,(m(!0),p(U,null,x(t.userContests,(t=>(m(),p("option",{key:t.id,value:t.id},g(t.name),9,Ko)))),128)),t.userContests.length?b("",!0):(m(),p("option",Yo," No templates available "))],512),[[$,t.templateContest]]),h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[2]||(e[2]=e=>t.addContest(e))}," Add new contest ")])};var Qo={state:{contests:[],selectedContestId:null},mutations:{setContests(t,e){t.contests=e},addContest(t,e){t.contests.unshift(e),t.selectedContestId=e.id},deleteContest(t,e){t.selectedContestId=null;const s=t.contests.findIndex((t=>t.id==e));-1!==s&&t.contests.splice(s,1)},setSelectedContestId(t,e){t.selectedContestId=e},updateContestStart(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestStart=e.contestStart)},updateContestEnd(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestEnd=e.contestEnd)},updateUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.url=e.url)},updateOsuContestListingUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.osuContestListingUrl=e.osuContestListingUrl)},updateResultsUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.resultsUrl=e.resultsUrl)},updateBannerUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.bannerUrl=e.bannerUrl)},updateDownload(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.download=e.download)},updateCreators(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.creators=e.creators)},deleteSubmission(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&s.submissions.splice(t,1)}},addScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.screeners.push(e.screener)},deleteScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.screeners.findIndex((t=>t.id==e.screenerId));-1!==t&&s.screeners.splice(t,1)}},addJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.judges.push(e.judge)},deleteJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.judges.findIndex((t=>t.id==e.judgeId));-1!==t&&s.judges.splice(t,1)}},updateJudgingThreshold(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.judgingThreshold=e.judgingThreshold)},updateScreeningVoteCount(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.screeningVoteCount=e.screeningVoteCount)},updateStatus(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.status=e.status)},updateMode(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.mode=e.mode)},updateContestCriterias(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.criterias=e.criterias)},updateName(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.name=e.name)},updateDescription(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.description=e.description)},updateSubmissions(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.submissions=e.submissions)},updateAnonymousSubmissionName(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&(s.submissions[t].name=e.name)}},addSubmissionsFromCsv(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.submissions=e.submissions)}},getters:{selectedContest:t=>t.contests.find((e=>e.id===t.selectedContestId)),userSubmission:t=>{const e=t.contests.find((e=>e.id===t.selectedContestId));return e&&e.submissions&&e.submissions.length?e.submissions[0]:null}}},Wo=d({name:"ContestPage",components:{ContestCard:A,AddContest:zo,ContestInfo:bn,LimitedContestInfo:fo},data:()=>({displayMode:"activeContests",filterMode:"",filterValue:"",firstLoadComplete:!1,loadedSpecificContest:!1,limit:200,skip:0,total:0,moreContestsAvailable:!0,loadingCategory:!1}),computed:l(a(a(a({},c(["loggedInUser"])),c({contests:t=>t.contests.contests,selectedContestId:t=>t.contests.selectedContestId})),E(["selectedContest"])),{filteredContests(){if(this.contests){let t=[...this.contests];if(this.filterMode.length&&(t=t.filter((t=>t.mode==this.filterMode))),this.filterValue.length){const e=this.filterValue.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)))}return t}return[]},creatorIds(){return this.selectedContest.creators.map((t=>t.id))}}),watch:{async displayMode(){this.moreContestsAvailable=!0,this.skip=0,this.firstLoadComplete&&(this.loadingCategory=!0,this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null),this.$router.replace("/contests/listing"),await this.loadContests(),this.loadingCategory=!1)}},beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",Qo)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},async created(){await this.loadContests(),this.firstLoadComplete=!0},methods:{async loadContests(){const t=this.$route.query.contest;if(t&&!this.firstLoadComplete){const e=await this.$http.initialRequest(`/contests/listing/searchContest/${t}`);if(this.$http.isError(e))this.$router.replace("/contests/listing"),this.firstLoadComplete=!0,await this.loadContests();else{e.creators.map((t=>t.id)).includes(this.loggedInUser.id)?this.displayMode="myContests":"complete"==e.status?this.displayMode="completedContests":this.displayMode,this.$store.commit("setContests",[e]),this.$store.commit("setSelectedContestId",t),this.loadedSpecificContest=!0}}else{let t;t=this.firstLoadComplete?await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`):await this.$http.initialRequest(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`),this.$http.isError(t)||(this.skip+=this.limit,this.$store.commit("setContests",t),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1,t.length<this.limit&&(this.moreContestsAvailable=!1))}},async loadMore(t){this.total=this.contests.length;const e=await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`,t);this.$http.isError(e)||(0==this.skip?this.$store.commit("setContests",e):this.$store.commit("setContests",[...this.contests||[],...e]),this.skip+=this.limit,this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1),this.total==this.contests.length&&(this.moreContestsAvailable=!1,this.$store.dispatch("updateToastMessages",{message:"No more contests to load!",type:"info"}))}}});const Xo={class:"row"},Zo={class:"col-sm-3"},ti={class:"container card card-body py-3 mb-2"},ei={class:"input-group"},si=h("button",{class:"btn btn-primary",href:"#"},[h("i",{class:"fas fa-search"})],-1),ni=h("hr",null,null,-1),oi=h("div",null," Contest category ",-1),ii={class:"small ms-2"},ri=h("hr",null,null,-1),ai=h("div",null," Contest mode ",-1),li={class:"small mx-2"},di=h("hr",null,null,-1),ci={key:1,class:"container card card-body py-3 mb-2 text-secondary"},ui={key:2,class:"container card card-body py-3 mb-2 text-secondary"},mi={key:3},pi={key:4},hi={class:"col-sm-9 container card card-body"},gi={key:0},fi=h("div",{class:"radial-divisor"},null,-1);Wo.render=function(t,e,s,n,o,i){const r=u("add-contest"),a=u("contest-card"),l=u("limited-contest-info"),d=u("contest-info");return m(),p("div",null,[h("div",Xo,[h("div",Zo,[h("div",ti,[h("div",ei,[si,y(h("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.filterValue=e),class:"form-control form-control-sm",type:"text",placeholder:"search",maxlength:"200",autocomplete:"off"},null,512),[[v,t.filterValue]])]),ni,oi,h("div",ii,[h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[1]||(e[1]=C((e=>t.displayMode="activeContests"),["prevent"]))},[h("span",{class:D("activeContests"===t.displayMode?"border-bottom border-secondary":"")}," Active ",2)],2)]),h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[2]||(e[2]=C((e=>t.displayMode="completedContests"),["prevent"]))},[h("span",{class:D("completedContests"===t.displayMode?"border-bottom border-secondary":"")}," Completed ",2)],2)]),h("div",null,[h("a",{href:"#",class:D(t.loadingCategory?"pe-none opacity-50":""),onClick:e[3]||(e[3]=C((e=>t.displayMode="myContests"),["prevent"]))},[h("span",{class:D("myContests"===t.displayMode?"border-bottom border-secondary":"")}," My contests ",2)],2)])]),ri,ai,h("div",li,[h("div",null,[h("a",{href:"#",onClick:e[4]||(e[4]=C((e=>t.filterMode=""),["prevent"]))},[h("span",{class:D(""===t.filterMode?"border-bottom border-secondary":"")}," Any ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[5]||(e[5]=C((e=>t.filterMode="osu"),["prevent"]))},[h("span",{class:D("osu"===t.filterMode?"border-bottom border-secondary":"")}," osu! ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[6]||(e[6]=C((e=>t.filterMode="taiko"),["prevent"]))},[h("span",{class:D("taiko"===t.filterMode?"border-bottom border-secondary":"")}," osu!taiko ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[7]||(e[7]=C((e=>t.filterMode="catch"),["prevent"]))},[h("span",{class:D("catch"===t.filterMode?"border-bottom border-secondary":"")}," osu!catch ",2)])]),h("div",null,[h("a",{href:"#",onClick:e[8]||(e[8]=C((e=>t.filterMode="mania"),["prevent"]))},[h("span",{class:D("mania"===t.filterMode?"border-bottom border-secondary":"")}," osu!mania ",2)])])])]),di,"myContests"==t.displayMode&&t.contests&&!t.loadedSpecificContest?(m(),f(r,{key:0})):b("",!0),M(J,{name:"list",tag:"div",class:"row"},{default:T((()=>[(m(!0),p(U,null,x(t.filteredContests,(t=>(m(),f(a,{key:t.id,class:"col-sm-12 my-2",contest:t,route:"listing"},null,8,["contest"])))),128))])),_:1}),t.contests?b("",!0):(m(),p("div",ci," Loading... ")),t.contests&&!t.filteredContests.length?(m(),p("div",ui," No contests available. Try other filters! ")):b("",!0),t.loadedSpecificContest?(m(),p("div",mi,[h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[9]||(e[9]=e=>t.loadMore(e))}," Load other contests ")])):t.moreContestsAvailable&&t.contests&&t.contests.length>=t.limit?(m(),p("div",pi,[h("button",{class:"btn w-100 btn-info",type:"button",onClick:e[10]||(e[10]=e=>t.loadMore(e))}," Load more contests ")])):b("",!0)]),h("div",hi,[t.selectedContestId?"myContests"!==t.displayMode?(m(),f(l,{key:1,contest:t.selectedContest},null,8,["contest"])):t.creatorIds.includes(t.loggedInUser.id)||3178418==t.loggedInUser.osuId?(m(),f(d,{key:2,contest:t.selectedContest},null,8,["contest"])):b("",!0):(m(),p("div",gi," No contest selected! Choose one on the left. "))])]),fi])};export{Wo as default};
