import{d as p,_,o as i,e as d,a as f,j as u,w as g,l as I,r as c,F as $,f as b,t as l,m as F}from"./index-36edc57e.js";import{F as v}from"./FeaturedArtistInfo-664cf37c.js";import{C as y}from"./CopyPaste-cea64c06.js";import{D as S}from"./DataTable-dd466da8.js";import"./ModalDialog-aaef0171.js";import"./UserLinkList-78228439.js";const U=p({name:"ShowcaseUserList",components:{CopyPaste:y},data(){return{songs:[]}},methods:{async findRecentlyLicensedSongs(e){const t=await this.$http.executeGet("/admin/featuredArtists/findRecentlyLicensedSongs",e);t&&!t.error&&(this.songs=t.songs)}}}),w={class:"container card card-body py-1 my-2"},R={key:0};function k(e,t,s,r,o,h){const m=c("copy-paste");return i(),d("div",w,[f("button",{class:"btn btn-sm w-50 btn-outline-info mb-3",onClick:t[0]||(t[0]=n=>e.findRecentlyLicensedSongs(n))}," Load recently licensed songs "),e.songs.length?(i(),d("div",R,[u(m,{distinct:"songs"},{default:g(()=>[(i(!0),d($,null,b(e.songs,(n,A)=>(i(),d("div",{key:A},l(n.artist)+" - "+l(n.title),1))),128))]),_:1})])):I("",!0)])}const C=_(U,[["render",k]]),L={state:{featuredArtists:[]},mutations:{setFeaturedArtists(e,t){e.featuredArtists=t},updateOsuId(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.osuId=t.osuId)},updateName(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.label=t.name)},updateReferenceUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.referenceUrl=t.referenceUrl)},updateOszTemplatesUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.oszTemplatesUrl=t.oszTemplatesUrl)},updateOfferedUsers(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.offeredUsers=t.offeredUsers)},addSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&s.songs.push(t.song)},updateSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(o=>o.id==t.song.id);r!==-1&&(s.songs[r]=t.song)}},deleteSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(o=>o.id==t.songId);r!==-1&&s.songs.splice(r,1)}},updateNotes(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.notes=t.notes)},updateLastReviewed(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.lastReviewed=t.lastReviewed)},updatePermanentlyDismiss(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.permanentlyDismiss=t.permanentlyDismiss)}}},D=L,T=p({components:{DataTable:S,FeaturedArtistInfo:v,RecentLicensedSongs:C},data(){return{selectedFeaturedArtistId:""}},computed:{...F({featuredArtists:e=>e.artistsAdmin.featuredArtists}),selectedFeaturedArtist(){return this.featuredArtists.find(e=>e.id===this.selectedFeaturedArtistId)}},beforeCreate(){this.$store.hasModule("artistsAdmin")||this.$store.registerModule("artistsAdmin",D)},unmounted(){this.$store.hasModule("artistsAdmin")&&this.$store.unregisterModule("artistsAdmin")},async created(){const e=await this.$http.initialRequest("/admin/featuredArtists/load");this.$http.isError(e)||this.$store.commit("setFeaturedArtists",e)}}),M={class:"container card card-body py-1"},N={class:"row"},z={class:"col-sm"},B=["href"],O={key:1};function P(e,t,s,r,o,h){const m=c("data-table"),n=c("recent-licensed-songs"),A=c("featured-artist-info");return i(),d("div",null,[f("div",M,[f("div",N,[f("div",z,[u(m,{data:e.featuredArtists,headers:["ARTIST"],"custom-data-target":"#editFeaturedArtist","onUpdate:selectedId":t[0]||(t[0]=a=>e.selectedFeaturedArtistId=a)},{default:g(({obj:a})=>[f("td",null,[a.osuId?(i(),d("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+a.osuId,target:"_blank"},l(a.label),9,B)):(i(),d("span",O,l(a.label),1))])]),_:1},8,["data"])])])]),u(n),u(A,{"featured-artist":e.selectedFeaturedArtist},null,8,["featured-artist"])])}const H=_(T,[["render",P]]);export{H as default};
