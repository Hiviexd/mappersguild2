var s=Object.defineProperty,e=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(e,i,o)=>i in e?s(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o,a=(s,e)=>{for(var i in e||(e={}))t.call(e,i)&&l(s,i,e[i]);if(o)for(var i of o(e))n.call(e,i)&&l(s,i,e[i]);return s};import{d as r,m as d,O as c,p as m,a as u,h as p,o as f,s as g,w as M,f as h,k as b,t as y,b as v,e as w,j as x,q as k,L as q,F,g as I}from"./vendor.b9ef672a.js";import{M as $,j,k as T,l as O,m as V,n as C,o as P}from"./index.59af7da6.js";import{F as B,_ as D}from"./extras.acd395c6.js";import{_ as L}from"./ModalDialog.4a9168b4.js";import{_}from"./FilterBox.b3263039.js";var U,E,A={namespaced:!0,state:{filterValue:"",filterMode:"",selectedMissionId:null,missions:[],userBeatmaps:[],isLoadingMissions:!0,isFirstLoadDone:!1,exampleMission:null},mutations:{setFirstLoadDone(s){s.isFirstLoadDone=!0},setMissions(s,e){s.missions=e},setUserBeatmaps(s,e){s.userBeatmaps=e},setFilterValue(s,e){s.filterValue=e},setExampleMission(s,e){s.exampleMission=e},setFilterMode(s,e){s.filterMode=e},setSelectedMissionId(s,e){s.selectedMissionId=e},updateMission(s,e){const i=s.missions.findIndex((s=>s.id===e.id));-1!==i&&(s.missions[i]=e)}},getters:{filteredMissions:s=>{let e=s.missions;if(s.filterMode!==B.any){const i=s.filterMode;e=e.filter((s=>s.modes.includes(i)))}return s.filterValue.length>2&&(e=e.filter((e=>e.name.toLowerCase().includes(s.filterValue.toLowerCase())))),e},openMissions:(s,e)=>e.filteredMissions.filter((s=>s.status==$.Open)),closedMissions:(s,e)=>e.filteredMissions.filter((s=>s.status==$.Closed)),selectedMission:s=>s.missions.find((e=>e.id===s.selectedMissionId))},actions:{updateFilterValue({commit:s},e){s("setFilterValue",e)},updateFilterMode({commit:s},e){s("setFilterValue",""),s("setFilterMode",e)}}},z=r({name:"MissionCard",components:{AssociatedBeatmaps:j,AddBeatmapToMission:T,MissionDetails:O,ModalDialog:L},computed:(U=a(a({},d(["loggedInUser"])),c("missions",["selectedMission"])),E={findTierImage(){switch(this.selectedMission.tier){case 1:return"/images/bronze.png";case 2:return"/images/silver.png";case 3:return"/images/gold.png";case 4:return"/images/platinum.png";default:return"/images/bronze.png"}},cleanModes(){const s=[];for(const e of this.selectedMission.modes)switch(e){case V.Osu:s.push("osu!");break;case V.Taiko:s.push("osu!taiko");break;case V.Catch:s.push("osu!catch");break;case V.Mania:s.push("osu!mania")}return s}},e(U,i(E)))});m("data-v-3e3e2c94");const S=["href"],Y={key:0,class:"text-primary small"},R={class:"container"},G={class:"text-center"},H=["src"],W={class:"fs-4"},J=b(" priority quest"),K=h("hr",null,null,-1),N=h("hr",null,null,-1);u(),z.render=function(s,e,i,o,t,n){const l=p("mission-details"),a=p("add-beatmap-to-mission"),r=p("associated-beatmaps"),d=p("modal-dialog");return f(),g(d,{id:"editMission","header-class":`bg-rank-${s.selectedMission?s.selectedMission.tier:1}`,loaded:Boolean(s.selectedMission)},{header:M((()=>[h("a",{href:`/missions?id=${s.selectedMission.id}`,target:"_blank",class:"text-dark"},[b(y(s.selectedMission.name)+" ",1),s.selectedMission.modes&&s.selectedMission.modes.length&&s.selectedMission.modes.length<4?(f(),v("span",Y,"("+y(s.cleanModes.join(", ")+" only")+")",1)):w("",!0)],8,S)])),default:M((()=>[h("div",R,[h("div",G,[h("img",{src:s.findTierImage,class:"info-mission-tier"},null,8,H),h("div",W,[h("b",null,y(s.selectedMission.name.trim()),1)]),h("div",null,[h("b",null,"Tier "+y(s.selectedMission.tier),1),J]),K]),x(l,{mission:s.selectedMission},null,8,["mission"]),N,h("div",null,["open"==s.selectedMission.status?(f(),g(a,{key:0,mission:s.selectedMission},null,8,["mission"])):w("",!0),x(r,{mission:s.selectedMission},null,8,["mission"])])])])),_:1},8,["header-class","loaded"])},z.__scopeId="data-v-3e3e2c94";var Q=r({name:"MissionInformation",components:{ExampleMission:C},computed:a({},d("missions",["exampleMission"]))});m("data-v-cd5e4ae8");const X={class:"container card card-body py-3 mb-2"},Z=[b(" How do priority quests work? "),h("i",{class:"fas fa-angle-down"},null,-1)],ss={id:"missionInformation",class:"collapse ms-4 mb-2"},es=h("div",{class:"small text-secondary"},[b(" Priority quests differ from "),h("a",{href:"/quests"},"normal quests"),b(" in a few ways: "),h("ol",null,[h("li",null,[h("b",null,"You don't need to claim a priority quest to participate."),b(" You only need to make a map and connect it to the quest!")]),h("li",null,[h("b",null,"Some priority quests have user-specific requirements."),b(" These generally aim to give newer mappers an opportunity to get involved, like only allowing users without ranked maps to participate.")]),h("li",null,[h("b",null,"Multiple users can complete the same quest."),b(" This depends on the quest's win condition.")])]),b(" Here's a breakdown of this example priority quest: ")],-1),is=[b(" What are the rewards for completing a priority quest? "),h("i",{class:"fas fa-angle-down"},null,-1)],os={id:"missionRewards",class:"collapse ms-4 mb-2 small text-secondary"},ts=h("b",null,"The host",-1),ns=b(" of a beatmap that completes a priority quest earns: "),ls=h("li",null,[h("b",null,"Progress towards a profile badge specific to priority quests."),b(" You'll need to host 3 beatmapsets that complete priority quests to earn the badge!")],-1),as=["src"],rs=h("li",null,[h("b",null,"Customized mapping keychain for each priority quest completed:")],-1),ds={class:"row"},cs={class:"col-sm-4"},ms=["src"],us=h("ul",null,[h("li",null," Front: Pattern from your beatmap. "),h("li",null," Back: Your username and Mappers' Guild logos. "),h("li",null," Depending on your country, shipping may be difficult (or even impossible). These are being made and shipped individually by pishifat, so don't expect the efficiency of a professional company! ")],-1),ps={class:"col-sm-6"},fs=["src"],gs=h("b",null,"All users",-1),Ms=b(" involved in a beatmap that completes a priority quest earn: "),hs=h("li",null,[h("b",null,"+2 bonus points per difficulty on a ranked beatmap."),b(" This scales with length, so longer maps earn more points")],-1),bs=h("li",null,[h("b",null,"Variable points for completing a priority quest."),b(" This depends on the quest's difficulty tier:")],-1),ys=["src"],vs=h("b",null,"Tier 1:",-1),ws=b(" 7 points "),xs=["src"],ks=h("b",null,"Tier 2:",-1),qs=b(" 10 points "),Fs=["src"],Is=h("b",null,"Tier 3:",-1),$s=b(" 13 points "),js=["src"],Ts=h("b",null,"Tier 4:",-1),Os=b(" 20 points "),Vs=b(" Anyone who participates in a map linked to a priority questearns: "),Cs=h("ul",null,[h("li",null,[h("b",null,"+1 bonus point per difficulty (also scaling with length) on a ranked beatmap")])],-1);u(),Q.render=function(s,e,i,o,t,n){const l=p("example-mission");return f(),v("div",X,[h("a",{href:"#missionInformation","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=k((()=>{}),["prevent"]))},Z),h("div",ss,[es,x(l,{mission:s.exampleMission},null,8,["mission"])]),h("a",{href:"#missionRewards","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=k((()=>{}),["prevent"]))},is),h("div",os,[ts,ns,h("ul",null,[ls,h("img",{class:"ms-2 text-center rounded",src:"/images/questbadge.png"},null,8,as),rs,h("div",ds,[h("div",cs,[h("img",{class:"text-center w-100 ms-2 rounded",src:"/images/examplemap.png"},null,8,ms),us]),h("div",ps,[h("img",{class:"ms-2 text-center w-100 rounded",src:"/images/keychain.jpg"},null,8,fs)])])]),gs,Ms,h("ul",null,[hs,bs,h("ul",null,[h("li",null,[h("img",{class:"tier-example me-1",src:"/images/bronze.png"},null,8,ys),vs,ws]),h("li",null,[h("img",{class:"tier-example me-1",src:"/images/silver.png"},null,8,xs),ks,qs]),h("li",null,[h("img",{class:"tier-example me-1",src:"/images/gold.png"},null,8,Fs),Is,$s]),h("li",null,[h("img",{class:"tier-example me-1",src:"/images/platinum.png"},null,8,js),Ts,Os])])]),Vs,Cs])])},Q.__scopeId="data-v-cd5e4ae8";var Ps=r({name:"MissionPageFilters",components:{FilterBox:_,ModeFilters:D},computed:a({},d("missions",["filterMode"])),methods:q("missions",["updateFilterValue","updateFilterMode"])});const Bs={class:"container card card-body py-3 mb-2"};Ps.render=function(s,e,i,o,t,n){const l=p("mode-filters"),a=p("filter-box");return f(),v("div",Bs,[x(a,{placeholder:"filter by quest name...","onUpdate:filterValue":e[1]||(e[1]=e=>s.updateFilterValue(e))},{filters:M((()=>[x(l,{"filter-mode":s.filterMode,"onUpdate:filterMode":e[0]||(e[0]=e=>s.updateFilterMode(e))},null,8,["filter-mode"])])),_:1})])};var Ds=r({name:"MissionPage",components:{MissionCard:P,MissionInformation:Q,MissionPageFilters:Ps,MissionInfoModal:z},computed:a(a(a({},d(["loggedInUser"])),d("missions",["isFirstLoadDone","isLoadingMissions"])),c("missions",["openMissions","closedMissions","selectedMission"])),beforeCreate(){this.$store.hasModule("missions")||this.$store.registerModule("missions",A)},async created(){const s=this.$route.query.id;const e=await this.$http.initialRequest("/missions/relevantInfo");this.$http.isError(e)||(this.$store.commit("missions/setMissions",e.missions),this.$store.commit("missions/setUserBeatmaps",e.beatmaps),this.$store.commit("missions/setFilterMode",this.loggedInUser.mainMode),this.$store.commit("missions/setFirstLoadDone"),s&&e.missions.some((e=>e.id==s))&&(this.$store.commit("missions/setSelectedMissionId",s),this.$bs.showModal("editMission")));const i=await this.$http.executeGet("/exampleMission");this.$http.isError(i)||this.$store.commit("missions/setExampleMission",i)}});const Ls=h("div",{class:"radial-divisor"},null,-1),_s={class:"container card card-body my-2"},Us=h("h4",null,"Active priority quests",-1),Es={key:0,class:"container card card-body my-4"},As=[b(" Inactive priority quests "),h("i",{class:"fas fa-angle-down"},null,-1)],zs={id:"closedMissions",class:"collapse"};Ds.render=function(s,e,i,o,t,n){const l=p("mission-page-filters"),a=p("mission-information"),r=p("mission-card"),d=p("mission-info-modal");return f(),v("div",null,[x(l),x(a),Ls,h("div",_s,[Us,(f(!0),v(F,null,I(s.openMissions,(s=>(f(),g(r,{key:s.id,mission:s},null,8,["mission"])))),128))]),s.closedMissions&&s.closedMissions.length?(f(),v("div",Es,[h("h4",null,[h("a",{href:"#closedMissions","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=k((()=>{}),["prevent"]))},As)]),h("div",zs,[(f(!0),v(F,null,I(s.closedMissions,(s=>(f(),g(r,{key:s.id,mission:s},null,8,["mission"])))),128))])])):w("",!0),x(d)])};export{Ds as default};
