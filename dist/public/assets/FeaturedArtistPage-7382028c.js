import{d as A,_ as h,o as i,e as a,a as d,i as p,w as _,F as I,r as k,t as c,k as g,p as f,b,f as y,j as F,m as R,c as U}from"./index-523b5621.js";import{F as L}from"./FeaturedArtistInfo-e0a6369f.js";import{C as w}from"./CopyPaste-f39a6cdd.js";import{D as S}from"./DataTable-806b65f8.js";import"./ModalDialog-4fced05a.js";import"./UserLinkList-8552d778.js";const C=A({name:"RecentLicensedSongs",components:{CopyPaste:w},data(){return{songs:[]}},methods:{async findRecentlyLicensedSongs(e){const t=await this.$http.executeGet("/admin/featuredArtists/findRecentlyLicensedSongs",e);t&&!t.error&&(this.songs=t.songs)}}}),M={class:"container card card-body py-3 my-2"},T=d("h5",null,"Recently licensed songs",-1),D={key:0};function N(e,t,s,r,u,$){const l=f("copy-paste");return i(),a("div",M,[T,d("button",{class:"btn btn-sm w-100 btn-info",onClick:t[0]||(t[0]=n=>e.findRecentlyLicensedSongs(n))}," Load recently licensed songs "),e.songs.length?(i(),a("div",D,[p(l,{distinct:"songs"},{default:_(()=>[(i(!0),a(I,null,k(e.songs,(n,m)=>(i(),a("div",{key:m},c(n.artist)+" - "+c(n.title),1))),128))]),_:1})])):g("",!0)])}const V=h(C,[["render",N]]),B=A({name:"ArtistRankedMaps",components:{CopyPaste:w},data(){return{artists:[],date:"2024-01-01",threshold:0}},methods:{async loadArtists(e){const t=await this.$http.executePost("/admin/featuredArtists/loadArtistsWithoutRankedMaps",{date:this.date,threshold:this.threshold},e);t&&!t.error&&(this.artists=t.artists)}}}),P={class:"container card card-body py-3 my-2"},z=d("h5",null,"Recently Ranked maps",-1),O=d("div",{class:"mb-2"}," Load artists who've had less than x maps Ranked in specific timeframe ",-1),j={class:"row mb-2 mx-1"},x={key:0},E=["href"];function G(e,t,s,r,u,$){const l=f("copy-paste");return i(),a("div",P,[z,O,d("div",j,[b(d("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.date=n),class:"form-control form-control-sm mx-2 w-25",type:"date",autocomplete:"off",placeholder:"how far back to check"},null,512),[[y,e.date]]),b(d("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.threshold=n),class:"form-control form-control-sm mx-2 w-25",type:"number",autocomplete:"off",placeholder:"how many maps"},null,512),[[y,e.threshold]]),d("button",{class:"btn btn-sm btn-info w-25",onClick:t[2]||(t[2]=n=>e.loadArtists(n))}," Load artists ")]),e.artists.length?(i(),a("div",x,[p(l,{distinct:"artists"},{default:_(()=>[(i(!0),a(I,null,k(e.artists,(n,m)=>(i(),a("div",{key:m},[F(c(n.rankedMaps)+" - ",1),d("a",{href:`https://osu.ppy.sh/beatmaps/artists/${n.osuId}`},c(n.name),9,E)]))),128))]),_:1})])):g("",!0)])}const W=h(B,[["render",G]]),q={state:{featuredArtists:[]},mutations:{setFeaturedArtists(e,t){e.featuredArtists=t},updateOsuId(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.osuId=t.osuId)},updateName(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.label=t.name)},updateReferenceUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.referenceUrl=t.referenceUrl)},updateOszTemplatesUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.oszTemplatesUrl=t.oszTemplatesUrl)},updateOfferedUsers(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.offeredUsers=t.offeredUsers)},addSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&s.songs.push(t.song)},updateSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(u=>u.id==t.song.id);r!==-1&&(s.songs[r]=t.song)}},deleteSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(u=>u.id==t.songId);r!==-1&&s.songs.splice(r,1)}},updateNotes(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.notes=t.notes)},updateLastReviewed(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.lastReviewed=t.lastReviewed)},updatePermanentlyDismiss(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.permanentlyDismiss=t.permanentlyDismiss)}}},H=q,J=A({components:{DataTable:S,FeaturedArtistInfo:L,RecentLicensedSongs:V,ArtistRankedMaps:W},data(){return{selectedFeaturedArtistId:""}},computed:{...R({featuredArtists:e=>e.artistsAdmin.featuredArtists}),selectedFeaturedArtist(){return this.featuredArtists.find(e=>e.id===this.selectedFeaturedArtistId)}},beforeCreate(){this.$store.hasModule("artistsAdmin")||this.$store.registerModule("artistsAdmin",H)},unmounted(){this.$store.hasModule("artistsAdmin")&&this.$store.unregisterModule("artistsAdmin")},methods:{async loadFeaturedArtists(e){const t=await this.$http.executeGet("/admin/featuredArtists/load",e);this.$http.isError(t)||this.$store.commit("setFeaturedArtists",t)}}}),K={class:"container card card-body py-3"},Q=d("h5",null,"Featured Artists list",-1),X=["href"],Y={key:1};function Z(e,t,s,r,u,$){const l=f("data-table"),n=f("recent-licensed-songs"),m=f("artist-ranked-maps"),v=f("featured-artist-info");return i(),a("div",null,[d("div",K,[Q,d("button",{class:"btn btn-sm btn-info w-100",onClick:t[0]||(t[0]=o=>e.loadFeaturedArtists(o))}," Load Featured Artists "),e.featuredArtists.length?(i(),U(l,{key:0,class:"mt-2",data:e.featuredArtists,headers:["ARTIST"],"custom-data-target":"#editFeaturedArtist","onUpdate:selectedId":t[1]||(t[1]=o=>e.selectedFeaturedArtistId=o)},{default:_(({obj:o})=>[d("td",null,[o.osuId?(i(),a("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+o.osuId,target:"_blank"},c(o.label),9,X)):(i(),a("span",Y,c(o.label),1))])]),_:1},8,["data"])):g("",!0)]),p(n),p(m),p(v,{"featured-artist":e.selectedFeaturedArtist},null,8,["featured-artist"])])}const it=h(J,[["render",Z]]);export{it as default};
