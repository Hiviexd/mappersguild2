var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,i=(e,i)=>{for(var r in i||(i={}))s.call(i,r)&&o(e,r,i[r]);if(t)for(var r of t(i))n.call(i,r)&&o(e,r,i[r]);return e};import{d as r,i as a,o as l,b as d,f as c,t as u,j as m,w as p,l as h,q as g,O as f,P as y,p as b,a as v,J as C,e as w,z as S,F as I,g as k,n as $,s as j,u as x,m as U,H as M,x as D}from"./vendor.8b5721c7.js";import{_ as J}from"./ContestCard.f4b3ec41.js";import{C as E}from"./CopyPaste.7cb4b414.js";import{_ as T}from"./ModalDialog.2c18b0dc.js";import"./ModesIcons.88090f43.js";var A=r({name:"ContestHeader",props:{name:{type:String,required:!0},url:{type:String,default:null},creator:{type:Object,required:!0}}});const N=["href"],L={key:1},q=h(" hosted by "),R=c("hr",null,null,-1);A.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("h4",null,[e.url?(l(),d("a",{key:0,href:e.url,target:"_blank"},u(e.name),9,N)):(l(),d("span",L,u(e.name),1))]),q,m(r,{user:e.creator},{default:p((()=>[h(u(e.creator.username),1)])),_:1},8,["user"]),R])};var O=r({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null},contestEnd:{type:String,default:null}},data(){return{newContestStart:this.contestStart,newContestEnd:this.contestEnd}},watch:{contestId(){this.newContestStart=this.contestStart,this.newContestEnd=this.contestEnd}},methods:{async updateContestStart(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestStart`,{date:this.newContestStart},e);this.$http.isError(t)?this.newContestStart=this.contestStart:(this.$store.dispatch("updateToastMessages",{message:"Updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:t}))},async updateContestEnd(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestEnd`,{date:this.newContestEnd},e);this.$http.isError(t)?this.newContestEnd=this.contestEnd:(this.$store.dispatch("updateToastMessages",{message:"Updated contest end date",type:"info"}),this.$store.commit("updateContestEnd",{contestId:this.contestId,contestEnd:t}))}}});const _={class:"row"},P={class:"col-sm-6"},V={class:"form-inline w-100"},z=h(" Submissions open: "),B={class:"input-group"},F={class:"input-group-append"},G={class:"col-sm-6"},H={class:"form-inline w-100"},K=h(" Submissions close: "),Y={class:"input-group"},Q={class:"input-group-append"};O.render=function(e,t,s,n,o,i){return l(),d("div",_,[c("div",P,[c("div",V,[z,c("div",B,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newContestStart=t),class:"ml-1 form-control",type:"date",onKeyup:t[1]||(t[1]=y((t=>e.updateContestStart(t)),["enter"]))},null,544),[[f,e.newContestStart]]),c("div",F,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=t=>e.updateContestStart(t))}," Save date ")])])])]),c("div",G,[c("div",H,[K,c("div",Y,[g(c("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.newContestEnd=t),class:"ml-1 form-control",type:"date",onKeyup:t[4]||(t[4]=y((t=>e.updateContestEnd(t)),["enter"]))},null,544),[[f,e.newContestEnd]]),c("div",Q,[c("button",{class:"btn btn-primary",href:"#",onClick:t[5]||(t[5]=t=>e.updateContestEnd(t))}," Save date ")])])])])])};var W=r({name:"TitleEdit",props:{contestId:{type:String,required:!0},name:{type:String,default:null}},data(){return{newName:this.name}},watch:{contestId(){this.newName=this.name}},methods:{async updateName(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateName`,{name:this.newName},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest name",type:"info"}),this.$store.commit("updateName",{contestId:this.contestId,name:t}))}}});const X={class:"form-inline w-100 mt-2"},Z=h(" Name: ");W.render=function(e,t,s,n,o,i){return l(),d("div",X,[Z,g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newName=t),class:"ml-1 form-control d-inline w-75",onChange:t[1]||(t[1]=t=>e.updateName(t))},null,544),[[f,e.newName]])])};var ee=r({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null},isApproved:{type:Boolean,required:!0}},data(){return{newStatus:this.status}},watch:{contestId(){this.newStatus=this.status}},methods:{async updateStatus(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateStatus`,{status:this.newStatus},e);this.$http.isError(t)?this.newStatus=this.status:(this.$store.dispatch("updateToastMessages",{message:"Updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:t}))}}});b("data-v-4a3e98ae");const te=h(" Status: "),se=[S('<option value="" disabled data-v-4a3e98ae> Select a status </option><option value="hidden" data-v-4a3e98ae> Hidden </option><option value="beatmapping" data-v-4a3e98ae> Beatmapping </option><option value="screening" data-v-4a3e98ae> Screening </option><option value="judging" data-v-4a3e98ae> Judging </option><option value="complete" data-v-4a3e98ae> Complete </option>',6)],ne={key:0,class:"small text-danger mt-2"};v(),ee.render=function(e,t,s,n,o,i){return l(),d("div",null,[te,g(c("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newStatus=t),class:"form-select form-select w-50 d-inline",onChange:t[1]||(t[1]=t=>e.updateStatus(t))},se,544),[[C,e.newStatus]]),e.isApproved||"hidden"===e.status?w("",!0):(l(),d("div",ne,' Your contest has been queued for approval. Once approved, it will appear in "Active contests". '))])},ee.__scopeId="data-v-4a3e98ae";var oe=r({name:"ModeInfo",props:{contestId:{type:String,required:!0},mode:{type:String,default:""}},data(){return{newMode:this.mode}},watch:{contestId(){this.newMode=this.mode}},methods:{async updateMode(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateMode`,{mode:this.newMode},e);this.$http.isError(t)?this.newMode=this.mode:(this.$store.dispatch("updateToastMessages",{message:"Updated contest mode",type:"info"}),this.$store.commit("updateMode",{contestId:this.contestId,mode:t}))}}});b("data-v-5ffc0e64");const ie=h(" Mode: "),re=[S('<option value="" selected disabled data-v-5ffc0e64> Select a mode </option><option value="osu" data-v-5ffc0e64> osu! </option><option value="taiko" data-v-5ffc0e64> osu!taiko </option><option value="catch" data-v-5ffc0e64> osu!catch </option><option value="mania" data-v-5ffc0e64> osu!mania </option>',5)];v(),oe.render=function(e,t,s,n,o,i){return l(),d("div",null,[ie,g(c("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newMode=t),class:"form-select form-select w-50 d-inline",onChange:t[1]||(t[1]=t=>e.updateMode(t))},re,544),[[C,e.newMode]])])},oe.__scopeId="data-v-5ffc0e64";var ae=r({name:"AnonymizationGuide",props:{contestId:{type:String,required:!0}},data:()=>({csvOutput:null,errors:[]}),methods:{async applyCsvOutput(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/syncAnonymousNames`,{csv:this.csvOutput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated submission names",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:t.submissions}),t.errors.length&&(this.errors=t.errors))}}});const le={class:"mx-4"},de=h(" Submissions must be anonymized locally, then transferred to Mappers' Guild. You have 3 options: "),ce=c("ol",null,[c("li",null,[h("Follow instructions on the "),c("a",{href:"https://github.com/pishifat/contest-anonymization#readme",target:"_blank"},"contest anonymization GitHub repository"),h(".")]),c("li",null,[h("Ask "),c("a",{href:"https://osu.ppy.sh/users/3178418",target:"_blank"},"pishifat"),h(" to do option 1 for you.")]),c("li",null,"Manually anonymize entries (please don't waste your time with this).")],-1),ue=c("span",{class:"small text-secondary"},[h("If you succeed with step 1, paste your "),c("code",null,".csv"),h(" output here as raw text to replace anonymized names:")],-1),me={class:"row"},pe={class:"col-sm-10"},he={class:"col-sm-2"},ge={key:0,class:"small text-warning"},fe=h(" The following submissions could not be processed and will need to be renamed manually: ");ae.render=function(e,t,s,n,o,i){return l(),d("div",le,[de,ce,c("div",null,[ue,c("div",me,[c("div",pe,[g(c("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.csvOutput=t),class:"form-control form-inline",rows:"1"},null,512),[[f,e.csvOutput]])]),c("div",he,[c("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:t[1]||(t[1]=t=>e.applyCsvOutput())}," Save ")])]),e.errors.length?(l(),d("div",ge,[fe,c("ul",null,[(l(!0),d(I,null,k(e.errors,(e=>(l(),d("li",{key:e},u(e),1)))),128))])])):w("",!0)])])};var ye=r({name:"Urls",props:{contestId:{type:String,required:!0},url:{type:String,default:null},osuContestListingUrl:{type:String,default:null},resultsUrl:{type:String,default:null}},data(){return{newUrl:this.url,newOsuContestListingUrl:this.osuContestListingUrl,newResultsUrl:this.resultsUrl}},watch:{contestId(){this.newUrl=this.url,this.newOsuContestListingUrl=this.osuContestListingUrl,this.newResultsUrl=this.resultsUrl}},methods:{async updateUrl(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateUrl`,{url:this.newUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest url",type:"info"}),this.$store.commit("updateUrl",{contestId:this.contestId,url:t}))},async updateOsuContestListingUrl(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateOsuContestListingUrl`,{url:this.newOsuContestListingUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated osu! contest listing url",type:"info"}),this.$store.commit("updateOsuContestListingUrl",{contestId:this.contestId,osuContestListingUrl:t}))},async updateResultsUrl(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateResultsUrl`,{url:this.newResultsUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated results url",type:"info"}),this.$store.commit("updateResultsUrl",{contestId:this.contestId,resultsUrl:t}))}}});const be={class:"row"},ve={class:"col-sm-6"},Ce={class:"form-inline w-100"},we=h(" Contest details URL: "),Se={class:"col-sm-6"},Ie={class:"form-inline w-100"},ke=h(" osu! contest listing URL: "),$e={class:"col-sm-6"},je={class:"form-inline w-100"},xe=h(" Results URL: ");ye.render=function(e,t,s,n,o,i){return l(),d("div",be,[c("div",ve,[c("div",Ce,[we,g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newUrl=t),class:"ml-1 form-control",onChange:t[1]||(t[1]=t=>e.updateUrl(t))},null,544),[[f,e.newUrl]])])]),c("div",Se,[c("div",Ie,[ke,g(c("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.newOsuContestListingUrl=t),class:"ml-1 form-control",onChange:t[3]||(t[3]=t=>e.updateOsuContestListingUrl(t))},null,544),[[f,e.newOsuContestListingUrl]])])]),c("div",$e,[c("div",je,[xe,g(c("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.newResultsUrl=t),class:"ml-1 form-control",onChange:t[5]||(t[5]=t=>e.updateResultsUrl(t))},null,544),[[f,e.newResultsUrl]])])])])};var Ue=r({name:"Description",props:{contestId:{type:String,required:!0},description:{type:String,default:null}},data(){return{newDescription:this.description}},watch:{contestId(){this.newDescription=this.description}},methods:{async updateDescription(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDescription`,{description:this.newDescription},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest description",type:"info"}),this.$store.commit("updateDescription",{contestId:this.contestId,description:t}))}}});const Me={class:"form-inline w-100 mt-2"},De=h(" Contest description: "),Je=c("small",{class:"text-secondary"},[h("Click outside the text box to save. Also, this section supports "),c("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),h("!")],-1);Ue.render=function(e,t,s,n,o,i){return l(),d("div",Me,[De,g(c("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newDescription=t),length:"4",class:"ml-1 form-control",placeholder:"click outside the box to save...",maxlength:"40000",rows:"6",onChange:t[1]||(t[1]=t=>e.updateDescription(t))},null,544),[[f,e.newDescription]]),Je])};var Ee=r({name:"SubmissionsInfo",props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null,processingDelete:!1,manualAnonEdit:null,newAnonymousName:""}),watch:{manualAnonEdit(){this.findAnonymousSubmissionName()}},methods:{findAnonymousSubmissionName(){const e=this.submissions.find((e=>e.id==this.manualAnonEdit));e&&(this.newAnonymousName=e.name)},async updateAnonymousSubmissionName(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${e}/updateAnonymousSubmissionName`,{name:this.newAnonymousName},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Updated anonymous submission name",type:"info"}),this.$store.commit("updateAnonymousSubmissionName",{contestId:this.contestId,submissionId:e,name:s}))},async deleteSubmission(e,t){this.processingDelete=!0;const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${e}/delete`,{},t);this.processingDelete=!1,this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted submission",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:e}))}}});const Te={key:0,class:"table table-sm table-responsive-lg"},Ae=c("thead",null,[c("tr",null,[c("th",null,"Creator"),c("th",null,"Anonymized name"),c("th",null,"Link"),c("th")])],-1),Ne=["onChange"],Le={key:1,class:"me-1"},qe=["onClick"],Re=[c("i",{class:"fas fa-edit"},null,-1)],Oe=["href"],_e=["onClick"],Pe=["onClick"];Ee.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[e.submissions.length?(l(),d("table",Te,[Ae,c("tbody",null,[(l(!0),d(I,null,k(e.submissions,(s=>(l(),d("tr",{key:s.id},[c("td",null,[m(r,{user:s.creator},null,8,["user"])]),c("td",{class:$(s.name?"":"text-danger")},[e.manualAnonEdit==s.id?g((l(),d("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=t=>e.newAnonymousName=t),class:"ml-1 form-control form-control-sm",onChange:t=>e.updateAnonymousSubmissionName(s.id,t)},null,40,Ne)),[[f,e.newAnonymousName]]):(l(),d("span",Le,u(s.name||"TBD"),1)),c("a",{href:"#",onClick:j((t=>e.manualAnonEdit==s.id?e.manualAnonEdit=null:e.manualAnonEdit=s.id),["prevent"])},Re,8,qe)],2),c("td",null,[c("a",{href:s.url,target:"_blank"},u(s.url),9,Oe)]),c("td",null,[e.confirmDelete!=s.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((t=>e.confirmDelete=s.id),["prevent"])}," delete ",8,_e)):(l(),d("a",{key:1,class:$(e.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:j((t=>e.deleteSubmission(s.id,t)),["prevent"])}," confirm ",10,Pe))])])))),128))])])):w("",!0)])};var Ve=r({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download}},watch:{contestId(){this.newDownload=this.download}},methods:{async updateDownload(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDownload`,{download:this.newDownload},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest submissions download link",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:t}))}}});b("data-v-3eff7a20");const ze={class:"row"},Be={class:"col-sm-6"},Fe=h(" Download: "),Ge={key:0,class:"me-2 text-secondary"},He={class:"col-sm-6 small text-secondary"},Ke=h(" This link will appear at the top of judging/screening pages for users to download beatmaps. For contest integrity, user data should be removed as explained in the anonymization guide below. "),Ye=["href"];v(),Ve.render=function(e,t,s,n,o,i){return l(),d("div",ze,[c("div",Be,[Fe,e.download?w("",!0):(l(),d("span",Ge,"No download")),g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newDownload=t),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:t[1]||(t[1]=t=>e.updateDownload(t))},null,544),[[f,e.newDownload]])]),c("div",He,[Ke,e.download?(l(),d("a",{key:0,href:e.download,target:"_blank"},"Test the link here!",8,Ye)):w("",!0)])])},Ve.__scopeId="data-v-3eff7a20";var Qe=r({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),watch:{contestId(){this.screenerInput=null,this.screenerInput=null}},methods:{async addScreener(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.screenerInput} to list (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:t}))},async removeScreener(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/remove`,{screenerId:e},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:e}))}}});const We={class:"input-group mb-2"},Xe={class:"input-group-append"},Ze=[c("i",{class:"fas fa-plus fa-xs"},null,-1)],et={key:0},tt=["onClick"],st=["onClick"],nt={key:1,class:"text-white-50 m-4"};Qe.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("div",We,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.screenerInput=t),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:t[1]||(t[1]=y((t=>e.addScreener(t)),["enter"]))},null,544),[[f,e.screenerInput,void 0,{number:!0}]]),c("div",Xe,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=j((t=>e.addScreener(t)),["prevent"]))},Ze)])]),e.screeners.length?(l(),d("ol",et,[(l(!0),d(I,null,k(e.screeners,(t=>(l(),d("li",{key:t.id},[m(r,{user:t},null,8,["user"]),e.confirmDelete!=t.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>e.confirmDelete=t.id),["prevent"])}," delete ",8,tt)):(l(),d("a",{key:1,class:"text-danger",href:"#",onClick:j((s=>e.removeScreener(t.id,s)),["prevent"])}," confirm ",8,st))])))),128))])):(l(),d("div",nt," None... "))])};var ot=r({name:"ScreeningStatus",props:{contest:{type:Object,required:!0}},methods:{findScreenerDetails(e){let t=0,s=[];for(const i of this.contest.submissions)for(const n of i.screenings)n.screener.id==e.id&&n.vote&&(t++,s.push(n.vote));const n=[1,2,3,4,5],o=[];for(const i of n)s.includes(i)||o.push(i);return{count:t,unusedVotes:o}}}});const it={class:"table table-sm table-responsive-lg small"},rt=c("thead",null,[c("tr",null,[c("th",null,"Screener"),c("th",null,"Count"),c("th",null,"Unused ratings")])],-1),at={class:"mx-1"};ot.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("table",it,[rt,c("tbody",null,[(l(!0),d(I,null,k(e.contest.screeners,(t=>(l(),d("tr",{key:t.id},[c("td",null,[m(r,{user:t},null,8,["user"])]),c("td",{class:$(e.findScreenerDetails(t).count>=5?"text-success":"text-danger")},u(e.findScreenerDetails(t).count)+"/5 ",3),c("td",null,[(l(!0),d(I,null,k(e.findScreenerDetails(t).unusedVotes,(e=>(l(),d("span",{key:e},[c("span",at,[(l(!0),d(I,null,k(e,(e=>(l(),d("i",{key:e,class:"fa-star fas text-warning small"})))),128)),h(" ("+u(e)+") ",1)])])))),128))])])))),128))])])])};var lt=r({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),watch:{contestId(){this.judgeInput=null,this.confirmDelete=null}},methods:{async addJudge(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.judgeInput} to list (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:t}))},async removeJudge(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/remove`,{judgeId:e},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:e}))}}});const dt={class:"input-group mb-2"},ct={class:"input-group-append"},ut=[c("i",{class:"fas fa-plus fa-xs"},null,-1)],mt={key:0},pt=["onClick"],ht=["onClick"],gt={key:1,class:"text-white-50 m-4"};lt.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("div",dt,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.judgeInput=t),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new judge username/osuId...",onKeyup:t[1]||(t[1]=y((t=>e.addJudge(t)),["enter"]))},null,544),[[f,e.judgeInput,void 0,{number:!0}]]),c("div",ct,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=j((t=>e.addJudge(t)),["prevent"]))},ut)])]),e.judges.length?(l(),d("ul",mt,[(l(!0),d(I,null,k(e.judges,(t=>(l(),d("li",{key:t.id},[m(r,{user:t},null,8,["user"]),e.confirmDelete!=t.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>e.confirmDelete=t.id),["prevent"])}," delete ",8,pt)):(l(),d("a",{key:1,class:"text-danger",href:"#",onClick:j((s=>e.removeJudge(t.id,s)),["prevent"])}," confirm ",8,ht))])))),128))])):(l(),d("div",gt," None... "))])};var ft=r({name:"MarkdownUserList",components:{CopyPaste:E},props:{users:{type:Array,default:()=>[]}}});b("data-v-0f02c955");const yt=h(" Comma separation: "),bt=c("br",null,null,-1),vt=c("br",null,null,-1),Ct=c("br",null,null,-1),wt=h(" Newline separation: "),St=c("br",null,null,-1),It=c("br",null,null,-1);v(),ft.render=function(e,t,s,n,o,i){const r=a("copy-paste");return l(),x(r,{class:"tiny"},{default:p((()=>[yt,bt,(l(!0),d(I,null,k(e.users,((t,s)=>(l(),d("span",{key:t.id}," ["+u(t.username)+"](https://osu.ppy.sh/users/"+u(t.osuId)+")"+u(s===e.users.length-2?", and ":s===e.users.length-1?"":", "),1)))),128)),vt,Ct,wt,St,(l(!0),d(I,null,k(e.users,(e=>(l(),d("span",{key:e.id},[h(" ["+u(e.username)+"](https://osu.ppy.sh/users/"+u(e.osuId)+")",1),It])))),128))])),_:1})},ft.__scopeId="data-v-0f02c955";var kt=r({name:"ScreeningDetail",props:{screenings:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},methods:{findComment(e){const t=this.screenings.find((t=>t.screener.id==e));return t?t.comment:"No comment"},findVote(e){const t=this.screenings.find((t=>t.screener.id==e));return t?t.vote:0}}});const $t={class:"ms-4 small"},jt={class:"ms-4 small text-secondary"};kt.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",$t,[(l(!0),d(I,null,k(e.screeners,(t=>(l(),d("div",{key:t.id},[m(r,{user:t},null,8,["user"]),(l(!0),d(I,null,k(e.findVote(t.id),(e=>(l(),d("i",{key:e,class:"fa-star fas mx-1 text-warning small"})))),128)),c("div",jt,u(e.findComment(t.id)),1)])))),128))])};var xt=r({name:"ScreeningResults",components:{ScreeningDetail:kt},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const e=JSON.parse(JSON.stringify(this.submissions));for(let t=0;t<e.length;t++){const s=e[t].screenings.reduce(((e,t)=>t.vote?e+t.vote:e),0);e[t].total=s}return e.sort(((e,t)=>e.total>t.total?-1:t.total>e.total?1:0)),e}}});b("data-v-0aa6204d");const Ut={class:"d-flex justify-content-between"},Mt=["href"],Dt=c("i",{class:"fa-star fas small"},null,-1),Jt=h(") "),Et=c("i",{class:"fas fa-angle-down"},null,-1),Tt=["id"];v(),xt.render=function(e,t,s,n,o,i){const r=a("screening-detail");return l(),d("div",null,[c("ul",null,[(l(!0),d(I,null,k(e.sortedSubmissions,(t=>(l(),d("li",{key:t.id},[c("div",Ut,[c("a",{class:$(t.total>=e.judgingThreshold?"pass-threshold":""),"data-bs-toggle":"collapse",href:`#collapse-${t.id}`},[h(u(t.creator.username)+" ("+u(t.total)+" ",1),Dt,Jt,Et],10,Mt)]),c("div",{id:`collapse-${t.id}`,class:"collapse"},[c("div",null,[m(r,{screenings:t.screenings,screeners:e.screeners},null,8,["screenings","screeners"])])],8,Tt)])))),128))])])},xt.__scopeId="data-v-0aa6204d";var At=r({name:"JudgingThreshold",props:{contestId:{type:String,required:!0},judgingThreshold:{type:Number,default:0}},data(){return{newJudgingThreshold:this.judgingThreshold}},watch:{contestId(){this.newJudgingThreshold=this.judgingThreshold}},methods:{async updateJudgingThreshold(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:`Updated judging threshold to ${t}`,type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:t}))}}});const Nt={class:"row"},Lt={class:"input-group col-sm-4"},qt={class:"input-group-append"},Rt=[h(" save "),c("i",{class:"fa-star fas small"},null,-1)];At.render=function(e,t,s,n,o,i){return l(),d("div",Nt,[c("div",Lt,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newJudgingThreshold=t),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"judging threshold",onKeyup:t[1]||(t[1]=y((t=>e.updateJudgingThreshold(t)),["enter"]))},null,544),[[f,e.newJudgingThreshold,void 0,{number:!0}]]),c("div",qt,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=j((t=>e.updateJudgingThreshold(t)),["prevent"]))},Rt)])])])};var Ot=r({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({nameInput:null,maxScoreInput:null,processingDelete:!1,confirmDelete:null}),computed:{scoredCriteria(){return this.criterias.filter((e=>"comments"!==e.name))},commentsEnabled(){return this.criterias.some((e=>"comments"==e.name))}},watch:{contestId(){this.nameInput=null,this.maxScoreInput=null,this.confirmDelete=null}},methods:{async addCriteria(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/addCriteria`,{name:this.nameInput,maxScore:this.maxScoreInput},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Added criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))},async deleteCriteria(e,t){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/deleteCriteria`,{criteriaId:e},t);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:s}))},async toggleComments(){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleComments`,{});this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Toggled comments",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:e}))}}});const _t={class:"input-group w-75 mb-2"},Pt={class:"input-group-append"},Vt=[h(" Add criteria "),c("i",{class:"fas fa-plus fa-xs"},null,-1)],zt={class:"ms-2 mb-2"},Bt=[h(" See judging criteria "),c("i",{class:"fas fa-angle-down"},null,-1)],Ft={id:"judgingCriteria",class:"collapse mx-2"},Gt={key:0,class:"table table-sm table-responsive-lg"},Ht=c("thead",null,[c("tr",null,[c("th",null,"Criteria"),c("th",null,"Max score"),c("th",null,"Delete")])],-1),Kt={class:"text-capitalize"},Yt=["onClick"],Qt=["onClick"],Wt={key:1};Ot.render=function(e,t,s,n,o,i){return l(),d("div",null,[c("div",_t,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.nameInput=t),type:"text",class:"form-control",placeholder:"criteria name..."},null,512),[[f,e.nameInput]]),g(c("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.maxScoreInput=t),type:"number",class:"form-control",placeholder:"total points..."},null,512),[[f,e.maxScoreInput]]),c("div",Pt,[c("button",{class:"btn btn-primary",href:"#",onClick:t[2]||(t[2]=t=>e.addCriteria(t))},Vt)])]),c("div",zt,[c("a",{href:"#judgingCriteria","data-bs-toggle":"collapse",onClick:t[3]||(t[3]=j((()=>{}),["prevent"]))},Bt),c("div",Ft,[e.criterias.length?(l(),d("table",Gt,[Ht,c("tbody",null,[(l(!0),d(I,null,k(e.scoredCriteria,(t=>(l(),d("tr",{key:t.id},[c("td",Kt,u(t.name),1),c("td",null,u(t.maxScore),1),c("td",null,[e.confirmDelete!=t.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>e.confirmDelete=t.id),["prevent"])}," delete ",8,Yt)):(l(),d("a",{key:1,class:$(e.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:j((s=>e.deleteCriteria(t.id,s)),["prevent"])}," confirm ",10,Qt))])])))),128)),c("tr",null,[c("td",{class:$(e.commentsEnabled?"":"text-secondary")}," Comments "+u(e.commentsEnabled?"":"(disabled)"),3),c("td",{class:$(e.commentsEnabled?"":"text-secondary")}," N/A ",2),c("td",null,[c("a",{href:"#",class:"text-danger",onClick:t[4]||(t[4]=j((t=>e.toggleComments()),["prevent"]))},u(e.commentsEnabled?"disable":"enable"),1)])])])])):(l(),d("div",Wt," No criteria yet... "))])])])};var Xt=r({name:"JudgingLeaderboard",props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data:()=>({selectedScore:null,displayMode:"criterias",sortDesc:!1}),computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((e=>{var t;return e.creator.id==(null==(t=this.selectedScore)?void 0:t.creator.id)}))},scoredCriteria(){return this.contest.criterias.filter((e=>"comments"!==e.name))},judges(){return this.contest.judges}},methods:{getCriteriaScore(e,t){var s;return(null==(s=e.criteriaSum.find((e=>e.criteriaId===t)))?void 0:s.sum)||0},getJudgeScore(e,t,s=!1){const n=e.judgingSum.find((e=>e.judgeId===t)),o=(null==n?void 0:n.standardized)||0;return s?`${(null==n?void 0:n.sum)||0} (${o.toFixed(3)})`:(null==n?void 0:n.sum)||0},getJudgeAvg(e){var t;return(null==(t=this.judgesCorrel.find((t=>t.id===e)))?void 0:t.rawAvg.toFixed(4))||0},getJudgeSd(e){var t;return(null==(t=this.judgesCorrel.find((t=>t.id===e)))?void 0:t.sd.toFixed(4))||0},getJudgeCorrel(e){var t;return((null==(t=this.judgesCorrel.find((t=>t.id===e)))?void 0:t.correl)||0).toFixed(4)},getFinalScore:e=>isNaN(e)?"0":e.toFixed(4),sortByCriteria(e){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:e,sortDesc:this.sortDesc})},sortByJudge(e){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:e,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});const Zt={class:"row"},es={class:"col-sm"},ts=h(" Score display: "),ss=h(" | "),ns=h(" | "),os={class:"row"},is={class:"col-sm"},rs={class:"table table-sm small table-responsive-lg"},as=c("th",null,"#",-1),ls=c("th",null,"User",-1),ds=["onClick"],cs={class:"cursor-default"},us=c("td",null,null,-1),ms=c("td",null,"AVG",-1),ps=c("td",null,null,-1),hs=c("td",null,null,-1),gs={class:"cursor-default"},fs=c("td",null,null,-1),ys=c("td",null,"SD",-1),bs=c("td",null,null,-1),vs=c("td",null,null,-1),Cs={class:"cursor-default"},ws=c("td",null,null,-1),Ss=c("td",null,"COR",-1),Is=c("td",null,null,-1),ks=c("td",null,null,-1);Xt.render=function(e,t,s,n,o,i){const r=a("user-link");return l(),d("div",null,[c("div",Zt,[c("div",es,[ts,c("a",{href:"#",class:$("criterias"===e.displayMode?"border-bottom border-secondary":""),onClick:t[0]||(t[0]=j((t=>e.displayMode="criterias"),["prevent"]))}," Criteria ",2),ss,c("a",{href:"#",class:$("judges"===e.displayMode?"border-bottom border-secondary":""),onClick:t[1]||(t[1]=j((t=>e.displayMode="judges"),["prevent"]))}," Judge ",2),ns,c("a",{href:"#",class:$("detail"===e.displayMode?"border-bottom border-secondary":""),onClick:t[2]||(t[2]=j((t=>e.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),c("div",os,[c("div",is,[c("table",rs,[c("thead",null,[c("tr",null,[as,ls,"criterias"===e.displayMode?(l(!0),d(I,{key:0},k(e.scoredCriteria,(e=>(l(),d("th",{key:e.id},u(e.name),1)))),128)):(l(!0),d(I,{key:1},k(e.judges,(e=>(l(),d("th",{key:e.id},u(e.username),1)))),128)),c("th",null,[c("a",{href:"#",onClick:t[3]||(t[3]=j(((...t)=>e.sortByRawScore&&e.sortByRawScore(...t)),["prevent"]))}," Final Score (raw) ")]),c("th",null,[c("a",{href:"#",onClick:t[4]||(t[4]=j(((...t)=>e.sortByStdScore&&e.sortByStdScore(...t)),["prevent"]))}," Final Score (standardized) ")])])]),c("tbody",null,[(l(!0),d(I,null,k(e.usersScores,((t,s)=>(l(),d("tr",{key:s,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:s=>e.selectedScore=t},[c("td",null,u(s+1),1),c("td",null,[m(r,{user:t.creator},null,8,["user"])]),"criterias"===e.displayMode?(l(!0),d(I,{key:0},k(e.scoredCriteria,(s=>(l(),d("td",{key:s.id},u(e.getCriteriaScore(t,s.id)),1)))),128)):(l(!0),d(I,{key:1},k(e.judges,(s=>(l(),d("td",{key:s.id},u(e.getJudgeScore(t,s.id,"detail"===e.displayMode)),1)))),128)),c("td",null,u(t.rawFinalScore),1),c("td",null,u(e.getFinalScore(t.standardizedFinalScore)),1)],8,ds)))),128)),"detail"===e.displayMode?(l(),d(I,{key:0},[c("tr",cs,[us,ms,(l(!0),d(I,null,k(e.judges,(t=>(l(),d("td",{key:t.id},u(e.getJudgeAvg(t.id)),1)))),128)),ps,hs]),c("tr",gs,[fs,ys,(l(!0),d(I,null,k(e.judges,(t=>(l(),d("td",{key:t.id},u(e.getJudgeSd(t.id)),1)))),128)),bs,vs]),c("tr",Cs,[ws,Ss,(l(!0),d(I,null,k(e.judges,(t=>(l(),d("td",{key:t.id},u(e.getJudgeCorrel(t.id)),1)))),128)),Is,ks])],64)):w("",!0)])])])])])};var $s=r({name:"JudgingDetail",components:{ModalDialog:T},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(e){const t=this.commentsExpanded.findIndex((t=>t===e));-1!==t?this.commentsExpanded.splice(t,1):this.commentsExpanded.push(e)},getCollapseClass(e){return this.commentsExpanded.includes(e)?"fa-chevron-down":"fa-chevron-right"}}});const js={class:"container"},xs=["href","onClick"],Us={key:1,class:"small text-capitalize ms-3"},Ms=["id"],Ds={class:"small text-white-50",style:{"white-space":"pre-line"}},Js={key:0};$s.render=function(e,t,s,n,o,i){const r=a("user-link"),g=a("modal-dialog");return l(),x(g,{id:"detailModal",loaded:Boolean(e.submission)},{header:p((()=>[h(u(e.submission.creator.username)+" ("+u(e.submission.name)+") ",1)])),default:p((()=>[c("div",js,[(l(!0),d(I,null,k(e.submission.judgings,((t,s)=>(l(),d("div",{key:t.id},[m(r,{user:t.judge},null,8,["user"]),(l(!0),d(I,null,k(t.judgingScores,(t=>(l(),d("div",{key:t.id,class:"my-1"},["comments"==t.criteria.name?(l(),d("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${t.id}`,onClick:s=>e.showComment(t.id)},[c("i",{class:$(["small fas me-2",e.getCollapseClass(t.id)])},null,2),h(" "+u(t.criteria.name),1)],8,xs)):(l(),d("span",Us,u(t.criteria.name)+" ("+u(t.score)+") ",1)),c("p",{id:`judgingToCriteria${t.id}`,class:"text-light ms-4 collapse"},[c("span",Ds,u(t.comment),1)],8,Ms)])))),128)),s<e.submission.judgings.length-1?(l(),d("hr",Js)):w("",!0)])))),128))])])),_:1},8,["loaded"])};var Es=r({name:"JudgeStatuses",components:{JudgingDetail:$s},props:{contest:{type:Object,required:!0}},data:()=>({selected:null}),computed:{judgeCount(){var e;return(null==(e=this.contest)?void 0:e.judges.length)||0}},methods:{getJudgesInvolvedCount:e=>e.judgings.map((e=>e.judge)).length,getMissingJudges(e){const t=e.judgings.map((e=>e.judge.id)),s=[];for(const n of this.contest.judges)if(t.includes(n.id)){const t=e.judgings.find((e=>e.judge.id===n.id));t&&t.judgingScores.length!==this.contest.criterias.length&&s.push(n)}else s.push(n);return s.map((e=>e.username)).join(", ")},getSubmissionIdByCreatorId(e){var t;return(null==(t=this.contest)?void 0:t.submissions.find((t=>t.creator.id===e))).id}}});b("data-v-a36d03c2");const Ts={class:"table table-sm table-responsive-lg small"},As=c("thead",null,[c("tr",null,[c("th",null,"Submission creator"),c("th",null,"Count"),c("th",null,"Incomplete judges")])],-1),Ns=["onClick"];v(),Es.render=function(e,t,s,n,o,i){const r=a("user-link"),p=a("judging-detail");return l(),d("div",null,[c("table",Ts,[As,c("tbody",null,[(l(!0),d(I,null,k(e.contest.submissions,(t=>(l(),d("tr",{key:t.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",class:"modalable",onClick:s=>e.selected=t},[c("td",null,[m(r,{user:t.creator},null,8,["user"])]),c("td",{class:$(e.getJudgesInvolvedCount(t)>=e.judgeCount?"text-success":"text-danger")},u(e.getJudgesInvolvedCount(t))+"/"+u(e.judgeCount),3),c("td",null,u(e.getMissingJudges(t)),1)],8,Ns)))),128))])]),m(p,{id:"detailModalAdmin",submission:e.selected},null,8,["submission"])])},Es.__scopeId="data-v-a36d03c2";var Ls=r({name:"MarkdownJudgingLeaderboard",components:{CopyPaste:E},props:{usersScores:{type:Array,required:!0},contest:{type:Object,required:!0},judgeCount:{type:Number,required:!0}},computed:{scoredCriteria(){return this.contest.criterias.filter((e=>"comments"!==e.name))}},methods:{getSubmissionIdByCreatorId(e){var t;return(null==(t=this.contest)?void 0:t.submissions.find((t=>t.creator.id===e))).id},getCriteriaSumbyName(e,t){const s=t.find((t=>t.name===e));return(null==s?void 0:s.sum)||NaN}}});b("data-v-4fcd74b7");const qs=c("div",null," | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | ",-1);v(),Ls.render=function(e,t,s,n,o,i){const r=a("copy-paste");return l(),x(r,{class:"tiny"},{default:p((()=>[c("div",null," | Rank | Beatmap | Judging | Musical representation ("+u(10*e.judgeCount)+") | Creativity ("+u(10*e.judgeCount)+") | Gameplay ("+u(10*e.judgeCount)+") | Limitation ("+u(5*e.judgeCount)+") | Total (standardized/raw) | ",1),qs,(l(!0),d(I,null,k(e.usersScores,((t,s)=>(l(),d("div",{key:s},[h(" | \\#"+u(s+1)+" | [TITLE](LINK) by ["+u(t.creator.username)+"](https://osu.ppy.sh/users/"+u(t.creator.osuId)+") | [details](https://mappersguild.com/contests/results?submission="+u(e.getSubmissionIdByCreatorId(t.creator.id))+") ",1),(l(!0),d(I,null,k(e.scoredCriteria,(s=>(l(),d("span",{key:s.id},"| "+u(e.getCriteriaSumbyName(s.name,t.criteriaSum)+" "),1)))),128)),h(" | **"+u(Math.round(100*t.standardizedFinalScore)/100)+"** ("+u(t.rawFinalScore)+") | ",1)])))),128))])),_:1})},Ls.__scopeId="data-v-4fcd74b7";var Rs=r({name:"JudgingResults",components:{JudgingLeaderboard:Xt,MarkdownJudgingLeaderboard:Ls,JudgeStatuses:Es},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var e;return(null==(e=this.contest)?void 0:e.judges.length)||0}},watch:{async contestId(){await this.getJudgingResults()}},async created(){await this.getJudgingResults()},methods:{async getJudgingResults(){const e=await this.$http.executeGet(`/contests/listing/${this.contestId}/judgingResults`);this.$http.isError(e)||(this.contest=e.contest,this.usersScores=e.usersScores,this.judgesCorrel=e.judgesCorrel)},getJudgesInvolvedCount:e=>e.judgings.map((e=>e.judge)).length,getJudgesInvolved:e=>e.judgings.map((e=>e.judge.username)).join(", "),getSubmissionIdByCreatorId(e){var t;return(null==(t=this.contest)?void 0:t.submissions.find((t=>t.creator.id===e))).id}}});const Os={key:0},_s={class:"ms-2 mb-2"},Ps=[h(" See judging status per submission "),c("i",{class:"fas fa-angle-down"},null,-1)],Vs={class:"ms-2 mb-2"},zs=[h(" See judging leaderboard "),c("i",{class:"fas fa-angle-down"},null,-1)],Bs={class:"ms-2 mb-2"},Fs=[h(" See markdown judging leaderboard "),c("i",{class:"fas fa-angle-down"},null,-1)];Rs.render=function(e,t,s,n,o,i){const r=a("judge-statuses"),u=a("judging-leaderboard"),p=a("markdown-judging-leaderboard");return e.contest?(l(),d("div",Os,[c("div",_s,[c("a",{href:"#judgeStatuses","data-bs-toggle":"collapse",onClick:t[0]||(t[0]=j((()=>{}),["prevent"]))},Ps),m(r,{id:"judgeStatuses",class:"collapse mx-2",contest:e.contest},null,8,["contest"])]),c("div",Vs,[c("a",{href:"#judgingLeaderboard","data-bs-toggle":"collapse",onClick:t[1]||(t[1]=j((()=>{}),["prevent"]))},zs),m(u,{id:"judgingLeaderboard",class:"collapse mx-2","contest-id":e.contest.id,contest:e.contest,"users-scores":e.usersScores,"judges-correl":e.judgesCorrel},null,8,["contest-id","contest","users-scores","judges-correl"])]),c("div",Bs,[c("a",{href:"#markdownJudgingLeaderboard","data-bs-toggle":"collapse",onClick:t[2]||(t[2]=j((()=>{}),["prevent"]))},Fs),m(p,{id:"markdownJudgingLeaderboard",class:"collapse","users-scores":e.usersScores,contest:e.contest,"judge-count":e.judgeCount},null,8,["users-scores","contest","judge-count"])])])):w("",!0)};var Gs=r({name:"ContestInfo",components:{ContestHeader:A,DateInfo:O,Name:W,AnonymizationGuide:ae,ModeInfo:oe,StatusInfo:ee,SubmissionsInfo:Ee,DownloadInfo:Ve,Urls:ye,Description:Ue,ScreenersInfo:Qe,JudgesInfo:lt,MarkdownUserList:ft,ScreeningResults:xt,ScreeningStatus:ot,JudgingThreshold:At,CriteriaSelection:Ot,JudgingResults:Rs},props:{contest:{type:Object,required:!0}},data(){return{newContestStart:this.contest.contestStart,showContestStartDateInput:!1,screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}}});const Hs=c("h5",null,"General",-1),Ks=c("hr",null,null,-1),Ys=c("h5",null," Submissions ",-1),Qs={class:"ms-2 mb-2"},Ws=c("i",{class:"fas fa-angle-down"},null,-1),Xs={class:"ms-2 mb-2"},Zs=[h(" See submission anonymization guide "),c("i",{class:"fas fa-angle-down"},null,-1)],en=c("hr",null,null,-1),tn=c("h4",{class:"mb-4"}," Screening ",-1),sn=c("h5",null," Screeners ",-1),nn={class:"ms-2 mb-2"},on=c("i",{class:"fas fa-angle-down"},null,-1),rn={id:"screeners",class:"row collapse mb-2"},an=c("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their screening progress. ",-1),ln=c("div",null,'To begin screening, send this link to the users above and ensure your contest\'s status is set to "Screening"!',-1),dn=c("hr",null,null,-1),cn=c("h5",null," Screening Results ",-1),un={class:"ms-2 mb-2"},mn=[h(" See screening status per screener "),c("i",{class:"fas fa-angle-down"},null,-1)],pn={class:"row mb-2"},hn=c("div",{class:"col-sm-8 small text-secondary"},[h(" Submissions with this "),c("i",{class:"fa-star fas text-warning small"}),h(' score or above in "screening results" will be available to judges. If your contest skips the screening process, set this to "0". ')],-1),gn={class:"ms-2 mb-2"},fn=[h(" See screening results "),c("i",{class:"fas fa-angle-down"},null,-1)],yn=c("hr",null,null,-1),bn=c("h4",{class:"mb-4"}," Judging ",-1),vn=c("h5",null," Judges ",-1),Cn={class:"ms-2 mb-2"},wn=c("i",{class:"fas fa-angle-down"},null,-1),Sn={id:"judges",class:"row collapse mb-2"},In=c("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their judging progress. ",-1),kn=c("div",null,'To begin judging, send this link to the users above and ensure your contest\'s status is set to "Judging"!',-1),$n=c("hr",null,null,-1),jn=c("h5",null," Judging Criteria ",-1),xn=c("hr",null,null,-1),Un=c("h5",null," Judging Results ",-1);Gs.render=function(e,t,s,n,o,i){const r=a("contest-header"),p=a("name"),g=a("status-info"),f=a("mode-info"),y=a("date-info"),b=a("urls"),v=a("description"),C=a("submissions-info"),w=a("download-info"),S=a("anonymization-guide"),I=a("screeners-info"),k=a("markdown-user-list"),$=a("screening-status"),x=a("judging-threshold"),U=a("screening-results"),M=a("judges-info"),D=a("criteria-selection"),J=a("judging-results");return l(),d("div",null,[m(r,{name:e.contest.name,url:e.contest.url,creator:e.contest.creator},null,8,["name","url","creator"]),Hs,c("div",null,[m(p,{class:"mb-2","contest-id":e.contest.id,name:e.contest.name},null,8,["contest-id","name"]),m(g,{class:"mb-2","contest-id":e.contest.id,status:e.contest.status,"is-approved":e.contest.isApproved},null,8,["contest-id","status","is-approved"]),m(f,{class:"mb-2","contest-id":e.contest.id,mode:e.contest.mode},null,8,["contest-id","mode"]),m(y,{class:"mb-2","contest-id":e.contest.id,"contest-start":e.contest.contestStart?e.contest.contestStart.slice(0,10):null,"contest-end":e.contest.contestEnd?e.contest.contestEnd.slice(0,10):null},null,8,["contest-id","contest-start","contest-end"]),m(b,{"contest-id":e.contest.id,url:e.contest.url||null,"osu-contest-listing-url":e.contest.osuContestListingUrl||null,"results-url":e.contest.resultsUrl||null},null,8,["contest-id","url","osu-contest-listing-url","results-url"]),m(v,{"contest-id":e.contest.id,description:e.contest.description},null,8,["contest-id","description"]),Ks,c("div",null,[Ys,c("div",Qs,[c("a",{href:"#submissions","data-bs-toggle":"collapse",onClick:t[0]||(t[0]=j((()=>{}),["prevent"]))},[h(" See all submissions ("+u(e.contest.submissions.length)+") ",1),Ws])]),m(C,{id:"submissions",class:"collapse","contest-id":e.contest.id,submissions:e.contest.submissions},null,8,["contest-id","submissions"]),m(w,{"contest-id":e.contest.id,download:e.contest.download},null,8,["contest-id","download"]),c("div",Xs,[c("a",{href:"#anonymizationGuide","data-bs-toggle":"collapse",onClick:t[1]||(t[1]=j((()=>{}),["prevent"]))},Zs)]),m(S,{id:"anonymizationGuide",class:"collapse","contest-id":e.contest.id},null,8,["contest-id"]),en,tn,sn,c("div",nn,[c("a",{href:"#screeners","data-bs-toggle":"collapse",onClick:t[2]||(t[2]=j((()=>{}),["prevent"]))},[h(" See all screeners ("+u(e.contest.screeners.length)+") ",1),on])]),c("div",rn,[m(I,{class:"col-sm-4","contest-id":e.contest.id,screeners:e.contest.screeners},null,8,["contest-id","screeners"]),m(k,{class:"col-sm-7",users:e.contest.screeners},null,8,["users"]),an]),ln,c("code",null,"https://mappersguild.com/contests/screening?contest="+u(e.contest.id),1),dn,cn,c("div",un,[c("a",{href:"#screeningStatus","data-bs-toggle":"collapse",onClick:t[3]||(t[3]=j((()=>{}),["prevent"]))},mn)]),m($,{id:"screeningStatus",class:"collapse mx-2",contest:e.contest},null,8,["contest"]),c("div",pn,[m(x,{class:"col-sm-4","contest-id":e.contest.id,"judging-threshold":e.contest.judgingThreshold},null,8,["contest-id","judging-threshold"]),hn]),c("div",gn,[c("a",{href:"#screeningResults","data-bs-toggle":"collapse",onClick:t[4]||(t[4]=j((()=>{}),["prevent"]))},fn)]),m(U,{id:"screeningResults",class:"collapse","contest-id":e.contest.id,"contest-name":e.contest.name,submissions:e.contest.submissions,"judging-threshold":e.contest.judgingThreshold,screeners:e.contest.screeners},null,8,["contest-id","contest-name","submissions","judging-threshold","screeners"]),yn,bn,vn,c("div",Cn,[c("a",{href:"#judges","data-bs-toggle":"collapse",onClick:t[5]||(t[5]=j((()=>{}),["prevent"]))},[h(" See all judges ("+u(e.contest.judges.length)+") ",1),wn])]),c("div",Sn,[m(M,{class:"col-sm-4","contest-id":e.contest.id,judges:e.contest.judges},null,8,["contest-id","judges"]),m(k,{class:"col-sm-7",users:e.contest.judges},null,8,["users"]),In]),kn,c("code",null,"https://mappersguild.com/contests/judging?contest="+u(e.contest.id),1),$n,jn,m(D,{"contest-id":e.contest.id,criterias:e.contest.criterias},null,8,["contest-id","criterias"]),xn,Un,m(J,{"contest-id":e.contest.id},null,8,["contest-id"])])])])};var Mn=r({name:"MapSubmissionForm",props:{contestId:{type:String,required:!0}},data(){return{newSubmissionUrl:this.ok}},computed:i(i({},U(["loggedInUser"])),M(["userSubmission"])),watch:{contestId(){this.newSubmissionUrl=this.userSubmission?this.userSubmission.url:""}},methods:{async createSubmission(e){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/createSubmission`,{submissionUrl:this.newSubmissionUrl},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Submitted!",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:t}))}}});b("data-v-f0e10694");const Dn={class:"row"},Jn={class:"col-sm-12 mb-2"},En=h(" Current submission: "),Tn={key:0,class:"me-2 text-secondary"},An={key:1},Nn=["href"],Ln={class:"small text-secondary ms-1"},qn=h("(last updated "),Rn=h(")"),On={class:"col-sm-8"},_n={class:"col-sm-4"},Pn=c("div",{class:"small text-secondary"}," Upload your beatmap to a file sharing service and provide a link here! For various reasons, this website does not host beatmap uploads. ",-1);v(),Mn.render=function(e,t,s,n,o,i){return l(),d("div",Dn,[c("div",Jn,[En,e.userSubmission?e.userSubmission&&e.userSubmission.url?(l(),d("span",An,[c("a",{href:e.userSubmission.url,target:"_blank",class:"small"},u(e.userSubmission.url),9,Nn),c("span",Ln,[qn,c("code",null,u(new Date(e.userSubmission.updatedAt).toString().slice(4,33)),1),Rn])])):w("",!0):(l(),d("span",Tn,"No submission yet!"))]),c("div",On,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newSubmissionUrl=t),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link..."},null,512),[[f,e.newSubmissionUrl]])]),c("div",_n,[c("button",{class:"btn btn-sm btn-outline-info w-100",onClick:t[1]||(t[1]=t=>e.createSubmission(t))}," Submit ")]),Pn])},Mn.__scopeId="data-v-f0e10694";var Vn=r({name:"LimitedContestInfo",components:{ContestHeader:A,MapSubmissionForm:Mn},props:{contest:{type:Object,required:!0}}});const zn=c("h5",null,"General",-1),Bn={key:0},Fn=["innerHTML"],Gn={key:1},Hn=h(" This contest is currently in the "),Kn=h(" phase. "),Yn={key:2},Qn=["href"],Wn=c("hr",null,null,-1),Xn={key:3},Zn=c("h5",null,"Submission",-1),eo={key:0},to={key:0},so={key:1},no=h(" Maps can be submitted until "),oo={key:1},io=h(" This contest is being hosted on "),ro=c("a",{href:"https://osu.ppy.sh/community/contests",target:"_blank"},"osu!'s contest listing",-1),ao=h(". Submit your beatmap on the "),lo=["href"],co=h("! "),uo={key:4},mo=c("h5",null,"Results",-1),po=["href"],ho=["href"];Vn.render=function(e,t,s,n,o,i){const r=a("contest-header"),p=a("map-submission-form");return l(),d("div",null,[m(r,{name:e.contest.name,url:e.contest.url,creator:e.contest.creator},null,8,["name","url","creator"]),zn,e.contest.description?(l(),d("div",Bn,[c("div",{class:"small mt-2 bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:e.$md.render(e.contest.description.trim())},null,8,Fn)])):w("",!0),"complete"!==e.contest.status?(l(),d("div",Gn,[Hn,c("b",null,u(e.contest.status),1),Kn])):w("",!0),e.contest.url?(l(),d("div",Yn,[c("a",{href:e.contest.url,target:"_blank"},"Read more about the contest here!",8,Qn)])):w("",!0),Wn,"complete"!==e.contest.status?(l(),d("div",Xn,[Zn,e.contest.osuContestListingUrl?(l(),d("div",oo,[io,ro,ao,c("a",{href:e.contest.osuContestListingUrl,target:"_blank"},"official contest page",8,lo),co])):(l(),d("div",eo,[new Date(e.contest.contestEnd)<new Date?(l(),d("div",to," This contest is no longer accepting new submissions. ")):(l(),d("div",so,[no,c("code",null,u(new Date(e.contest.contestEnd)),1),m(p,{class:"mt-2","contest-id":e.contest.id},null,8,["contest-id"])]))]))])):(l(),d("div",uo,[mo,c("div",null,[c("a",{href:e.contest.resultsUrl,target:"_blank"},"View contest results here!",8,po)]),c("div",null,[c("a",{href:"/contests/results?contest="+e.contest.id,target:"_blank"},"View Mappers' Guild judging scores here!",8,ho)])]))])};var go=r({name:"AddContest",data:()=>({contestName:""}),methods:{async addContest(e){const t=await this.$http.executePost("/contests/listing/create",{name:this.contestName},e);this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",t))}}});const fo={class:"container card card-body py-3 mb-2"};go.render=function(e,t,s,n,o,i){return l(),d("div",fo,[g(c("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.contestName=t),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[f,e.contestName,void 0,{trim:!0}]]),c("button",{class:"btn w-100 btn-info",type:"button",onClick:t[1]||(t[1]=t=>e.addContest(t))}," Add new contest ")])};var yo={state:{contests:[],selectedContestId:null},mutations:{setContests(e,t){e.contests=t},addContest(e,t){e.contests.unshift(t),e.selectedContestId=t.id},setSelectedContestId(e,t){e.selectedContestId=t},updateContestStart(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.contestStart=t.contestStart)},updateContestEnd(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.contestEnd=t.contestEnd)},updateUrl(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.url=t.url)},updateOsuContestListingUrl(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.osuContestListingUrl=t.osuContestListingUrl)},updateResultsUrl(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.resultsUrl=t.resultsUrl)},updateDownload(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.download=t.download)},deleteSubmission(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.submissions.findIndex((e=>e.id==t.submissionId));-1!==e&&s.submissions.splice(e,1)}},addScreener(e,t){const s=e.contests.find((e=>e.id==t.contestId));null==s||s.screeners.push(t.screener)},deleteScreener(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.screeners.findIndex((e=>e.id==t.screenerId));-1!==e&&s.screeners.splice(e,1)}},addJudge(e,t){const s=e.contests.find((e=>e.id==t.contestId));null==s||s.judges.push(t.judge)},deleteJudge(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.judges.findIndex((e=>e.id==t.judgeId));-1!==e&&s.judges.splice(e,1)}},updateJudgingThreshold(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.judgingThreshold=t.judgingThreshold)},updateStatus(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.status=t.status)},updateMode(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.mode=t.mode)},updateContestCriterias(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.criterias=t.criterias)},updateName(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.name=t.name)},updateDescription(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.description=t.description)},updateSubmissions(e,t){const s=e.contests.find((e=>e.id==t.contestId));s&&(s.submissions=t.submissions)},updateAnonymousSubmissionName(e,t){const s=e.contests.find((e=>e.id==t.contestId));if(s){const e=s.submissions.findIndex((e=>e.id==t.submissionId));-1!==e&&(s.submissions[e].name=t.name)}}},getters:{selectedContest:e=>e.contests.find((t=>t.id===e.selectedContestId)),userSubmission:e=>{const t=e.contests.find((t=>t.id===e.selectedContestId));return t&&t.submissions&&t.submissions.length?t.submissions[0]:null}}},bo=r({name:"ContestPage",components:{ContestCard:J,AddContest:go,ContestInfo:Gs,LimitedContestInfo:Vn},data:()=>({displayMode:"activeContests",firstLoadComplete:!1,loadedSpecificContest:!1}),computed:i(i(i({},U(["loggedInUser"])),U({contests:e=>e.contests.contests,selectedContestId:e=>e.contests.selectedContestId})),M(["selectedContest"])),watch:{async displayMode(){this.firstLoadComplete&&(this.$router.replace("/contests/listing"),await this.loadContests())}},beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",yo)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},async created(){await this.loadContests(),this.firstLoadComplete=!0},methods:{async loadContests(){const e=this.$route.query.contest;if(e&&!this.contests.length){this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null);const t=await this.$http.initialRequest(`/contests/listing/searchContest/${e}`);this.$http.isError(t)||(t.creator.id==this.loggedInUser.id?this.displayMode="myContests":"complete"==t.status&&(this.displayMode="completedContests"),this.$store.commit("setContests",[t]),this.$store.commit("setSelectedContestId",e),this.loadedSpecificContest=!0)}else{this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null);const e=await this.$http.executeGet(`/contests/listing/relevantInfo/${this.displayMode}`);this.$http.isError(e)||(this.$store.commit("setContests",e),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1)}},async loadMore(){await this.loadContests()}}});const vo={class:"row"},Co={class:"col-sm-3"},wo={class:"container card card-body py-3 mb-2"},So=c("hr",null,null,-1),Io={key:1,class:"container card card-body py-3 mb-2 text-secondary"},ko={key:2},$o={class:"col-sm-9 container card card-body"},jo={key:0},xo=c("div",{class:"radial-divisor"},null,-1);bo.render=function(e,t,s,n,o,i){const r=a("add-contest"),u=a("contest-card"),h=a("limited-contest-info"),g=a("contest-info");return l(),d("div",null,[c("div",vo,[c("div",Co,[c("div",wo,[c("a",{href:"#",onClick:t[0]||(t[0]=j((t=>e.displayMode="activeContests"),["prevent"]))},[c("span",{class:$("activeContests"===e.displayMode?"border-bottom border-secondary":"")}," Active contests ",2)]),c("a",{href:"#",onClick:t[1]||(t[1]=j((t=>e.displayMode="completedContests"),["prevent"]))},[c("span",{class:$("completedContests"===e.displayMode?"border-bottom border-secondary":"")},"Completed contests",2)]),c("a",{href:"#",onClick:t[2]||(t[2]=j((t=>e.displayMode="myContests"),["prevent"]))},[c("span",{class:$("myContests"===e.displayMode?"border-bottom border-secondary":"")},"My contests",2)])]),So,"myContests"==e.displayMode&&e.contests&&!e.loadedSpecificContest?(l(),x(r,{key:0})):w("",!0),m(D,{name:"list",tag:"div",class:"row"},{default:p((()=>[(l(!0),d(I,null,k(e.contests,(e=>(l(),x(u,{key:e.id,class:"col-sm-12 my-2",contest:e,route:"listing"},null,8,["contest"])))),128))])),_:1}),e.contests?w("",!0):(l(),d("div",Io," Loading... ")),e.loadedSpecificContest?(l(),d("div",ko,[c("button",{class:"btn w-100 btn-info",type:"button",onClick:t[3]||(t[3]=t=>e.loadMore())}," Load other contests ")])):w("",!0)]),c("div",$o,[e.selectedContestId?"myContests"!==e.displayMode?(l(),x(h,{key:1,contest:e.selectedContest},null,8,["contest"])):e.selectedContest.creator.id==e.loggedInUser.id||3178418==e.loggedInUser.osuId?(l(),x(g,{key:2,contest:e.selectedContest},null,8,["contest"])):w("",!0):(l(),d("div",jo," No contest selected! Choose one on the left. "))])]),xo])};export{bo as default};
