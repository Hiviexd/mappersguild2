var t=Object.defineProperty,e=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(e,s,n)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,i=(t,i)=>{for(var a in i||(i={}))s.call(i,a)&&o(t,a,i[a]);if(e)for(var a of e(i))n.call(i,a)&&o(t,a,i[a]);return t};import{d as a,i as r,o as l,b as d,f as c,t as u,j as m,w as p,l as h,q as g,O as f,P as y,p as b,a as v,J as C,e as w,z as S,F as I,g as k,n as $,s as j,u as x,m as M,H as U,x as D}from"./vendor.8b5721c7.js";import{_ as E}from"./ContestCard.f4b3ec41.js";import{C as J}from"./CopyPaste.7cb4b414.js";import{_ as T}from"./ModalDialog.2c18b0dc.js";import"./ModesIcons.88090f43.js";var A=a({name:"ContestHeader",props:{name:{type:String,required:!0},url:{type:String,default:null},creator:{type:Object,required:!0}}});const N=["href"],L={key:1},q=h(" hosted by "),R=c("hr",null,null,-1);A.render=function(t,e,s,n,o,i){const a=r("user-link");return l(),d("div",null,[c("h4",null,[t.url?(l(),d("a",{key:0,href:t.url,target:"_blank"},u(t.name),9,N)):(l(),d("span",L,u(t.name),1))]),q,m(a,{user:t.creator},{default:p((()=>[h(u(t.creator.username),1)])),_:1},8,["user"]),R])};var O=a({name:"DateInfo",props:{contestId:{type:String,required:!0},contestStart:{type:String,default:null},contestEnd:{type:String,default:null}},data(){return{newContestStart:this.contestStart,newContestEnd:this.contestEnd}},watch:{contestId(){this.newContestStart=this.contestStart,this.newContestEnd=this.contestEnd}},methods:{async updateContestStart(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestStart`,{date:this.newContestStart},t);this.$http.isError(e)?this.newContestStart=this.contestStart:(this.$store.dispatch("updateToastMessages",{message:"Updated contest start date",type:"info"}),this.$store.commit("updateContestStart",{contestId:this.contestId,contestStart:e}))},async updateContestEnd(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateContestEnd`,{date:this.newContestEnd},t);this.$http.isError(e)?this.newContestEnd=this.contestEnd:(this.$store.dispatch("updateToastMessages",{message:"Updated contest end date",type:"info"}),this.$store.commit("updateContestEnd",{contestId:this.contestId,contestEnd:e}))}}});const _={class:"row"},P={class:"col-sm-6"},V={class:"form-inline w-100"},z=h(" Submissions open: "),B={class:"input-group"},F={class:"input-group-append"},G={class:"col-sm-6"},H={class:"form-inline w-100"},K=h(" Submissions close: "),Y={class:"input-group"},Q={class:"input-group-append"};O.render=function(t,e,s,n,o,i){return l(),d("div",_,[c("div",P,[c("div",V,[z,c("div",B,[g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newContestStart=e),class:"ml-1 form-control",type:"date",onKeyup:e[1]||(e[1]=y((e=>t.updateContestStart(e)),["enter"]))},null,544),[[f,t.newContestStart]]),c("div",F,[c("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.updateContestStart(e))}," Save date ")])])])]),c("div",G,[c("div",H,[K,c("div",Y,[g(c("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.newContestEnd=e),class:"ml-1 form-control",type:"date",onKeyup:e[4]||(e[4]=y((e=>t.updateContestEnd(e)),["enter"]))},null,544),[[f,t.newContestEnd]]),c("div",Q,[c("button",{class:"btn btn-primary",href:"#",onClick:e[5]||(e[5]=e=>t.updateContestEnd(e))}," Save date ")])])])])])};var W=a({name:"TitleEdit",props:{contestId:{type:String,required:!0},name:{type:String,default:null}},data(){return{newName:this.name}},watch:{contestId(){this.newName=this.name}},methods:{async updateName(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateName`,{name:this.newName},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest name",type:"info"}),this.$store.commit("updateName",{contestId:this.contestId,name:e}))}}});const X={class:"form-inline w-100 mt-2"},Z=h(" Name: ");W.render=function(t,e,s,n,o,i){return l(),d("div",X,[Z,g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newName=e),class:"ml-1 form-control d-inline w-75",onChange:e[1]||(e[1]=e=>t.updateName(e))},null,544),[[f,t.newName]])])};var tt=a({name:"StatusInfo",props:{contestId:{type:String,required:!0},status:{type:String,default:null},isApproved:{type:Boolean,required:!0}},data(){return{newStatus:this.status}},watch:{contestId(){this.newStatus=this.status}},methods:{async updateStatus(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateStatus`,{status:this.newStatus},t);this.$http.isError(e)?this.newStatus=this.status:(this.$store.dispatch("updateToastMessages",{message:"Updated contest status",type:"info"}),this.$store.commit("updateStatus",{contestId:this.contestId,status:e}))}}});b("data-v-4a3e98ae");const et=h(" Status: "),st=[S('<option value="" disabled data-v-4a3e98ae> Select a status </option><option value="hidden" data-v-4a3e98ae> Hidden </option><option value="beatmapping" data-v-4a3e98ae> Beatmapping </option><option value="screening" data-v-4a3e98ae> Screening </option><option value="judging" data-v-4a3e98ae> Judging </option><option value="complete" data-v-4a3e98ae> Complete </option>',6)],nt={key:0,class:"small text-danger mt-2"};v(),tt.render=function(t,e,s,n,o,i){return l(),d("div",null,[et,g(c("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newStatus=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateStatus(e))},st,544),[[C,t.newStatus]]),t.isApproved||"hidden"===t.status?w("",!0):(l(),d("div",nt,' Your contest has been queued for approval. Once approved, it will appear in "Active contests". '))])},tt.__scopeId="data-v-4a3e98ae";var ot=a({name:"ModeInfo",props:{contestId:{type:String,required:!0},mode:{type:String,default:""}},data(){return{newMode:this.mode}},watch:{contestId(){this.newMode=this.mode}},methods:{async updateMode(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateMode`,{mode:this.newMode},t);this.$http.isError(e)?this.newMode=this.mode:(this.$store.dispatch("updateToastMessages",{message:"Updated contest mode",type:"info"}),this.$store.commit("updateMode",{contestId:this.contestId,mode:e}))}}});b("data-v-5ffc0e64");const it=h(" Mode: "),at=[S('<option value="" selected disabled data-v-5ffc0e64> Select a mode </option><option value="osu" data-v-5ffc0e64> osu! </option><option value="taiko" data-v-5ffc0e64> osu!taiko </option><option value="catch" data-v-5ffc0e64> osu!catch </option><option value="mania" data-v-5ffc0e64> osu!mania </option>',5)];v(),ot.render=function(t,e,s,n,o,i){return l(),d("div",null,[it,g(c("select",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newMode=e),class:"form-select form-select w-50 d-inline",onChange:e[1]||(e[1]=e=>t.updateMode(e))},at,544),[[C,t.newMode]])])},ot.__scopeId="data-v-5ffc0e64";var rt=a({name:"AnonymizationGuide",props:{contestId:{type:String,required:!0}},data:()=>({csvOutput:null,errors:[]}),methods:{async applyCsvOutput(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/syncAnonymousNames`,{csv:this.csvOutput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated submission names",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e.submissions}),e.errors.length&&(this.errors=e.errors))}}});const lt={class:"mx-4"},dt=h(" Submissions must be anonymized locally, then transferred to Mappers' Guild. You have 3 options: "),ct=c("ol",null,[c("li",null,[h("Follow instructions on the "),c("a",{href:"https://github.com/pishifat/contest-anonymization#readme",target:"_blank"},"contest anonymization GitHub repository"),h(".")]),c("li",null,[h("Ask "),c("a",{href:"https://osu.ppy.sh/users/3178418",target:"_blank"},"pishifat"),h(" to do option 1 for you.")]),c("li",null,"Manually anonymize entries (please don't waste your time with this).")],-1),ut=c("span",{class:"small text-secondary"},[h("If you succeed with step 1, paste your "),c("code",null,".csv"),h(" output here as raw text to replace anonymized names:")],-1),mt={class:"row"},pt={class:"col-sm-10"},ht={class:"col-sm-2"},gt={key:0,class:"small text-warning"},ft=h(" The following submissions could not be processed and will need to be renamed manually: ");rt.render=function(t,e,s,n,o,i){return l(),d("div",lt,[dt,ct,c("div",null,[ut,c("div",mt,[c("div",pt,[g(c("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.csvOutput=e),class:"form-control form-inline",rows:"1"},null,512),[[f,t.csvOutput]])]),c("div",ht,[c("button",{type:"button",class:"btn btn-sm btn-outline-info mt-1 mx-1",onClick:e[1]||(e[1]=e=>t.applyCsvOutput())}," Save ")])]),t.errors.length?(l(),d("div",gt,[ft,c("ul",null,[(l(!0),d(I,null,k(t.errors,(t=>(l(),d("li",{key:t},u(t),1)))),128))])])):w("",!0)])])};var yt=a({name:"Urls",props:{contestId:{type:String,required:!0},url:{type:String,default:null},osuContestListingUrl:{type:String,default:null},resultsUrl:{type:String,default:null}},data(){return{newUrl:this.url,newOsuContestListingUrl:this.osuContestListingUrl,newResultsUrl:this.resultsUrl}},watch:{contestId(){this.newUrl=this.url,this.newOsuContestListingUrl=this.osuContestListingUrl,this.newResultsUrl=this.resultsUrl}},methods:{async updateUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateUrl`,{url:this.newUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest url",type:"info"}),this.$store.commit("updateUrl",{contestId:this.contestId,url:e}))},async updateOsuContestListingUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateOsuContestListingUrl`,{url:this.newOsuContestListingUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated osu! contest listing url",type:"info"}),this.$store.commit("updateOsuContestListingUrl",{contestId:this.contestId,osuContestListingUrl:e}))},async updateResultsUrl(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateResultsUrl`,{url:this.newResultsUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated results url",type:"info"}),this.$store.commit("updateResultsUrl",{contestId:this.contestId,resultsUrl:e}))}}});const bt={class:"row"},vt={class:"col-sm-6"},Ct={class:"form-inline w-100"},wt=h(" Contest details URL: "),St={class:"col-sm-6"},It={class:"form-inline w-100"},kt=h(" osu! contest listing URL: "),$t={class:"col-sm-6"},jt={class:"form-inline w-100"},xt=h(" Results URL: ");yt.render=function(t,e,s,n,o,i){return l(),d("div",bt,[c("div",vt,[c("div",Ct,[wt,g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newUrl=e),class:"ml-1 form-control",onChange:e[1]||(e[1]=e=>t.updateUrl(e))},null,544),[[f,t.newUrl]])])]),c("div",St,[c("div",It,[kt,g(c("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.newOsuContestListingUrl=e),class:"ml-1 form-control",onChange:e[3]||(e[3]=e=>t.updateOsuContestListingUrl(e))},null,544),[[f,t.newOsuContestListingUrl]])])]),c("div",$t,[c("div",jt,[xt,g(c("input",{"onUpdate:modelValue":e[4]||(e[4]=e=>t.newResultsUrl=e),class:"ml-1 form-control",onChange:e[5]||(e[5]=e=>t.updateResultsUrl(e))},null,544),[[f,t.newResultsUrl]])])])])};var Mt=a({name:"Description",props:{contestId:{type:String,required:!0},description:{type:String,default:null}},data(){return{newDescription:this.description}},watch:{contestId(){this.newDescription=this.description}},methods:{async updateDescription(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDescription`,{description:this.newDescription},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest description",type:"info"}),this.$store.commit("updateDescription",{contestId:this.contestId,description:e}))}}});const Ut={class:"form-inline w-100 mt-2"},Dt=h(" Contest description: "),Et=c("small",{class:"text-secondary"},[h("Click outside the text box to save. Also, this section supports "),c("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),h("!")],-1);Mt.render=function(t,e,s,n,o,i){return l(),d("div",Ut,[Dt,g(c("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDescription=e),length:"4",class:"ml-1 form-control",placeholder:"click outside the box to save...",maxlength:"40000",rows:"6",onChange:e[1]||(e[1]=e=>t.updateDescription(e))},null,544),[[f,t.newDescription]]),Et])};var Jt=a({name:"SubmissionsInfo",props:{contestId:{type:String,required:!0},submissions:{type:Array,required:!0}},data:()=>({name:"",creatorOsuId:"",confirmDelete:null,processingDelete:!1,manualAnonEdit:null,newAnonymousName:""}),watch:{manualAnonEdit(){this.findAnonymousSubmissionName()}},methods:{findAnonymousSubmissionName(){const t=this.submissions.find((t=>t.id==this.manualAnonEdit));t&&(this.newAnonymousName=t.name)},async updateAnonymousSubmissionName(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/updateAnonymousSubmissionName`,{name:this.newAnonymousName},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Updated anonymous submission name",type:"info"}),this.$store.commit("updateAnonymousSubmissionName",{contestId:this.contestId,submissionId:t,name:s}))},async deleteSubmission(t,e){this.processingDelete=!0;const s=await this.$http.executePost(`/contests/listing/${this.contestId}/submissions/${t}/delete`,{},e);this.processingDelete=!1,this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted submission",type:"info"}),this.$store.commit("deleteSubmission",{contestId:this.contestId,submissionId:t}))}}});const Tt={key:0,class:"table table-sm table-responsive-lg"},At=c("thead",null,[c("tr",null,[c("th",null,"Creator"),c("th",null,"Anonymized name"),c("th",null,"Link"),c("th")])],-1),Nt=["onChange"],Lt={key:1,class:"me-1"},qt=["onClick"],Rt=[c("i",{class:"fas fa-edit"},null,-1)],Ot=["href"],_t=["onClick"],Pt=["onClick"];Jt.render=function(t,e,s,n,o,i){const a=r("user-link");return l(),d("div",null,[t.submissions.length?(l(),d("table",Tt,[At,c("tbody",null,[(l(!0),d(I,null,k(t.submissions,(s=>(l(),d("tr",{key:s.id},[c("td",null,[m(a,{user:s.creator},null,8,["user"])]),c("td",{class:$(s.name?"":"text-danger")},[t.manualAnonEdit==s.id?g((l(),d("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=e=>t.newAnonymousName=e),class:"ml-1 form-control form-control-sm",onChange:e=>t.updateAnonymousSubmissionName(s.id,e)},null,40,Nt)),[[f,t.newAnonymousName]]):(l(),d("span",Lt,u(s.name||"TBD"),1)),c("a",{href:"#",onClick:j((e=>t.manualAnonEdit==s.id?t.manualAnonEdit=null:t.manualAnonEdit=s.id),["prevent"])},Rt,8,qt)],2),c("td",null,[c("a",{href:s.url,target:"_blank"},u(s.url),9,Ot)]),c("td",null,[t.confirmDelete!=s.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((e=>t.confirmDelete=s.id),["prevent"])}," delete ",8,_t)):(l(),d("a",{key:1,class:$(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:j((e=>t.deleteSubmission(s.id,e)),["prevent"])}," confirm ",10,Pt))])])))),128))])])):w("",!0)])};var Vt=a({name:"DownloadInfo",props:{contestId:{type:String,required:!0},download:{type:String,default:null}},data(){return{newDownload:this.download}},watch:{contestId(){this.newDownload=this.download}},methods:{async updateDownload(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateDownload`,{download:this.newDownload},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated contest submissions download link",type:"info"}),this.$store.commit("updateDownload",{contestId:this.contestId,download:e}))}}});b("data-v-3eff7a20");const zt={class:"row"},Bt={class:"col-sm-6"},Ft=h(" Download: "),Gt={key:0,class:"me-2 text-secondary"},Ht={class:"col-sm-6 small text-secondary"},Kt=h(" This link will appear at the top of judging/screening pages for users to download beatmaps. For contest integrity, user data should be removed as explained in the anonymization guide below. "),Yt=["href"];v(),Vt.render=function(t,e,s,n,o,i){return l(),d("div",zt,[c("div",Bt,[Ft,t.download?w("",!0):(l(),d("span",Gt,"No download")),g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newDownload=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link...",onChange:e[1]||(e[1]=e=>t.updateDownload(e))},null,544),[[f,t.newDownload]])]),c("div",Ht,[Kt,t.download?(l(),d("a",{key:0,href:t.download,target:"_blank"},"Test the link here!",8,Yt)):w("",!0)])])},Vt.__scopeId="data-v-3eff7a20";var Qt=a({name:"ScreenersInfo",props:{contestId:{type:String,required:!0},screeners:{type:Array,required:!0}},data:()=>({screenerInput:null,confirmDelete:null}),watch:{contestId(){this.screenerInput=null,this.screenerInput=null}},methods:{async addScreener(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/add`,{screenerInput:this.screenerInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.screenerInput} to list (${this.screeners.length+1})`,type:"info"}),this.$store.commit("addScreener",{contestId:this.contestId,screener:e}))},async removeScreener(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/screeners/remove`,{screenerId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteScreener",{contestId:this.contestId,screenerId:t}))}}});const Wt={class:"input-group mb-2"},Xt={class:"input-group-append"},Zt=[c("i",{class:"fas fa-plus fa-xs"},null,-1)],te={key:0},ee=["onClick"],se=["onClick"],ne={key:1,class:"text-white-50 m-4"};Qt.render=function(t,e,s,n,o,i){const a=r("user-link");return l(),d("div",null,[c("div",Wt,[g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.screenerInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new screener username/osuId...",onKeyup:e[1]||(e[1]=y((e=>t.addScreener(e)),["enter"]))},null,544),[[f,t.screenerInput,void 0,{number:!0}]]),c("div",Xt,[c("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=j((e=>t.addScreener(e)),["prevent"]))},Zt)])]),t.screeners.length?(l(),d("ol",te,[(l(!0),d(I,null,k(t.screeners,(e=>(l(),d("li",{key:e.id},[m(a,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,ee)):(l(),d("a",{key:1,class:"text-danger",href:"#",onClick:j((s=>t.removeScreener(e.id,s)),["prevent"])}," confirm ",8,se))])))),128))])):(l(),d("div",ne," None... "))])};var oe=a({name:"ScreeningStatus",props:{contest:{type:Object,required:!0}},methods:{findScreenerDetails(t){let e=0,s=[];for(const i of this.contest.submissions)for(const n of i.screenings)n.screener.id==t.id&&n.vote&&(e++,s.push(n.vote));const n=[1,2,3,4,5],o=[];for(const i of n)s.includes(i)||o.push(i);return{count:e,unusedVotes:o}}}});const ie={class:"table table-sm table-responsive-lg small"},ae=c("thead",null,[c("tr",null,[c("th",null,"Screener"),c("th",null,"Count"),c("th",null,"Unused ratings")])],-1),re={class:"mx-1"};oe.render=function(t,e,s,n,o,i){const a=r("user-link");return l(),d("div",null,[c("table",ie,[ae,c("tbody",null,[(l(!0),d(I,null,k(t.contest.screeners,(e=>(l(),d("tr",{key:e.id},[c("td",null,[m(a,{user:e},null,8,["user"])]),c("td",{class:$(t.findScreenerDetails(e).count>=5?"text-success":"text-danger")},u(t.findScreenerDetails(e).count)+"/5 ",3),c("td",null,[(l(!0),d(I,null,k(t.findScreenerDetails(e).unusedVotes,(t=>(l(),d("span",{key:t},[c("span",re,[(l(!0),d(I,null,k(t,(t=>(l(),d("i",{key:t,class:"fa-star fas text-warning small"})))),128)),h(" ("+u(t)+") ",1)])])))),128))])])))),128))])])])};var le=a({name:"JudgesInfo",props:{contestId:{type:String,required:!0},judges:{type:Array,required:!0}},data:()=>({judgeInput:null,confirmDelete:null}),watch:{contestId(){this.judgeInput=null,this.confirmDelete=null}},methods:{async addJudge(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/add`,{judgeInput:this.judgeInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Added ${this.judgeInput} to list (${this.judges.length+1})`,type:"info"}),this.$store.commit("addJudge",{contestId:this.contestId,judge:e}))},async removeJudge(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/judges/remove`,{judgeId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Removed user from list",type:"info"}),this.$store.commit("deleteJudge",{contestId:this.contestId,judgeId:t}))}}});const de={class:"input-group mb-2"},ce={class:"input-group-append"},ue=[c("i",{class:"fas fa-plus fa-xs"},null,-1)],me={key:0},pe=["onClick"],he=["onClick"],ge={key:1,class:"text-white-50 m-4"};le.render=function(t,e,s,n,o,i){const a=r("user-link");return l(),d("div",null,[c("div",de,[g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.judgeInput=e),class:"form-control form-control-sm",autocomplete:"off",placeholder:"new judge username/osuId...",onKeyup:e[1]||(e[1]=y((e=>t.addJudge(e)),["enter"]))},null,544),[[f,t.judgeInput,void 0,{number:!0}]]),c("div",ce,[c("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=j((e=>t.addJudge(e)),["prevent"]))},ue)])]),t.judges.length?(l(),d("ul",me,[(l(!0),d(I,null,k(t.judges,(e=>(l(),d("li",{key:e.id},[m(a,{user:e},null,8,["user"]),t.confirmDelete!=e.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,pe)):(l(),d("a",{key:1,class:"text-danger",href:"#",onClick:j((s=>t.removeJudge(e.id,s)),["prevent"])}," confirm ",8,he))])))),128))])):(l(),d("div",ge," None... "))])};var fe=a({name:"MarkdownUserList",components:{CopyPaste:J},props:{users:{type:Array,default:()=>[]}}});b("data-v-0f02c955");const ye=h(" Comma separation: "),be=c("br",null,null,-1),ve=c("br",null,null,-1),Ce=c("br",null,null,-1),we=h(" Newline separation: "),Se=c("br",null,null,-1),Ie=c("br",null,null,-1);v(),fe.render=function(t,e,s,n,o,i){const a=r("copy-paste");return l(),x(a,{class:"tiny"},{default:p((()=>[ye,be,(l(!0),d(I,null,k(t.users,((e,s)=>(l(),d("span",{key:e.id}," ["+u(e.username)+"](https://osu.ppy.sh/users/"+u(e.osuId)+")"+u(s===t.users.length-2?", and ":s===t.users.length-1?"":", "),1)))),128)),ve,Ce,we,Se,(l(!0),d(I,null,k(t.users,(t=>(l(),d("span",{key:t.id},[h(" ["+u(t.username)+"](https://osu.ppy.sh/users/"+u(t.osuId)+")",1),Ie])))),128))])),_:1})},fe.__scopeId="data-v-0f02c955";var ke=a({name:"ScreeningDetail",props:{screenings:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},methods:{findComment(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.comment:"No comment"},findVote(t){const e=this.screenings.find((e=>e.screener.id==t));return e?e.vote:0}}});const $e={class:"ms-4 small"},je={class:"ms-4 small text-secondary"};ke.render=function(t,e,s,n,o,i){const a=r("user-link");return l(),d("div",$e,[(l(!0),d(I,null,k(t.screeners,(e=>(l(),d("div",{key:e.id},[m(a,{user:e},null,8,["user"]),(l(!0),d(I,null,k(t.findVote(e.id),(t=>(l(),d("i",{key:t,class:"fa-star fas mx-1 text-warning small"})))),128)),c("div",je,u(t.findComment(e.id)),1)])))),128))])};var xe=a({name:"ScreeningResults",components:{ScreeningDetail:ke},props:{contestId:{type:String,required:!0},contestName:{type:String,required:!0},judgingThreshold:{type:Number,default:0},submissions:{type:Array,required:!0},screeners:{type:Array,default:()=>[]}},data(){return{newJudgingThreshold:this.judgingThreshold}},computed:{sortedSubmissions(){const t=JSON.parse(JSON.stringify(this.submissions));for(let e=0;e<t.length;e++){const s=t[e].screenings.reduce(((t,e)=>e.vote?t+e.vote:t),0);t[e].total=s}return t.sort(((t,e)=>t.total>e.total?-1:e.total>t.total?1:0)),t}}});b("data-v-0aa6204d");const Me={class:"d-flex justify-content-between"},Ue=["href"],De=c("i",{class:"fa-star fas small"},null,-1),Ee=h(") "),Je=c("i",{class:"fas fa-angle-down"},null,-1),Te=["id"];v(),xe.render=function(t,e,s,n,o,i){const a=r("screening-detail");return l(),d("div",null,[c("ul",null,[(l(!0),d(I,null,k(t.sortedSubmissions,(e=>(l(),d("li",{key:e.id},[c("div",Me,[c("a",{class:$(e.total>=t.judgingThreshold?"pass-threshold":""),"data-bs-toggle":"collapse",href:`#collapse-${e.id}`},[h(u(e.creator.username)+" ("+u(e.total)+" ",1),De,Ee,Je],10,Ue)]),c("div",{id:`collapse-${e.id}`,class:"collapse"},[c("div",null,[m(a,{screenings:e.screenings,screeners:t.screeners},null,8,["screenings","screeners"])])],8,Te)])))),128))])])},xe.__scopeId="data-v-0aa6204d";var Ae=a({name:"JudgingThreshold",props:{contestId:{type:String,required:!0},judgingThreshold:{type:Number,default:0}},data(){return{newJudgingThreshold:this.judgingThreshold}},watch:{contestId(){this.newJudgingThreshold=this.judgingThreshold}},methods:{async updateJudgingThreshold(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/updateJudgingThreshold`,{judgingThreshold:this.newJudgingThreshold},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:`Updated judging threshold to ${e}`,type:"info"}),this.$store.commit("updateJudgingThreshold",{contestId:this.contestId,judgingThreshold:e}))}}});const Ne={class:"row"},Le={class:"input-group col-sm-4"},qe={class:"input-group-append"},Re=[h(" save "),c("i",{class:"fa-star fas small"},null,-1)];Ae.render=function(t,e,s,n,o,i){return l(),d("div",Ne,[c("div",Le,[g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newJudgingThreshold=e),class:"form-control form-control-sm",autocomplete:"off",type:"number",placeholder:"judging threshold",onKeyup:e[1]||(e[1]=y((e=>t.updateJudgingThreshold(e)),["enter"]))},null,544),[[f,t.newJudgingThreshold,void 0,{number:!0}]]),c("div",qe,[c("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=j((e=>t.updateJudgingThreshold(e)),["prevent"]))},Re)])])])};var Oe=a({name:"CriteriaSelection",props:{contestId:{type:String,required:!0},criterias:{type:Array,required:!0}},data:()=>({nameInput:null,maxScoreInput:null,processingDelete:!1,confirmDelete:null}),computed:{scoredCriteria(){return this.criterias.filter((t=>"comments"!==t.name))},commentsEnabled(){return this.criterias.some((t=>"comments"==t.name))}},watch:{contestId(){this.nameInput=null,this.maxScoreInput=null,this.confirmDelete=null}},methods:{async addCriteria(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/addCriteria`,{name:this.nameInput,maxScore:this.maxScoreInput},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Added criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:e}))},async deleteCriteria(t,e){const s=await this.$http.executePost(`/contests/listing/${this.contestId}/deleteCriteria`,{criteriaId:t},e);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"Deleted criteria",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:s}))},async toggleComments(){const t=await this.$http.executePost(`/contests/listing/${this.contestId}/toggleComments`,{});this.$http.isError(t)||(this.$store.dispatch("updateToastMessages",{message:"Toggled comments",type:"info"}),this.$store.commit("updateContestCriterias",{contestId:this.contestId,criterias:t}))}}});const _e={class:"input-group w-75 mb-2"},Pe={class:"input-group-append"},Ve=[h(" Add criteria "),c("i",{class:"fas fa-plus fa-xs"},null,-1)],ze={class:"ms-2 mb-2"},Be=[h(" See judging criteria "),c("i",{class:"fas fa-angle-down"},null,-1)],Fe={id:"judgingCriteria",class:"collapse mx-2"},Ge={key:0,class:"table table-sm table-responsive-lg"},He=c("thead",null,[c("tr",null,[c("th",null,"Criteria"),c("th",null,"Max score"),c("th",null,"Delete")])],-1),Ke={class:"text-capitalize"},Ye=["onClick"],Qe=["onClick"],We={key:1};Oe.render=function(t,e,s,n,o,i){return l(),d("div",null,[c("div",_e,[g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.nameInput=e),type:"text",class:"form-control",placeholder:"criteria name..."},null,512),[[f,t.nameInput]]),g(c("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.maxScoreInput=e),type:"number",class:"form-control",placeholder:"total points..."},null,512),[[f,t.maxScoreInput]]),c("div",Pe,[c("button",{class:"btn btn-primary",href:"#",onClick:e[2]||(e[2]=e=>t.addCriteria(e))},Ve)])]),c("div",ze,[c("a",{href:"#judgingCriteria","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=j((()=>{}),["prevent"]))},Be),c("div",Fe,[t.criterias.length?(l(),d("table",Ge,[He,c("tbody",null,[(l(!0),d(I,null,k(t.scoredCriteria,(e=>(l(),d("tr",{key:e.id},[c("td",Ke,u(e.name),1),c("td",null,u(e.maxScore),1),c("td",null,[t.confirmDelete!=e.id?(l(),d("a",{key:0,href:"#",class:"text-danger",onClick:j((s=>t.confirmDelete=e.id),["prevent"])}," delete ",8,Ye)):(l(),d("a",{key:1,class:$(t.processingDelete?"text-secondary disabled":"text-danger"),href:"#",onClick:j((s=>t.deleteCriteria(e.id,s)),["prevent"])}," confirm ",10,Qe))])])))),128)),c("tr",null,[c("td",{class:$(t.commentsEnabled?"":"text-secondary")}," Comments "+u(t.commentsEnabled?"":"(disabled)"),3),c("td",{class:$(t.commentsEnabled?"":"text-secondary")}," N/A ",2),c("td",null,[c("a",{href:"#",class:"text-danger",onClick:e[4]||(e[4]=j((e=>t.toggleComments()),["prevent"]))},u(t.commentsEnabled?"disable":"enable"),1)])])])])):(l(),d("div",We," No criteria yet... "))])])])};var Xe=a({name:"JudgingLeaderboard",props:{contest:{type:Object,required:!0},usersScores:{type:Array,required:!0},judgesCorrel:{type:Array,required:!0}},data:()=>({selectedScore:null,displayMode:"criterias",sortDesc:!1}),computed:{scoreDetail(){if(this.selectedScore)return this.contest.submissions.find((t=>{var e;return t.creator.id==(null==(e=this.selectedScore)?void 0:e.creator.id)}))},scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))},judges(){return this.contest.judges}},methods:{getCriteriaScore(t,e){var s;return(null==(s=t.criteriaSum.find((t=>t.criteriaId===e)))?void 0:s.sum)||0},getJudgeScore(t,e,s=!1){const n=t.judgingSum.find((t=>t.judgeId===e)),o=(null==n?void 0:n.standardized)||0;return s?`${(null==n?void 0:n.sum)||0} (${o.toFixed(3)})`:(null==n?void 0:n.sum)||0},getJudgeAvg(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.rawAvg.toFixed(4))||0},getJudgeSd(t){var e;return(null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.sd.toFixed(4))||0},getJudgeCorrel(t){var e;return((null==(e=this.judgesCorrel.find((e=>e.id===t)))?void 0:e.correl)||0).toFixed(4)},getFinalScore:t=>isNaN(t)?"0":t.toFixed(4),sortByCriteria(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByCriteria",{criteriaId:t,sortDesc:this.sortDesc})},sortByJudge(t){this.sortDesc=!this.sortDesc,this.$store.commit("sortByJudge",{judgeId:t,sortDesc:this.sortDesc})},sortByRawScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByRawScore",{sortDesc:this.sortDesc})},sortByStdScore(){this.sortDesc=!this.sortDesc,this.$store.commit("sortByStdScore",{sortDesc:this.sortDesc})}}});const Ze={class:"row"},ts={class:"col-sm"},es=h(" Score display: "),ss=h(" | "),ns=h(" | "),os={class:"row"},is={class:"col-sm"},as={class:"table table-sm small table-responsive-lg"},rs=c("th",null,"#",-1),ls=c("th",null,"User",-1),ds=["onClick"],cs={class:"cursor-default"},us=c("td",null,null,-1),ms=c("td",null,"AVG",-1),ps=c("td",null,null,-1),hs=c("td",null,null,-1),gs={class:"cursor-default"},fs=c("td",null,null,-1),ys=c("td",null,"SD",-1),bs=c("td",null,null,-1),vs=c("td",null,null,-1),Cs={class:"cursor-default"},ws=c("td",null,null,-1),Ss=c("td",null,"COR",-1),Is=c("td",null,null,-1),ks=c("td",null,null,-1);Xe.render=function(t,e,s,n,o,i){const a=r("user-link");return l(),d("div",null,[c("div",Ze,[c("div",ts,[es,c("a",{href:"#",class:$("criterias"===t.displayMode?"border-bottom border-secondary":""),onClick:e[0]||(e[0]=j((e=>t.displayMode="criterias"),["prevent"]))}," Criteria ",2),ss,c("a",{href:"#",class:$("judges"===t.displayMode?"border-bottom border-secondary":""),onClick:e[1]||(e[1]=j((e=>t.displayMode="judges"),["prevent"]))}," Judge ",2),ns,c("a",{href:"#",class:$("detail"===t.displayMode?"border-bottom border-secondary":""),onClick:e[2]||(e[2]=j((e=>t.displayMode="detail"),["prevent"]))}," Judge (SD) ",2)])]),c("div",os,[c("div",is,[c("table",as,[c("thead",null,[c("tr",null,[rs,ls,"criterias"===t.displayMode?(l(!0),d(I,{key:0},k(t.scoredCriteria,(t=>(l(),d("th",{key:t.id},u(t.name),1)))),128)):(l(!0),d(I,{key:1},k(t.judges,(t=>(l(),d("th",{key:t.id},u(t.username),1)))),128)),c("th",null,[c("a",{href:"#",onClick:e[3]||(e[3]=j(((...e)=>t.sortByRawScore&&t.sortByRawScore(...e)),["prevent"]))}," Final Score (raw) ")]),c("th",null,[c("a",{href:"#",onClick:e[4]||(e[4]=j(((...e)=>t.sortByStdScore&&t.sortByStdScore(...e)),["prevent"]))}," Final Score (standardized) ")])])]),c("tbody",null,[(l(!0),d(I,null,k(t.usersScores,((e,s)=>(l(),d("tr",{key:s,"data-bs-toggle":"modal","data-bs-target":"#detailModal",onClick:s=>t.selectedScore=e},[c("td",null,u(s+1),1),c("td",null,[m(a,{user:e.creator},null,8,["user"])]),"criterias"===t.displayMode?(l(!0),d(I,{key:0},k(t.scoredCriteria,(s=>(l(),d("td",{key:s.id},u(t.getCriteriaScore(e,s.id)),1)))),128)):(l(!0),d(I,{key:1},k(t.judges,(s=>(l(),d("td",{key:s.id},u(t.getJudgeScore(e,s.id,"detail"===t.displayMode)),1)))),128)),c("td",null,u(e.rawFinalScore),1),c("td",null,u(t.getFinalScore(e.standardizedFinalScore)),1)],8,ds)))),128)),"detail"===t.displayMode?(l(),d(I,{key:0},[c("tr",cs,[us,ms,(l(!0),d(I,null,k(t.judges,(e=>(l(),d("td",{key:e.id},u(t.getJudgeAvg(e.id)),1)))),128)),ps,hs]),c("tr",gs,[fs,ys,(l(!0),d(I,null,k(t.judges,(e=>(l(),d("td",{key:e.id},u(t.getJudgeSd(e.id)),1)))),128)),bs,vs]),c("tr",Cs,[ws,Ss,(l(!0),d(I,null,k(t.judges,(e=>(l(),d("td",{key:e.id},u(t.getJudgeCorrel(e.id)),1)))),128)),Is,ks])],64)):w("",!0)])])])])])};var $s=a({name:"JudgingDetail",components:{ModalDialog:T},props:{submission:{type:Object,default:null}},data:()=>({commentsExpanded:[]}),methods:{showComment(t){const e=this.commentsExpanded.findIndex((e=>e===t));-1!==e?this.commentsExpanded.splice(e,1):this.commentsExpanded.push(t)},getCollapseClass(t){return this.commentsExpanded.includes(t)?"fa-chevron-down":"fa-chevron-right"}}});const js={class:"container"},xs=["href","onClick"],Ms={key:1,class:"small text-capitalize ms-3"},Us=["id"],Ds={class:"small text-white-50",style:{"white-space":"pre-line"}},Es={key:0};$s.render=function(t,e,s,n,o,i){const a=r("user-link"),g=r("modal-dialog");return l(),x(g,{id:"detailModal",loaded:Boolean(t.submission)},{header:p((()=>[h(u(t.submission.creator.username)+" ("+u(t.submission.name)+") ",1)])),default:p((()=>[c("div",js,[(l(!0),d(I,null,k(t.submission.judgings,((e,s)=>(l(),d("div",{key:e.id},[m(a,{user:e.judge},null,8,["user"]),(l(!0),d(I,null,k(e.judgingScores,(e=>(l(),d("div",{key:e.id,class:"my-1"},["comments"==e.criteria.name?(l(),d("a",{key:0,class:"small fw-bold text-capitalize","data-bs-toggle":"collapse",href:`#judgingToCriteria${e.id}`,onClick:s=>t.showComment(e.id)},[c("i",{class:$(["small fas me-2",t.getCollapseClass(e.id)])},null,2),h(" "+u(e.criteria.name),1)],8,xs)):(l(),d("span",Ms,u(e.criteria.name)+" ("+u(e.score)+") ",1)),c("p",{id:`judgingToCriteria${e.id}`,class:"text-light ms-4 collapse"},[c("span",Ds,u(e.comment),1)],8,Us)])))),128)),s<t.submission.judgings.length-1?(l(),d("hr",Es)):w("",!0)])))),128))])])),_:1},8,["loaded"])};var Js=a({name:"JudgeStatuses",components:{JudgingDetail:$s},props:{contest:{type:Object,required:!0}},data:()=>({selected:null}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},methods:{getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getMissingJudges(t){const e=t.judgings.map((t=>t.judge.id)),s=[];for(const n of this.contest.judges)if(e.includes(n.id)){const e=t.judgings.find((t=>t.judge.id===n.id));e&&e.judgingScores.length!==this.contest.criterias.length&&s.push(n)}else s.push(n);return s.map((t=>t.username)).join(", ")},getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});b("data-v-a36d03c2");const Ts={class:"table table-sm table-responsive-lg small"},As=c("thead",null,[c("tr",null,[c("th",null,"Submission creator"),c("th",null,"Count"),c("th",null,"Incomplete judges")])],-1),Ns=["onClick"];v(),Js.render=function(t,e,s,n,o,i){const a=r("user-link"),p=r("judging-detail");return l(),d("div",null,[c("table",Ts,[As,c("tbody",null,[(l(!0),d(I,null,k(t.contest.submissions,(e=>(l(),d("tr",{key:e.id,"data-bs-toggle":"modal","data-bs-target":"#detailModalAdmin",class:"modalable",onClick:s=>t.selected=e},[c("td",null,[m(a,{user:e.creator},null,8,["user"])]),c("td",{class:$(t.getJudgesInvolvedCount(e)>=t.judgeCount?"text-success":"text-danger")},u(t.getJudgesInvolvedCount(e))+"/"+u(t.judgeCount),3),c("td",null,u(t.getMissingJudges(e)),1)],8,Ns)))),128))])]),m(p,{id:"detailModalAdmin",submission:t.selected},null,8,["submission"])])},Js.__scopeId="data-v-a36d03c2";var Ls=a({name:"MarkdownJudgingLeaderboard",components:{CopyPaste:J},props:{usersScores:{type:Array,required:!0},contest:{type:Object,required:!0},judgeCount:{type:Number,required:!0}},computed:{scoredCriteria(){return this.contest.criterias.filter((t=>"comments"!==t.name))}},methods:{getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id},getCriteriaSumbyName(t,e){const s=e.find((e=>e.name===t));return(null==s?void 0:s.sum)||NaN}}});b("data-v-4fcd74b7");const qs=c("div",null," | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | ",-1);v(),Ls.render=function(t,e,s,n,o,i){const a=r("copy-paste");return l(),x(a,{class:"tiny"},{default:p((()=>[c("div",null," | Rank | Beatmap | Judging | Musical representation ("+u(10*t.judgeCount)+") | Creativity ("+u(10*t.judgeCount)+") | Gameplay ("+u(10*t.judgeCount)+") | Limitation ("+u(5*t.judgeCount)+") | Total (standardized/raw) | ",1),qs,(l(!0),d(I,null,k(t.usersScores,((e,s)=>(l(),d("div",{key:s},[h(" | \\#"+u(s+1)+" | [TITLE](LINK) by ["+u(e.creator.username)+"](https://osu.ppy.sh/users/"+u(e.creator.osuId)+") | [details](https://mappersguild.com/contests/results?submission="+u(t.getSubmissionIdByCreatorId(e.creator.id))+") ",1),(l(!0),d(I,null,k(t.scoredCriteria,(s=>(l(),d("span",{key:s.id},"| "+u(t.getCriteriaSumbyName(s.name,e.criteriaSum)+" "),1)))),128)),h(" | **"+u(Math.round(100*e.standardizedFinalScore)/100)+"** ("+u(e.rawFinalScore)+") | ",1)])))),128))])),_:1})},Ls.__scopeId="data-v-4fcd74b7";var Rs=a({name:"JudgingResults",components:{JudgingLeaderboard:Xe,MarkdownJudgingLeaderboard:Ls,JudgeStatuses:Js},props:{contestId:{type:String,required:!0}},data:()=>({contest:null,selected:null,usersScores:[],judgesCorrel:[]}),computed:{judgeCount(){var t;return(null==(t=this.contest)?void 0:t.judges.length)||0}},watch:{async contestId(){await this.getJudgingResults()}},async created(){await this.getJudgingResults()},methods:{async getJudgingResults(){const t=await this.$http.executeGet(`/contests/listing/${this.contestId}/judgingResults`);this.$http.isError(t)||(this.contest=t.contest,this.usersScores=t.usersScores,this.judgesCorrel=t.judgesCorrel)},getJudgesInvolvedCount:t=>t.judgings.map((t=>t.judge)).length,getJudgesInvolved:t=>t.judgings.map((t=>t.judge.username)).join(", "),getSubmissionIdByCreatorId(t){var e;return(null==(e=this.contest)?void 0:e.submissions.find((e=>e.creator.id===t))).id}}});const Os={key:0},_s={class:"ms-2 mb-2"},Ps=[h(" See judging status per submission "),c("i",{class:"fas fa-angle-down"},null,-1)],Vs={class:"ms-2 mb-2"},zs=[h(" See judging leaderboard "),c("i",{class:"fas fa-angle-down"},null,-1)],Bs={class:"ms-2 mb-2"},Fs=[h(" See markdown judging leaderboard "),c("i",{class:"fas fa-angle-down"},null,-1)];Rs.render=function(t,e,s,n,o,i){const a=r("judge-statuses"),u=r("judging-leaderboard"),p=r("markdown-judging-leaderboard");return t.contest?(l(),d("div",Os,[c("div",_s,[c("a",{href:"#judgeStatuses","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=j((()=>{}),["prevent"]))},Ps),m(a,{id:"judgeStatuses",class:"collapse mx-2",contest:t.contest},null,8,["contest"])]),c("div",Vs,[c("a",{href:"#judgingLeaderboard","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=j((()=>{}),["prevent"]))},zs),m(u,{id:"judgingLeaderboard",class:"collapse mx-2","contest-id":t.contest.id,contest:t.contest,"users-scores":t.usersScores,"judges-correl":t.judgesCorrel},null,8,["contest-id","contest","users-scores","judges-correl"])]),c("div",Bs,[c("a",{href:"#markdownJudgingLeaderboard","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=j((()=>{}),["prevent"]))},Fs),m(p,{id:"markdownJudgingLeaderboard",class:"collapse","users-scores":t.usersScores,contest:t.contest,"judge-count":t.judgeCount},null,8,["users-scores","contest","judge-count"])])])):w("",!0)};var Gs=a({name:"ContestInfo",components:{ContestHeader:A,DateInfo:O,Name:W,AnonymizationGuide:rt,ModeInfo:ot,StatusInfo:tt,SubmissionsInfo:Jt,DownloadInfo:Vt,Urls:yt,Description:Mt,ScreenersInfo:Qt,JudgesInfo:le,MarkdownUserList:fe,ScreeningResults:xe,ScreeningStatus:oe,JudgingThreshold:Ae,CriteriaSelection:Oe,JudgingResults:Rs},props:{contest:{type:Object,required:!0}},data(){return{newContestStart:this.contest.contestStart,showContestStartDateInput:!1,screenersAndJudgesVisible:!1,submissionsVisible:!1,screeningResultsVisible:!1,judgingCriteriaVisible:!1,judgingResultsVisible:!1}}});const Hs=c("h5",null,"General",-1),Ks=c("hr",null,null,-1),Ys=c("h5",null," Submissions ",-1),Qs={class:"ms-2 mb-2"},Ws=c("i",{class:"fas fa-angle-down"},null,-1),Xs={class:"ms-2 mb-2"},Zs=[h(" See submission anonymization guide "),c("i",{class:"fas fa-angle-down"},null,-1)],tn=c("hr",null,null,-1),en=c("h4",{class:"mb-4"}," Screening ",-1),sn=c("h5",null," Screeners ",-1),nn={class:"ms-2 mb-2"},on=c("i",{class:"fas fa-angle-down"},null,-1),an={id:"screeners",class:"row collapse mb-2"},rn=c("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their screening progress. ",-1),ln=c("div",null,'To begin screening, send this link to the users above and ensure your contest\'s status is set to "Screening"!',-1),dn=c("hr",null,null,-1),cn=c("h5",null," Screening Results ",-1),un={class:"ms-2 mb-2"},mn=[h(" See screening status per screener "),c("i",{class:"fas fa-angle-down"},null,-1)],pn={class:"row mb-2"},hn=c("div",{class:"col-sm-8 small text-secondary"},[h(" Submissions with this "),c("i",{class:"fa-star fas text-warning small"}),h(' score or above in "screening results" will be available to judges. If your contest skips the screening process, set this to "0". ')],-1),gn={class:"ms-2 mb-2"},fn=[h(" See screening results "),c("i",{class:"fas fa-angle-down"},null,-1)],yn=c("hr",null,null,-1),bn=c("h4",{class:"mb-4"}," Judging ",-1),vn=c("h5",null," Judges ",-1),Cn={class:"ms-2 mb-2"},wn=c("i",{class:"fas fa-angle-down"},null,-1),Sn={id:"judges",class:"row collapse mb-2"},In=c("div",{class:"text-danger small col-sm-12"}," Note: Deleting a user from this list will remove all of their judging progress. ",-1),kn=c("div",null,'To begin judging, send this link to the users above and ensure your contest\'s status is set to "Judging"!',-1),$n=c("hr",null,null,-1),jn=c("h5",null," Judging Criteria ",-1),xn=c("hr",null,null,-1),Mn=c("h5",null," Judging Results ",-1);Gs.render=function(t,e,s,n,o,i){const a=r("contest-header"),p=r("name"),g=r("status-info"),f=r("mode-info"),y=r("date-info"),b=r("urls"),v=r("description"),C=r("submissions-info"),w=r("download-info"),S=r("anonymization-guide"),I=r("screeners-info"),k=r("markdown-user-list"),$=r("screening-status"),x=r("judging-threshold"),M=r("screening-results"),U=r("judges-info"),D=r("criteria-selection"),E=r("judging-results");return l(),d("div",null,[m(a,{name:t.contest.name,url:t.contest.url,creator:t.contest.creator},null,8,["name","url","creator"]),Hs,c("div",null,[m(p,{class:"mb-2","contest-id":t.contest.id,name:t.contest.name},null,8,["contest-id","name"]),m(g,{class:"mb-2","contest-id":t.contest.id,status:t.contest.status,"is-approved":t.contest.isApproved},null,8,["contest-id","status","is-approved"]),m(f,{class:"mb-2","contest-id":t.contest.id,mode:t.contest.mode},null,8,["contest-id","mode"]),m(y,{class:"mb-2","contest-id":t.contest.id,"contest-start":t.contest.contestStart?t.contest.contestStart.slice(0,10):null,"contest-end":t.contest.contestEnd?t.contest.contestEnd.slice(0,10):null},null,8,["contest-id","contest-start","contest-end"]),m(b,{"contest-id":t.contest.id,url:t.contest.url||null,"osu-contest-listing-url":t.contest.osuContestListingUrl||null,"results-url":t.contest.resultsUrl||null},null,8,["contest-id","url","osu-contest-listing-url","results-url"]),m(v,{"contest-id":t.contest.id,description:t.contest.description},null,8,["contest-id","description"]),Ks,c("div",null,[Ys,c("div",Qs,[c("a",{href:"#submissions","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=j((()=>{}),["prevent"]))},[h(" See all submissions ("+u(t.contest.submissions.length)+") ",1),Ws])]),m(C,{id:"submissions",class:"collapse","contest-id":t.contest.id,submissions:t.contest.submissions},null,8,["contest-id","submissions"]),m(w,{"contest-id":t.contest.id,download:t.contest.download},null,8,["contest-id","download"]),c("div",Xs,[c("a",{href:"#anonymizationGuide","data-bs-toggle":"collapse",onClick:e[1]||(e[1]=j((()=>{}),["prevent"]))},Zs)]),m(S,{id:"anonymizationGuide",class:"collapse","contest-id":t.contest.id},null,8,["contest-id"]),tn,en,sn,c("div",nn,[c("a",{href:"#screeners","data-bs-toggle":"collapse",onClick:e[2]||(e[2]=j((()=>{}),["prevent"]))},[h(" See all screeners ("+u(t.contest.screeners.length)+") ",1),on])]),c("div",an,[m(I,{class:"col-sm-4","contest-id":t.contest.id,screeners:t.contest.screeners},null,8,["contest-id","screeners"]),m(k,{class:"col-sm-7",users:t.contest.screeners},null,8,["users"]),rn]),ln,c("code",null,"https://mappersguild.com/contests/screening?contest="+u(t.contest.id),1),dn,cn,c("div",un,[c("a",{href:"#screeningStatus","data-bs-toggle":"collapse",onClick:e[3]||(e[3]=j((()=>{}),["prevent"]))},mn)]),m($,{id:"screeningStatus",class:"collapse mx-2",contest:t.contest},null,8,["contest"]),c("div",pn,[m(x,{class:"col-sm-4","contest-id":t.contest.id,"judging-threshold":t.contest.judgingThreshold},null,8,["contest-id","judging-threshold"]),hn]),c("div",gn,[c("a",{href:"#screeningResults","data-bs-toggle":"collapse",onClick:e[4]||(e[4]=j((()=>{}),["prevent"]))},fn)]),m(M,{id:"screeningResults",class:"collapse","contest-id":t.contest.id,"contest-name":t.contest.name,submissions:t.contest.submissions,"judging-threshold":t.contest.judgingThreshold,screeners:t.contest.screeners},null,8,["contest-id","contest-name","submissions","judging-threshold","screeners"]),yn,bn,vn,c("div",Cn,[c("a",{href:"#judges","data-bs-toggle":"collapse",onClick:e[5]||(e[5]=j((()=>{}),["prevent"]))},[h(" See all judges ("+u(t.contest.judges.length)+") ",1),wn])]),c("div",Sn,[m(U,{class:"col-sm-4","contest-id":t.contest.id,judges:t.contest.judges},null,8,["contest-id","judges"]),m(k,{class:"col-sm-7",users:t.contest.judges},null,8,["users"]),In]),kn,c("code",null,"https://mappersguild.com/contests/judging?contest="+u(t.contest.id),1),$n,jn,m(D,{"contest-id":t.contest.id,criterias:t.contest.criterias},null,8,["contest-id","criterias"]),xn,Mn,m(E,{"contest-id":t.contest.id},null,8,["contest-id"])])])])};var Un=a({name:"MapSubmissionForm",props:{contestId:{type:String,required:!0}},data(){return{newSubmissionUrl:this.ok}},computed:i(i({},M(["loggedInUser"])),U(["userSubmission"])),watch:{contestId(){this.newSubmissionUrl=this.userSubmission?this.userSubmission.url:""}},methods:{async createSubmission(t){const e=await this.$http.executePost(`/contests/listing/${this.contestId}/createSubmission`,{submissionUrl:this.newSubmissionUrl},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Submitted!",type:"info"}),this.$store.commit("updateSubmissions",{contestId:this.contestId,submissions:e}))}}});b("data-v-f0e10694");const Dn={class:"row"},En={class:"col-sm-12 mb-2"},Jn=h(" Current submission: "),Tn={key:0,class:"me-2 text-secondary"},An={key:1},Nn=["href"],Ln={class:"small text-secondary ms-1"},qn=h("(last updated "),Rn=h(")"),On={class:"col-sm-8"},_n={class:"col-sm-4"},Pn=c("div",{class:"small text-secondary"}," Upload your beatmap to a file sharing service and provide a link here! For various reasons, this website does not host beatmap uploads. ",-1);v(),Un.render=function(t,e,s,n,o,i){return l(),d("div",Dn,[c("div",En,[Jn,t.userSubmission?t.userSubmission&&t.userSubmission.url?(l(),d("span",An,[c("a",{href:t.userSubmission.url,target:"_blank",class:"small"},u(t.userSubmission.url),9,Nn),c("span",Ln,[qn,c("code",null,u(new Date(t.userSubmission.updatedAt).toString().slice(4,33)),1),Rn])])):w("",!0):(l(),d("span",Tn,"No submission yet!"))]),c("div",On,[g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.newSubmissionUrl=e),class:"form-control form-control-sm w-100 d-inline",type:"text",autocomplete:"off",placeholder:"link..."},null,512),[[f,t.newSubmissionUrl]])]),c("div",_n,[c("button",{class:"btn btn-sm btn-outline-info w-100",onClick:e[1]||(e[1]=e=>t.createSubmission(e))}," Submit ")]),Pn])},Un.__scopeId="data-v-f0e10694";var Vn=a({name:"LimitedContestInfo",components:{ContestHeader:A,MapSubmissionForm:Un},props:{contest:{type:Object,required:!0}}});const zn=c("h5",null,"General",-1),Bn={key:0},Fn=["innerHTML"],Gn={key:1},Hn=h(" This contest is currently in the "),Kn=h(" phase. "),Yn={key:2},Qn=["href"],Wn=c("hr",null,null,-1),Xn={key:3},Zn=c("h5",null,"Submission",-1),to={key:0},eo={key:0},so={key:1},no=h(" Maps can be submitted until "),oo={key:1},io=h(" This contest is being hosted on "),ao=c("a",{href:"https://osu.ppy.sh/community/contests",target:"_blank"},"osu!'s contest listing",-1),ro=h(". Submit your beatmap on the "),lo=["href"],co=h("! "),uo={key:4},mo=c("h5",null,"Results",-1),po=["href"],ho=["href"];Vn.render=function(t,e,s,n,o,i){const a=r("contest-header"),p=r("map-submission-form");return l(),d("div",null,[m(a,{name:t.contest.name,url:t.contest.url,creator:t.contest.creator},null,8,["name","url","creator"]),zn,t.contest.description?(l(),d("div",Bn,[c("div",{class:"small mt-2 bg-dark pt-3 pb-1 px-3 mb-2 rounded",innerHTML:t.$md.render(t.contest.description.trim())},null,8,Fn)])):w("",!0),"complete"!==t.contest.status?(l(),d("div",Gn,[Hn,c("b",null,u(t.contest.status),1),Kn])):w("",!0),t.contest.url?(l(),d("div",Yn,[c("a",{href:t.contest.url,target:"_blank"},"Read more about the contest here!",8,Qn)])):w("",!0),Wn,"complete"!==t.contest.status?(l(),d("div",Xn,[Zn,t.contest.osuContestListingUrl?(l(),d("div",oo,[io,ao,ro,c("a",{href:t.contest.osuContestListingUrl,target:"_blank"},"official contest page",8,lo),co])):(l(),d("div",to,[new Date(t.contest.contestEnd)<new Date?(l(),d("div",eo," This contest is no longer accepting new submissions. ")):(l(),d("div",so,[no,c("code",null,u(new Date(t.contest.contestEnd)),1),m(p,{class:"mt-2","contest-id":t.contest.id},null,8,["contest-id"])]))]))])):(l(),d("div",uo,[mo,c("div",null,[c("a",{href:t.contest.resultsUrl,target:"_blank"},"View contest results here!",8,po)]),c("div",null,[c("a",{href:"/contests/results?contest="+t.contest.id,target:"_blank"},"View Mappers' Guild judging scores here!",8,ho)])]))])};var go=a({name:"AddContest",data:()=>({contestName:""}),methods:{async addContest(t){const e=await this.$http.executePost("/contests/listing/create",{name:this.contestName},t);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Contest created",type:"info"}),this.$store.commit("addContest",e))}}});const fo={class:"container card card-body py-3 mb-2"};go.render=function(t,e,s,n,o,i){return l(),d("div",fo,[g(c("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.contestName=e),class:"form-control mb-2",type:"text",placeholder:"name"},null,512),[[f,t.contestName,void 0,{trim:!0}]]),c("button",{class:"btn w-100 btn-info",type:"button",onClick:e[1]||(e[1]=e=>t.addContest(e))}," Add new contest ")])};var yo={state:{contests:[],selectedContestId:null},mutations:{setContests(t,e){t.contests=e},addContest(t,e){t.contests.unshift(e),t.selectedContestId=e.id},setSelectedContestId(t,e){t.selectedContestId=e},updateContestStart(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestStart=e.contestStart)},updateContestEnd(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.contestEnd=e.contestEnd)},updateUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.url=e.url)},updateOsuContestListingUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.osuContestListingUrl=e.osuContestListingUrl)},updateResultsUrl(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.resultsUrl=e.resultsUrl)},updateDownload(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.download=e.download)},deleteSubmission(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&s.submissions.splice(t,1)}},addScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.screeners.push(e.screener)},deleteScreener(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.screeners.findIndex((t=>t.id==e.screenerId));-1!==t&&s.screeners.splice(t,1)}},addJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));null==s||s.judges.push(e.judge)},deleteJudge(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.judges.findIndex((t=>t.id==e.judgeId));-1!==t&&s.judges.splice(t,1)}},updateJudgingThreshold(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.judgingThreshold=e.judgingThreshold)},updateStatus(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.status=e.status)},updateMode(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.mode=e.mode)},updateContestCriterias(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.criterias=e.criterias)},updateName(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.name=e.name)},updateDescription(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.description=e.description)},updateSubmissions(t,e){const s=t.contests.find((t=>t.id==e.contestId));s&&(s.submissions=e.submissions)},updateAnonymousSubmissionName(t,e){const s=t.contests.find((t=>t.id==e.contestId));if(s){const t=s.submissions.findIndex((t=>t.id==e.submissionId));-1!==t&&(s.submissions[t].name=e.name)}}},getters:{selectedContest:t=>t.contests.find((e=>e.id===t.selectedContestId)),userSubmission:t=>{const e=t.contests.find((e=>e.id===t.selectedContestId));return e&&e.submissions&&e.submissions.length?e.submissions[0]:null}}},bo=a({name:"ContestPage",components:{ContestCard:E,AddContest:go,ContestInfo:Gs,LimitedContestInfo:Vn},data:()=>({displayMode:"activeContests",firstLoadComplete:!1,loadedSpecificContest:!1,limit:8,skip:0,total:0,moreContestsAvailable:!0}),computed:i(i(i({},M(["loggedInUser"])),M({contests:t=>t.contests.contests,selectedContestId:t=>t.contests.selectedContestId})),U(["selectedContest"])),watch:{async displayMode(){this.moreContestsAvailable=!0,this.skip=0,this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null),this.firstLoadComplete&&(this.$router.replace("/contests/listing"),await this.loadContests())}},beforeCreate(){this.$store.hasModule("contests")||this.$store.registerModule("contests",yo)},unmounted(){this.$store.hasModule("contests")&&this.$store.unregisterModule("contests")},async created(){await this.loadContests(),this.firstLoadComplete=!0},methods:{async loadContests(){const t=this.$route.query.contest;if(t&&!this.firstLoadComplete){this.$store.commit("setContests",null),this.$store.commit("setSelectedContestId",null);const e=await this.$http.initialRequest(`/contests/listing/searchContest/${t}`);this.$http.isError(e)||(e.creator.id==this.loggedInUser.id?this.displayMode="myContests":"complete"==e.status?this.displayMode="completedContests":this.displayMode,this.$store.commit("setContests",[e]),this.$store.commit("setSelectedContestId",t),this.loadedSpecificContest=!0)}else{let t;t=this.firstLoadComplete?await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`):await this.$http.initialRequest(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`),this.$http.isError(t)||(this.skip+=this.limit,this.$store.commit("setContests",t),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1)}},async loadMore(t){this.total=this.contests.length;const e=await this.$http.executeGet(`/contests/listing/relevantInfo?displayMode=${this.displayMode}&limit=${this.limit}&skip=${this.skip}`,t);this.$http.isError(e)||(this.skip+=this.limit,this.$store.commit("setContests",[...this.contests||[],...e]),this.$store.commit("setSelectedContestId",null),this.loadedSpecificContest=!1),this.total==this.contests.length&&(this.moreContestsAvailable=!1,this.$store.dispatch("updateToastMessages",{message:"No more contests to load!",type:"info"}))}}});const vo={class:"row"},Co={class:"col-sm-3"},wo={class:"container card card-body py-3 mb-2"},So=c("hr",null,null,-1),Io={key:1,class:"container card card-body py-3 mb-2 text-secondary"},ko={key:2},$o={key:3},jo={class:"col-sm-9 container card card-body"},xo={key:0},Mo=c("div",{class:"radial-divisor"},null,-1);bo.render=function(t,e,s,n,o,i){const a=r("add-contest"),u=r("contest-card"),h=r("limited-contest-info"),g=r("contest-info");return l(),d("div",null,[c("div",vo,[c("div",Co,[c("div",wo,[c("a",{href:"#",onClick:e[0]||(e[0]=j((e=>t.displayMode="activeContests"),["prevent"]))},[c("span",{class:$("activeContests"===t.displayMode?"border-bottom border-secondary":"")}," Active contests ",2)]),c("a",{href:"#",onClick:e[1]||(e[1]=j((e=>t.displayMode="completedContests"),["prevent"]))},[c("span",{class:$("completedContests"===t.displayMode?"border-bottom border-secondary":"")}," Completed contests ",2)]),c("a",{href:"#",onClick:e[2]||(e[2]=j((e=>t.displayMode="myContests"),["prevent"]))},[c("span",{class:$("myContests"===t.displayMode?"border-bottom border-secondary":"")}," My contests ",2)])]),So,"myContests"==t.displayMode&&t.contests&&!t.loadedSpecificContest?(l(),x(a,{key:0})):w("",!0),m(D,{name:"list",tag:"div",class:"row"},{default:p((()=>[(l(!0),d(I,null,k(t.contests,(t=>(l(),x(u,{key:t.id,class:"col-sm-12 my-2",contest:t,route:"listing"},null,8,["contest"])))),128))])),_:1}),t.contests?w("",!0):(l(),d("div",Io," Loading... ")),t.loadedSpecificContest?(l(),d("div",ko,[c("button",{class:"btn w-100 btn-info",type:"button",onClick:e[3]||(e[3]=e=>t.loadMore(e))}," Load other contests ")])):t.moreContestsAvailable&&t.contests&&t.contests.length>=t.limit?(l(),d("div",$o,[c("button",{class:"btn w-100 btn-info",type:"button",onClick:e[4]||(e[4]=e=>t.loadMore(e))}," Load more contests ")])):w("",!0)]),c("div",jo,[t.selectedContestId?"myContests"!==t.displayMode?(l(),x(h,{key:1,contest:t.selectedContest},null,8,["contest"])):t.selectedContest.creator.id==t.loggedInUser.id||3178418==t.loggedInUser.osuId?(l(),x(g,{key:2,contest:t.selectedContest},null,8,["contest"])):w("",!0):(l(),d("div",xo," No contest selected! Choose one on the left. "))])]),Mo])};export{bo as default};
